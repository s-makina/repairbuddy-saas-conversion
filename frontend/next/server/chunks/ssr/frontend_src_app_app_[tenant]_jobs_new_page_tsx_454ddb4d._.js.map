{"version":3,"sources":["../../../../../frontend/src/app/app/%5Btenant%5D/jobs/new/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Select from \"react-select\";\r\nimport AsyncSelect from \"react-select/async\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Input } from \"@/components/ui/Input\";\r\nimport { FormRow } from \"@/components/ui/FormRow\";\r\nimport { Modal } from \"@/components/ui/Modal\";\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport { notify } from \"@/lib/notify\";\r\nimport { getRepairBuddySettings } from \"@/lib/repairbuddy-settings\";\r\nimport { WizardShell } from \"@/components/repairbuddy/wizard/WizardShell\";\r\nimport { DevicesAdminEditor, type WizardAdditionalDeviceField } from \"@/components/repairbuddy/wizard/DevicesAdminEditor\";\r\nimport { CustomerCreateModal } from \"@/components/repairbuddy/wizard/CustomerCreateModal\";\r\nimport { ItemsStep } from \"@/components/repairbuddy/wizard/ItemsStep\";\r\n\r\ntype ApiDevice = {\r\n  id: number;\r\n  model: string;\r\n};\r\n\r\ntype ApiServiceType = {\r\n  id: number;\r\n  name: string;\r\n};\r\n\r\ntype ApiPartType = {\r\n  id: number;\r\n  name: string;\r\n};\r\n\r\ntype ApiPartBrand = {\r\n  id: number;\r\n  name: string;\r\n};\r\n\r\ntype ApiBranch = {\r\n  id: number;\r\n  name: string;\r\n  code?: string;\r\n  is_active?: boolean;\r\n};\r\n\r\ntype ApiJobStatus = {\r\n  id: number;\r\n  slug: string;\r\n  label: string;\r\n};\r\n\r\ntype ApiPaymentStatus = {\r\n  id: number;\r\n  slug: string;\r\n  label: string;\r\n};\r\n\r\ntype ApiClient = {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  phone: string | null;\r\n  company: string | null;\r\n};\r\n\r\ntype CustomerOption = {\r\n  value: number;\r\n  label: string;\r\n};\r\n\r\ntype DeviceOption = {\r\n  value: number;\r\n  label: string;\r\n};\r\n\r\ntype NewJobDeviceDraft = {\r\n  device_id: number | null;\r\n  option: DeviceOption | null;\r\n  serial: string;\r\n  pin: string;\r\n  notes: string;\r\n  extra_fields: Array<{ key: string; label: string; value_text: string }>;\r\n};\r\n\r\ntype ApiTechnician = {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n};\r\n\r\ntype TechnicianOption = {\r\n  value: number;\r\n  label: string;\r\n};\r\n\r\ntype ApiCustomerDevice = {\r\n  id: number;\r\n  customer_id: number;\r\n  label: string;\r\n  serial: string | null;\r\n};\r\n\r\ntype CustomerDeviceOption = {\r\n  value: number;\r\n  label: string;\r\n};\r\n\r\ntype JobDeviceDraft = {\r\n  customer_device_id: number;\r\n  option: CustomerDeviceOption;\r\n  serial: string;\r\n  notes: string;\r\n};\r\n\r\ntype ApiJob = {\r\n  id: number;\r\n};\r\n\r\ntype ExtraJobFieldVisibility = \"internal\" | \"customer\";\r\n\r\ntype ExtraJobFieldDraft = {\r\n  id: string;\r\n  datetime: string;\r\n  label: string;\r\n  data: string;\r\n  description: string;\r\n  visibility: ExtraJobFieldVisibility;\r\n  file: File | null;\r\n};\r\n\r\ntype PartDraft = {\r\n  id: number;\r\n  name: string;\r\n  code: string;\r\n  capacity: string;\r\n};\r\n\r\ntype PartOption = {\r\n  value: number;\r\n  label: string;\r\n  code: string;\r\n  capacity: string;\r\n};\r\n\r\ntype JobPartLineDraft = {\r\n  id: string;\r\n  part_id: number;\r\n  part: PartDraft;\r\n  device_id: number | null;\r\n  qty: string;\r\n  price: string;\r\n};\r\n\r\ntype ApiPart = {\r\n  id: number;\r\n  name: string;\r\n  manufacturing_code: string | null;\r\n  capacity: string | null;\r\n};\r\n\r\ntype ServiceDraft = {\r\n  id: number;\r\n  name: string;\r\n};\r\n\r\ntype ServiceOption = {\r\n  value: number;\r\n  label: string;\r\n};\r\n\r\ntype JobServiceLineDraft = {\r\n  id: string;\r\n  service_id: number;\r\n  service: ServiceDraft;\r\n  device_id: number | null;\r\n  qty: string;\r\n  price: string;\r\n};\r\n\r\ntype JobOtherItemLineDraft = {\r\n  id: string;\r\n  name: string;\r\n  qty: string;\r\n  price: string;\r\n};\r\n\r\ntype ApiService = {\r\n  id: number;\r\n  name: string;\r\n  base_price: { currency: string; amount_cents: number } | null;\r\n};\r\n\r\nexport default function NewJobPage() {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const params = useParams() as { tenant?: string; business?: string };\r\n  const tenantSlug = params.business ?? params.tenant;\r\n\r\n  const defaultCaseNumber = useMemo(() => {\r\n    const now = new Date();\r\n    const yyyy = String(now.getFullYear());\r\n    const mm = String(now.getMonth() + 1).padStart(2, \"0\");\r\n    const dd = String(now.getDate()).padStart(2, \"0\");\r\n    const hh = String(now.getHours()).padStart(2, \"0\");\r\n    const min = String(now.getMinutes()).padStart(2, \"0\");\r\n    const ss = String(now.getSeconds()).padStart(2, \"0\");\r\n    return `RB-${yyyy}${mm}${dd}-${hh}${min}${ss}`;\r\n  }, []);\r\n\r\n  const [loadingLookups, setLoadingLookups] = useState(true);\r\n  const [busy, setBusy] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [step, setStep] = useState<1 | 2 | 3>(1);\r\n\r\n  const [title, setTitle] = useState(\"\");\r\n  const [statusSlug, setStatusSlug] = useState<string>(\"\");\r\n  const [paymentStatusSlug, setPaymentStatusSlug] = useState<string>(\"\");\r\n  const [priority, setPriority] = useState<string>(\"\");\r\n  const [customerId, setCustomerId] = useState<number | null>(null);\r\n  const [customerOption, setCustomerOption] = useState<CustomerOption | null>(null);\r\n\r\n  const [customerMode, setCustomerMode] = useState<\"existing\" | \"new\">(\"existing\");\r\n  const [customerCreateName, setCustomerCreateName] = useState(\"\");\r\n  const [customerCreateEmail, setCustomerCreateEmail] = useState(\"\");\r\n  const [customerCreatePhone, setCustomerCreatePhone] = useState(\"\");\r\n  const [customerCreateCompany, setCustomerCreateCompany] = useState(\"\");\r\n  const [customerCreateAddressLine1, setCustomerCreateAddressLine1] = useState(\"\");\r\n  const [customerCreateAddressLine2, setCustomerCreateAddressLine2] = useState(\"\");\r\n  const [customerCreateAddressCity, setCustomerCreateAddressCity] = useState(\"\");\r\n  const [customerCreateAddressState, setCustomerCreateAddressState] = useState(\"\");\r\n  const [customerCreateAddressPostalCode, setCustomerCreateAddressPostalCode] = useState(\"\");\r\n  const [customerCreateAddressCountry, setCustomerCreateAddressCountry] = useState(\"\");\r\n\r\n  const [customerCreateOpen, setCustomerCreateOpen] = useState(false);\r\n  const [customerCreateError, setCustomerCreateError] = useState<string | null>(null);\r\n\r\n  const [jobDevicesAdmin, setJobDevicesAdmin] = useState<NewJobDeviceDraft[]>([\r\n    {\r\n      device_id: null,\r\n      option: null,\r\n      serial: \"\",\r\n      pin: \"\",\r\n      notes: \"\",\r\n      extra_fields: [],\r\n    },\r\n  ]);\r\n\r\n  const [caseNumber, setCaseNumber] = useState<string>(\"\");\r\n  const [pickupDate, setPickupDate] = useState<string>(\"\");\r\n  const [deliveryDate, setDeliveryDate] = useState<string>(\"\");\r\n  const [nextServiceDate, setNextServiceDate] = useState<string>(\"\");\r\n  const [caseDetail, setCaseDetail] = useState<string>(\"\");\r\n\r\n  const [orderNote, setOrderNote] = useState(\"\");\r\n  const [jobFile, setJobFile] = useState<File | null>(null);\r\n\r\n  const [assignedTechnicianIds, setAssignedTechnicianIds] = useState<number[]>([]);\r\n  const [jobDevices, setJobDevices] = useState<JobDeviceDraft[]>([]);\r\n  const [customerDevicesError, setCustomerDevicesError] = useState<string | null>(null);\r\n\r\n  const [extraFields, setExtraFields] = useState<ExtraJobFieldDraft[]>([]);\r\n  const [extraFieldModalOpen, setExtraFieldModalOpen] = useState(false);\r\n  const [extraFieldError, setExtraFieldError] = useState<string | null>(null);\r\n  const [extraFieldDatetime, setExtraFieldDatetime] = useState<string>(\"\");\r\n  const [extraFieldLabel, setExtraFieldLabel] = useState<string>(\"\");\r\n  const [extraFieldData, setExtraFieldData] = useState<string>(\"\");\r\n  const [extraFieldDescription, setExtraFieldDescription] = useState<string>(\"\");\r\n  const [extraFieldVisibility, setExtraFieldVisibility] = useState<ExtraJobFieldVisibility>(\"internal\");\r\n  const [extraFieldFile, setExtraFieldFile] = useState<File | null>(null);\r\n\r\n  const [partsCatalog, setPartsCatalog] = useState<PartDraft[]>([]);\r\n  const [servicesCatalog, setServicesCatalog] = useState<ServiceDraft[]>([]);\r\n  const [serviceTypesCatalog, setServiceTypesCatalog] = useState<ApiServiceType[]>([]);\r\n  const [partTypesCatalog, setPartTypesCatalog] = useState<ApiPartType[]>([]);\r\n  const [partBrandsCatalog, setPartBrandsCatalog] = useState<ApiPartBrand[]>([]);\r\n  const [createPartModalOpen, setCreatePartModalOpen] = useState(false);\r\n  const [createPartError, setCreatePartError] = useState<string | null>(null);\r\n  const [createPartName, setCreatePartName] = useState(\"\");\r\n  const [createPartPrice, setCreatePartPrice] = useState(\"\");\r\n  const [createPartBrandId, setCreatePartBrandId] = useState<string>(\"\");\r\n  const [createPartTypeId, setCreatePartTypeId] = useState<string>(\"\");\r\n  const [createPartManufacturingCode, setCreatePartManufacturingCode] = useState(\"\");\r\n  const [createPartStockCode, setCreatePartStockCode] = useState(\"\");\r\n\r\n  const [createServiceModalOpen, setCreateServiceModalOpen] = useState(false);\r\n  const [createServiceError, setCreateServiceError] = useState<string | null>(null);\r\n  const [createServiceName, setCreateServiceName] = useState(\"\");\r\n  const [createServiceTypeId, setCreateServiceTypeId] = useState<string>(\"\");\r\n  const [createServiceCode, setCreateServiceCode] = useState(\"\");\r\n  const [createServiceBasePrice, setCreateServiceBasePrice] = useState(\"\");\r\n\r\n  const [partPickerModalOpen, setPartPickerModalOpen] = useState(false);\r\n\r\n  const [servicePickerModalOpen, setServicePickerModalOpen] = useState(false);\r\n\r\n  const [partPickerPart, setPartPickerPart] = useState<PartOption | null>(null);\r\n  const [partPickerDevice, setPartPickerDevice] = useState<DeviceOption | null>(null);\r\n  const [partPickerQty, setPartPickerQty] = useState<string>(\"1\");\r\n  const [partPickerPrice, setPartPickerPrice] = useState<string>(\"\");\r\n  const [partPickerError, setPartPickerError] = useState<string | null>(null);\r\n\r\n  const [servicePickerService, setServicePickerService] = useState<ServiceOption | null>(null);\r\n  const [servicePickerDevice, setServicePickerDevice] = useState<DeviceOption | null>(null);\r\n  const [servicePickerQty, setServicePickerQty] = useState<string>(\"1\");\r\n  const [servicePickerPrice, setServicePickerPrice] = useState<string>(\"\");\r\n  const [servicePickerError, setServicePickerError] = useState<string | null>(null);\r\n\r\n  const [jobParts, setJobParts] = useState<JobPartLineDraft[]>([]);\r\n  const [jobServices, setJobServices] = useState<JobServiceLineDraft[]>([]);\r\n  const [jobOtherItems, setJobOtherItems] = useState<JobOtherItemLineDraft[]>([]);\r\n\r\n  const [statuses, setStatuses] = useState<ApiJobStatus[]>([]);\r\n  const [paymentStatuses, setPaymentStatuses] = useState<ApiPaymentStatus[]>([]);\r\n  const [clients, setClients] = useState<ApiClient[]>([]);\r\n\r\n  const [technicians, setTechnicians] = useState<ApiTechnician[]>([]);\r\n  const [customerDevices, setCustomerDevices] = useState<ApiCustomerDevice[]>([]);\r\n  const [nextServiceEnabled, setNextServiceEnabled] = useState(false);\r\n  const [additionalDeviceFields, setAdditionalDeviceFields] = useState<WizardAdditionalDeviceField[]>([]);\r\n  const [pinEnabled, setPinEnabled] = useState(false);\r\n  const [pinLabel, setPinLabel] = useState(\"Pin\");\r\n  const [devices, setDevices] = useState<ApiDevice[]>([]);\r\n\r\n  const [technicianCreateOpen, setTechnicianCreateOpen] = useState(false);\r\n  const [technicianCreateError, setTechnicianCreateError] = useState<string | null>(null);\r\n  const [technicianCreateName, setTechnicianCreateName] = useState(\"\");\r\n  const [technicianCreateEmail, setTechnicianCreateEmail] = useState(\"\");\r\n  const [technicianCreateBranchIds, setTechnicianCreateBranchIds] = useState<number[]>([]);\r\n  const [technicianOption, setTechnicianOption] = useState<TechnicianOption | null>(null);\r\n  const [technicianMode, setTechnicianMode] = useState<\"existing\" | \"new\">(\"existing\");\r\n\r\n  const [branchesCatalog, setBranchesCatalog] = useState<ApiBranch[]>([]);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function loadLookups() {\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n      setLoadingLookups(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const [statusesRes, paymentStatusesRes] = await Promise.all([\r\n          apiFetch<{ job_statuses: ApiJobStatus[] }>(`/api/${tenantSlug}/app/repairbuddy/job-statuses`),\r\n          apiFetch<{ payment_statuses: ApiPaymentStatus[] }>(`/api/${tenantSlug}/app/repairbuddy/payment-statuses`),\r\n        ]);\r\n\r\n        if (!alive) return;\r\n\r\n        const nextStatuses = Array.isArray(statusesRes.job_statuses) ? statusesRes.job_statuses : [];\r\n        const nextPayment = Array.isArray(paymentStatusesRes.payment_statuses) ? paymentStatusesRes.payment_statuses : [];\r\n\r\n        setStatuses(nextStatuses);\r\n        setPaymentStatuses(nextPayment);\r\n\r\n        try {\r\n          const devicesRes = await apiFetch<{ devices: ApiDevice[] }>(\r\n            `/api/${tenantSlug}/app/repairbuddy/devices?limit=10`,\r\n          );\r\n          if (!alive) return;\r\n          setDevices(Array.isArray(devicesRes.devices) ? devicesRes.devices : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setDevices([]);\r\n        }\r\n\r\n        try {\r\n          const techniciansRes = await apiFetch<{ users: ApiTechnician[] }>(\r\n            `/api/${tenantSlug}/app/technicians?per_page=100&sort=name&dir=asc`,\r\n          );\r\n          if (!alive) return;\r\n          setTechnicians(Array.isArray(techniciansRes.users) ? techniciansRes.users : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setTechnicians([]);\r\n        }\r\n\r\n        try {\r\n          const branchesRes = await apiFetch<{ branches: ApiBranch[] }>(`/api/${tenantSlug}/app/branches`);\r\n          if (!alive) return;\r\n          setBranchesCatalog(Array.isArray(branchesRes.branches) ? branchesRes.branches : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setBranchesCatalog([]);\r\n        }\r\n\r\n        try {\r\n          const settingsRes = await getRepairBuddySettings(String(tenantSlug));\r\n          if (!alive) return;\r\n          setNextServiceEnabled(Boolean(settingsRes.settings?.general?.nextServiceDateEnabled));\r\n\r\n          setPinEnabled(Boolean(settingsRes.settings?.devicesBrands?.enablePinCodeField));\r\n          const rawLabels = settingsRes.settings?.devicesBrands?.labels;\r\n          const nextPinLabel =\r\n            rawLabels && typeof rawLabels === \"object\" && typeof (rawLabels as { pin?: unknown }).pin === \"string\"\r\n              ? String((rawLabels as { pin?: unknown }).pin).trim()\r\n              : \"\";\r\n          setPinLabel(nextPinLabel !== \"\" ? nextPinLabel : \"Pin\");\r\n\r\n          const rawFields = settingsRes.settings?.devicesBrands?.additionalDeviceFields;\r\n          const mapped: WizardAdditionalDeviceField[] = (Array.isArray(rawFields) ? rawFields : [])\r\n            .map((f) => {\r\n              const key = typeof (f as { id?: unknown }).id === \"string\" ? String((f as { id?: unknown }).id) : \"\";\r\n              const label = typeof (f as { label?: unknown }).label === \"string\" ? String((f as { label?: unknown }).label) : \"\";\r\n              if (!key || !label) return null;\r\n              return { key, label };\r\n            })\r\n            .filter((x): x is WizardAdditionalDeviceField => Boolean(x));\r\n          setAdditionalDeviceFields(mapped);\r\n        } catch {\r\n          if (!alive) return;\r\n          setNextServiceEnabled(false);\r\n          setAdditionalDeviceFields([]);\r\n          setPinEnabled(false);\r\n          setPinLabel(\"Pin\");\r\n        }\r\n\r\n        const preferredStatus =\r\n          nextStatuses.find((s) => s.slug === \"new\")?.slug ?? nextStatuses.find((s) => s.slug === \"neworder\")?.slug;\r\n        setStatusSlug(preferredStatus ?? (nextStatuses.length > 0 ? nextStatuses[0].slug : \"\"));\r\n        setPaymentStatusSlug(\"\");\r\n\r\n        try {\r\n          const clientsRes = await apiFetch<{ clients: ApiClient[] }>(`/api/${tenantSlug}/app/clients?limit=200`);\r\n          if (!alive) return;\r\n          setClients(Array.isArray(clientsRes.clients) ? clientsRes.clients : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setClients([]);\r\n        }\r\n\r\n        try {\r\n          const partsRes = await apiFetch<{ parts: ApiPart[] }>(`/api/${tenantSlug}/app/repairbuddy/parts?limit=200`);\r\n          if (!alive) return;\r\n\r\n          const list = Array.isArray(partsRes.parts) ? partsRes.parts : [];\r\n          setPartsCatalog(\r\n            list.map((p) => ({\r\n              id: p.id,\r\n              name: p.name,\r\n              code: p.manufacturing_code ?? \"\",\r\n              capacity: p.capacity ?? \"\",\r\n            })),\r\n          );\r\n        } catch {\r\n          if (!alive) return;\r\n          setPartsCatalog([]);\r\n        }\r\n\r\n        try {\r\n          const typesRes = await apiFetch<{ part_types: ApiPartType[] }>(`/api/${tenantSlug}/app/repairbuddy/part-types?limit=200`);\r\n          if (!alive) return;\r\n          setPartTypesCatalog(Array.isArray(typesRes.part_types) ? typesRes.part_types : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setPartTypesCatalog([]);\r\n        }\r\n\r\n        try {\r\n          const brandsRes = await apiFetch<{ part_brands: ApiPartBrand[] }>(`/api/${tenantSlug}/app/repairbuddy/part-brands?limit=200`);\r\n          if (!alive) return;\r\n          setPartBrandsCatalog(Array.isArray(brandsRes.part_brands) ? brandsRes.part_brands : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setPartBrandsCatalog([]);\r\n        }\r\n\r\n        try {\r\n          const servicesRes = await apiFetch<{ services: ApiService[] }>(`/api/${tenantSlug}/app/repairbuddy/services?limit=200`);\r\n          if (!alive) return;\r\n          const list = Array.isArray(servicesRes.services) ? servicesRes.services : [];\r\n          setServicesCatalog(\r\n            list.map((s) => ({\r\n              id: s.id,\r\n              name: s.name,\r\n            })),\r\n          );\r\n        } catch {\r\n          if (!alive) return;\r\n          setServicesCatalog([]);\r\n        }\r\n\r\n        try {\r\n          const typesRes = await apiFetch<{ service_types: ApiServiceType[] }>(`/api/${tenantSlug}/app/repairbuddy/service-types?limit=200`);\r\n          if (!alive) return;\r\n          setServiceTypesCatalog(Array.isArray(typesRes.service_types) ? typesRes.service_types : []);\r\n        } catch {\r\n          if (!alive) return;\r\n          setServiceTypesCatalog([]);\r\n        }\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setError(e instanceof Error ? e.message : \"Failed to load form data.\");\r\n        setStatuses([]);\r\n        setPaymentStatuses([]);\r\n        setClients([]);\r\n        setTechnicians([]);\r\n        setBranchesCatalog([]);\r\n        setNextServiceEnabled(false);\r\n        setDevices([]);\r\n        setPartsCatalog([]);\r\n        setServicesCatalog([]);\r\n        setServiceTypesCatalog([]);\r\n        setPartTypesCatalog([]);\r\n        setPartBrandsCatalog([]);\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoadingLookups(false);\r\n      }\r\n    }\r\n\r\n    void loadLookups();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [tenantSlug]);\r\n\r\n  useEffect(() => {\r\n    setCaseNumber((prev) => (prev.trim() === \"\" ? defaultCaseNumber : prev));\r\n  }, [defaultCaseNumber]);\r\n\r\n  const loadDeviceOptions = async (inputValue: string): Promise<DeviceOption[]> => {\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return [];\r\n\r\n    try {\r\n      const qs = new URLSearchParams();\r\n      const q = inputValue.trim();\r\n      qs.set(\"limit\", q ? \"50\" : \"10\");\r\n      if (q) qs.set(\"q\", q);\r\n\r\n      const res = await apiFetch<{ devices: ApiDevice[] }>(\r\n        `/api/${tenantSlug}/app/repairbuddy/devices?${qs.toString()}`,\r\n      );\r\n      const list = Array.isArray(res.devices) ? res.devices : [];\r\n      return list.map((d) => ({\r\n        value: d.id,\r\n        label: d.model,\r\n      }));\r\n    } catch {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const sortedClients = useMemo(() => {\r\n    return clients.slice().sort((a, b) => `${a.name}`.localeCompare(`${b.name}`));\r\n  }, [clients]);\r\n\r\n  const clientOptions = useMemo<CustomerOption[]>(() => {\r\n    return sortedClients.map((c) => ({\r\n      value: c.id,\r\n      label: c.email ? `${c.name} (${c.email})` : c.name,\r\n    }));\r\n  }, [sortedClients]);\r\n\r\n  const deviceOptions = useMemo<DeviceOption[]>(() => {\r\n    return devices\r\n      .slice()\r\n      .sort((a, b) => `${a.model}`.localeCompare(`${b.model}`))\r\n      .map((d) => ({\r\n        value: d.id,\r\n        label: d.model,\r\n      }));\r\n  }, [devices]);\r\n\r\n  const selectedJobDeviceOptions = useMemo(() => {\r\n    const opts = jobDevicesAdmin\r\n      .map((d) => d.option)\r\n      .filter((x): x is DeviceOption => Boolean(x) && typeof x?.value === \"number\");\r\n\r\n    const uniq = new Map<number, DeviceOption>();\r\n    for (const o of opts) uniq.set(o.value, o);\r\n    return Array.from(uniq.values());\r\n  }, [jobDevicesAdmin]);\r\n\r\n  const partOptions = useMemo<PartOption[]>(() => {\r\n    return partsCatalog\r\n      .slice()\r\n      .sort((a, b) => `${a.name}`.localeCompare(`${b.name}`))\r\n      .map((p) => ({\r\n        value: p.id,\r\n        label: p.name,\r\n        code: p.code,\r\n        capacity: p.capacity,\r\n      }));\r\n  }, [partsCatalog]);\r\n\r\n  const serviceOptions = useMemo<ServiceOption[]>(() => {\r\n    return servicesCatalog\r\n      .slice()\r\n      .sort((a, b) => `${a.name}`.localeCompare(`${b.name}`))\r\n      .map((s) => ({\r\n        value: s.id,\r\n        label: s.name,\r\n      }));\r\n  }, [servicesCatalog]);\r\n\r\n  const sortedTechnicians = useMemo(() => {\r\n    return technicians.slice().sort((a, b) => `${a.name}`.localeCompare(`${b.name}`));\r\n  }, [technicians]);\r\n\r\n  const technicianOptions = useMemo<TechnicianOption[]>(() => {\r\n    return sortedTechnicians.map((t) => ({\r\n      value: t.id,\r\n      label: t.email ? `${t.name} (${t.email})` : t.name,\r\n    }));\r\n  }, [sortedTechnicians]);\r\n\r\n  const selectedTechnicianOptions = useMemo<TechnicianOption[]>(() => {\r\n    if (assignedTechnicianIds.length === 0) return [];\r\n    const set = new Set(assignedTechnicianIds);\r\n    return technicianOptions.filter((o) => set.has(o.value));\r\n  }, [assignedTechnicianIds, technicianOptions]);\r\n\r\n  const selectedTechnicianOption = useMemo<TechnicianOption | null>(() => {\r\n    if (technicianMode === \"new\") return technicianOption;\r\n    return selectedTechnicianOptions.length > 0 ? selectedTechnicianOptions[0] : null;\r\n  }, [selectedTechnicianOptions, technicianMode, technicianOption]);\r\n\r\n  const customerDeviceOptions = useMemo<CustomerDeviceOption[]>(() => {\r\n    return customerDevices\r\n      .slice()\r\n      .sort((a, b) => `${a.label}`.localeCompare(`${b.label}`))\r\n      .map((d) => ({\r\n        value: d.id,\r\n        label: d.serial ? `${d.label} (Serial: ${d.serial})` : d.label,\r\n      }));\r\n  }, [customerDevices]);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function loadCustomerDevices() {\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n      if (typeof customerId !== \"number\") {\r\n        setCustomerDevices([]);\r\n        setJobDevices([]);\r\n        setCustomerDevicesError(null);\r\n        return;\r\n      }\r\n\r\n      if (!auth.can(\"customer_devices.view\")) {\r\n        setCustomerDevices([]);\r\n        setJobDevices([]);\r\n        setCustomerDevicesError(\"You do not have permission to view customer devices.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await apiFetch<{ customer_devices: ApiCustomerDevice[] }>(\r\n          `/api/${tenantSlug}/app/repairbuddy/customer-devices?customer_id=${encodeURIComponent(String(customerId))}&limit=200`,\r\n        );\r\n        if (!alive) return;\r\n        setCustomerDevices(Array.isArray(res.customer_devices) ? res.customer_devices : []);\r\n        setCustomerDevicesError(null);\r\n      } catch {\r\n        if (!alive) return;\r\n        setCustomerDevices([]);\r\n        setCustomerDevicesError(\"Failed to load customer devices.\");\r\n      }\r\n    }\r\n\r\n    void loadCustomerDevices();\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [auth, customerId, tenantSlug]);\r\n\r\n  const loadCustomerOptions = async (inputValue: string): Promise<CustomerOption[]> => {\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return [];\r\n\r\n    try {\r\n      const qs = new URLSearchParams();\r\n      qs.set(\"limit\", \"50\");\r\n      const q = inputValue.trim();\r\n      if (q) qs.set(\"query\", q);\r\n\r\n      const res = await apiFetch<{ clients: ApiClient[] }>(`/api/${tenantSlug}/app/clients?${qs.toString()}`);\r\n      const list = Array.isArray(res.clients) ? res.clients : [];\r\n      return list.map((c) => ({\r\n        value: c.id,\r\n        label: c.email ? `${c.name} (${c.email})` : c.name,\r\n      }));\r\n    } catch {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  const loadCustomerDeviceOptions = async (inputValue: string): Promise<CustomerDeviceOption[]> => {\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return [];\r\n    if (typeof customerId !== \"number\") return [];\r\n    if (!auth.can(\"customer_devices.view\")) return [];\r\n\r\n    try {\r\n      const qs = new URLSearchParams();\r\n      qs.set(\"customer_id\", String(customerId));\r\n      qs.set(\"limit\", \"50\");\r\n      const q = inputValue.trim();\r\n      if (q) qs.set(\"q\", q);\r\n\r\n      const res = await apiFetch<{ customer_devices: ApiCustomerDevice[] }>(\r\n        `/api/${tenantSlug}/app/repairbuddy/customer-devices?${qs.toString()}`,\r\n      );\r\n\r\n      const list = Array.isArray(res.customer_devices) ? res.customer_devices : [];\r\n      return list\r\n        .slice()\r\n        .sort((a, b) => `${a.label}`.localeCompare(`${b.label}`))\r\n        .map((d) => ({\r\n          value: d.id,\r\n          label: d.serial ? `${d.label} (Serial: ${d.serial})` : d.label,\r\n        }));\r\n    } catch {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  async function onSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n    if (busy) return;\r\n\r\n    const native = e.nativeEvent as SubmitEvent;\r\n    const submitter = native?.submitter as HTMLElement | null | undefined;\r\n    const submitterId = submitter?.getAttribute?.(\"id\") ?? \"\";\r\n\r\n    if (step !== 3) {\r\n      return;\r\n    }\r\n\r\n    if (submitterId !== \"rb_job_save\") {\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    setBusy(true);\r\n\r\n    try {\r\n      const shouldCreateCustomer = customerMode === \"new\";\r\n\r\n      if (shouldCreateCustomer) {\r\n        if (customerCreateName.trim() === \"\") {\r\n          setError(\"Customer name is required.\");\r\n          return;\r\n        }\r\n        if (customerCreateEmail.trim() === \"\") {\r\n          setError(\"Customer email is required.\");\r\n          return;\r\n        }\r\n      }\r\n\r\n      const trimmedTitle = title.trim();\r\n\r\n      const payload: Record<string, unknown> = {\r\n        devices:\r\n          jobDevicesAdmin.length > 0\r\n            ? jobDevicesAdmin\r\n                .filter((d) => typeof d.device_id === \"number\")\r\n                .map((d) => ({\r\n                device_id: d.device_id as number,\r\n                serial: d.serial.trim() !== \"\" ? d.serial.trim() : null,\r\n                pin: d.pin.trim() !== \"\" ? d.pin.trim() : null,\r\n                notes: d.notes.trim() !== \"\" ? d.notes.trim() : null,\r\n                extra_fields:\r\n                  Array.isArray(d.extra_fields) && d.extra_fields.length > 0\r\n                    ? d.extra_fields\r\n                        .map((x) => ({\r\n                          key: typeof x?.key === \"string\" ? x.key : \"\",\r\n                          label: typeof x?.label === \"string\" ? x.label : \"\",\r\n                          value_text: typeof x?.value_text === \"string\" ? x.value_text : \"\",\r\n                        }))\r\n                        .filter((x) => x.key && x.label)\r\n                    : [],\r\n              }))\r\n            : [],\r\n        case_number: caseNumber.trim() !== \"\" ? caseNumber.trim() : null,\r\n        title: trimmedTitle !== \"\" ? trimmedTitle : null,\r\n        status_slug: statusSlug.trim() !== \"\" ? statusSlug : null,\r\n        payment_status_slug: paymentStatusSlug.trim() !== \"\" ? paymentStatusSlug : null,\r\n        priority: priority.trim() !== \"\" ? priority.trim() : null,\r\n        customer_id: !shouldCreateCustomer && typeof customerId === \"number\" ? customerId : null,\r\n        pickup_date: pickupDate.trim() !== \"\" ? pickupDate : null,\r\n        delivery_date: deliveryDate.trim() !== \"\" ? deliveryDate : null,\r\n        next_service_date: nextServiceEnabled && nextServiceDate.trim() !== \"\" ? nextServiceDate : null,\r\n        case_detail: caseDetail.trim() !== \"\" ? caseDetail.trim() : null,\r\n        assigned_technician_id: assignedTechnicianIds.length > 0 ? assignedTechnicianIds[0] : null,\r\n        assigned_technician_ids: assignedTechnicianIds,\r\n        job_devices:\r\n          jobDevices.length > 0\r\n            ? jobDevices.map((d) => ({\r\n                customer_device_id: d.customer_device_id,\r\n                serial: d.serial.trim() !== \"\" ? d.serial.trim() : null,\r\n                notes: d.notes.trim() !== \"\" ? d.notes.trim() : null,\r\n              }))\r\n            : [],\r\n\r\n        wc_order_note: orderNote.trim() !== \"\" ? orderNote.trim() : null,\r\n      };\r\n\r\n      if (shouldCreateCustomer) {\r\n        payload.customer_create = {\r\n          name: customerCreateName.trim(),\r\n          email: customerCreateEmail.trim(),\r\n          phone: customerCreatePhone.trim() !== \"\" ? customerCreatePhone.trim() : null,\r\n          company: customerCreateCompany.trim() !== \"\" ? customerCreateCompany.trim() : null,\r\n          address_line1: customerCreateAddressLine1.trim() !== \"\" ? customerCreateAddressLine1.trim() : null,\r\n          address_line2: customerCreateAddressLine2.trim() !== \"\" ? customerCreateAddressLine2.trim() : null,\r\n          address_city: customerCreateAddressCity.trim() !== \"\" ? customerCreateAddressCity.trim() : null,\r\n          address_state: customerCreateAddressState.trim() !== \"\" ? customerCreateAddressState.trim() : null,\r\n          address_postal_code: customerCreateAddressPostalCode.trim() !== \"\" ? customerCreateAddressPostalCode.trim() : null,\r\n          address_country: customerCreateAddressCountry.trim() !== \"\" ? customerCreateAddressCountry.trim() : null,\r\n        };\r\n      }\r\n\r\n      const form = new FormData();\r\n      form.append(\"payload_json\", JSON.stringify(payload));\r\n      if (jobFile) {\r\n        form.append(\"job_file\", jobFile);\r\n      }\r\n\r\n      const res = await apiFetch<{ job: ApiJob }>(`/api/${tenantSlug}/app/repairbuddy/jobs`, {\r\n        method: \"POST\",\r\n        body: form,\r\n      });\r\n\r\n      const nextId = res.job?.id;\r\n      if (typeof nextId === \"number\") {\r\n        try {\r\n          for (const line of jobServices) {\r\n            const qtyNum = Math.round(Number(line.qty));\r\n            const qty = Number.isFinite(qtyNum) && qtyNum > 0 ? qtyNum : 1;\r\n\r\n            const rawPrice = line.price.trim();\r\n            const priceNum = rawPrice.length > 0 ? Number(rawPrice) : NaN;\r\n            const unitPriceAmountCents = Number.isFinite(priceNum) ? Math.round(priceNum * 100) : undefined;\r\n\r\n            await apiFetch(`/api/${tenantSlug}/app/repairbuddy/jobs/${nextId}/items`, {\r\n              method: \"POST\",\r\n              body: {\r\n                item_type: \"service\",\r\n                ref_id: line.service_id,\r\n                qty,\r\n                ...(typeof unitPriceAmountCents === \"number\" ? { unit_price_amount_cents: unitPriceAmountCents } : {}),\r\n                meta: {\r\n                  ...(typeof line.device_id === \"number\" ? { device_id: line.device_id } : {}),\r\n                },\r\n              },\r\n            });\r\n          }\r\n\r\n          for (const line of jobOtherItems) {\r\n            const name = line.name.trim();\r\n            if (name === \"\") continue;\r\n\r\n            const qtyNum = Math.round(Number(line.qty));\r\n            const qty = Number.isFinite(qtyNum) && qtyNum > 0 ? qtyNum : 1;\r\n\r\n            const rawPrice = line.price.trim();\r\n            const priceNum = rawPrice.length > 0 ? Number(rawPrice) : NaN;\r\n            const unitPriceAmountCents = Number.isFinite(priceNum) ? Math.round(priceNum * 100) : undefined;\r\n            if (typeof unitPriceAmountCents !== \"number\") continue;\r\n\r\n            await apiFetch(`/api/${tenantSlug}/app/repairbuddy/jobs/${nextId}/items`, {\r\n              method: \"POST\",\r\n              body: {\r\n                item_type: unitPriceAmountCents < 0 ? \"discount\" : \"fee\",\r\n                name,\r\n                qty,\r\n                unit_price_amount_cents: unitPriceAmountCents,\r\n              },\r\n            });\r\n          }\r\n\r\n          for (const line of jobParts) {\r\n            const qtyNum = Math.round(Number(line.qty));\r\n            const qty = Number.isFinite(qtyNum) && qtyNum > 0 ? qtyNum : 1;\r\n\r\n            const rawPrice = line.price.trim();\r\n            const priceNum = rawPrice.length > 0 ? Number(rawPrice) : NaN;\r\n            const unitPriceAmountCents = Number.isFinite(priceNum) ? Math.round(priceNum * 100) : undefined;\r\n\r\n            await apiFetch(`/api/${tenantSlug}/app/repairbuddy/jobs/${nextId}/items`, {\r\n              method: \"POST\",\r\n              body: {\r\n                item_type: \"part\",\r\n                ref_id: line.part_id,\r\n                qty,\r\n                ...(typeof unitPriceAmountCents === \"number\" ? { unit_price_amount_cents: unitPriceAmountCents } : {}),\r\n                meta: {\r\n                  ...(typeof line.device_id === \"number\" ? { device_id: line.device_id } : {}),\r\n                },\r\n              },\r\n            });\r\n          }\r\n        } catch (err) {\r\n          notify.error(err instanceof ApiError ? err.message : \"Job created, but failed to attach items.\");\r\n        }\r\n\r\n        notify.success(\"Job created.\");\r\n        router.replace(`/app/${tenantSlug}/jobs/${nextId}`);\r\n      } else {\r\n        notify.success(\"Job created.\");\r\n        router.replace(`/app/${tenantSlug}/jobs`);\r\n      }\r\n    } catch (e) {\r\n      if (e instanceof ApiError) {\r\n        setError(e.message);\r\n      } else {\r\n        setError(\"Failed to create job.\");\r\n      }\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  const disabled = busy || loadingLookups;\r\n  const isStep1 = step === 1;\r\n  const isStep2 = step === 2;\r\n  const isStep3 = step === 3;\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"jobs.view\">\r\n      <div className=\"space-y-6\">\r\n        <PageHeader\r\n          title=\"New job\"\r\n          description=\"Create a new repair job.\"\r\n          actions={\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => {\r\n                  if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n                  router.push(`/app/${tenantSlug}/jobs`);\r\n                }}\r\n                disabled={busy}\r\n              >\r\n                Cancel\r\n              </Button>\r\n            </>\r\n          }\r\n        />\r\n\r\n        {error ? <div className=\"text-sm text-red-600\">{error}</div> : null}\r\n\r\n        <CustomerCreateModal\r\n          open={customerCreateOpen}\r\n          title=\"Add customer\"\r\n          className=\"max-w-3xl\"\r\n          disabled={disabled}\r\n          error={customerCreateError}\r\n          setError={setCustomerCreateError}\r\n          name={customerCreateName}\r\n          setName={setCustomerCreateName}\r\n          email={customerCreateEmail}\r\n          setEmail={setCustomerCreateEmail}\r\n          phone={customerCreatePhone}\r\n          setPhone={setCustomerCreatePhone}\r\n          company={customerCreateCompany}\r\n          setCompany={setCustomerCreateCompany}\r\n          addressLine1={customerCreateAddressLine1}\r\n          setAddressLine1={setCustomerCreateAddressLine1}\r\n          addressLine2={customerCreateAddressLine2}\r\n          setAddressLine2={setCustomerCreateAddressLine2}\r\n          addressCity={customerCreateAddressCity}\r\n          setAddressCity={setCustomerCreateAddressCity}\r\n          addressState={customerCreateAddressState}\r\n          setAddressState={setCustomerCreateAddressState}\r\n          addressPostalCode={customerCreateAddressPostalCode}\r\n          setAddressPostalCode={setCustomerCreateAddressPostalCode}\r\n          addressCountry={customerCreateAddressCountry}\r\n          setAddressCountry={setCustomerCreateAddressCountry}\r\n          onClose={() => setCustomerCreateOpen(false)}\r\n          onSave={({ name, email, phone, company, address_line1, address_line2, address_city, address_state, address_postal_code, address_country }) => {\r\n            setCustomerMode(\"new\");\r\n            setCustomerId(null);\r\n            setCustomerOption({ value: -1, label: `${name} (${email})` });\r\n            setJobDevices([]);\r\n\r\n            setCustomerCreatePhone(phone);\r\n            setCustomerCreateCompany(company);\r\n            setCustomerCreateAddressLine1(address_line1 ?? \"\");\r\n            setCustomerCreateAddressLine2(address_line2 ?? \"\");\r\n            setCustomerCreateAddressCity(address_city ?? \"\");\r\n            setCustomerCreateAddressState(address_state ?? \"\");\r\n            setCustomerCreateAddressPostalCode(address_postal_code ?? \"\");\r\n            setCustomerCreateAddressCountry(address_country ?? \"\");\r\n\r\n            setCustomerCreateOpen(false);\r\n          }}\r\n        />\r\n\r\n      <Modal\r\n        open={servicePickerModalOpen}\r\n        title=\"Add service\"\r\n        onClose={() => {\r\n          setServicePickerError(null);\r\n          setServicePickerModalOpen(false);\r\n        }}\r\n        className=\"max-w-3xl\"\r\n        footer={\r\n          <div className=\"flex items-center justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setServicePickerError(null);\r\n                setServicePickerModalOpen(false);\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"primary\"\r\n              disabled={disabled}\r\n              onClick={() => {\r\n                if (!servicePickerService) {\r\n                  setServicePickerError(\"Please select a service.\");\r\n                  return;\r\n                }\r\n                if (!servicePickerDevice) {\r\n                  setServicePickerError(\"Please select a device.\");\r\n                  return;\r\n                }\r\n\r\n                const service = servicesCatalog.find((s) => s.id === servicePickerService.value);\r\n                if (!service) {\r\n                  setServicePickerError(\"Selected service not found.\");\r\n                  return;\r\n                }\r\n\r\n                const crypto = globalThis.crypto as unknown as { randomUUID?: () => string };\r\n                const id =\r\n                  typeof crypto?.randomUUID === \"function\"\r\n                    ? crypto.randomUUID()\r\n                    : `js-${Date.now()}-${Math.random().toString(16).slice(2)}`;\r\n\r\n                setJobServices((prev) => [\r\n                  {\r\n                    id,\r\n                    service_id: service.id,\r\n                    service,\r\n                    device_id: servicePickerDevice.value,\r\n                    qty: servicePickerQty,\r\n                    price: servicePickerPrice,\r\n                  },\r\n                  ...prev,\r\n                ]);\r\n\r\n                setServicePickerError(null);\r\n                setServicePickerQty(\"1\");\r\n                setServicePickerPrice(\"\");\r\n                setServicePickerModalOpen(false);\r\n              }}\r\n            >\r\n              Add\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {servicePickerError ? <div className=\"text-sm text-red-600\">{servicePickerError}</div> : null}\r\n\r\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Service</div>\r\n              <Select\r\n                instanceId=\"job_service_select\"\r\n                inputId=\"job_service_select\"\r\n                isSearchable\r\n                isClearable\r\n                options={serviceOptions}\r\n                value={servicePickerService}\r\n                onChange={(opt) => {\r\n                  setServicePickerError(null);\r\n                  setServicePickerService((opt as ServiceOption | null) ?? null);\r\n                }}\r\n                isDisabled={disabled}\r\n                placeholder={serviceOptions.length > 0 ? \"Search services...\" : \"No services yet\"}\r\n                classNamePrefix=\"rb-select\"\r\n                styles={{\r\n                  control: (base) => ({\r\n                    ...base,\r\n                    borderRadius: \"var(--rb-radius-sm)\",\r\n                    borderColor: \"#d4d4d8\",\r\n                    minHeight: 40,\r\n                    boxShadow: \"none\",\r\n                  }),\r\n                  menu: (base) => ({\r\n                    ...base,\r\n                    zIndex: 50,\r\n                  }),\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Device</div>\r\n              <Select\r\n                instanceId=\"job_service_device_select\"\r\n                inputId=\"job_service_device_select\"\r\n                isSearchable\r\n                isClearable\r\n                options={selectedJobDeviceOptions}\r\n                value={servicePickerDevice}\r\n                onChange={(opt) => {\r\n                  setServicePickerError(null);\r\n                  setServicePickerDevice((opt as DeviceOption | null) ?? null);\r\n                }}\r\n                isDisabled={disabled}\r\n                placeholder={selectedJobDeviceOptions.length > 0 ? \"Select device...\" : \"No devices selected\"}\r\n                classNamePrefix=\"rb-select\"\r\n                styles={{\r\n                  control: (base) => ({\r\n                    ...base,\r\n                    borderRadius: \"var(--rb-radius-sm)\",\r\n                    borderColor: \"#d4d4d8\",\r\n                    minHeight: 40,\r\n                    boxShadow: \"none\",\r\n                  }),\r\n                  menu: (base) => ({\r\n                    ...base,\r\n                    zIndex: 50,\r\n                  }),\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Qty</div>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                value={servicePickerQty}\r\n                disabled={disabled}\r\n                onChange={(e) => {\r\n                  setServicePickerError(null);\r\n                  setServicePickerQty(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Price (optional override)</div>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                step=\"0.01\"\r\n                value={servicePickerPrice}\r\n                disabled={disabled}\r\n                onChange={(e) => {\r\n                  setServicePickerError(null);\r\n                  setServicePickerPrice(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal\r\n        open={partPickerModalOpen}\r\n        title=\"Add part\"\r\n        onClose={() => {\r\n          setPartPickerError(null);\r\n          setPartPickerModalOpen(false);\r\n        }}\r\n        className=\"max-w-3xl\"\r\n        footer={\r\n          <div className=\"flex items-center justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setPartPickerError(null);\r\n                setPartPickerModalOpen(false);\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"primary\"\r\n              disabled={disabled}\r\n              onClick={() => {\r\n                if (!partPickerPart) {\r\n                  setPartPickerError(\"Please select a part.\");\r\n                  return;\r\n                }\r\n                if (!partPickerDevice) {\r\n                  setPartPickerError(\"Please select a device.\");\r\n                  return;\r\n                }\r\n\r\n                const part = partsCatalog.find((p) => p.id === partPickerPart.value);\r\n                if (!part) {\r\n                  setPartPickerError(\"Selected part not found.\");\r\n                  return;\r\n                }\r\n\r\n                const crypto = globalThis.crypto as unknown as { randomUUID?: () => string };\r\n                const id =\r\n                  typeof crypto?.randomUUID === \"function\"\r\n                    ? crypto.randomUUID()\r\n                    : `jp-${Date.now()}-${Math.random().toString(16).slice(2)}`;\r\n\r\n                setJobParts((prev) => [\r\n                  {\r\n                    id,\r\n                    part_id: part.id,\r\n                    part,\r\n                    device_id: partPickerDevice.value,\r\n                    qty: partPickerQty,\r\n                    price: partPickerPrice,\r\n                  },\r\n                  ...prev,\r\n                ]);\r\n\r\n                setPartPickerError(null);\r\n                setPartPickerQty(\"1\");\r\n                setPartPickerPrice(\"\");\r\n                setPartPickerModalOpen(false);\r\n              }}\r\n            >\r\n              Add\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {partPickerError ? <div className=\"text-sm text-red-600\">{partPickerError}</div> : null}\r\n\r\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Select part</div>\r\n              <Select\r\n                instanceId=\"job_part_select\"\r\n                isSearchable\r\n                isClearable\r\n                options={partOptions}\r\n                value={partPickerPart}\r\n                onChange={(opt) => {\r\n                  setPartPickerError(null);\r\n                  setPartPickerPart((opt as PartOption | null) ?? null);\r\n                }}\r\n                isDisabled={disabled}\r\n                placeholder={partOptions.length > 0 ? \"Search parts...\" : \"No parts yet\"}\r\n                classNamePrefix=\"rb-select\"\r\n                styles={{\r\n                  control: (base) => ({\r\n                    ...base,\r\n                    borderRadius: \"var(--rb-radius-sm)\",\r\n                    borderColor: \"#d4d4d8\",\r\n                    minHeight: 40,\r\n                    boxShadow: \"none\",\r\n                  }),\r\n                  menu: (base) => ({\r\n                    ...base,\r\n                    zIndex: 50,\r\n                  }),\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Device</div>\r\n              <Select\r\n                instanceId=\"job_part_device\"\r\n                isSearchable\r\n                isClearable\r\n                options={selectedJobDeviceOptions}\r\n                value={partPickerDevice}\r\n                onChange={(opt) => {\r\n                  setPartPickerError(null);\r\n                  setPartPickerDevice((opt as DeviceOption | null) ?? null);\r\n                }}\r\n                isDisabled={disabled}\r\n                placeholder={selectedJobDeviceOptions.length > 0 ? \"Select device...\" : \"No devices selected\"}\r\n                classNamePrefix=\"rb-select\"\r\n                styles={{\r\n                  control: (base) => ({\r\n                    ...base,\r\n                    borderRadius: \"var(--rb-radius-sm)\",\r\n                    borderColor: \"#d4d4d8\",\r\n                    minHeight: 40,\r\n                    boxShadow: \"none\",\r\n                  }),\r\n                  menu: (base) => ({\r\n                    ...base,\r\n                    zIndex: 50,\r\n                  }),\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Qty</div>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                value={partPickerQty}\r\n                disabled={disabled}\r\n                onChange={(e) => {\r\n                  setPartPickerError(null);\r\n                  setPartPickerQty(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Price</div>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                step=\"0.01\"\r\n                value={partPickerPrice}\r\n                disabled={disabled}\r\n                onChange={(e) => {\r\n                  setPartPickerError(null);\r\n                  setPartPickerPrice(e.target.value);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal\r\n        open={createServiceModalOpen}\r\n        title=\"Create new service\"\r\n        onClose={() => {\r\n          setCreateServiceError(null);\r\n          setCreateServiceModalOpen(false);\r\n        }}\r\n        className=\"max-w-2xl\"\r\n        footer={\r\n          <div className=\"flex items-center justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setCreateServiceError(null);\r\n                setCreateServiceModalOpen(false);\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"primary\"\r\n              disabled={disabled}\r\n              onClick={async () => {\r\n                if (busy) return;\r\n                if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n                const name = createServiceName.trim();\r\n                if (name.length === 0) {\r\n                  setCreateServiceError(\"Service name is required.\");\r\n                  return;\r\n                }\r\n\r\n                const rawPrice = createServiceBasePrice.trim();\r\n                const priceNum = rawPrice.length > 0 ? Number(rawPrice) : NaN;\r\n                const basePriceAmountCents = Number.isFinite(priceNum) ? Math.round(priceNum * 100) : null;\r\n                if (rawPrice.length > 0 && basePriceAmountCents === null) {\r\n                  setCreateServiceError(\"Base price is invalid.\");\r\n                  return;\r\n                }\r\n\r\n                const typeIdTrimmed = createServiceTypeId.trim();\r\n                const typeIdNum = typeIdTrimmed !== \"\" ? Number(typeIdTrimmed) : NaN;\r\n                const serviceTypeId = Number.isFinite(typeIdNum) && typeIdNum > 0 ? Math.trunc(typeIdNum) : null;\r\n                if (serviceTypesCatalog.length > 0 && serviceTypeId === null) {\r\n                  setCreateServiceError(\"Service type is required.\");\r\n                  return;\r\n                }\r\n\r\n                const code = createServiceCode.trim();\r\n\r\n                setBusy(true);\r\n                setCreateServiceError(null);\r\n\r\n                try {\r\n                  const res = await apiFetch<{ service: { id: number; name: string } }>(`/api/${tenantSlug}/app/repairbuddy/services`, {\r\n                    method: \"POST\",\r\n                    body: {\r\n                      name,\r\n                      ...(typeof serviceTypeId === \"number\" ? { service_type_id: serviceTypeId } : {}),\r\n                      ...(code !== \"\" ? { service_code: code } : {}),\r\n                      ...(typeof basePriceAmountCents === \"number\" ? { base_price_amount_cents: basePriceAmountCents } : {}),\r\n                    },\r\n                  });\r\n\r\n                  const service = res.service;\r\n                  if (!service || typeof service.id !== \"number\") {\r\n                    setCreateServiceError(\"Failed to create service.\");\r\n                    return;\r\n                  }\r\n\r\n                  const draft: ServiceDraft = { id: service.id, name: service.name };\r\n                  setServicesCatalog((prev) => [draft, ...prev.filter((s) => s.id !== draft.id)]);\r\n                  setServicePickerService({ value: draft.id, label: draft.name });\r\n\r\n                  setCreateServiceName(\"\");\r\n                  setCreateServiceTypeId(\"\");\r\n                  setCreateServiceCode(\"\");\r\n                  setCreateServiceBasePrice(\"\");\r\n                  setCreateServiceModalOpen(false);\r\n                  notify.success(\"Service created.\");\r\n                } catch (err) {\r\n                  if (err instanceof ApiError) {\r\n                    setCreateServiceError(err.message);\r\n                  } else {\r\n                    setCreateServiceError(\"Failed to create service.\");\r\n                  }\r\n                } finally {\r\n                  setBusy(false);\r\n                }\r\n              }}\r\n            >\r\n              Save\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {createServiceError ? <div className=\"text-sm text-red-600\">{createServiceError}</div> : null}\r\n\r\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Service name</div>\r\n              <Input value={createServiceName} onChange={(e) => setCreateServiceName(e.target.value)} disabled={disabled} />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Select type</div>\r\n              <select\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                value={createServiceTypeId}\r\n                onChange={(e) => {\r\n                  setCreateServiceError(null);\r\n                  setCreateServiceTypeId(e.target.value);\r\n                }}\r\n                disabled={disabled || serviceTypesCatalog.length === 0}\r\n              >\r\n                <option value=\"\">{serviceTypesCatalog.length > 0 ? \"Select type...\" : \"No types available\"}</option>\r\n                {serviceTypesCatalog.map((t) => (\r\n                  <option key={t.id} value={String(t.id)}>\r\n                    {t.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Service code</div>\r\n              <Input\r\n                value={createServiceCode}\r\n                onChange={(e) => {\r\n                  setCreateServiceError(null);\r\n                  setCreateServiceCode(e.target.value);\r\n                }}\r\n                disabled={disabled}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Service price</div>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                step=\"0.01\"\r\n                value={createServiceBasePrice}\r\n                onChange={(e) => {\r\n                  setCreateServiceError(null);\r\n                  setCreateServiceBasePrice(e.target.value);\r\n                }}\r\n                disabled={disabled}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal\r\n        open={createPartModalOpen}\r\n        title=\"Create new part\"\r\n        onClose={() => {\r\n          setCreatePartError(null);\r\n          setCreatePartModalOpen(false);\r\n        }}\r\n        className=\"max-w-2xl\"\r\n        footer={\r\n          <div className=\"flex items-center justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setCreatePartError(null);\r\n                setCreatePartModalOpen(false);\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"primary\"\r\n              disabled={disabled}\r\n              onClick={async () => {\r\n                if (busy) return;\r\n                if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n                const name = createPartName.trim();\r\n                if (name.length === 0) {\r\n                  setCreatePartError(\"Part name is required.\");\r\n                  return;\r\n                }\r\n\r\n                const rawPrice = createPartPrice.trim();\r\n                if (rawPrice.length === 0) {\r\n                  setCreatePartError(\"Part price is required.\");\r\n                  return;\r\n                }\r\n\r\n                const priceNum = Number(rawPrice);\r\n                const priceAmountCents = Number.isFinite(priceNum) ? Math.round(priceNum * 100) : null;\r\n                if (priceAmountCents === null || priceAmountCents < 0) {\r\n                  setCreatePartError(\"Part price is invalid.\");\r\n                  return;\r\n                }\r\n\r\n                const typeIdTrimmed = createPartTypeId.trim();\r\n                const typeIdNum = typeIdTrimmed !== \"\" ? Number(typeIdTrimmed) : NaN;\r\n                const partTypeId = Number.isFinite(typeIdNum) && typeIdNum > 0 ? Math.trunc(typeIdNum) : null;\r\n                if (partTypesCatalog.length > 0 && partTypeId === null) {\r\n                  setCreatePartError(\"Part type is required.\");\r\n                  return;\r\n                }\r\n\r\n                const brandIdTrimmed = createPartBrandId.trim();\r\n                const brandIdNum = brandIdTrimmed !== \"\" ? Number(brandIdTrimmed) : NaN;\r\n                const partBrandId = Number.isFinite(brandIdNum) && brandIdNum > 0 ? Math.trunc(brandIdNum) : null;\r\n                if (partBrandsCatalog.length > 0 && partBrandId === null) {\r\n                  setCreatePartError(\"Part brand is required.\");\r\n                  return;\r\n                }\r\n\r\n                const manufacturingCode = createPartManufacturingCode.trim();\r\n                const stockCode = createPartStockCode.trim();\r\n\r\n                setBusy(true);\r\n                setCreatePartError(null);\r\n\r\n                try {\r\n                  const res = await apiFetch<{\r\n                    part: {\r\n                      id: number;\r\n                      name: string;\r\n                      manufacturing_code: string | null;\r\n                      stock_code: string | null;\r\n                      capacity: string | null;\r\n                    };\r\n                  }>(\r\n                    `/api/${tenantSlug}/app/repairbuddy/parts`,\r\n                    {\r\n                      method: \"POST\",\r\n                      body: {\r\n                        name,\r\n                        price_amount_cents: priceAmountCents,\r\n                        ...(typeof partTypeId === \"number\" ? { part_type_id: partTypeId } : {}),\r\n                        ...(typeof partBrandId === \"number\" ? { part_brand_id: partBrandId } : {}),\r\n                        manufacturing_code: manufacturingCode !== \"\" ? manufacturingCode : null,\r\n                        stock_code: stockCode !== \"\" ? stockCode : null,\r\n                      },\r\n                    },\r\n                  );\r\n\r\n                  const part = res.part;\r\n                  if (!part || typeof part.id !== \"number\") {\r\n                    setCreatePartError(\"Failed to create part.\");\r\n                    return;\r\n                  }\r\n\r\n                  const draft: PartDraft = {\r\n                    id: part.id,\r\n                    name: part.name,\r\n                    code: part.manufacturing_code ?? \"\",\r\n                    capacity: part.capacity ?? \"\",\r\n                  };\r\n\r\n                  setPartsCatalog((prev) => [draft, ...prev.filter((p) => p.id !== draft.id)]);\r\n                  setPartPickerPart({ value: draft.id, label: draft.name, code: draft.code, capacity: draft.capacity });\r\n\r\n                  setCreatePartName(\"\");\r\n                  setCreatePartPrice(\"\");\r\n                  setCreatePartBrandId(\"\");\r\n                  setCreatePartTypeId(\"\");\r\n                  setCreatePartManufacturingCode(\"\");\r\n                  setCreatePartStockCode(\"\");\r\n                  setCreatePartModalOpen(false);\r\n                  notify.success(\"Part created.\");\r\n                } catch (err) {\r\n                  if (err instanceof ApiError) {\r\n                    setCreatePartError(err.message);\r\n                  } else {\r\n                    setCreatePartError(\"Failed to create part.\");\r\n                  }\r\n                } finally {\r\n                  setBusy(false);\r\n                }\r\n              }}\r\n            >\r\n              Save\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {createPartError ? <div className=\"text-sm text-red-600\">{createPartError}</div> : null}\r\n\r\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Part name</div>\r\n              <Input\r\n                value={createPartName}\r\n                onChange={(e) => {\r\n                  setCreatePartError(null);\r\n                  setCreatePartName(e.target.value);\r\n                }}\r\n                disabled={disabled}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Part price</div>\r\n              <Input\r\n                type=\"number\"\r\n                min={0}\r\n                step=\"0.01\"\r\n                value={createPartPrice}\r\n                onChange={(e) => {\r\n                  setCreatePartError(null);\r\n                  setCreatePartPrice(e.target.value);\r\n                }}\r\n                disabled={disabled}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Select brand</div>\r\n              <select\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                value={createPartBrandId}\r\n                onChange={(e) => {\r\n                  setCreatePartError(null);\r\n                  setCreatePartBrandId(e.target.value);\r\n                }}\r\n                disabled={disabled || partBrandsCatalog.length === 0}\r\n              >\r\n                <option value=\"\">{partBrandsCatalog.length > 0 ? \"Select brand...\" : \"No brands available\"}</option>\r\n                {partBrandsCatalog.map((b) => (\r\n                  <option key={b.id} value={String(b.id)}>\r\n                    {b.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Select type</div>\r\n              <select\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                value={createPartTypeId}\r\n                onChange={(e) => {\r\n                  setCreatePartError(null);\r\n                  setCreatePartTypeId(e.target.value);\r\n                }}\r\n                disabled={disabled || partTypesCatalog.length === 0}\r\n              >\r\n                <option value=\"\">{partTypesCatalog.length > 0 ? \"Select type...\" : \"No types available\"}</option>\r\n                {partTypesCatalog.map((t) => (\r\n                  <option key={t.id} value={String(t.id)}>\r\n                    {t.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Manufacturing code</div>\r\n              <Input\r\n                value={createPartManufacturingCode}\r\n                onChange={(e) => {\r\n                  setCreatePartError(null);\r\n                  setCreatePartManufacturingCode(e.target.value);\r\n                }}\r\n                disabled={disabled}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Stock code</div>\r\n              <Input\r\n                value={createPartStockCode}\r\n                onChange={(e) => {\r\n                  setCreatePartError(null);\r\n                  setCreatePartStockCode(e.target.value);\r\n                }}\r\n                disabled={disabled}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n      <Modal\r\n        open={extraFieldModalOpen}\r\n        title=\"Add extra field\"\r\n        onClose={() => {\r\n          setExtraFieldError(null);\r\n          setExtraFieldModalOpen(false);\r\n        }}\r\n        className=\"max-w-3xl\"\r\n        footer={\r\n          <div className=\"flex items-center justify-end gap-2\">\r\n            <Button\r\n              type=\"button\"\r\n              variant=\"outline\"\r\n              onClick={() => {\r\n                setExtraFieldError(null);\r\n                setExtraFieldModalOpen(false);\r\n              }}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                const label = extraFieldLabel.trim();\r\n                const data = extraFieldData.trim();\r\n                if (label === \"\") {\r\n                  setExtraFieldError(\"Field label is required.\");\r\n                  return;\r\n                }\r\n                if (data === \"\") {\r\n                  setExtraFieldError(\"Field data is required.\");\r\n                  return;\r\n                }\r\n\r\n                setExtraFields((prev) => [\r\n                  ...prev,\r\n                  {\r\n                    id: String(Date.now()),\r\n                    datetime: extraFieldDatetime,\r\n                    label,\r\n                    data,\r\n                    description: extraFieldDescription.trim(),\r\n                    visibility: extraFieldVisibility,\r\n                    file: extraFieldFile,\r\n                  },\r\n                ]);\r\n\r\n                setExtraFieldError(null);\r\n                setExtraFieldDatetime(\"\");\r\n                setExtraFieldLabel(\"\");\r\n                setExtraFieldData(\"\");\r\n                setExtraFieldDescription(\"\");\r\n                setExtraFieldVisibility(\"internal\");\r\n                setExtraFieldFile(null);\r\n                setExtraFieldModalOpen(false);\r\n              }}\r\n            >\r\n              Save\r\n            </Button>\r\n          </div>\r\n        }\r\n      >\r\n        <div className=\"space-y-4\">\r\n          {extraFieldError ? <div className=\"text-sm text-red-600\">{extraFieldError}</div> : null}\r\n\r\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Date & time</div>\r\n              <Input type=\"datetime-local\" value={extraFieldDatetime} onChange={(e) => setExtraFieldDatetime(e.target.value)} />\r\n            </div>\r\n\r\n            <div>\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Visibility</div>\r\n              <select\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                value={extraFieldVisibility}\r\n                onChange={(e) => setExtraFieldVisibility(e.target.value as ExtraJobFieldVisibility)}\r\n              >\r\n                <option value=\"internal\">Internal</option>\r\n                <option value=\"customer\">Customer</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Field label</div>\r\n              <Input value={extraFieldLabel} onChange={(e) => setExtraFieldLabel(e.target.value)} />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Field data</div>\r\n              <textarea\r\n                value={extraFieldData}\r\n                onChange={(e) => setExtraFieldData(e.target.value)}\r\n                rows={3}\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">Field description</div>\r\n              <textarea\r\n                value={extraFieldDescription}\r\n                onChange={(e) => setExtraFieldDescription(e.target.value)}\r\n                rows={2}\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"md:col-span-2\">\r\n              <div className=\"mb-1 text-xs text-zinc-600\">File</div>\r\n              <Input\r\n                type=\"file\"\r\n                onChange={(e) => {\r\n                  const next = e.target.files?.[0] ?? null;\r\n                  setExtraFieldFile(next);\r\n                }}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Modal>\r\n\r\n        <Modal\r\n          open={technicianCreateOpen}\r\n          title=\"Add technician\"\r\n          onClose={() => {\r\n            setTechnicianCreateError(null);\r\n            setTechnicianCreateOpen(false);\r\n          }}\r\n          footer={\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              <Button\r\n                type=\"button\"\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  setTechnicianCreateError(null);\r\n                  setTechnicianCreateOpen(false);\r\n                }}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                type=\"button\"\r\n                disabled={disabled}\r\n                onClick={async () => {\r\n                  if (busy) return;\r\n                  if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n                  const name = technicianCreateName.trim();\r\n                  const email = technicianCreateEmail.trim();\r\n                  if (name === \"\") {\r\n                    setTechnicianCreateError(\"Technician name is required.\");\r\n                    return;\r\n                  }\r\n                  if (email === \"\") {\r\n                    setTechnicianCreateError(\"Technician email is required.\");\r\n                    return;\r\n                  }\r\n\r\n                  const branchIds = technicianCreateBranchIds.filter((x) => typeof x === \"number\" && x > 0);\r\n                  if (branchIds.length === 0) {\r\n                    setTechnicianCreateError(\"Please select at least one shop.\");\r\n                    return;\r\n                  }\r\n\r\n                  setBusy(true);\r\n                  setTechnicianCreateError(null);\r\n\r\n                  try {\r\n                    const res = await apiFetch<{ user: ApiTechnician }>(`/api/${tenantSlug}/app/technicians`, {\r\n                      method: \"POST\",\r\n                      body: {\r\n                        name,\r\n                        email,\r\n                        branch_ids: branchIds,\r\n                      },\r\n                    });\r\n\r\n                    const user = res.user;\r\n                    if (!user || typeof user.id !== \"number\") {\r\n                      setTechnicianCreateError(\"Failed to create technician.\");\r\n                      return;\r\n                    }\r\n\r\n                    setTechnicians((prev) => [user, ...prev.filter((t) => t.id !== user.id)]);\r\n\r\n                    setTechnicianMode(\"existing\");\r\n                    setTechnicianOption(null);\r\n                    setAssignedTechnicianIds([user.id]);\r\n\r\n                    setTechnicianCreateName(\"\");\r\n                    setTechnicianCreateEmail(\"\");\r\n                    setTechnicianCreateBranchIds([]);\r\n                    setTechnicianCreateOpen(false);\r\n                    notify.success(\"Technician created.\");\r\n                  } catch (err) {\r\n                    if (err instanceof ApiError) {\r\n                      setTechnicianCreateError(err.message);\r\n                    } else {\r\n                      setTechnicianCreateError(\"Failed to create technician.\");\r\n                    }\r\n                  } finally {\r\n                    setBusy(false);\r\n                  }\r\n                }}\r\n              >\r\n                Save\r\n              </Button>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"space-y-4\">\r\n            {technicianCreateError ? <div className=\"text-sm text-red-600\">{technicianCreateError}</div> : null}\r\n            <div className=\"grid grid-cols-1 gap-3 md:grid-cols-2\">\r\n              <div>\r\n                <div className=\"mb-1 text-xs text-zinc-600\">Name</div>\r\n                <Input\r\n                  value={technicianCreateName}\r\n                  onChange={(e) => {\r\n                    setTechnicianCreateError(null);\r\n                    setTechnicianCreateName(e.target.value);\r\n                  }}\r\n                  disabled={disabled}\r\n                />\r\n              </div>\r\n              <div>\r\n                <div className=\"mb-1 text-xs text-zinc-600\">Email</div>\r\n                <Input\r\n                  value={technicianCreateEmail}\r\n                  onChange={(e) => {\r\n                    setTechnicianCreateError(null);\r\n                    setTechnicianCreateEmail(e.target.value);\r\n                  }}\r\n                  disabled={disabled}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"md:col-span-2\">\r\n                <div className=\"mb-1 text-xs text-zinc-600\">Shops</div>\r\n                <select\r\n                  multiple\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                  value={technicianCreateBranchIds.map(String)}\r\n                  onChange={(e) => {\r\n                    setTechnicianCreateError(null);\r\n                    const values = Array.from(e.target.selectedOptions)\r\n                      .map((o) => Number(o.value))\r\n                      .filter((n) => Number.isFinite(n) && n > 0)\r\n                      .map((n) => Math.trunc(n));\r\n                    setTechnicianCreateBranchIds(values);\r\n                  }}\r\n                  disabled={disabled || branchesCatalog.length === 0}\r\n                >\r\n                  {branchesCatalog.length === 0 ? <option value=\"\">No shops available</option> : null}\r\n                  {branchesCatalog.map((b) => (\r\n                    <option key={b.id} value={String(b.id)}>\r\n                      {b.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <div className=\"mt-1 text-xs text-zinc-500\">Hold Ctrl / Cmd to select multiple shops.</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Modal>\r\n\r\n        <form id=\"rb_job_new_form\" className=\"space-y-6\" onSubmit={onSubmit}>\r\n          <WizardShell\r\n            steps={[\r\n              {\r\n                id: 1,\r\n                navTitle: \"Customer & devices\",\r\n                navDescription: \"Case, dates, customer, technician, description, devices.\",\r\n                pageTitle: \"Customer & devices\",\r\n                pageDescription: \"Enter the customer, technician, description and devices.\",\r\n                footerTitle: \"Customer & devices\",\r\n              },\r\n              {\r\n                id: 2,\r\n                navTitle: \"Job Items and services\",\r\n                navDescription: \"Attach extra fields and files for this job.\",\r\n                pageTitle: \"Job Items and services\",\r\n                pageDescription: \"Attach extra fields and files for the job.\",\r\n                footerTitle: \"Job Items and services\",\r\n              },\r\n              {\r\n                id: 3,\r\n                navTitle: \"Order information\",\r\n                navDescription: \"Status, payment, priority, notes.\",\r\n                pageTitle: \"Order information\",\r\n                pageDescription: \"Finalize status, payment, priority and notes.\",\r\n                footerTitle: \"Order information\",\r\n              },\r\n            ]}\r\n            step={step}\r\n            disabled={disabled}\r\n            sidebarTitle=\"Job steps\"\r\n            sidebarDescription=\"Complete the steps to create the job.\"\r\n            sidebarAriaLabel=\"Job steps\"\r\n            onStepChange={(next) => {\r\n              setError(null);\r\n              setStep(next as 1 | 2 | 3);\r\n            }}\r\n            footerRight={\r\n              <Button id=\"rb_job_save\" variant=\"primary\" disabled={disabled} type=\"submit\">\r\n                {busy ? \"Saving...\" : \"Save\"}\r\n              </Button>\r\n            }\r\n          >\r\n                {isStep1 ? (\r\n                  <div className=\"space-y-5\">\r\n                    <FormRow label=\"Case number\" fieldId=\"job_case_number\">\r\n                      <Input\r\n                        id=\"job_case_number\"\r\n                        value={caseNumber}\r\n                        onChange={(e) => setCaseNumber(e.target.value)}\r\n                        disabled={disabled}\r\n                      />\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Dates\" fieldId=\"job_dates\">\r\n                      <div\r\n                        className={\r\n                          nextServiceEnabled\r\n                            ? \"grid grid-cols-1 gap-3 md:grid-cols-3\"\r\n                            : \"grid grid-cols-1 gap-3 md:grid-cols-2\"\r\n                        }\r\n                      >\r\n                        <div>\r\n                          <div className=\"mb-1 text-xs text-zinc-600\">Pickup date</div>\r\n                          <Input\r\n                            id=\"job_pickup_date\"\r\n                            type=\"date\"\r\n                            value={pickupDate}\r\n                            onChange={(e) => setPickupDate(e.target.value)}\r\n                            disabled={disabled}\r\n                          />\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"mb-1 text-xs text-zinc-600\">Delivery date</div>\r\n                          <Input\r\n                            id=\"job_delivery_date\"\r\n                            type=\"date\"\r\n                            value={deliveryDate}\r\n                            onChange={(e) => setDeliveryDate(e.target.value)}\r\n                            disabled={disabled}\r\n                          />\r\n                        </div>\r\n\r\n                        {nextServiceEnabled ? (\r\n                          <div>\r\n                            <div className=\"mb-1 text-xs text-zinc-600\">Next service date</div>\r\n                            <Input\r\n                              id=\"job_next_service_date\"\r\n                              type=\"date\"\r\n                              value={nextServiceDate}\r\n                              onChange={(e) => setNextServiceDate(e.target.value)}\r\n                              disabled={disabled}\r\n                            />\r\n                          </div>\r\n                        ) : null}\r\n                      </div>\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Customer\" fieldId=\"job_customer\">\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-start gap-2\">\r\n                          <div className=\"min-w-0 flex-1\">\r\n                            <AsyncSelect\r\n                              inputId=\"job_customer\"\r\n                              instanceId=\"job_customer\"\r\n                              cacheOptions\r\n                              defaultOptions={clientOptions}\r\n                              loadOptions={loadCustomerOptions}\r\n                              isClearable\r\n                              isSearchable\r\n                              value={customerOption}\r\n                              onChange={(opt) => {\r\n                                const next = (opt as CustomerOption | null) ?? null;\r\n                                setCustomerMode(\"existing\");\r\n                                setCustomerOption(next);\r\n                                setCustomerId(typeof next?.value === \"number\" && next.value > 0 ? next.value : null);\r\n                                setJobDevices([]);\r\n                              }}\r\n                              isDisabled={disabled}\r\n                              placeholder=\"Search customers...\"\r\n                              classNamePrefix=\"rb-select\"\r\n                              styles={{\r\n                                control: (base) => ({\r\n                                  ...base,\r\n                                  borderRadius: \"var(--rb-radius-sm)\",\r\n                                  borderColor: \"#d4d4d8\",\r\n                                  minHeight: 40,\r\n                                  boxShadow: \"none\",\r\n                                }),\r\n                                menu: (base) => ({\r\n                                  ...base,\r\n                                  zIndex: 50,\r\n                                }),\r\n                              }}\r\n                            />\r\n                          </div>\r\n\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"primary\"\r\n                            size=\"md\"\r\n                            className=\"w-10 px-0\"\r\n                            disabled={disabled}\r\n                            onClick={() => {\r\n                              setCustomerCreateError(null);\r\n                              setCustomerCreateOpen(true);\r\n                            }}\r\n                          >\r\n                            +\r\n                          </Button>\r\n                        </div>\r\n\r\n                        {customerMode === \"new\" ? (\r\n                          <div className=\"text-xs text-zinc-600\">This job will create a new customer.</div>\r\n                        ) : null}\r\n                      </div>\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Technician\" fieldId=\"job_technician\">\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"flex items-start gap-2\">\r\n                          <div className=\"min-w-0 flex-1\">\r\n                            <Select\r\n                              inputId=\"job_technician\"\r\n                              instanceId=\"job_technician\"\r\n                              isSearchable\r\n                              isClearable\r\n                              options={technicianOptions}\r\n                              value={selectedTechnicianOption}\r\n                              onChange={(opt) => {\r\n                                const next = (opt as TechnicianOption | null) ?? null;\r\n                                setTechnicianMode(\"existing\");\r\n                                setTechnicianOption(null);\r\n                                setAssignedTechnicianIds(typeof next?.value === \"number\" && next.value > 0 ? [next.value] : []);\r\n                              }}\r\n                              isDisabled={disabled || technicianOptions.length === 0}\r\n                              placeholder={technicianOptions.length > 0 ? \"Select technician...\" : \"No technicians available\"}\r\n                              classNamePrefix=\"rb-select\"\r\n                              styles={{\r\n                                control: (base) => ({\r\n                                  ...base,\r\n                                  borderRadius: \"var(--rb-radius-sm)\",\r\n                                  borderColor: \"#d4d4d8\",\r\n                                  minHeight: 40,\r\n                                  boxShadow: \"none\",\r\n                                }),\r\n                                menu: (base) => ({\r\n                                  ...base,\r\n                                  zIndex: 50,\r\n                                }),\r\n                              }}\r\n                            />\r\n                          </div>\r\n\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"primary\"\r\n                            size=\"md\"\r\n                            className=\"w-10 px-0\"\r\n                            disabled={disabled}\r\n                            onClick={() => {\r\n                              setTechnicianCreateError(null);\r\n                              setTechnicianCreateOpen(true);\r\n                            }}\r\n                          >\r\n                            +\r\n                          </Button>\r\n                        </div>\r\n\r\n                        {technicianMode === \"new\" ? (\r\n                          <div className=\"text-xs text-zinc-600\">This job will create a new technician.</div>\r\n                        ) : null}\r\n                      </div>\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Job description\" fieldId=\"job_case_detail\">\r\n                      <textarea\r\n                        id=\"job_case_detail\"\r\n                        value={caseDetail}\r\n                        onChange={(e) => setCaseDetail(e.target.value)}\r\n                        disabled={disabled}\r\n                        rows={4}\r\n                        placeholder=\"Enter job description.\"\r\n                        className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                      />\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Add devices to this job\" fieldId=\"job_devices_admin\">\r\n                      <DevicesAdminEditor\r\n                        value={jobDevicesAdmin}\r\n                        onChange={(next) => setJobDevicesAdmin(next)}\r\n                        deviceOptions={deviceOptions}\r\n                        loadDeviceOptions={loadDeviceOptions}\r\n                        disabled={disabled}\r\n                        idPrefix=\"job\"\r\n                        showPin={pinEnabled}\r\n                        serialLabel=\"Device ID / IMEI\"\r\n                        pinLabel={pinLabel}\r\n                        notesLabel=\"Device note\"\r\n                        addButtonLabel=\"Add device\"\r\n                        additionalFields={additionalDeviceFields}\r\n                        createEmptyRow={() => ({\r\n                          device_id: null,\r\n                          option: null,\r\n                          serial: \"\",\r\n                          pin: \"\",\r\n                          notes: \"\",\r\n                          extra_fields: additionalDeviceFields.map((f) => ({ key: f.key, label: f.label, value_text: \"\" })),\r\n                        })}\r\n                      />\r\n                    </FormRow>\r\n                  </div>\r\n                ) : isStep2 ? (\r\n                  <div className=\"space-y-5\">\r\n                    <ItemsStep\r\n                      deviceContextOptions={selectedJobDeviceOptions.map((d) => ({ value: d.value, label: d.label }))}\r\n                      disabled={disabled}\r\n                      services={jobServices}\r\n                      setServices={setJobServices}\r\n                      parts={jobParts}\r\n                      setParts={setJobParts}\r\n                      otherItems={jobOtherItems}\r\n                      setOtherItems={setJobOtherItems}\r\n                      onAddService={() => {\r\n                        setServicePickerError(null);\r\n                        if (!servicePickerDevice && selectedJobDeviceOptions.length > 0) {\r\n                          setServicePickerDevice(selectedJobDeviceOptions[0]);\r\n                        }\r\n                        setServicePickerModalOpen(true);\r\n                      }}\r\n                      serviceAddLabel=\"Add service\"\r\n                      onCreateService={() => {\r\n                        setCreateServiceError(null);\r\n                        setCreateServiceModalOpen(true);\r\n                      }}\r\n                      serviceCreateLabel=\"Create new service\"\r\n                      onAddPart={() => {\r\n                        setPartPickerError(null);\r\n                        if (!partPickerDevice && selectedJobDeviceOptions.length > 0) {\r\n                          setPartPickerDevice(selectedJobDeviceOptions[0]);\r\n                        }\r\n                        setPartPickerModalOpen(true);\r\n                      }}\r\n                      partAddLabel=\"Add part\"\r\n                      onCreatePart={() => {\r\n                        setCreatePartError(null);\r\n                        setCreatePartModalOpen(true);\r\n                      }}\r\n                      partCreateLabel=\"Create new part\"\r\n                      otherItemsTitle=\"Other items\"\r\n                      otherItemsDescription=\"Add custom line items like rent, used cable, etc.\"\r\n                      otherItemsAddLabel=\"Add other item\"\r\n                      createOtherItem={() => ({\r\n                        id:\r\n                          typeof crypto !== \"undefined\" && \"randomUUID\" in crypto\r\n                            ? crypto.randomUUID()\r\n                            : `oi-${Date.now()}-${Math.random().toString(16).slice(2)}`,\r\n                        name: \"\",\r\n                        qty: \"1\",\r\n                        price: \"\",\r\n                      })}\r\n                      otherItemNamePlaceholder=\"e.g. Rent, Used cable\"\r\n                      otherItemPricePlaceholder=\"e.g. 10.00 (use -10.00 for discount)\"\r\n                    />\r\n\r\n                    <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3\">\r\n                      <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                        <div>\r\n                          <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Attach Fields & Files</div>\r\n                          <div className=\"mt-1 text-xs text-zinc-600\">Add extra fields and optionally attach a file.</div>\r\n                        </div>\r\n                        <div>\r\n                          <Button\r\n                            type=\"button\"\r\n                            variant=\"outline\"\r\n                            size=\"sm\"\r\n                            disabled={disabled}\r\n                            onClick={() => {\r\n                              setExtraFieldError(null);\r\n                              setExtraFieldModalOpen(true);\r\n                            }}\r\n                          >\r\n                            Add extra field\r\n                          </Button>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {extraFields.length > 0 ? (\r\n                      <div className=\"space-y-2\">\r\n                        {extraFields.map((f) => (\r\n                          <div\r\n                            key={f.id}\r\n                            className=\"flex flex-col gap-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between\"\r\n                          >\r\n                            <div className=\"min-w-0\">\r\n                              <div className=\"truncate text-sm font-semibold text-[var(--rb-text)]\">{f.label}</div>\r\n                              <div className=\"mt-1 text-xs text-zinc-600\">\r\n                                {f.datetime ? f.datetime : \"\"}\r\n                                <span className=\"mx-2\"></span>\r\n                                {f.visibility}\r\n                                {f.file ? (\r\n                                  <>\r\n                                    <span className=\"mx-2\"></span>\r\n                                    {f.file.name}\r\n                                  </>\r\n                                ) : null}\r\n                              </div>\r\n                              {f.description ? <div className=\"mt-1 text-xs text-zinc-500\">{f.description}</div> : null}\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Button\r\n                                type=\"button\"\r\n                                variant=\"outline\"\r\n                                size=\"sm\"\r\n                                disabled={disabled}\r\n                                onClick={() => {\r\n                                  setExtraFields((prev) => prev.filter((x) => x.id !== f.id));\r\n                                }}\r\n                              >\r\n                                Remove\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        ))}\r\n                      </div>\r\n                    ) : (\r\n                      <div className=\"text-sm text-zinc-600\">No extra fields added yet.</div>\r\n                    )}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-5\">\r\n                    <FormRow label=\"Status\" fieldId=\"job_status\" required>\r\n                      <select\r\n                        id=\"job_status\"\r\n                        className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                        value={statusSlug}\r\n                        onChange={(e) => setStatusSlug(e.target.value)}\r\n                        disabled={disabled || statuses.length === 0}\r\n                      >\r\n                        {statuses.map((s) => (\r\n                          <option key={s.slug} value={s.slug}>\r\n                            {s.label}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Payment status\" fieldId=\"job_payment\">\r\n                      <select\r\n                        id=\"job_payment\"\r\n                        className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                        value={paymentStatusSlug}\r\n                        onChange={(e) => setPaymentStatusSlug(e.target.value)}\r\n                        disabled={disabled || paymentStatuses.length === 0}\r\n                      >\r\n                        <option value=\"\"></option>\r\n                        {paymentStatuses.map((s) => (\r\n                          <option key={s.slug} value={s.slug}>\r\n                            {s.label}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Priority\" fieldId=\"job_priority\">\r\n                      <select\r\n                        id=\"job_priority\"\r\n                        className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                        value={priority}\r\n                        onChange={(e) => setPriority(e.target.value)}\r\n                        disabled={disabled}\r\n                      >\r\n                        <option value=\"\"></option>\r\n                        <option value=\"low\">Low</option>\r\n                        <option value=\"normal\">Normal</option>\r\n                        <option value=\"high\">High</option>\r\n                        <option value=\"urgent\">Urgent</option>\r\n                      </select>\r\n                    </FormRow>\r\n\r\n                    <FormRow label=\"Order notes\" fieldId=\"job_order_note\" description=\"Visible to customer.\">\r\n                      <textarea\r\n                        id=\"job_order_note\"\r\n                        value={orderNote}\r\n                        onChange={(e) => setOrderNote(e.target.value)}\r\n                        disabled={disabled}\r\n                        rows={3}\r\n                        placeholder=\"Add a note for the customer...\"\r\n                        className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                      />\r\n                    </FormRow>\r\n                  </div>\r\n                )}\r\n          </WizardShell>\r\n        </form>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}