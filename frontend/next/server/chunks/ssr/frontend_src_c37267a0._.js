module.exports=[4148,a=>{"use strict";function b(a){let b=a.amountCents,c=a.currency?.toUpperCase()??null;if("number"!=typeof b||!Number.isFinite(b))return a.fallback??"—";let d=b/100;if(!c||3!==c.length)return`${d.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:c,minimumFractionDigits:2,maximumFractionDigits:2}).format(d)}catch{return`${c} ${d.toFixed(2)}`}}a.s(["formatMoney",()=>b])},54804,a=>{"use strict";var b=a.i(57850),c=a.i(648),d=a.i(75385),e=a.i(4600);function f({title:a,description:f,actions:g,filters:h,loading:i,loadingFallback:j,error:k,empty:l,emptyTitle:m="Nothing here yet",emptyDescription:n="No items to display.",children:o}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(c.PageHeader,{title:a,description:f,actions:g}),h?(0,b.jsx)(e.Card,{className:"shadow-none",children:(0,b.jsx)(e.CardContent,{className:"pt-5",children:h})}):null,k?(0,b.jsx)(d.Alert,{variant:"danger",title:"Something went wrong",children:k}):null,i?j??(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading..."}):null,i||k||!l?null:(0,b.jsx)(e.Card,{className:"shadow-none",children:(0,b.jsxs)(e.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:m}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:n})]})}),i||k||l?null:o]})}a.s(["ListPageShell",()=>f])},45004,a=>{"use strict";function b(a){return new Date(a).toISOString()}let c=[{id:"client_001",name:"Alex Johnson",email:"alex@example.com",phone:"+1 555 0101",created_at:b("2026-01-05T10:00:00Z")},{id:"client_002",name:"Sam Rivera",email:"sam@example.com",phone:"+1 555 0102",created_at:b("2026-01-06T09:00:00Z")},{id:"client_003",name:"Taylor Chen",email:"taylor@example.com",phone:"+1 555 0103",created_at:b("2026-01-08T15:30:00Z")},{id:"client_004",name:"Jordan Patel",email:"jordan@example.com",phone:"+1 555 0104",created_at:b("2026-01-10T11:45:00Z")},{id:"client_005",name:"Morgan Lee",email:"morgan@example.com",phone:"+1 555 0105",created_at:b("2026-01-12T08:20:00Z")}],d=[{id:"pay_001",job_id:"job_001",status:"paid",method:"card",amount:{currency:"USD",amount_cents:7500},created_at:b("2026-01-26T14:12:00Z")},{id:"pay_002",job_id:"job_002",status:"pending",method:"cash",amount:{currency:"USD",amount_cents:4500},created_at:b("2026-01-27T10:20:00Z")},{id:"pay_003",job_id:"job_004",status:"paid",method:"bank_transfer",amount:{currency:"USD",amount_cents:12e3},created_at:b("2026-01-22T16:40:00Z")}],e=[{id:"exp_001",job_id:"job_001",category_id:"expcat_001",label:"Replacement battery",amount:{currency:"USD",amount_cents:3200},created_at:b("2026-01-26T09:05:00Z")},{id:"exp_002",job_id:"job_002",category_id:"expcat_002",label:"Courier",amount:{currency:"USD",amount_cents:1500},created_at:b("2026-01-27T11:10:00Z")}],f=[{id:"timelog_001",job_id:"job_001",user_label:"Technician A",minutes:90,rate:{currency:"USD",amount_cents:9e3},created_at:b("2026-01-26T12:10:00Z")},{id:"timelog_002",job_id:"job_002",user_label:"Technician B",minutes:45,rate:{currency:"USD",amount_cents:8e3},created_at:b("2026-01-27T12:30:00Z")}],g=[{id:"att_001",job_id:"job_001",filename:"intake-photo.jpg",mime_type:"image/jpeg",size_bytes:245312,url:"/mock/uploads/intake-photo.jpg",created_at:b("2026-01-26T08:58:00Z")},{id:"att_002",job_id:"job_003",filename:"screen-video.mp4",mime_type:"video/mp4",size_bytes:1245e3,url:"/mock/uploads/screen-video.mp4",created_at:b("2026-01-23T09:15:00Z")}],h=[{id:"msg_001",job_id:"job_001",author:"customer",body:"Hi, I dropped it off today. Please let me know the ETA.",created_at:b("2026-01-26T09:00:00Z"),attachments:[g[0]]},{id:"msg_002",job_id:"job_001",author:"staff",body:"Thanks! We are running diagnostics now.",created_at:b("2026-01-26T09:20:00Z")},{id:"msg_003",job_id:"job_003",author:"customer",body:"The screen flickers randomly. It’s worse at night.",created_at:b("2026-01-23T09:10:00Z"),attachments:[g[1]]}],i=(a,b)=>b.map(b=>({...b,job_id:a})),j=[{id:"estimate_001",job_id:"job_001",client_id:"client_001",status:"approved",lines:[{id:"estline_001",label:"Battery replacement",qty:1,unit_price:{currency:"USD",amount_cents:7500}}],created_at:b("2026-01-26T10:00:00Z"),updated_at:b("2026-01-26T10:30:00Z")},{id:"estimate_002",job_id:"job_003",client_id:"client_003",status:"pending",lines:[{id:"estline_002",label:"Display diagnostics",qty:1,unit_price:{currency:"USD",amount_cents:2500}},{id:"estline_003",label:"Potential screen replacement",qty:1,unit_price:{currency:"USD",amount_cents:19900}}],created_at:b("2026-01-23T10:20:00Z"),updated_at:b("2026-01-23T10:20:00Z")},{id:"estimate_003",job_id:"job_005",client_id:"client_005",status:"rejected",lines:[{id:"estline_004",label:"Thermal paste + cleaning",qty:1,unit_price:{currency:"USD",amount_cents:6900}}],created_at:b("2026-01-19T12:00:00Z"),updated_at:b("2026-01-20T09:00:00Z")}],k=[{id:"job_001",case_number:"RB-10421",title:"Dell XPS 13 battery replacement",status:"in_process",client_id:"client_001",customer_device_ids:["custdev_001"],estimate_id:"estimate_001",payment_ids:["pay_001"],created_at:b("2026-01-26T08:50:00Z"),updated_at:b("2026-01-26T14:15:00Z"),timeline:i("job_001",[{id:"tl_001",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-26T08:50:00Z"),meta:{status:"new_quote"}},{id:"tl_002",type:"estimate",title:"Estimate created",created_at:b("2026-01-26T10:00:00Z"),meta:{estimate_id:"estimate_001"}},{id:"tl_003",type:"status_changed",title:"Status set to In Process",created_at:b("2026-01-26T10:45:00Z"),meta:{status:"in_process"}},{id:"tl_004",type:"payment",title:"Payment received",created_at:b("2026-01-26T14:12:00Z"),meta:{payment_id:"pay_001"}}]),messages:h.filter(a=>"job_001"===a.job_id),attachments:g.filter(a=>"job_001"===a.job_id)},{id:"job_002",case_number:"RB-10418",title:"Lenovo ThinkPad intermittent boot",status:"new_quote",client_id:"client_002",customer_device_ids:["custdev_002"],estimate_id:null,payment_ids:["pay_002"],created_at:b("2026-01-25T11:30:00Z"),updated_at:b("2026-01-27T10:22:00Z"),timeline:i("job_002",[{id:"tl_005",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-25T11:30:00Z"),meta:{status:"new_quote"}}]),messages:[],attachments:[]},{id:"job_003",case_number:"RB-10412",title:"Galaxy S23 screen flicker",status:"new_quote",client_id:"client_003",customer_device_ids:["custdev_003"],estimate_id:"estimate_002",payment_ids:[],created_at:b("2026-01-23T09:00:00Z"),updated_at:b("2026-01-23T10:20:00Z"),timeline:i("job_003",[{id:"tl_006",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-23T09:00:00Z"),meta:{status:"new_quote"}},{id:"tl_007",type:"estimate",title:"Estimate created",created_at:b("2026-01-23T10:20:00Z"),meta:{estimate_id:"estimate_002"}}]),messages:h.filter(a=>"job_003"===a.job_id),attachments:g.filter(a=>"job_003"===a.job_id)},{id:"job_004",case_number:"RB-10399",title:"iPad charging port repair",status:"delivered",client_id:"client_004",customer_device_ids:["custdev_004"],estimate_id:null,payment_ids:["pay_003"],created_at:b("2026-01-18T10:00:00Z"),updated_at:b("2026-01-22T16:45:00Z"),timeline:i("job_004",[{id:"tl_008",type:"status_changed",title:"Status set to Completed",created_at:b("2026-01-21T14:00:00Z"),meta:{status:"completed"}},{id:"tl_009",type:"status_changed",title:"Status set to Delivered",created_at:b("2026-01-22T16:45:00Z"),meta:{status:"delivered"}}]),messages:[],attachments:[]},{id:"job_005",case_number:"RB-10380",title:"HP desktop overheating",status:"cancelled",client_id:"client_005",customer_device_ids:["custdev_005"],estimate_id:"estimate_003",payment_ids:[],created_at:b("2026-01-19T11:40:00Z"),updated_at:b("2026-01-20T09:05:00Z"),timeline:i("job_005",[{id:"tl_010",type:"status_changed",title:"Status set to Cancelled",created_at:b("2026-01-20T09:05:00Z"),meta:{status:"cancelled"}}]),messages:[],attachments:[]}],l=[{id:"review_001",job_id:"job_004",client_id:"client_004",rating:5,comment:"Fast service and great communication.",created_at:b("2026-01-23T08:00:00Z")},{id:"review_002",job_id:"job_001",client_id:"client_001",rating:4,comment:"Good work. Slight delay but handled well.",created_at:b("2026-01-27T18:00:00Z")}],m={statuses:[{key:"new_quote",label:"New/Quote"},{key:"in_process",label:"In Process"},{key:"ready",label:"Ready"},{key:"completed",label:"Completed"},{key:"delivered",label:"Delivered"},{key:"cancelled",label:"Cancelled"}],clients:c,device_brands:[{id:"brand_001",name:"Apple"},{id:"brand_002",name:"Dell"},{id:"brand_003",name:"HP"},{id:"brand_004",name:"Lenovo"},{id:"brand_005",name:"Samsung"}],device_types:[{id:"type_001",name:"Laptop"},{id:"type_002",name:"Desktop"},{id:"type_003",name:"Phone"},{id:"type_004",name:"Tablet"},{id:"type_005",name:"Game Console"}],devices:[{id:"device_001",brand_id:"brand_002",type_id:"type_001",model:"XPS 13"},{id:"device_002",brand_id:"brand_001",type_id:"type_004",model:"iPad Pro"},{id:"device_003",brand_id:"brand_005",type_id:"type_003",model:"Galaxy S23"},{id:"device_004",brand_id:"brand_004",type_id:"type_001",model:"ThinkPad T14"},{id:"device_005",brand_id:"brand_003",type_id:"type_002",model:"Pavilion Desktop"}],customer_devices:[{id:"custdev_001",client_id:"client_001",device_id:"device_001",serial_number:"SN-XPS13-0001",notes:"Battery drains quickly."},{id:"custdev_002",client_id:"client_002",device_id:"device_004",serial_number:"SN-TP-0012",notes:"Intermittent boot issues."},{id:"custdev_003",client_id:"client_003",device_id:"device_003",serial_number:"SN-GS23-031",notes:"Screen flickers at low brightness."},{id:"custdev_004",client_id:"client_004",device_id:"device_002",serial_number:"SN-IPAD-888",notes:"Charging port is loose."},{id:"custdev_005",client_id:"client_005",device_id:"device_005",serial_number:"SN-HPD-555",notes:"Runs very hot under load."}],jobs:k,estimates:j,appointments:[{id:"appt_001",scheduled_at:b("2026-01-29T10:00:00Z"),status:"confirmed",client_name:"Alex Johnson",client_email:"alex@example.com",client_phone:"+1 555 0101",notes:"Drop off in the morning.",created_at:b("2026-01-26T16:00:00Z")},{id:"appt_002",scheduled_at:b("2026-02-01T13:30:00Z"),status:"requested",client_name:"Sam Rivera",client_email:"sam@example.com",client_phone:"+1 555 0102",notes:"Prefer weekend.",created_at:b("2026-01-27T09:45:00Z")}],payments:d,expenses:e,expense_categories:[{id:"expcat_001",name:"Parts"},{id:"expcat_002",name:"Shipping"},{id:"expcat_003",name:"Tools"}],time_logs:f,reviews:l,services:[{id:"service_001",name:"Diagnostics",description:"Hardware and software diagnostics.",base_price:{currency:"USD",amount_cents:2500}},{id:"service_002",name:"Battery replacement",description:"Laptop battery replacement service.",base_price:{currency:"USD",amount_cents:7500}},{id:"service_003",name:"Screen replacement",description:"Phone/tablet screen replacement (parts excluded).",base_price:{currency:"USD",amount_cents:19900}}],parts:[{id:"part_001",name:"Laptop battery (generic)",sku:"BAT-GEN-001",price:{currency:"USD",amount_cents:3200},stock:12},{id:"part_002",name:"USB-C port module",sku:"USB-C-MOD-020",price:{currency:"USD",amount_cents:1800},stock:7},{id:"part_003",name:"Thermal paste",sku:"THERM-PASTE-010",price:{currency:"USD",amount_cents:900},stock:30}]};function n(a){return new Promise(b=>{setTimeout(b,a)})}async function o(a,b=350){return await n(b),await a()}function p(a){}function q(a){let b={msg:0,att:0,appt:0},c={...b,[a]:(b[a]??0)+1},d=String(c[a]).padStart(3,"0");return`${a}_${d}`}function r(){return new Date().toISOString()}function s(){var a;let b,c,d,e,f,g;return b=(a={}).estimatesById??{},c=a.jobsById??{},d=a.jobMessagesByJobId??{},e=a.appointments??null,f=m.estimates.map(a=>{let c=b[a.id]??null;return c?{...a,...c}:a}),g=m.jobs.map(a=>{let b=c[a.id]??null,e=d[a.id]??null;return b||e?{...a,...b??{},messages:e||a.messages}:a}),{...m,estimates:f,jobs:g,appointments:e||m.appointments}}function t(a,b){if(!a||"string"!=typeof a||0===a.trim().length)throw Error(`${b} is required.`)}a.s(["mockApi",0,{sleep:n,withLatency:o,getBundle:async()=>await o(()=>s()),getStatuses:async()=>await o(()=>s().statuses),listJobs:async()=>await o(()=>s().jobs),getJob:async a=>await o(()=>s().jobs.find(b=>b.id===a)??null),getJobByCaseNumber:async a=>await o(()=>{var b;let c;return b=s(),c=a.trim().toUpperCase(),b.jobs.find(a=>a.case_number.toUpperCase()===c)??null}),listClients:async()=>await o(()=>s().clients),getClient:async a=>await o(()=>s().clients.find(b=>b.id===a)??null),listCustomerDevices:async()=>await o(()=>s().customer_devices),getCustomerDevice:async a=>await o(()=>s().customer_devices.find(b=>b.id===a)??null),listDevices:async()=>await o(()=>s().devices),listDeviceBrands:async()=>await o(()=>s().device_brands),listDeviceTypes:async()=>await o(()=>s().device_types),listEstimates:async()=>await o(()=>s().estimates),getEstimate:async a=>await o(()=>s().estimates.find(b=>b.id===a)??null),setEstimateStatus:async a=>await o(()=>{let{estimateId:b,status:c}=a,d=s().estimates.find(a=>a.id===b)??null;if(!d)throw Error("Estimate not found.");let e={},f={...e.estimatesById??{}};return f[b]={...f[b]??{},status:c,updated_at:r()},p({...e,estimatesById:f}),{...d,status:c,updated_at:r()}}),listAppointments:async()=>await o(()=>s().appointments),createAppointment:async a=>await o(()=>{t(a.scheduled_at,"scheduled_at"),t(a.client_name,"client_name");let b={id:q("appt"),scheduled_at:new Date(a.scheduled_at).toISOString(),status:"requested",client_name:a.client_name.trim(),client_email:a.client_email??null,client_phone:a.client_phone??null,notes:a.notes??null,created_at:r()},c={},d=[b,...Array.isArray(c.appointments)?c.appointments:s().appointments];return p({...c,appointments:d}),b}),listPayments:async()=>await o(()=>s().payments),listExpenses:async()=>await o(()=>s().expenses),listExpenseCategories:async()=>await o(()=>s().expense_categories),listTimeLogs:async()=>await o(()=>s().time_logs),listServices:async()=>await o(()=>s().services),listParts:async()=>await o(()=>s().parts),listReviews:async()=>await o(()=>s().reviews),postJobMessage:async a=>await o(()=>{let{jobId:b,author:c}=a,d=a.body.trim();if(!d)throw Error("Message body is required.");let e=s().jobs.find(a=>a.id===b)??null;if(!e)throw Error("Job not found.");let f={id:q("msg"),job_id:b,author:c,body:d,created_at:r(),attachments:a.attachments&&a.attachments.length>0?a.attachments.map((a,c)=>({id:0===c?q("att"):`${q("att")}_${c}`,job_id:b,filename:a.filename,mime_type:a.mime_type,size_bytes:a.size_bytes,url:"/mock/uploads/placeholder",created_at:r()})):void 0},g={},h={...g.jobMessagesByJobId??{}},i=h[b]??e.messages;return h[b]=[...i,f],p({...g,jobMessagesByJobId:h}),f}),computeEstimateTotalCents:function(a){return a.lines.reduce((a,b)=>a+b.qty*b.unit_price.amount_cents,0)}}],45004)},70890,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(97867),f=a.i(4600),g=a.i(54177),h=a.i(54804),i=a.i(45004),j=a.i(4148);function k(){let a=(0,d.useParams)(),k=a.business??a.tenant,[l,m]=c.default.useState(!0),[n,o]=c.default.useState(null),[p,q]=c.default.useState([]),[r,s]=c.default.useState([]),[t,u]=c.default.useState(""),[v,w]=c.default.useState(0),[x,y]=c.default.useState(10);c.default.useEffect(()=>{let a=!0;return async function(){try{m(!0),o(null);let[b,c]=await Promise.all([i.mockApi.listTimeLogs(),i.mockApi.listJobs()]);if(!a)return;q(Array.isArray(b)?b:[]),s(Array.isArray(c)?c:[])}catch(b){if(!a)return;o(b instanceof Error?b.message:"Failed to load time logs.")}finally{if(!a)return;m(!1)}}(),()=>{a=!1}},[]);let z=c.default.useMemo(()=>new Map(r.map(a=>[a.id,a])),[r]),A=c.default.useMemo(()=>p.map(a=>{let b=z.get(a.job_id)??null,c=Math.round(a.minutes/60*a.rate.amount_cents);return{timeLog:a,job:b,totalCents:c,currency:a.rate.currency}}),[z,p]),B=c.default.useMemo(()=>{let a=t.trim().toLowerCase();return a?A.filter(b=>{let c=b.job?.case_number??b.timeLog.job_id;return`${b.timeLog.id} ${c} ${b.timeLog.user_label}`.toLowerCase().includes(a)}):A},[t,A]),C=B.length,D=c.default.useMemo(()=>{let a=v*x,b=a+x;return B.slice(a,b)},[B,v,x]),E=c.default.useMemo(()=>[{id:"job",header:"Job",cell:a=>(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:a.job?.case_number??a.timeLog.job_id}),(0,b.jsx)("div",{className:"truncate text-xs text-zinc-600",children:a.timeLog.id})]}),className:"min-w-[240px]"},{id:"user",header:"User",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.timeLog.user_label}),className:"min-w-[200px]"},{id:"minutes",header:"Minutes",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.timeLog.minutes}),className:"whitespace-nowrap"},{id:"rate",header:"Rate",cell:a=>(0,b.jsxs)("div",{className:"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap",children:[(0,j.formatMoney)({amountCents:a.timeLog.rate.amount_cents,currency:a.timeLog.rate.currency})," / hr"]}),className:"whitespace-nowrap"},{id:"total",header:"Total",cell:a=>(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap",children:(0,j.formatMoney)({amountCents:a.totalCents,currency:a.currency})}),className:"whitespace-nowrap"},{id:"created",header:"Created",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:new Date(a.timeLog.created_at).toLocaleString()}),className:"whitespace-nowrap"}],[]);return(0,b.jsx)(h.ListPageShell,{title:"Time Logs",description:"Logged time entries for jobs.",actions:(0,b.jsx)(e.Button,{disabled:!0,variant:"outline",size:"sm",children:"Add time log"}),loading:l,error:n,empty:!l&&!n&&0===A.length,emptyTitle:"No time logs",emptyDescription:"Time entries created by technicians will show here.",children:(0,b.jsx)(f.Card,{className:"shadow-none",children:(0,b.jsx)(f.CardContent,{className:"pt-5",children:(0,b.jsx)(g.DataTable,{title:"string"==typeof k?`Time Logs \xb7 ${k}`:"Time Logs",data:D,loading:l,emptyMessage:"No time logs.",columns:E,getRowId:a=>a.timeLog.id,search:{placeholder:"Search case, user, ID..."},server:{query:t,onQueryChange:a=>{u(a),w(0)},pageIndex:v,onPageIndexChange:w,pageSize:x,onPageSizeChange:a=>{y(a),w(0)},totalRows:C}})})})})}a.s(["default",()=>k])}];

//# sourceMappingURL=frontend_src_c37267a0._.js.map