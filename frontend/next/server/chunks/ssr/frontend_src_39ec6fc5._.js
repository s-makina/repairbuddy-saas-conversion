module.exports=[648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},29054,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,className:(0,c.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",a),...e})}a.s(["Input",()=>d])},79792,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(34075),e=a.i(75458),f=a.i(75385),g=a.i(33452),h=a.i(17933),i=a.i(97867),j=a.i(4600),k=a.i(29054),l=a.i(648);function m(){let a=(0,e.useAuth)(),m=a.user,n=a.isImpersonating,o=m?.name??"",p=m?.email??"",[q,r]=(0,c.useState)(o),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),y=(0,c.useRef)(null),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null);(0,c.useEffect)(()=>{r(m?.name??"")},[m?.name]);let L=!!m?.email_verified_at,M=(0,c.useMemo)(()=>m?m.is_admin?"Admin":m.role??"User":"—",[m]),N=(0,c.useMemo)(()=>{let a=(m?.name??"").trim();if(a){let b=a.split(/\s+/).filter(Boolean),c=b[0]?.[0]??"",d=b.length>1?b[b.length-1]?.[0]??"":"";return`${c}${d}`.toUpperCase().slice(0,2)||"U"}let b=(m?.email??"").trim();return b?b.slice(0,2).toUpperCase():"U"},[m?.email,m?.name]),O=m?.avatar_url??null,P=B??O,Q=!!q.trim()&&!s&&!n,R=q.trim()!==(o??"").trim();async function S(b){if(b.preventDefault(),I(null),K(null),!m)return void I("Not signed in.");if(n)return void I("Profile updates are disabled during impersonation.");if(!q.trim())return void I("Name is required.");t(!0);try{await (0,d.apiFetch)("/api/auth/me",{method:"PATCH",body:{name:q.trim()}}),await a.refresh(),K("Profile updated.")}catch(a){a instanceof d.ApiError?I(a.message):I("Failed to update profile.")}finally{t(!1)}}async function T(){if(I(null),K(null),!m)return void I("Not signed in.");if(n)return void I("This action is disabled during impersonation.");if(!z)return void I("Please choose a photo first.");E(!0);try{let b=new FormData;b.append("avatar",z),await (0,d.apiFetch)("/api/auth/me/avatar",{method:"POST",body:b}),await a.refresh(),K("Profile photo updated."),A(null),C(null),y.current&&(y.current.value="")}catch(a){a instanceof d.ApiError?I(a.message):I("Failed to update profile photo.")}finally{E(!1)}}async function U(){if(I(null),K(null),!m)return void I("Not signed in.");if(n)return void I("This action is disabled during impersonation.");G(!0);try{await (0,d.apiFetch)("/api/auth/me/avatar",{method:"DELETE"}),await a.refresh(),K("Profile photo removed."),A(null),C(null),y.current&&(y.current.value="")}catch(a){a instanceof d.ApiError?I(a.message):I("Failed to remove profile photo.")}finally{G(!1)}}async function V(){if(I(null),K(null),!p)return void I("Email is missing.");if(n)return void I("This action is disabled during impersonation.");v(!0);try{await (0,d.apiFetch)("/api/auth/password/email",{method:"POST",body:{email:p}}),K("If that email exists, we sent a reset link.")}catch(a){a instanceof d.ApiError?I(a.message):I("Failed to send reset link.")}finally{v(!1)}}async function W(){if(I(null),K(null),!p)return void I("Email is missing.");if(n)return void I("This action is disabled during impersonation.");x(!0);try{await a.resendVerificationEmail(p),K("Verification email sent. Check your inbox.")}catch(a){a instanceof d.ApiError?I(a.message):I("Failed to resend verification email.")}finally{x(!1)}}return(0,c.useEffect)(()=>()=>{B&&URL.revokeObjectURL(B)},[B]),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(l.PageHeader,{title:"Profile",description:"Manage your admin account."}),n?(0,b.jsx)(f.Alert,{variant:"warning",title:"Impersonation active",children:"Editing profile details is disabled while impersonating another user."}):null,H?(0,b.jsx)(f.Alert,{variant:"danger",title:"Could not update profile",children:H}):null,J?(0,b.jsx)(f.Alert,{variant:"success",title:"Success",children:J}):null,(0,b.jsxs)(j.Card,{className:"overflow-hidden",children:[(0,b.jsx)("div",{className:"h-20 w-full bg-[var(--rb-surface-muted)]"}),(0,b.jsx)(j.CardContent,{className:"-mt-10",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-end gap-4",children:[(0,b.jsx)(g.Avatar,{alt:m?.name||p||"User",fallback:N,src:P,size:72,className:"ring-2 ring-white shadow-sm"}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate text-lg font-semibold text-[var(--rb-text)]",children:m?.name||"—"}),(0,b.jsx)("div",{className:"truncate text-sm text-zinc-600",children:p||"—"}),(0,b.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,b.jsx)(h.Badge,{variant:L?"success":"warning",children:L?"Email verified":"Email unverified"}),(0,b.jsx)(h.Badge,{children:M}),"number"==typeof m?.id?(0,b.jsxs)(h.Badge,{children:["ID #",m.id]}):null]}),(0,b.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,b.jsx)("input",{ref:y,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:function(a){let b=a.target.files?.[0]??null;b&&((I(null),K(null),b.type.startsWith("image/"))?b.size>5242880?I("Image must be 5MB or smaller."):(A(b),C(URL.createObjectURL(b))):I("Please select an image file."))},disabled:n||D||F}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>y.current?.click(),disabled:n||D||F,children:z?"Change selected photo":"Change photo"}),z?(0,b.jsx)(i.Button,{size:"sm",onClick:()=>void T(),disabled:n||D||F,children:D?"Uploading...":"Upload"}):null,O?(0,b.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>void U(),disabled:n||D||F,className:"text-zinc-600",children:F?"Removing...":"Remove"}):null]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-start gap-1 text-xs text-zinc-600 sm:items-end",children:[(0,b.jsxs)("div",{children:["Signed in as ",p||"—"]}),(0,b.jsx)("div",{className:"text-[var(--rb-text)]",children:"Changes apply to your current session after saving."})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,b.jsxs)(j.Card,{children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(j.CardTitle,{children:"Profile details"}),(0,b.jsx)(j.CardDescription,{children:"Update how your name appears across the admin dashboard."})]}),R?(0,b.jsx)(h.Badge,{variant:"info",children:"Unsaved changes"}):null]})}),(0,b.jsx)(j.CardContent,{children:(0,b.jsxs)("form",{className:"space-y-4",onSubmit:S,children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"name",children:"Display name"}),(0,b.jsx)(k.Input,{id:"name",value:q,onChange:a=>r(a.target.value),disabled:s||n,autoComplete:"name",placeholder:"Your name",required:!0})]}),(0,b.jsx)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:(0,b.jsx)(i.Button,{type:"submit",disabled:!Q||!R,children:s?"Saving...":"Save changes"})})]})})]}),(0,b.jsxs)(j.Card,{children:[(0,b.jsxs)(j.CardHeader,{children:[(0,b.jsx)(j.CardTitle,{children:"Account"}),(0,b.jsx)(j.CardDescription,{children:"Security and login-related actions."})]}),(0,b.jsxs)(j.CardContent,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-4 py-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Email"}),(0,b.jsx)("div",{className:"mt-1 truncate text-sm font-semibold text-[var(--rb-text)]",children:p||"—"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(h.Badge,{variant:L?"success":"warning",children:L?"Verified":"Not verified"})})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-4 py-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Role"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-semibold text-[var(--rb-text)]",children:M}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-600",children:["User ID: ",m?.id??"—"]})]})]}),(0,b.jsx)("div",{className:"mt-4 border-t border-[var(--rb-border)] pt-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[L?null:(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>void W(),disabled:w||n||!p,children:w?"Sending...":"Resend verification email"}),(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>void V(),disabled:u||n||!p,children:u?"Sending...":"Send password reset email"})]})})]})]})]})]})}a.s(["default",()=>m])}];

//# sourceMappingURL=frontend_src_39ec6fc5._.js.map