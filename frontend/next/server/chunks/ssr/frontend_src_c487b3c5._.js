module.exports=[29054,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,className:(0,c.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",a),...e})}a.s(["Input",()=>d])},75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},73016,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);let e=(0,c.createContext)(null);function f(){let a=(0,c.useContext)(e);if(!a)throw Error("Tabs components must be used within <Tabs />");return a}function g({value:a,defaultValue:f,onValueChange:g,className:h,children:i}){let j=(0,c.useId)(),[k,l]=(0,c.useState)(f??""),m="string"==typeof a?a:k,n=(0,c.useCallback)(b=>{b&&(g&&g(b),"string"!=typeof a&&l(b))},[g,a]),o=(0,c.useMemo)(()=>({value:m,setValue:n,baseId:j}),[j,m,n]);return(0,b.jsx)(e.Provider,{value:o,children:(0,b.jsx)("div",{className:(0,d.cn)("space-y-4",h),children:i})})}function h({className:a,...c}){return(0,b.jsx)("div",{className:(0,d.cn)("inline-flex items-center gap-1 rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-1 shadow-[var(--rb-shadow)]",a),role:"tablist",...c})}function i({value:a,className:c,...e}){let g=f(),h=g.value===a,{onClick:i,...j}=e;return(0,b.jsx)("button",{type:"button",role:"tab","aria-selected":h,"aria-controls":`${g.baseId}-panel-${a}`,id:`${g.baseId}-tab-${a}`,onClick:b=>{g.setValue(a),i?.(b)},className:(0,d.cn)("h-9 rounded-[var(--rb-radius-sm)] px-3 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",h?"bg-[var(--rb-surface-muted)] text-[var(--rb-text)]":"text-zinc-600 hover:bg-[var(--rb-surface-muted)]",c),...j})}function j({value:a,className:c,children:e,...g}){let h=f();return h.value!==a?null:(0,b.jsx)("div",{role:"tabpanel",id:`${h.baseId}-panel-${a}`,"aria-labelledby":`${h.baseId}-tab-${a}`,className:(0,d.cn)(c),...g,children:e})}a.s(["Tabs",()=>g,"TabsContent",()=>j,"TabsList",()=>h,"TabsTrigger",()=>i])},76834,a=>{"use strict";var b=a.i(57850),c=a.i(92850),d=a.i(45056),e=a.i(34075),f=a.i(75458),g=a.i(75385),h=a.i(97867),i=a.i(4600),j=a.i(29054),k=a.i(648),l=a.i(73016);function m(){let a=(0,f.useAuth)(),[m,n]=(0,d.useState)(!0),[o,p]=(0,d.useState)(null),[q,r]=(0,d.useState)(null),[s,t]=(0,d.useState)(null),[u,v]=(0,d.useState)(""),[w,x]=(0,d.useState)(""),[y,z]=(0,d.useState)(""),[A,B]=(0,d.useState)(!1),[C,D]=(0,d.useState)(null),E=!!(a.user?.otp_enabled&&a.user?.otp_confirmed_at);(0,d.useEffect)(()=>{let a=!0;return async function(){try{r(null),n(!0);let b=await (0,e.apiFetch)("/api/admin/settings");if(!a)return;p(b)}catch(b){if(!a)return;r(b instanceof Error?b.message:"Failed to load settings."),p(null)}finally{if(!a)return;n(!1)}}(),()=>{a=!1}},[]),(0,d.useEffect)(()=>{t(null),v(""),x(""),z(""),D(null),r(null)},[E]);let F=(0,d.useMemo)(()=>s?.otpauth_uri?s.otpauth_uri:null,[s?.otpauth_uri]);async function G(){r(null),D(null),B(!0);try{let a=await (0,e.apiFetch)("/api/auth/otp/setup",{method:"POST"});t(a),D("OTP setup started. Scan the QR code and confirm the 6-digit code.")}catch(a){a instanceof e.ApiError?r(a.message):r("Failed to start OTP setup.")}finally{B(!1)}}async function H(b){b.preventDefault(),r(null),D(null),B(!0);try{await (0,e.apiFetch)("/api/auth/otp/confirm",{method:"POST",body:{code:u}}),D("OTP enabled."),await a.refresh()}catch(a){a instanceof e.ApiError?r(a.message):r("Failed to confirm OTP.")}finally{B(!1)}}async function I(b){b.preventDefault(),r(null),D(null),B(!0);try{await (0,e.apiFetch)("/api/auth/otp/disable",{method:"POST",body:{password:w,code:y}}),D("OTP disabled."),await a.refresh()}catch(a){a instanceof e.ApiError?r(a.message):r("Failed to disable OTP.")}finally{B(!1)}}return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(k.PageHeader,{title:"Settings",description:"Global admin settings and platform configuration."}),q?(0,b.jsx)(g.Alert,{variant:"danger",title:"Something went wrong",children:q}):null,C?(0,b.jsx)(g.Alert,{variant:"success",title:"Status",children:C}):null,m?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading settings..."}):null,o?(0,b.jsxs)(l.Tabs,{defaultValue:"platform",children:[(0,b.jsxs)(l.TabsList,{children:[(0,b.jsx)(l.TabsTrigger,{value:"platform",children:"Platform"}),(0,b.jsx)(l.TabsTrigger,{value:"security",children:"Security"})]}),(0,b.jsx)(l.TabsContent,{value:"platform",children:(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Platform"}),(0,b.jsx)(i.CardDescription,{children:"Read-only config snapshot."})]}),(0,b.jsxs)(i.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"App"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.app.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Environment"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.app.env})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"URL"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)] break-all",children:o.app.url})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Debug"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.app.debug?"true":"false"})]})]}),(0,b.jsx)("div",{className:"h-px bg-[var(--rb-border)]"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Tenancy resolution"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.tenancy.resolution})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Business route param"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.tenancy.route_param})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Business header"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.tenancy.header})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Billing seller country"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.billing.seller_country})]})]}),(0,b.jsx)("div",{className:"h-px bg-[var(--rb-border)]"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Mail driver"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:o.mail.default})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Mail from"}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)] break-all",children:[o.mail.from_name," ",o.mail.from_address?`<${o.mail.from_address}>`:""]})]})]})]})]})})}),(0,b.jsx)(l.TabsContent,{value:"security",children:(0,b.jsx)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:(0,b.jsxs)(i.Card,{children:[(0,b.jsxs)(i.CardHeader,{children:[(0,b.jsx)(i.CardTitle,{children:"Account security"}),(0,b.jsx)(i.CardDescription,{children:"One-time password (TOTP) setup for this admin account."})]}),(0,b.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:["Status: ",E?"Enabled":"Disabled"]}),E?(0,b.jsxs)("form",{className:"space-y-3",onSubmit:I,children:[(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:"To disable OTP, confirm your password and an OTP code."}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"disable_password",children:"Password"}),(0,b.jsx)(j.Input,{id:"disable_password",value:w,onChange:a=>x(a.target.value),type:"password",autoComplete:"current-password",required:!0,disabled:A})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"disable_code",children:"OTP code"}),(0,b.jsx)(j.Input,{id:"disable_code",value:y,onChange:a=>z(a.target.value.replace(/\D/g,"").slice(0,6)),type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,required:!0,disabled:A})]}),(0,b.jsx)(h.Button,{variant:"outline",type:"submit",disabled:A,children:A?"Disabling...":"Disable OTP"})]}):(0,b.jsx)("div",{className:"space-y-4",children:s?(0,b.jsxs)("div",{className:"space-y-3",children:[s.otpauth_uri?(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500",children:"Scan QR code"}),(0,b.jsx)("div",{className:"mt-3 flex items-center justify-center",children:(0,b.jsx)("div",{className:"rounded-[12px] bg-white p-3 ring-1 ring-[var(--rb-border)]",children:(0,b.jsx)(c.default,{value:s.otpauth_uri,size:176})})})]}):null,(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500",children:"Secret"}),(0,b.jsx)("div",{className:"mt-1 font-mono text-sm break-all",children:s.secret})]}),F?(0,b.jsx)("a",{className:"text-sm text-[var(--rb-text)] underline",href:F,children:"Open in authenticator"}):null,(0,b.jsxs)("form",{className:"space-y-2",onSubmit:H,children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"otp_code",children:"Enter 6-digit code"}),(0,b.jsx)(j.Input,{id:"otp_code",value:u,onChange:a=>v(a.target.value.replace(/\D/g,"").slice(0,6)),type:"text",inputMode:"numeric",pattern:"[0-9]{6}",maxLength:6,required:!0,disabled:A})]}),(0,b.jsx)(h.Button,{type:"submit",disabled:A,children:A?"Confirming...":"Confirm OTP"})]})]}):(0,b.jsx)(h.Button,{type:"button",onClick:()=>void G(),disabled:A,children:A?"Starting...":"Enable OTP"})})]})]})})})]}):null]})}a.s(["default",()=>m])}];

//# sourceMappingURL=frontend_src_c487b3c5._.js.map