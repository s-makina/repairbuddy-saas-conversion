{"version":3,"sources":["../../../../../frontend/src/app/app/%5Btenant%5D/service-price-overrides/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\nimport { ConfirmDialog } from \"@/components/ui/ConfirmDialog\";\r\nimport { DataTable, type DataTableColumn } from \"@/components/ui/DataTable\";\r\nimport { DropdownMenu, DropdownMenuItem, DropdownMenuSeparator } from \"@/components/ui/DropdownMenu\";\r\nimport { Modal } from \"@/components/ui/Modal\";\r\nimport { ListPageShell } from \"@/components/shells/ListPageShell\";\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport { formatMoney } from \"@/lib/money\";\r\n\r\ntype ApiService = {\r\n  id: number;\r\n  name: string;\r\n  base_price: { currency: string; amount_cents: number } | null;\r\n  is_active: boolean;\r\n};\r\n\r\ntype ApiTax = {\r\n  id: number;\r\n  name: string;\r\n  rate: string;\r\n  is_default: boolean;\r\n};\r\n\r\ntype ApiDeviceType = {\r\n  id: number;\r\n  name: string;\r\n  is_active: boolean;\r\n};\r\n\r\ntype ApiDeviceBrand = {\r\n  id: number;\r\n  name: string;\r\n  is_active: boolean;\r\n};\r\n\r\ntype ApiDevice = {\r\n  id: number;\r\n  model: string;\r\n  device_type_id: number;\r\n  device_brand_id: number;\r\n  parent_device_id: number | null;\r\n  is_active: boolean;\r\n};\r\n\r\ntype ApiServicePriceOverride = {\r\n  id: number;\r\n  service_id: number;\r\n  scope_type: \"device\" | \"brand\" | \"type\";\r\n  scope_ref_id: number;\r\n  price: { currency: string; amount_cents: number } | null;\r\n  tax_id: number | null;\r\n  is_active: boolean;\r\n};\r\n\r\nexport default function TenantServicePriceOverridesPage() {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const params = useParams() as { tenant?: string; business?: string };\r\n  const tenantSlug = params.business ?? params.tenant;\r\n\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState<string | null>(null);\r\n  const [status, setStatus] = React.useState<string | null>(null);\r\n  const [busy, setBusy] = React.useState(false);\r\n\r\n  const [overrides, setOverrides] = React.useState<ApiServicePriceOverride[]>([]);\r\n  const [services, setServices] = React.useState<ApiService[]>([]);\r\n  const [taxes, setTaxes] = React.useState<ApiTax[]>([]);\r\n  const [devices, setDevices] = React.useState<ApiDevice[]>([]);\r\n  const [brands, setBrands] = React.useState<ApiDeviceBrand[]>([]);\r\n  const [types, setTypes] = React.useState<ApiDeviceType[]>([]);\r\n\r\n  const [editOpen, setEditOpen] = React.useState(false);\r\n  const [editId, setEditId] = React.useState<number | null>(null);\r\n  const [editServiceId, setEditServiceId] = React.useState<number | null>(null);\r\n  const [editScopeType, setEditScopeType] = React.useState<ApiServicePriceOverride[\"scope_type\"]>(\"device\");\r\n  const [editScopeRefId, setEditScopeRefId] = React.useState<number | null>(null);\r\n  const [editPrice, setEditPrice] = React.useState(\"\");\r\n  const [editCurrency, setEditCurrency] = React.useState(\"USD\");\r\n  const [editTaxId, setEditTaxId] = React.useState<number | null>(null);\r\n  const [editIsActive, setEditIsActive] = React.useState(true);\r\n\r\n  const [confirmOpen, setConfirmOpen] = React.useState(false);\r\n  const [confirmTitle, setConfirmTitle] = React.useState(\"\");\r\n  const [confirmMessage, setConfirmMessage] = React.useState<React.ReactNode>(\"\");\r\n  const [confirmAction, setConfirmAction] = React.useState<(() => Promise<void>) | null>(null);\r\n\r\n  const [query, setQuery] = React.useState(\"\");\r\n  const [pageIndex, setPageIndex] = React.useState(0);\r\n  const [pageSize, setPageSize] = React.useState(10);\r\n\r\n  const canManage = auth.can(\"settings.manage\");\r\n\r\n  const load = React.useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) {\r\n        throw new Error(\"Business is missing.\");\r\n      }\r\n\r\n      const [overrideRes, serviceRes, taxRes, deviceRes, brandRes, typeRes] = await Promise.all([\r\n        apiFetch<{ service_price_overrides: ApiServicePriceOverride[] }>(`/api/${tenantSlug}/app/repairbuddy/service-price-overrides?limit=200`),\r\n        apiFetch<{ services: ApiService[] }>(`/api/${tenantSlug}/app/repairbuddy/services?limit=200`),\r\n        apiFetch<{ taxes: ApiTax[] }>(`/api/${tenantSlug}/app/repairbuddy/taxes?limit=200`),\r\n        apiFetch<{ devices: ApiDevice[] }>(`/api/${tenantSlug}/app/repairbuddy/devices?limit=200`),\r\n        apiFetch<{ device_brands: ApiDeviceBrand[] }>(`/api/${tenantSlug}/app/repairbuddy/device-brands?limit=200`),\r\n        apiFetch<{ device_types: ApiDeviceType[] }>(`/api/${tenantSlug}/app/repairbuddy/device-types?limit=200`),\r\n      ]);\r\n\r\n      setOverrides(Array.isArray(overrideRes.service_price_overrides) ? overrideRes.service_price_overrides : []);\r\n      setServices(Array.isArray(serviceRes.services) ? serviceRes.services : []);\r\n      setTaxes(Array.isArray(taxRes.taxes) ? taxRes.taxes : []);\r\n      setDevices(Array.isArray(deviceRes.devices) ? deviceRes.devices : []);\r\n      setBrands(Array.isArray(brandRes.device_brands) ? brandRes.device_brands : []);\r\n      setTypes(Array.isArray(typeRes.device_types) ? typeRes.device_types : []);\r\n    } catch (e) {\r\n      if (e instanceof ApiError && e.status === 428 && typeof tenantSlug === \"string\" && tenantSlug.length > 0) {\r\n        const next = `/app/${tenantSlug}/service-price-overrides`;\r\n        router.replace(`/app/${tenantSlug}/branches/select?next=${encodeURIComponent(next)}`);\r\n        return;\r\n      }\r\n      setError(e instanceof Error ? e.message : \"Failed to load service price overrides.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [router, tenantSlug]);\r\n\r\n  React.useEffect(() => {\r\n    void load();\r\n  }, [load]);\r\n\r\n  function openCreate() {\r\n    if (!canManage) return;\r\n    setEditId(null);\r\n    setEditServiceId(services.length > 0 ? services[0].id : null);\r\n    setEditScopeType(\"device\");\r\n    setEditScopeRefId(devices.length > 0 ? devices[0].id : null);\r\n    setEditPrice(\"\");\r\n    setEditCurrency((auth.tenant?.currency ?? \"USD\").toUpperCase());\r\n    setEditTaxId(null);\r\n    setEditIsActive(true);\r\n    setEditOpen(true);\r\n    setError(null);\r\n    setStatus(null);\r\n  }\r\n\r\n  function openEdit(row: ApiServicePriceOverride) {\r\n    if (!canManage) return;\r\n    setEditId(row.id);\r\n    setEditServiceId(row.service_id);\r\n    setEditScopeType(row.scope_type);\r\n    setEditScopeRefId(row.scope_ref_id);\r\n    setEditPrice(row.price ? (row.price.amount_cents / 100).toFixed(2) : \"\");\r\n    setEditCurrency(row.price?.currency ?? (auth.tenant?.currency ?? \"USD\").toUpperCase());\r\n    setEditTaxId(typeof row.tax_id === \"number\" ? row.tax_id : null);\r\n    setEditIsActive(Boolean(row.is_active));\r\n    setEditOpen(true);\r\n    setError(null);\r\n    setStatus(null);\r\n  }\r\n\r\n  function openConfirm(args: { title: string; message: React.ReactNode; action: () => Promise<void> }) {\r\n    setConfirmTitle(args.title);\r\n    setConfirmMessage(args.message);\r\n    setConfirmAction(() => args.action);\r\n    setConfirmOpen(true);\r\n  }\r\n\r\n  const serviceById = React.useMemo(() => new Map(services.map((s) => [s.id, s])), [services]);\r\n  const deviceById = React.useMemo(() => new Map(devices.map((d) => [d.id, d])), [devices]);\r\n  const brandById = React.useMemo(() => new Map(brands.map((b) => [b.id, b])), [brands]);\r\n  const typeById = React.useMemo(() => new Map(types.map((t) => [t.id, t])), [types]);\r\n  const taxById = React.useMemo(() => new Map(taxes.map((t) => [t.id, t])), [taxes]);\r\n\r\n  const scopeLabel = React.useCallback(\r\n    (o: ApiServicePriceOverride) => {\r\n      if (o.scope_type === \"device\") return deviceById.get(o.scope_ref_id)?.model ?? `Device #${o.scope_ref_id}`;\r\n      if (o.scope_type === \"brand\") return brandById.get(o.scope_ref_id)?.name ?? `Brand #${o.scope_ref_id}`;\r\n      return typeById.get(o.scope_ref_id)?.name ?? `Type #${o.scope_ref_id}`;\r\n    },\r\n    [brandById, deviceById, typeById],\r\n  );\r\n\r\n  const filtered = React.useMemo(() => {\r\n    const needle = query.trim().toLowerCase();\r\n    if (!needle) return overrides;\r\n\r\n    return overrides.filter((o) => {\r\n      const s = serviceById.get(o.service_id)?.name ?? String(o.service_id);\r\n      const scope = scopeLabel(o);\r\n      return `${o.id} ${s} ${o.scope_type} ${scope}`.toLowerCase().includes(needle);\r\n    });\r\n  }, [overrides, query, scopeLabel, serviceById]);\r\n\r\n  const totalRows = filtered.length;\r\n  const pageRows = React.useMemo(() => {\r\n    const start = pageIndex * pageSize;\r\n    const end = start + pageSize;\r\n    return filtered.slice(start, end);\r\n  }, [filtered, pageIndex, pageSize]);\r\n\r\n  const scopeOptions = React.useMemo(() => {\r\n    if (editScopeType === \"device\") return devices.slice().sort((a, b) => a.model.localeCompare(b.model)).map((d) => ({ id: d.id, label: d.model }));\r\n    if (editScopeType === \"brand\") return brands.slice().sort((a, b) => a.name.localeCompare(b.name)).map((b) => ({ id: b.id, label: b.name }));\r\n    return types.slice().sort((a, b) => a.name.localeCompare(b.name)).map((t) => ({ id: t.id, label: t.name }));\r\n  }, [brands, devices, editScopeType, types]);\r\n\r\n  React.useEffect(() => {\r\n    if (!editOpen) return;\r\n    if (typeof editScopeRefId === \"number\") return;\r\n    setEditScopeRefId(scopeOptions.length > 0 ? scopeOptions[0].id : null);\r\n  }, [editOpen, editScopeRefId, scopeOptions]);\r\n\r\n  async function onSave(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (busy) return;\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n    if (!canManage) {\r\n      setError(\"Forbidden.\");\r\n      return;\r\n    }\r\n\r\n    setBusy(true);\r\n    setError(null);\r\n    setStatus(null);\r\n\r\n    try {\r\n      if (typeof editServiceId !== \"number\") {\r\n        setError(\"Service is required.\");\r\n        return;\r\n      }\r\n\r\n      if (typeof editScopeRefId !== \"number\") {\r\n        setError(\"Scope value is required.\");\r\n        return;\r\n      }\r\n\r\n      const priceText = editPrice.trim();\r\n      const currency = editCurrency.trim().toUpperCase();\r\n\r\n      let priceAmountCents: number | null = null;\r\n      let priceCurrency: string | null = null;\r\n\r\n      if (priceText.length > 0) {\r\n        const parsed = Number(priceText);\r\n        if (!Number.isFinite(parsed)) {\r\n          setError(\"Price is invalid.\");\r\n          return;\r\n        }\r\n        priceAmountCents = Math.round(parsed * 100);\r\n        priceCurrency = currency.length > 0 ? currency : null;\r\n      }\r\n\r\n      const payload: Record<string, unknown> = {\r\n        service_id: editServiceId,\r\n        scope_type: editScopeType,\r\n        scope_ref_id: editScopeRefId,\r\n        price_amount_cents: priceAmountCents,\r\n        price_currency: priceCurrency,\r\n        tax_id: editTaxId,\r\n        is_active: editIsActive,\r\n      };\r\n\r\n      if (editId) {\r\n        await apiFetch<{ service_price_override: ApiServicePriceOverride }>(`/api/${tenantSlug}/app/repairbuddy/service-price-overrides/${editId}`,\r\n          {\r\n            method: \"PATCH\",\r\n            body: payload,\r\n          },\r\n        );\r\n        setStatus(\"Override updated.\");\r\n      } else {\r\n        await apiFetch<{ service_price_override: ApiServicePriceOverride }>(`/api/${tenantSlug}/app/repairbuddy/service-price-overrides`, {\r\n          method: \"POST\",\r\n          body: payload,\r\n        });\r\n        setStatus(\"Override created.\");\r\n      }\r\n\r\n      setEditOpen(false);\r\n      setPageIndex(0);\r\n      await load();\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(editId ? \"Failed to update override.\" : \"Failed to create override.\");\r\n      }\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function onDelete(row: ApiServicePriceOverride) {\r\n    if (busy) return;\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n    if (!canManage) {\r\n      setError(\"Forbidden.\");\r\n      return;\r\n    }\r\n\r\n    openConfirm({\r\n      title: \"Delete override\",\r\n      message: (\r\n        <div>\r\n          Delete override <span className=\"font-semibold\">#{row.id}</span>?\r\n        </div>\r\n      ),\r\n      action: async () => {\r\n        setBusy(true);\r\n        setError(null);\r\n        setStatus(null);\r\n        try {\r\n          await apiFetch<{ message: string }>(`/api/${tenantSlug}/app/repairbuddy/service-price-overrides/${row.id}`, {\r\n            method: \"DELETE\",\r\n          });\r\n          setStatus(\"Override deleted.\");\r\n          setPageIndex(0);\r\n          await load();\r\n        } catch (err) {\r\n          if (err instanceof ApiError) {\r\n            setError(err.message);\r\n          } else {\r\n            setError(\"Failed to delete override.\");\r\n          }\r\n        } finally {\r\n          setBusy(false);\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  const columns = React.useMemo<Array<DataTableColumn<ApiServicePriceOverride>>>(\r\n    () => [\r\n      {\r\n        id: \"service\",\r\n        header: \"Service\",\r\n        cell: (row) => (\r\n          <div className=\"min-w-0\">\r\n            <div className=\"truncate font-semibold text-[var(--rb-text)]\">{serviceById.get(row.service_id)?.name ?? row.service_id}</div>\r\n            <div className=\"truncate text-xs text-zinc-600\">#{row.id}</div>\r\n          </div>\r\n        ),\r\n        className: \"min-w-[260px]\",\r\n      },\r\n      {\r\n        id: \"scope\",\r\n        header: \"Scope\",\r\n        cell: (row) => (\r\n          <div className=\"min-w-0\">\r\n            <div className=\"text-sm text-zinc-700\">{row.scope_type}</div>\r\n            <div className=\"truncate text-xs text-zinc-500\">{scopeLabel(row)}</div>\r\n          </div>\r\n        ),\r\n        className: \"min-w-[220px]\",\r\n      },\r\n      {\r\n        id: \"price\",\r\n        header: \"Price\",\r\n        cell: (row) => {\r\n          if (!row.price) return <div className=\"text-sm text-zinc-600\">—</div>;\r\n          return <div className=\"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap\">{formatMoney({ amountCents: row.price.amount_cents, currency: row.price.currency })}</div>;\r\n        },\r\n        className: \"whitespace-nowrap\",\r\n      },\r\n      {\r\n        id: \"tax\",\r\n        header: \"Tax\",\r\n        cell: (row) => {\r\n          if (typeof row.tax_id !== \"number\") return <div className=\"text-sm text-zinc-600\">—</div>;\r\n          const t = taxById.get(row.tax_id);\r\n          return <div className=\"text-sm text-zinc-700\">{t ? t.name : row.tax_id}</div>;\r\n        },\r\n        className: \"min-w-[160px]\",\r\n      },\r\n      {\r\n        id: \"active\",\r\n        header: \"Active\",\r\n        className: \"whitespace-nowrap\",\r\n        cell: (row) => <div className=\"text-sm text-zinc-700\">{row.is_active ? \"Yes\" : \"No\"}</div>,\r\n      },\r\n      {\r\n        id: \"actions\",\r\n        header: \"\",\r\n        headerClassName: \"text-right\",\r\n        className: \"whitespace-nowrap text-right\",\r\n        cell: (row) => {\r\n          if (!canManage) return null;\r\n          return (\r\n            <DropdownMenu\r\n              align=\"right\"\r\n              trigger={({ toggle }) => (\r\n                <Button variant=\"ghost\" size=\"sm\" onClick={toggle} disabled={busy} className=\"px-2\">\r\n                  Actions\r\n                </Button>\r\n              )}\r\n            >\r\n              {({ close }) => (\r\n                <>\r\n                  <DropdownMenuItem\r\n                    onSelect={() => {\r\n                      close();\r\n                      openEdit(row);\r\n                    }}\r\n                    disabled={busy}\r\n                  >\r\n                    Edit\r\n                  </DropdownMenuItem>\r\n                  <DropdownMenuSeparator />\r\n                  <DropdownMenuItem\r\n                    destructive\r\n                    onSelect={() => {\r\n                      close();\r\n                      void onDelete(row);\r\n                    }}\r\n                    disabled={busy}\r\n                  >\r\n                    Delete\r\n                  </DropdownMenuItem>\r\n                </>\r\n              )}\r\n            </DropdownMenu>\r\n          );\r\n        },\r\n      },\r\n    ],\r\n    [busy, canManage, scopeLabel, serviceById, taxById],\r\n  );\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"settings.manage\">\r\n      <div className=\"space-y-4\">\r\n        <ConfirmDialog\r\n          open={confirmOpen}\r\n          title={confirmTitle}\r\n          message={confirmMessage}\r\n          busy={busy}\r\n          confirmText=\"Delete\"\r\n          confirmVariant=\"secondary\"\r\n          onCancel={() => {\r\n            if (busy) return;\r\n            setConfirmOpen(false);\r\n            setConfirmAction(null);\r\n          }}\r\n          onConfirm={() => {\r\n            if (!confirmAction) return;\r\n            void (async () => {\r\n              await confirmAction();\r\n              setConfirmOpen(false);\r\n              setConfirmAction(null);\r\n            })();\r\n          }}\r\n        />\r\n\r\n        <Modal\r\n          open={editOpen}\r\n          onClose={() => {\r\n            if (busy) return;\r\n            setEditOpen(false);\r\n          }}\r\n          title={editId ? \"Edit override\" : \"New override\"}\r\n          footer={\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              <Button variant=\"outline\" onClick={() => setEditOpen(false)} disabled={busy}>\r\n                Cancel\r\n              </Button>\r\n              <Button disabled={busy} type=\"submit\" form=\"rb_service_override_form\">\r\n                {busy ? \"Saving...\" : \"Save\"}\r\n              </Button>\r\n            </div>\r\n          }\r\n        >\r\n          <form id=\"rb_service_override_form\" className=\"space-y-3\" onSubmit={onSave}>\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\" htmlFor=\"override_service\">\r\n                Service\r\n              </label>\r\n              <select\r\n                id=\"override_service\"\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={editServiceId ?? \"\"}\r\n                onChange={(e) => {\r\n                  const raw = e.target.value;\r\n                  if (!raw) {\r\n                    setEditServiceId(null);\r\n                    return;\r\n                  }\r\n                  const n = Number(raw);\r\n                  setEditServiceId(Number.isFinite(n) ? n : null);\r\n                }}\r\n                disabled={busy}\r\n              >\r\n                {services\r\n                  .slice()\r\n                  .sort((a, b) => a.name.localeCompare(b.name))\r\n                  .map((s) => (\r\n                    <option key={s.id} value={s.id}>\r\n                      {s.name}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-2\">\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\" htmlFor=\"override_scope_type\">\r\n                  Scope type\r\n                </label>\r\n                <select\r\n                  id=\"override_scope_type\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                  value={editScopeType}\r\n                  onChange={(e) => {\r\n                    const v = e.target.value as ApiServicePriceOverride[\"scope_type\"];\r\n                    setEditScopeType(v);\r\n                    setEditScopeRefId(null);\r\n                  }}\r\n                  disabled={busy}\r\n                >\r\n                  <option value=\"device\">device</option>\r\n                  <option value=\"brand\">brand</option>\r\n                  <option value=\"type\">type</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\" htmlFor=\"override_scope_ref\">\r\n                  Scope value\r\n                </label>\r\n                <select\r\n                  id=\"override_scope_ref\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                  value={editScopeRefId ?? \"\"}\r\n                  onChange={(e) => {\r\n                    const raw = e.target.value;\r\n                    if (!raw) {\r\n                      setEditScopeRefId(null);\r\n                      return;\r\n                    }\r\n                    const n = Number(raw);\r\n                    setEditScopeRefId(Number.isFinite(n) ? n : null);\r\n                  }}\r\n                  disabled={busy}\r\n                >\r\n                  {scopeOptions.map((o) => (\r\n                    <option key={`${editScopeType}:${o.id}`} value={o.id}>\r\n                      {o.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 gap-3 sm:grid-cols-3\">\r\n              <div className=\"space-y-1 sm:col-span-2\">\r\n                <label className=\"text-sm font-medium\" htmlFor=\"override_price\">\r\n                  Override price\r\n                </label>\r\n                <input\r\n                  id=\"override_price\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                  value={editPrice}\r\n                  onChange={(e) => setEditPrice(e.target.value)}\r\n                  disabled={busy}\r\n                  inputMode=\"decimal\"\r\n                  placeholder=\"Leave blank to use base\"\r\n                />\r\n              </div>\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium\" htmlFor=\"override_currency\">\r\n                  Currency\r\n                </label>\r\n                <input\r\n                  id=\"override_currency\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                  value={editCurrency}\r\n                  onChange={(e) => setEditCurrency(e.target.value)}\r\n                  disabled={busy}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\" htmlFor=\"override_tax\">\r\n                Tax\r\n              </label>\r\n              <select\r\n                id=\"override_tax\"\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={editTaxId ?? \"\"}\r\n                onChange={(e) => {\r\n                  const raw = e.target.value;\r\n                  if (!raw) {\r\n                    setEditTaxId(null);\r\n                    return;\r\n                  }\r\n                  const n = Number(raw);\r\n                  setEditTaxId(Number.isFinite(n) ? n : null);\r\n                }}\r\n                disabled={busy}\r\n              >\r\n                <option value=\"\">(none)</option>\r\n                {taxes\r\n                  .slice()\r\n                  .sort((a, b) => a.name.localeCompare(b.name))\r\n                  .map((t) => (\r\n                    <option key={t.id} value={t.id}>\r\n                      {t.name}\r\n                    </option>\r\n                  ))}\r\n              </select>\r\n            </div>\r\n\r\n            <label className=\"flex items-center gap-2 text-sm\">\r\n              <input type=\"checkbox\" checked={editIsActive} onChange={(e) => setEditIsActive(e.target.checked)} disabled={busy} />\r\n              Active\r\n            </label>\r\n          </form>\r\n        </Modal>\r\n\r\n        {status ? <div className=\"text-sm text-green-700\">{status}</div> : null}\r\n        {error ? <div className=\"text-sm text-red-600\">{error}</div> : null}\r\n\r\n        <ListPageShell\r\n          title=\"Service Price Overrides\"\r\n          description=\"Override service pricing by device, brand, or type.\"\r\n          actions={\r\n            <Button variant=\"primary\" size=\"sm\" onClick={openCreate} disabled={!canManage || loading || busy}>\r\n              New override\r\n            </Button>\r\n          }\r\n          loading={loading}\r\n          error={null}\r\n          empty={!loading && !error && overrides.length === 0}\r\n          emptyTitle=\"No overrides\"\r\n          emptyDescription=\"Create overrides to adjust service pricing per device/type/brand.\" \r\n        >\r\n          <Card className=\"shadow-none\">\r\n            <CardContent className=\"pt-5\">\r\n              <DataTable\r\n                title={typeof tenantSlug === \"string\" ? `Service Price Overrides · ${tenantSlug}` : \"Service Price Overrides\"}\r\n                data={pageRows}\r\n                loading={loading}\r\n                emptyMessage=\"No overrides.\"\r\n                columns={columns}\r\n                getRowId={(row) => row.id}\r\n                search={{ placeholder: \"Search overrides...\" }}\r\n                server={{\r\n                  query,\r\n                  onQueryChange: (value) => {\r\n                    setQuery(value);\r\n                    setPageIndex(0);\r\n                  },\r\n                  pageIndex,\r\n                  onPageIndexChange: setPageIndex,\r\n                  pageSize,\r\n                  onPageSizeChange: (value) => {\r\n                    setPageSize(value);\r\n                    setPageIndex(0);\r\n                  },\r\n                  totalRows,\r\n                }}\r\n              />\r\n            </CardContent>\r\n          </Card>\r\n        </ListPageShell>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}