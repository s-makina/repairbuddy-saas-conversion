{"version":3,"sources":["../../../../../frontend/src/app/app/%5Btenant%5D/settings/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { ApiError } from \"@/lib/api\";\r\nimport type { Tenant } from \"@/lib/types\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { Alert } from \"@/components/ui/Alert\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/Card\";\r\nimport { Input } from \"@/components/ui/Input\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/Tabs\";\r\nimport { getSetup, updateSetup } from \"@/lib/setup\";\r\n\r\ntype SettingsPayload = {\r\n  tenant: Tenant;\r\n  setup: {\r\n    completed_at?: string | null;\r\n    step?: string | null;\r\n    state?: Record<string, unknown> | null;\r\n  };\r\n};\r\n\r\nconst fallbackTimezones = [\r\n  \"UTC\",\r\n  \"Europe/London\",\r\n  \"Europe/Berlin\",\r\n  \"Europe/Paris\",\r\n  \"Africa/Cairo\",\r\n  \"Asia/Dubai\",\r\n  \"Asia/Riyadh\",\r\n  \"Asia/Kolkata\",\r\n  \"Asia/Singapore\",\r\n  \"Asia/Tokyo\",\r\n  \"Australia/Sydney\",\r\n  \"America/New_York\",\r\n  \"America/Chicago\",\r\n  \"America/Denver\",\r\n  \"America/Los_Angeles\",\r\n];\r\n\r\nexport default function TenantSettingsPage() {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const params = useParams() as { tenant?: string; business?: string };\r\n  const tenantSlug = params.business ?? params.tenant;\r\n\r\n  useEffect(() => {\r\n    if (typeof tenantSlug === \"string\" && tenantSlug.length > 0) {\r\n      router.replace(`/app/${tenantSlug}/business-settings?section=company-profile`);\r\n    }\r\n  }, [router, tenantSlug]);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [uploadingLogo, setUploadingLogo] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [status, setStatus] = useState<string | null>(null);\r\n  const [activeTab, setActiveTab] = useState(\"company\");\r\n\r\n  const [data, setData] = useState<SettingsPayload | null>(null);\r\n\r\n  const [name, setName] = useState(\"\");\r\n  const [displayName, setDisplayName] = useState(\"\");\r\n  const [primaryContactName, setPrimaryContactName] = useState(\"\");\r\n  const [registrationNumber, setRegistrationNumber] = useState(\"\");\r\n  const [contactEmail, setContactEmail] = useState(\"\");\r\n  const [contactPhone, setContactPhone] = useState(\"\");\r\n  const [currency, setCurrency] = useState(\"USD\");\r\n  const [billingCountry, setBillingCountry] = useState(\"\");\r\n  const [billingVatNumber, setBillingVatNumber] = useState(\"\");\r\n\r\n  const [addressLine1, setAddressLine1] = useState(\"\");\r\n  const [addressLine2, setAddressLine2] = useState(\"\");\r\n  const [addressCity, setAddressCity] = useState(\"\");\r\n  const [addressState, setAddressState] = useState(\"\");\r\n  const [addressPostalCode, setAddressPostalCode] = useState(\"\");\r\n\r\n  const [brandColor, setBrandColor] = useState(\"#2563eb\");\r\n  const [supportEmail, setSupportEmail] = useState(\"\");\r\n  const [supportPhone, setSupportPhone] = useState(\"\");\r\n  const [website, setWebsite] = useState(\"\");\r\n  const [documentFooter, setDocumentFooter] = useState(\"\");\r\n\r\n  const [timezone, setTimezone] = useState(\"UTC\");\r\n  const [workingHours, setWorkingHours] = useState(\"Mon–Fri 09:00–17:00\");\r\n  const [defaultLaborRate, setDefaultLaborRate] = useState(\"\");\r\n  const [warrantyTerms, setWarrantyTerms] = useState(\"\");\r\n  const [notifyStatusChange, setNotifyStatusChange] = useState(true);\r\n  const [notifyInvoiceCreated, setNotifyInvoiceCreated] = useState(false);\r\n\r\n  const [taxRegistered, setTaxRegistered] = useState(false);\r\n  const [invoicePrefix, setInvoicePrefix] = useState(\"RB\");\r\n\r\n  const [teamInvites, setTeamInvites] = useState(\"\");\r\n  const [teamDefaultRole, setTeamDefaultRole] = useState(\"member\");\r\n\r\n  const timezoneOptions = useMemo(() => {\r\n    try {\r\n      const anyIntl = Intl as unknown as { supportedValuesOf?: (key: string) => string[] };\r\n      const values = typeof anyIntl.supportedValuesOf === \"function\" ? anyIntl.supportedValuesOf(\"timeZone\") : null;\r\n      return Array.isArray(values) && values.length > 0 ? values : fallbackTimezones;\r\n    } catch {\r\n      return fallbackTimezones;\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function load() {\r\n      try {\r\n        setError(null);\r\n        setStatus(null);\r\n        setLoading(true);\r\n\r\n        const res = (await getSetup(String(tenantSlug))) as SettingsPayload;\r\n        if (!alive) return;\r\n\r\n        setData(res);\r\n\r\n        const t = res.tenant;\r\n        setName(t.name ?? \"\");\r\n        setContactEmail(t.contact_email ?? \"\");\r\n        setContactPhone(t.contact_phone ?? \"\");\r\n        setCurrency((t.currency ?? \"USD\").toUpperCase());\r\n        setBillingCountry((t.billing_country ?? \"\").toUpperCase());\r\n        setBillingVatNumber(t.billing_vat_number ?? \"\");\r\n        setBrandColor(t.brand_color ?? \"#2563eb\");\r\n        setTimezone(t.timezone ?? \"UTC\");\r\n\r\n        const addr = (t.billing_address_json ?? {}) as Record<string, unknown>;\r\n        setAddressLine1(typeof addr.line1 === \"string\" ? addr.line1 : \"\");\r\n        setAddressLine2(typeof addr.line2 === \"string\" ? addr.line2 : \"\");\r\n        setAddressCity(typeof addr.city === \"string\" ? addr.city : \"\");\r\n        setAddressState(typeof addr.state === \"string\" ? addr.state : \"\");\r\n        setAddressPostalCode(typeof addr.postal_code === \"string\" ? addr.postal_code : \"\");\r\n\r\n        const state = (res.setup?.state ?? {}) as Record<string, unknown>;\r\n        const identity = (state.identity ?? {}) as Record<string, unknown>;\r\n        const branding = (state.branding ?? {}) as Record<string, unknown>;\r\n        const operations = (state.operations ?? {}) as Record<string, unknown>;\r\n        const tax = (state.tax ?? {}) as Record<string, unknown>;\r\n        const team = (state.team ?? {}) as Record<string, unknown>;\r\n\r\n        setDisplayName(typeof identity.display_name === \"string\" ? identity.display_name : \"\");\r\n        setPrimaryContactName(typeof identity.primary_contact_name === \"string\" ? identity.primary_contact_name : \"\");\r\n        setRegistrationNumber(typeof identity.registration_number === \"string\" ? identity.registration_number : \"\");\r\n\r\n        setSupportEmail(typeof branding.support_email === \"string\" ? branding.support_email : \"\");\r\n        setSupportPhone(typeof branding.support_phone === \"string\" ? branding.support_phone : \"\");\r\n        setWebsite(typeof branding.website === \"string\" ? branding.website : \"\");\r\n        setDocumentFooter(typeof branding.document_footer === \"string\" ? branding.document_footer : \"\");\r\n\r\n        setWorkingHours(typeof operations.working_hours === \"string\" ? operations.working_hours : \"Mon–Fri 09:00–17:00\");\r\n        setDefaultLaborRate(typeof operations.default_labor_rate === \"string\" ? operations.default_labor_rate : \"\");\r\n        setWarrantyTerms(typeof operations.warranty_terms === \"string\" ? operations.warranty_terms : \"\");\r\n        setNotifyStatusChange(typeof operations.notify_status_change === \"boolean\" ? operations.notify_status_change : true);\r\n        setNotifyInvoiceCreated(typeof operations.notify_invoice_created === \"boolean\" ? operations.notify_invoice_created : false);\r\n\r\n        setTaxRegistered(typeof tax.tax_registered === \"boolean\" ? tax.tax_registered : false);\r\n        setInvoicePrefix(typeof tax.invoice_prefix === \"string\" ? tax.invoice_prefix : \"RB\");\r\n\r\n        setTeamInvites(typeof team.invites === \"string\" ? team.invites : \"\");\r\n        setTeamDefaultRole(typeof team.default_role === \"string\" ? team.default_role : \"member\");\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setError(e instanceof Error ? e.message : \"Failed to load settings.\");\r\n        setData(null);\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    if (typeof tenantSlug === \"string\" && tenantSlug.length > 0) {\r\n      void load();\r\n    } else {\r\n      setLoading(false);\r\n      setError(\"Business is missing.\");\r\n    }\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [tenantSlug]);\r\n\r\n  const billingAddressJson = useMemo(() => {\r\n    const out: Record<string, string> = {};\r\n    if (addressLine1.trim()) out.line1 = addressLine1.trim();\r\n    if (addressLine2.trim()) out.line2 = addressLine2.trim();\r\n    if (addressCity.trim()) out.city = addressCity.trim();\r\n    if (addressState.trim()) out.state = addressState.trim();\r\n    if (addressPostalCode.trim()) out.postal_code = addressPostalCode.trim();\r\n    return Object.keys(out).length > 0 ? out : null;\r\n  }, [addressCity, addressLine1, addressLine2, addressPostalCode, addressState]);\r\n\r\n  const initial = data?.tenant;\r\n  const initialSetupState = useMemo(() => (data?.setup?.state ?? null) as Record<string, unknown> | null, [data?.setup?.state]);\r\n\r\n  const hasChanges = useMemo(() => {\r\n    if (!initial) return false;\r\n\r\n    const initAddr = (initial.billing_address_json ?? {}) as Record<string, unknown>;\r\n    const initAddrNormalized: Record<string, string> = {\r\n      line1: typeof initAddr.line1 === \"string\" ? initAddr.line1 : \"\",\r\n      line2: typeof initAddr.line2 === \"string\" ? initAddr.line2 : \"\",\r\n      city: typeof initAddr.city === \"string\" ? initAddr.city : \"\",\r\n      state: typeof initAddr.state === \"string\" ? initAddr.state : \"\",\r\n      postal_code: typeof initAddr.postal_code === \"string\" ? initAddr.postal_code : \"\",\r\n    };\r\n\r\n    const currentAddrNormalized: Record<string, string> = {\r\n      line1: addressLine1,\r\n      line2: addressLine2,\r\n      city: addressCity,\r\n      state: addressState,\r\n      postal_code: addressPostalCode,\r\n    };\r\n\r\n    const addrChanged = JSON.stringify(initAddrNormalized) !== JSON.stringify(currentAddrNormalized);\r\n\r\n    const s = (initialSetupState ?? {}) as Record<string, unknown>;\r\n    const identity = (s.identity ?? {}) as Record<string, unknown>;\r\n    const branding = (s.branding ?? {}) as Record<string, unknown>;\r\n    const operations = (s.operations ?? {}) as Record<string, unknown>;\r\n    const tax = (s.tax ?? {}) as Record<string, unknown>;\r\n    const team = (s.team ?? {}) as Record<string, unknown>;\r\n\r\n    return (\r\n      name.trim() !== (initial.name ?? \"\").trim() ||\r\n      (displayName.trim() || \"\") !== (typeof identity.display_name === \"string\" ? identity.display_name.trim() : \"\") ||\r\n      (primaryContactName.trim() || \"\") !==\r\n        (typeof identity.primary_contact_name === \"string\" ? identity.primary_contact_name.trim() : \"\") ||\r\n      (registrationNumber.trim() || \"\") !== (typeof identity.registration_number === \"string\" ? identity.registration_number.trim() : \"\") ||\r\n      (contactEmail.trim() || \"\") !== ((initial.contact_email ?? \"\").trim() || \"\") ||\r\n      (contactPhone.trim() || \"\") !== ((initial.contact_phone ?? \"\").trim() || \"\") ||\r\n      currency.trim().toUpperCase() !== (initial.currency ?? \"USD\").toUpperCase() ||\r\n      billingCountry.trim().toUpperCase() !== (initial.billing_country ?? \"\").toUpperCase() ||\r\n      (billingVatNumber.trim() || \"\") !== ((initial.billing_vat_number ?? \"\").trim() || \"\") ||\r\n      (brandColor.trim() || \"\") !== ((initial.brand_color ?? \"\").trim() || \"\") ||\r\n      (timezone.trim() || \"\") !== ((initial.timezone ?? \"\").trim() || \"\") ||\r\n      (supportEmail.trim() || \"\") !== (typeof branding.support_email === \"string\" ? branding.support_email.trim() : \"\") ||\r\n      (supportPhone.trim() || \"\") !== (typeof branding.support_phone === \"string\" ? branding.support_phone.trim() : \"\") ||\r\n      (website.trim() || \"\") !== (typeof branding.website === \"string\" ? branding.website.trim() : \"\") ||\r\n      (documentFooter.trim() || \"\") !== (typeof branding.document_footer === \"string\" ? branding.document_footer.trim() : \"\") ||\r\n      (workingHours.trim() || \"\") !== (typeof operations.working_hours === \"string\" ? operations.working_hours.trim() : \"\") ||\r\n      (defaultLaborRate.trim() || \"\") !== (typeof operations.default_labor_rate === \"string\" ? operations.default_labor_rate.trim() : \"\") ||\r\n      (warrantyTerms.trim() || \"\") !== (typeof operations.warranty_terms === \"string\" ? operations.warranty_terms.trim() : \"\") ||\r\n      notifyStatusChange !== (typeof operations.notify_status_change === \"boolean\" ? operations.notify_status_change : true) ||\r\n      notifyInvoiceCreated !== (typeof operations.notify_invoice_created === \"boolean\" ? operations.notify_invoice_created : false) ||\r\n      taxRegistered !== (typeof tax.tax_registered === \"boolean\" ? tax.tax_registered : false) ||\r\n      (invoicePrefix.trim() || \"\") !== (typeof tax.invoice_prefix === \"string\" ? tax.invoice_prefix.trim() : \"\") ||\r\n      (teamInvites.trim() || \"\") !== (typeof team.invites === \"string\" ? team.invites.trim() : \"\") ||\r\n      (teamDefaultRole.trim() || \"\") !== (typeof team.default_role === \"string\" ? team.default_role.trim() : \"\") ||\r\n      addrChanged\r\n    );\r\n  }, [\r\n    addressCity,\r\n    addressLine1,\r\n    addressLine2,\r\n    addressPostalCode,\r\n    addressState,\r\n    billingCountry,\r\n    billingVatNumber,\r\n    contactEmail,\r\n    contactPhone,\r\n    currency,\r\n    brandColor,\r\n    defaultLaborRate,\r\n    displayName,\r\n    documentFooter,\r\n    initial,\r\n    initialSetupState,\r\n    invoicePrefix,\r\n    name,\r\n    notifyInvoiceCreated,\r\n    notifyStatusChange,\r\n    primaryContactName,\r\n    registrationNumber,\r\n    supportEmail,\r\n    supportPhone,\r\n    taxRegistered,\r\n    teamDefaultRole,\r\n    teamInvites,\r\n    timezone,\r\n    warrantyTerms,\r\n    website,\r\n    workingHours,\r\n  ]);\r\n\r\n  const onUploadLogo = React.useCallback(\r\n    async (file: File) => {\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n      setUploadingLogo(true);\r\n      setError(null);\r\n      try {\r\n        const payload = await updateSetup(String(tenantSlug), { logo: file });\r\n        setData((prev) =>\r\n          prev\r\n            ? {\r\n                ...prev,\r\n                tenant: payload.tenant,\r\n              }\r\n            : prev,\r\n        );\r\n      } catch (e) {\r\n        setError(e instanceof Error ? e.message : \"Failed to upload logo.\");\r\n      } finally {\r\n        setUploadingLogo(false);\r\n      }\r\n    },\r\n    [tenantSlug],\r\n  );\r\n\r\n  async function onSave(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setStatus(null);\r\n\r\n    if (!name.trim()) {\r\n      setError(\"Company name is required.\");\r\n      return;\r\n    }\r\n\r\n    const cur = currency.trim().toUpperCase();\r\n    if (cur.length !== 3) {\r\n      setError(\"Currency must be a 3-letter code (e.g. USD).\");\r\n      return;\r\n    }\r\n\r\n    const country = billingCountry.trim().toUpperCase();\r\n    if (country && country.length !== 2) {\r\n      setError(\"Billing country must be a 2-letter code (e.g. US).\");\r\n      return;\r\n    }\r\n\r\n    if (!timezone.trim()) {\r\n      setError(\"Timezone is required.\");\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n\r\n    try {\r\n      const prevSetupState = (data?.setup?.state ?? {}) as Record<string, unknown>;\r\n      const nextSetupState: Record<string, unknown> = {\r\n        ...prevSetupState,\r\n        identity: {\r\n          display_name: displayName.trim() || null,\r\n          primary_contact_name: primaryContactName.trim() || null,\r\n          registration_number: registrationNumber.trim() || null,\r\n        },\r\n        branding: {\r\n          support_email: supportEmail.trim() || null,\r\n          support_phone: supportPhone.trim() || null,\r\n          website: website.trim() || null,\r\n          document_footer: documentFooter.trim() || null,\r\n        },\r\n        operations: {\r\n          working_hours: workingHours.trim() || null,\r\n          default_labor_rate: defaultLaborRate.trim() || null,\r\n          warranty_terms: warrantyTerms.trim() || null,\r\n          notify_status_change: Boolean(notifyStatusChange),\r\n          notify_invoice_created: Boolean(notifyInvoiceCreated),\r\n        },\r\n        tax: {\r\n          tax_registered: Boolean(taxRegistered),\r\n          invoice_prefix: invoicePrefix.trim() || null,\r\n        },\r\n        team: {\r\n          invites: teamInvites.trim() || null,\r\n          default_role: teamDefaultRole.trim() || null,\r\n        },\r\n      };\r\n\r\n      const payload = await updateSetup(String(tenantSlug), {\r\n        name: name.trim() || undefined,\r\n        contact_email: contactEmail.trim() || null,\r\n        contact_phone: contactPhone.trim() || null,\r\n        billing_country: country || null,\r\n        billing_vat_number: billingVatNumber.trim() || null,\r\n        billing_address_json: billingAddressJson,\r\n        currency: cur,\r\n        timezone: timezone.trim() || null,\r\n        language: \"en\",\r\n        brand_color: brandColor.trim() || null,\r\n        setup_state: nextSetupState,\r\n      });\r\n\r\n      setData((prev) =>\r\n        prev\r\n          ? {\r\n              ...prev,\r\n              tenant: payload.tenant,\r\n              setup: {\r\n                ...prev.setup,\r\n                state: nextSetupState,\r\n              },\r\n            }\r\n          : prev,\r\n      );\r\n      await auth.refresh();\r\n      setStatus(\"Settings saved.\");\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to save settings.\");\r\n      }\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"settings.manage\">\r\n      <div className=\"space-y-6\">\r\n        <PageHeader\r\n          title=\"Settings\"\r\n          description=\"Company and billing settings for this business.\"\r\n          actions={\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => void auth.refresh()} disabled={auth.loading}>\r\n              Refresh session\r\n            </Button>\r\n          }\r\n        />\r\n\r\n        {auth.isImpersonating ? (\r\n          <Alert variant=\"warning\" title=\"Impersonation active\">\r\n            Any changes you make here will be audited.\r\n          </Alert>\r\n        ) : null}\r\n\r\n        {error ? (\r\n          <Alert variant=\"danger\" title=\"Could not load or save settings\">\r\n            {error}\r\n          </Alert>\r\n        ) : null}\r\n\r\n        {status ? (\r\n          <Alert variant=\"success\" title=\"Success\">\r\n            {status}\r\n          </Alert>\r\n        ) : null}\r\n\r\n        {loading ? <div className=\"text-sm text-zinc-500\">Loading settings...</div> : null}\r\n\r\n        {!loading && data ? (\r\n          <form className=\"space-y-6\" onSubmit={onSave}>\r\n            <Tabs value={activeTab} onValueChange={setActiveTab} defaultValue=\"company\">\r\n              <TabsList>\r\n                <TabsTrigger value=\"company\">Company</TabsTrigger>\r\n                <TabsTrigger value=\"billing\">Billing</TabsTrigger>\r\n                <TabsTrigger value=\"branding\">Branding</TabsTrigger>\r\n                <TabsTrigger value=\"operations\">Operations</TabsTrigger>\r\n                <TabsTrigger value=\"tax\">Tax</TabsTrigger>\r\n                <TabsTrigger value=\"team\">Team</TabsTrigger>\r\n              </TabsList>\r\n\r\n              <TabsContent value=\"company\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Company</CardTitle>\r\n                    <CardDescription>Basic business identity and contact information.</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_name\">\r\n                          Company name\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_name\"\r\n                          value={name}\r\n                          onChange={(e) => setName(e.target.value)}\r\n                          disabled={saving}\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_display_name\">\r\n                          Display name\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_display_name\"\r\n                          value={displayName}\r\n                          onChange={(e) => setDisplayName(e.target.value)}\r\n                          disabled={saving}\r\n                          placeholder=\"Defaults to business name\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_primary_contact\">\r\n                          Primary contact person name\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_primary_contact\"\r\n                          value={primaryContactName}\r\n                          onChange={(e) => setPrimaryContactName(e.target.value)}\r\n                          disabled={saving}\r\n                          placeholder=\"e.g. Alex Johnson\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_registration_number\">\r\n                          Business registration number\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_registration_number\"\r\n                          value={registrationNumber}\r\n                          onChange={(e) => setRegistrationNumber(e.target.value)}\r\n                          disabled={saving}\r\n                          placeholder=\"Optional\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_contact_email\">\r\n                          Contact email\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_contact_email\"\r\n                          value={contactEmail}\r\n                          onChange={(e) => setContactEmail(e.target.value)}\r\n                          disabled={saving}\r\n                          type=\"email\"\r\n                          placeholder=\"billing@company.com\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_contact_phone\">\r\n                          Contact phone\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_contact_phone\"\r\n                          value={contactPhone}\r\n                          onChange={(e) => setContactPhone(e.target.value)}\r\n                          disabled={saving}\r\n                          placeholder=\"+1 555 123 4567\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"billing\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Billing</CardTitle>\r\n                    <CardDescription>Used for invoices and tax calculation.</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_currency\">\r\n                          Currency\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_currency\"\r\n                          value={currency}\r\n                          onChange={(e) => setCurrency(e.target.value.toUpperCase().slice(0, 3))}\r\n                          disabled={saving}\r\n                          placeholder=\"USD\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_billing_country\">\r\n                          Billing country\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_billing_country\"\r\n                          value={billingCountry}\r\n                          onChange={(e) => setBillingCountry(e.target.value.toUpperCase().slice(0, 2))}\r\n                          disabled={saving}\r\n                          placeholder=\"US\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"tenant_billing_vat\">\r\n                          VAT number\r\n                        </label>\r\n                        <Input\r\n                          id=\"tenant_billing_vat\"\r\n                          value={billingVatNumber}\r\n                          onChange={(e) => setBillingVatNumber(e.target.value)}\r\n                          disabled={saving}\r\n                          placeholder=\"Optional\"\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"addr1\">\r\n                          Address line 1\r\n                        </label>\r\n                        <Input\r\n                          id=\"addr1\"\r\n                          value={addressLine1}\r\n                          onChange={(e) => setAddressLine1(e.target.value)}\r\n                          disabled={saving}\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"addr2\">\r\n                          Address line 2\r\n                        </label>\r\n                        <Input\r\n                          id=\"addr2\"\r\n                          value={addressLine2}\r\n                          onChange={(e) => setAddressLine2(e.target.value)}\r\n                          disabled={saving}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"city\">\r\n                          City\r\n                        </label>\r\n                        <Input id=\"city\" value={addressCity} onChange={(e) => setAddressCity(e.target.value)} disabled={saving} />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"state\">\r\n                          State/Region\r\n                        </label>\r\n                        <Input\r\n                          id=\"state\"\r\n                          value={addressState}\r\n                          onChange={(e) => setAddressState(e.target.value)}\r\n                          disabled={saving}\r\n                        />\r\n                      </div>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"postal\">\r\n                          Postal code\r\n                        </label>\r\n                        <Input\r\n                          id=\"postal\"\r\n                          value={addressPostalCode}\r\n                          onChange={(e) => setAddressPostalCode(e.target.value)}\r\n                          disabled={saving}\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"branding\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Branding</CardTitle>\r\n                    <CardDescription>Customer-facing visuals and contact information.</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                      <div>\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">Brand color</label>\r\n                        <div className=\"mt-2 flex items-center gap-3\">\r\n                          <input\r\n                            type=\"color\"\r\n                            value={brandColor}\r\n                            onChange={(e) => setBrandColor(e.target.value)}\r\n                            className=\"h-10 w-14 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white shadow-sm\"\r\n                            aria-label=\"Brand color\"\r\n                            disabled={saving}\r\n                          />\r\n                          <Input value={brandColor} onChange={(e) => setBrandColor(e.target.value)} placeholder=\"#2563eb\" disabled={saving} />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">Logo</label>\r\n                        <div className=\"mt-2 flex items-center gap-3\">\r\n                          {data?.tenant?.logo_url ? (\r\n                            // eslint-disable-next-line @next/next/no-img-element\r\n                            <img\r\n                              src={data.tenant.logo_url}\r\n                              alt=\"Logo\"\r\n                              className=\"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white object-contain\"\r\n                            />\r\n                          ) : (\r\n                            <div className=\"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white\" />\r\n                          )}\r\n\r\n                          <div className=\"flex-1\">\r\n                            <input\r\n                              type=\"file\"\r\n                              accept=\"image/png,image/jpeg,image/webp\"\r\n                              disabled={uploadingLogo}\r\n                              onChange={(e) => {\r\n                                const file = e.target.files && e.target.files[0] ? e.target.files[0] : null;\r\n                                if (file) {\r\n                                  void onUploadLogo(file);\r\n                                }\r\n                              }}\r\n                              className=\"block w-full text-sm text-zinc-700 file:mr-3 file:rounded-[var(--rb-radius-sm)] file:border-0 file:bg-[var(--rb-surface-muted)] file:px-3 file:py-2 file:text-sm file:font-medium file:text-[var(--rb-text)] hover:file:bg-[color:color-mix(in_srgb,var(--rb-surface-muted),black_4%)]\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"mt-2 text-xs text-zinc-500\">{uploadingLogo ? \"Uploading...\" : \"PNG/JPG/WEBP up to 5MB\"}</div>\r\n                      </div>\r\n\r\n                      <div className=\"sm:col-span-2\">\r\n                        <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Customer-facing contact (optional)</div>\r\n                        <div className=\"mt-2 grid gap-3 sm:grid-cols-2\">\r\n                          <Input\r\n                            value={supportEmail}\r\n                            onChange={(e) => setSupportEmail(e.target.value)}\r\n                            placeholder=\"Public support email\"\r\n                            disabled={saving}\r\n                          />\r\n                          <Input\r\n                            value={supportPhone}\r\n                            onChange={(e) => setSupportPhone(e.target.value)}\r\n                            placeholder=\"Public support phone\"\r\n                            disabled={saving}\r\n                          />\r\n                          <div className=\"sm:col-span-2\">\r\n                            <Input value={website} onChange={(e) => setWebsite(e.target.value)} placeholder=\"Website (optional)\" disabled={saving} />\r\n                          </div>\r\n                          <div className=\"sm:col-span-2\">\r\n                            <Input\r\n                              value={documentFooter}\r\n                              onChange={(e) => setDocumentFooter(e.target.value)}\r\n                              placeholder=\"Document footer text (optional)\"\r\n                              disabled={saving}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"operations\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Operations</CardTitle>\r\n                    <CardDescription>Defaults and notifications.</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                      <div>\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">Timezone</label>\r\n                        <div className=\"mt-1\">\r\n                          <Input value={timezone} onChange={(e) => setTimezone(e.target.value)} placeholder=\"UTC\" list=\"rb-timezones\" disabled={saving} />\r\n                          <datalist id=\"rb-timezones\">\r\n                            {timezoneOptions.map((tz) => (\r\n                              <option key={tz} value={tz} />\r\n                            ))}\r\n                          </datalist>\r\n                        </div>\r\n                        <div className=\"mt-2 text-xs text-zinc-500\">Example: UTC, Europe/Berlin, America/New_York</div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">Language</label>\r\n                        <div className=\"mt-1\">\r\n                          <Input value=\"English (en)\" disabled />\r\n                        </div>\r\n                        <div className=\"mt-2 text-xs text-zinc-500\">Currently supported language: English</div>\r\n                      </div>\r\n\r\n                      <div className=\"sm:col-span-2\">\r\n                        <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Operations defaults (optional)</div>\r\n                        <div className=\"mt-2 grid gap-3 sm:grid-cols-2\">\r\n                          <div className=\"sm:col-span-2\">\r\n                            <Input\r\n                              value={workingHours}\r\n                              onChange={(e) => setWorkingHours(e.target.value)}\r\n                              placeholder=\"Working hours (e.g. Mon–Fri 09:00–17:00)\"\r\n                              disabled={saving}\r\n                            />\r\n                          </div>\r\n                          <Input\r\n                            value={defaultLaborRate}\r\n                            onChange={(e) => setDefaultLaborRate(e.target.value)}\r\n                            placeholder=\"Default labor rate (optional)\"\r\n                            disabled={saving}\r\n                          />\r\n                          <Input\r\n                            value={warrantyTerms}\r\n                            onChange={(e) => setWarrantyTerms(e.target.value)}\r\n                            placeholder=\"Default warranty terms (optional)\"\r\n                            disabled={saving}\r\n                          />\r\n                          <label className=\"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={notifyStatusChange}\r\n                              onChange={(e) => setNotifyStatusChange(e.target.checked)}\r\n                              disabled={saving}\r\n                            />\r\n                            Email on status change\r\n                          </label>\r\n                          <label className=\"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={notifyInvoiceCreated}\r\n                              onChange={(e) => setNotifyInvoiceCreated(e.target.checked)}\r\n                              disabled={saving}\r\n                            />\r\n                            Email on invoice created\r\n                          </label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"tax\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Tax</CardTitle>\r\n                    <CardDescription>VAT and invoice numbering preferences.</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                      <div className=\"sm:col-span-2\">\r\n                        <label className=\"flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                          <input type=\"checkbox\" checked={taxRegistered} onChange={(e) => setTaxRegistered(e.target.checked)} disabled={saving} />\r\n                          Tax/VAT registered?\r\n                        </label>\r\n                        <div className=\"mt-2 text-xs text-zinc-500\">If enabled, VAT number may be required for certain billing flows.</div>\r\n                      </div>\r\n\r\n                      <div className=\"sm:col-span-2\">\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">VAT number</label>\r\n                        <div className=\"mt-1\">\r\n                          <Input\r\n                            value={billingVatNumber}\r\n                            onChange={(e) => setBillingVatNumber(e.target.value)}\r\n                            placeholder=\"EU123456789\"\r\n                            disabled={saving}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invoice prefix (optional)</label>\r\n                        <div className=\"mt-1\">\r\n                          <Input value={invoicePrefix} onChange={(e) => setInvoicePrefix(e.target.value)} placeholder=\"RB\" disabled={saving} />\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div>\r\n                        <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invoice format preview</label>\r\n                        <div className=\"mt-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-zinc-700\">\r\n                          {(invoicePrefix.trim() || \"RB\") + \"-\" + String(tenantSlug || \"TENANT\") + \"-YYYY-000001\"}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n              <TabsContent value=\"team\">\r\n                <Card>\r\n                  <CardHeader>\r\n                    <CardTitle>Team</CardTitle>\r\n                    <CardDescription>Invite defaults (email sending not implemented yet).</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invite team members (optional)</label>\r\n                      <div className=\"mt-1\">\r\n                        <Input\r\n                          value={teamInvites}\r\n                          onChange={(e) => setTeamInvites(e.target.value)}\r\n                          placeholder=\"Emails separated by commas\"\r\n                          disabled={saving}\r\n                        />\r\n                      </div>\r\n                      <div className=\"mt-2 text-xs text-zinc-500\">Invites are stored for later processing.</div>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <label className=\"text-sm font-medium text-[var(--rb-text)]\">Default role for invites (optional)</label>\r\n                      <div className=\"mt-1\">\r\n                        <Input\r\n                          value={teamDefaultRole}\r\n                          onChange={(e) => setTeamDefaultRole(e.target.value)}\r\n                          placeholder=\"member\"\r\n                          disabled={saving}\r\n                        />\r\n                      </div>\r\n                      <div className=\"mt-2 text-xs text-zinc-500\">Example values: owner, member, technician, front_desk.</div>\r\n                    </div>\r\n                  </CardContent>\r\n                </Card>\r\n              </TabsContent>\r\n\r\n            </Tabs>\r\n\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              <Button type=\"submit\" disabled={saving || !hasChanges}>\r\n                {saving ? \"Saving...\" : \"Save changes\"}\r\n              </Button>\r\n            </div>\r\n          </form>\r\n        ) : null}\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}