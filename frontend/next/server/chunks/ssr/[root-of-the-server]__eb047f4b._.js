module.exports=[7160,a=>{"use strict";function b(...a){return a.filter(Boolean).join(" ")}a.s(["cn",()=>b])},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},87973,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},97867,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);function e({className:a,variant:e="primary",size:f="md",asChild:g=!1,type:h="button",disabled:i,onClick:j,children:k,...l}){let m=(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-[var(--rb-radius-sm)] text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",{sm:"h-8 px-3",md:"h-10 px-4",lg:"h-11 px-5"}[f],{primary:"bg-[var(--rb-blue)] text-white hover:opacity-90",secondary:"bg-[var(--rb-orange)] text-white hover:opacity-90",outline:"border border-[var(--rb-border)] bg-white text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]",ghost:"bg-transparent text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]"}[e],i?"pointer-events-none opacity-50":"",a);if(g){let a=c.default.Children.only(k);return c.default.isValidElement(a)?c.default.cloneElement(a,{className:(0,d.cn)(m,a.props?.className),"aria-disabled":!!i||void 0,tabIndex:i?-1:a.props?.tabIndex,onClick:b=>{if(i){b.preventDefault(),b.stopPropagation();return}j?.(b),a.props?.onClick?.(b)}}):null}return(0,b.jsx)("button",{className:m,type:h,disabled:i,onClick:j,...l,children:k})}a.s(["Button",()=>e])},77038,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},74601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},39693,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(45056);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},54260,a=>{"use strict";var b=a.i(57850),c=a.i(70579);function d({label:a="Loading",fullscreen:d=!0}){return(0,b.jsx)("div",{className:d?"min-h-screen flex items-center justify-center bg-[var(--rb-surface-muted)]":"flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(c.default,{alt:"99smartx",src:"/brand/repair-buddy-logo.png",width:160,height:42,priority:!0}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-6 w-6 rounded-full border-2 border-[var(--rb-border)] border-t-[var(--rb-orange)] animate-spin","aria-hidden":"true"}),(0,b.jsxs)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:[a,"..."]})]})]})})}a.s(["Preloader",()=>d])},67233,a=>{"use strict";var b=a.i(34075);let c={};async function d(a){let d=c[a];if(d)return d;let e=(0,b.apiFetch)(`/api/${a}/app/gate`).finally(()=>{delete c[a]});return c[a]=e,e}function e(a,b){let c=!!b.setup_completed_at;return"suspended"===b.tenant_status||"suspended"===b.subscription_status?`/${a}/suspended`:"none"===b.subscription_status?`/${a}/plans`:"pending_checkout"===b.subscription_status?`/${a}/checkout`:["trialing","active","past_due"].includes(b.subscription_status)&&!c?`/${a}/setup`:`/app/${a}`}a.s(["computeGateRedirect",()=>e,"getGate",()=>d])},91601,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(75458),f=a.i(54260),g=a.i(67233),h=a.i(34075);function i({children:a,adminOnly:i=!1,requiredPermission:j}){let k=(0,e.useAuth)(),l=(0,d.useRouter)(),m=(0,d.usePathname)(),n="/set-password",o=m===n||m.startsWith(`${n}/`),p=k.tenant?.slug??null,q=p?`/${p}/setup`:null,r=!!q&&(m===q||m.startsWith(`${q}/`)),s=p?`/app/${p}/branches/select`:null,t=!!s&&(m===s||m.startsWith(`${s}/`));return((0,c.useEffect)(()=>{if(!k.loading){if(!k.isAuthenticated)return void l.replace(`/login?next=${encodeURIComponent(m)}`);if(k.user?.must_change_password&&!o)return void l.replace(`${n}?next=${encodeURIComponent(m)}`);if(k.user&&!k.user.email_verified_at)return void l.replace(`/verify-email?email=${encodeURIComponent(k.user.email)}`);if(i&&!k.isAdmin||j&&!k.can(j))return void l.replace("/app");!k.isAdmin&&p&&(0,h.apiFetch)(`/api/${p}/app/security-status`).then(({mfa:a})=>{let b=m===`/app/${p}/security`||m.startsWith(`/app/${p}/security/`);return!a.enforced||a.compliant||b?(0,g.getGate)(p).then(({gate:a})=>{let b=(0,g.computeGateRedirect)(p,a),c=m===`/${p}/plans`||m.startsWith(`/${p}/plans/`),d=m===`/${p}/checkout`||m.startsWith(`/${p}/checkout/`),e=m===`/${p}/suspended`||m.startsWith(`/${p}/suspended/`),f=m===`/app/${p}`||m.startsWith(`/app/${p}/`),h=b===`/${p}/checkout`&&c;b===`/${p}/plans`&&c||b===`/${p}/checkout`&&d||b===`/${p}/suspended`&&e||b===`/${p}/setup`&&r||b===`/app/${p}`&&f||h||l.replace(b)}):void l.replace(`/app/${p}/security`)}).catch(a=>{if(a instanceof h.ApiError&&428===a.status){if("password_change_required"===(a.data&&"object"==typeof a.data&&"code"in a.data?String(a.data.code):null)){o||l.replace(`${n}?next=${encodeURIComponent(m)}`);return}!t&&s&&l.replace(`${s}?next=${encodeURIComponent(m)}`);return}a instanceof h.ApiError&&403===a.status||k.tenant?.setup_completed_at||r||l.replace(q??"/app")})}},[i,k,s,t,r,m,j,l,q,p]),k.loading)?(0,b.jsx)(f.Preloader,{}):k.isAuthenticated&&(!k.user||k.user.email_verified_at)&&(!i||k.isAdmin)&&(!j||k.can(j))?(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["RequireAuth",()=>i])},45067,a=>{"use strict";var b=a.i(57850),c=a.i(91601),d=a.i(75458),e=a.i(97867),f=a.i(93609);function g(){let a=(0,d.useAuth)(),g=(0,f.useRouter)();return(0,b.jsx)(c.RequireAuth,{children:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center px-6",children:(0,b.jsxs)("div",{className:"w-full max-w-md rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-6 shadow-[var(--rb-shadow)]",children:[(0,b.jsx)("div",{className:"text-base font-semibold text-[var(--rb-text)]",children:"Account suspended"}),(0,b.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:a.tenant?.suspension_reason?`Reason: ${a.tenant.suspension_reason}`:"Your workspace is suspended. Please contact support."}),(0,b.jsx)("div",{className:"mt-5 flex flex-col gap-2",children:(0,b.jsx)(e.Button,{variant:"outline",onClick:()=>{a.logout().then(()=>g.replace("/login"))},children:"Sign out"})})]})})})}a.s(["default",()=>g])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__eb047f4b._.js.map