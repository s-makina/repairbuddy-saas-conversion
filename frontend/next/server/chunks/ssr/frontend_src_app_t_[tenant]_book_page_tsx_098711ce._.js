module.exports=[84812,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(70579),e=a.i(59843),f=a.i(93609),g=a.i(89450),h=a.i(4600),i=a.i(75385),j=a.i(97867),k=a.i(29054),l=a.i(17933),m=a.i(39159),n=a.i(26606),o=a.i(33183),p=a.i(34075),q=a.i(7160),r=a.i(4148);function s(a){let b=Number(a);return Number.isFinite(b)&&b>0?Math.trunc(b):null}function t(a){if(a instanceof p.ApiError){let b=a.data;if(b&&"object"==typeof b&&"errors"in b){let a=b.errors;if(a&&"object"==typeof a){let b=Object.values(a)[0];if(Array.isArray(b)&&"string"==typeof b[0])return b[0]}}return a.message}return a instanceof Error?a.message:"Booking failed."}function u(){return(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Skeleton,{className:"h-6 w-56 rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(n.Skeleton,{className:"h-4 w-4/5 rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[280px_minmax(0,1fr)]",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(n.Skeleton,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,b.jsx)(n.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,b.jsx)(n.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,b.jsx)(n.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"})]}),(0,b.jsx)(n.Skeleton,{className:"h-28 w-full rounded-[var(--rb-radius-md)]"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Skeleton,{className:"h-6 w-64 rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(n.Skeleton,{className:"h-4 w-full rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(n.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,b.jsx)(n.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,b.jsx)(n.Skeleton,{className:"h-10 w-11/12 rounded-[var(--rb-radius-md)]"}),(0,b.jsx)(n.Skeleton,{className:"h-10 w-10/12 rounded-[var(--rb-radius-md)]"})]}),(0,b.jsx)("div",{className:"flex items-center justify-end gap-2 pt-2",children:(0,b.jsx)(n.Skeleton,{className:"h-10 w-28 rounded-[var(--rb-radius-md)]"})})]})]})]})}function v(){let a=(0,f.useParams)(),n="string"==typeof a.tenant?a.tenant:"",[v,w]=c.default.useState(!0),[x,y]=c.default.useState(null),[z,A]=c.default.useState(null),[B,C]=c.default.useState(1),[D,E]=c.default.useState(null),[F,G]=c.default.useState("wizard"),[H,I]=c.default.useState(""),[J,K]=c.default.useState(""),[L,M]=c.default.useState(""),[N,O]=c.default.useState(""),[P,Q]=c.default.useState(""),[R,S]=c.default.useState(""),[T,U]=c.default.useState(""),[V,W]=c.default.useState([]),[X,Y]=c.default.useState(""),[Z,$]=c.default.useState(1),[_,aa]=c.default.useState(""),[ab,ac]=c.default.useState(""),[ad,ae]=c.default.useState(""),[af,ag]=c.default.useState(""),[ah,ai]=c.default.useState(""),[aj,ak]=c.default.useState(""),[al,am]=c.default.useState(""),[an,ao]=c.default.useState(""),[ap,aq]=c.default.useState(""),[ar,as]=c.default.useState(""),[at,au]=c.default.useState(""),[av,aw]=c.default.useState(""),[ax,ay]=c.default.useState(""),[az,aA]=c.default.useState(""),[aB,aC]=c.default.useState(""),[aD,aE]=c.default.useState(!1),[aF,aG]=c.default.useState(""),[aH,aI]=c.default.useState([]),[aJ,aK]=c.default.useState(!1),[aL,aM]=c.default.useState(null),[aN,aO]=c.default.useState([]),[aP,aQ]=c.default.useState([]),[aR,aS]=c.default.useState([]),[aT,aU]=c.default.useState([]),[aV,aW]=c.default.useState(!1),[aX,aY]=c.default.useState(null),[aZ,a$]=c.default.useState(null);c.default.useEffect(()=>{let a=!0;return async function(){try{if(w(!0),y(null),!n)return void A(null);let b=await (0,p.apiFetch)(`/api/t/${n}/booking/config`,{token:null,impersonationSessionId:null});if(!a)return;A(b);let c=b?.booking?.publicBookingUiStyle;"wizard"===c||"images"===c?G(c):G("wizard");let d=(Array.isArray(b?.devicesBrands?.additionalDeviceFields)?b.devicesBrands.additionalDeviceFields:[]).map(a=>{let b="string"==typeof a?.id?a.id:"",c="string"==typeof a?.label?a.label:"",d="boolean"!=typeof a?.displayInBookingForm||a.displayInBookingForm;return b&&c&&d?{key:b,label:c,value_text:""}:null}).filter(a=>!!a);W(d);let e=(b?.general?.defaultCountry??"").trim();aA(e),b?.booking?.defaultType&&I(b.booking.defaultType),b?.booking?.defaultBrand&&K(b.booking.defaultBrand),b?.booking?.defaultDevice&&M(b.booking.defaultDevice)}catch(b){if(!a)return;y(t(b)),A(null)}finally{if(!a)return;w(!1)}}(),()=>{a=!1}},[n]),c.default.useEffect(()=>{let a=!0;return async function(){try{if(aK(!0),aM(null),!n)return void aO([]);let b=await (0,p.apiFetch)(`/api/t/${n}/booking/device-types`,{token:null,impersonationSessionId:null});if(!a)return;aO(Array.isArray(b?.device_types)?b.device_types:[])}catch(b){if(!a)return;aM(t(b)),aO([])}finally{if(!a)return;aK(!1)}}(),()=>{a=!1}},[n]),c.default.useEffect(()=>{let a=!0;return async function(){try{if(aM(null),!n)return void aQ([]);let b=s(H),c=await (0,p.apiFetch)(`/api/t/${n}/booking/brands${b?`?typeId=${b}`:""}`,{token:null,impersonationSessionId:null});if(!a)return;aQ(Array.isArray(c?.brands)?c.brands:[])}catch(b){if(!a)return;aM(t(b)),aQ([])}}(),()=>{a=!1}},[n,H]),c.default.useEffect(()=>{let a=!0;return async function(){try{if(aM(null),!n)return void aS([]);let b=s(H),c=s(J),d=new URLSearchParams;b&&d.set("typeId",String(b)),c&&d.set("brandId",String(c));let e=await (0,p.apiFetch)(`/api/t/${n}/booking/devices${d.toString()?`?${d.toString()}`:""}`,{token:null,impersonationSessionId:null});if(!a)return;aS(Array.isArray(e?.devices)?e.devices:[])}catch(b){if(!a)return;aM(t(b)),aS([])}}(),()=>{a=!1}},[n,H,J]),c.default.useEffect(()=>{let a=!0;return async function(){try{if(aM(null),!n||!z)return void aU([]);let b=s(L),c=new URLSearchParams;b&&c.set("deviceId",String(b)),c.set("mode",z.booking.publicBookingMode);let d=await (0,p.apiFetch)(`/api/t/${n}/booking/services?${c.toString()}`,{token:null,impersonationSessionId:null});if(!a)return;if(Array.isArray(d?.groups))aU(d.groups.map(a=>({service_type:a.service_type??null,services:Array.isArray(a.services)?a.services:[]})));else{let a=Array.isArray(d?.services)?d.services:[],b={};for(let c of a){let a=c.service_type?.id?String(c.service_type.id):"none";b[a]||(b[a]={service_type:c.service_type??null,services:[]}),b[a].services.push(c)}aU(Object.values(b))}}catch(b){if(!a)return;aM(t(b)),aU([])}}(),()=>{a=!1}},[n,L,z]);let a_=!z||!z.booking.turnOffOtherDeviceBrand,a0=!z||!z.booking.turnOffOtherService,a1=(z?.general?.gdprAcceptanceText??"").trim(),a2=a1.length>0,a3=c.default.useMemo(()=>{let a=s(X);if(!a)return null;for(let b of aT){let c=b.services.find(b=>b.id===a);if(c)return c}return null},[aT,X]),a4=c.default.useMemo(()=>{let a=s(L);return a?aR.find(b=>b.id===a)?.model??"":N.trim()},[aR,L,N]),a5=c.default.useMemo(()=>s(X)?a3?.name??"":_.trim(),[_,a3,X]),a6=!!aV||(1===B?!!a8():2===B?!!a9():3===B&&!!ba()),a7=n&&aZ?.case_number?`/t/${n}/status?caseNumber=${encodeURIComponent(aZ.case_number)}`:"";function a8(){return a_||s(L)?a_&&!s(L)&&0===N.trim().length?"Please select a device or enter a device label.":null:"Please select a device."}function a9(){let a=s(X);return a&&_.trim().length>0?"Choose a service or enter other service, not both.":a0||a?a0&&!a&&0===_.trim().length?"Please select a service or enter other service.":Z<1?"Quantity must be at least 1.":null:"Please select a service."}function ba(){return z?.booking?.publicBookingMode==="warranty"&&0===aF.trim().length?"Date of purchase is required.":0===ad.trim().length?"First name is required.":0===af.trim().length?"Last name is required.":0===ah.trim().length?"Email is required.":0===aB.trim().length?"Job details are required.":a2&&!aD?"Please accept GDPR.":null}async function bb(){if(aY(null),E(null),!n)return void aY("Tenant slug is required in the URL.");if(!z)return void aY("Booking configuration is not loaded.");let a=ba();if(a)return void E(a);let b=s(L),c=s(X),d=Number.isFinite(Z)?Math.trunc(Z):1,e={mode:z.booking.publicBookingMode,gdprAccepted:a2?aD:void 0,jobDetails:aB.trim(),warranty:"warranty"===z.booking.publicBookingMode?{dateOfPurchase:aF.trim()}:void 0,customer:{firstName:ad.trim(),lastName:af.trim(),userEmail:ah.trim(),phone:aj.trim().length>0?aj.trim():null,company:al.trim().length>0?al.trim():null,taxId:an.trim().length>0?an.trim():null,addressLine1:ap.trim().length>0?ap.trim():null,addressLine2:ar.trim().length>0?ar.trim():null,city:at.trim().length>0?at.trim():null,state:av.trim().length>0?av.trim():null,postalCode:ax.trim().length>0?ax.trim():null,country:az.trim().length>0?az.trim():null},devices:[{device_id:b,device_label:b?null:N.trim().length>0?N.trim():null,serial:z.booking.turnOffIdImeiInBooking?null:P.trim().length>0?P.trim():null,pin:z.devicesBrands.enablePinCodeField&&R.trim().length>0?R.trim():null,notes:T.trim().length>0?T.trim():null,extra_fields:V.map(a=>({key:a.key,label:a.label,value_text:a.value_text.trim().length>0?a.value_text.trim():null})).filter(a=>"string"==typeof a.key&&a.key.trim().length>0),services:c?[{service_id:c,qty:d}]:[],other_service:_.trim().length>0?_.trim():null}]},f=new FormData;for(let a of(f.set("payload_json",JSON.stringify(e)),aH.slice(0,5)))f.append("attachments[]",a);aW(!0);try{let a=await (0,p.apiFetch)(`/api/t/${n}/booking/submit`,{method:"POST",body:f,token:null,impersonationSessionId:null});a$(a)}catch(a){aY(t(a))}finally{aW(!1)}}return(0,b.jsx)(g.PublicPageShell,{badge:(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("span",{children:"RepairBuddy"}),n?(0,b.jsx)(l.Badge,{variant:"info",children:n}):null]}),actions:n?(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.default,{href:`/t/${n}/status`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Status check"}),(0,b.jsx)(e.default,{href:`/t/${n}/portal`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Portal"})]}):null,centerContent:!0,children:(0,b.jsx)("div",{className:"mx-auto w-full max-w-5xl px-4",children:(0,b.jsx)(h.Card,{className:"shadow-none",children:(0,b.jsx)(h.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xl font-semibold text-[var(--rb-text)]",children:"Book an appointment"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Tell us what you need and we’ll create your booking and send you a case number."})]}),n?null:(0,b.jsx)(i.Alert,{variant:"warning",title:"Missing tenant",children:"Tenant slug is required in the URL."}),z?.disabled?(0,b.jsx)(i.Alert,{variant:"warning",title:"Booking disabled",children:"This business has disabled public booking."}):null,x?(0,b.jsx)(i.Alert,{variant:"danger",title:"Could not load booking settings",children:x}):null,aL?(0,b.jsx)(i.Alert,{variant:"danger",title:"Could not load catalog",children:aL}):null,v||aJ?(0,b.jsx)(u,{}):null,aX?(0,b.jsx)(i.Alert,{variant:"danger",title:"Booking failed",children:aX}):null,D?(0,b.jsx)(i.Alert,{variant:"warning",title:"Please review this step",children:D}):null,aZ?(0,b.jsx)(i.Alert,{variant:"success",title:"Booking submitted",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{children:["Case number: ",(0,b.jsx)("span",{className:"font-semibold",children:aZ.case_number})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsx)(e.default,{href:a7,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Status check"}),(0,b.jsx)(e.default,{href:`/t/${n}/portal`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Portal"})]})]})}):null,v||aJ||x||aL||!z||z.disabled||aZ?null:(0,b.jsxs)(o.WizardShell,{steps:[{id:1,navTitle:"Device",navDescription:"Choose the device you want to book for.",pageTitle:"Choose your device",pageDescription:"Select a type, brand and model (or enter it manually).",footerTitle:"Device"},{id:2,navTitle:"Service",navDescription:"Pick what you need.",pageTitle:"Select a service",pageDescription:"Choose one service for this device.",footerTitle:"Service"},{id:3,navTitle:"Details",navDescription:"Your contact details and notes.",pageTitle:"Your details",pageDescription:"Add your info so we can confirm and follow up.",footerTitle:"Details"},{id:4,navTitle:"Review",navDescription:"Confirm and submit.",pageTitle:"Review & submit",pageDescription:"Double-check everything before submitting.",footerTitle:"Review"}],step:B,disabled:aV,nextDisabled:a6,sidebarTitle:"Booking steps",sidebarDescription:"Complete the steps to submit your booking.",sidebarAriaLabel:"Booking steps",sidebarFooter:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Your booking"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Device"}),(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:a4||"—"})]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",type:"button",disabled:aV,onClick:()=>C(1),children:"Edit"})]}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Service"}),(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:a5||"—"}),(0,b.jsxs)("div",{className:"mt-0.5 text-xs text-zinc-500",children:["Qty: ",Math.max(1,Number.isFinite(Z)?Math.trunc(Z):1)]}),!z.booking.turnOffServicePrice&&a3?.price?(0,b.jsxs)("div",{className:"mt-0.5 text-xs text-zinc-500",children:["Starting: ",(0,r.formatMoney)({amountCents:a3.price.amount_cents*Math.max(1,Math.trunc(Z||1)),currency:a3.price.currency})]}):null]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",type:"button",disabled:aV,onClick:()=>C(2),children:"Edit"})]}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Contact"}),(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:ad.trim()||af.trim()?`${ad.trim()} ${af.trim()}`.trim():"—"}),(0,b.jsx)("div",{className:"truncate text-xs text-zinc-500",children:ah.trim()||""})]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",type:"button",disabled:aV,onClick:()=>C(3),children:"Edit"})]})]})]}),onStepChange:a=>{if(aY(null),a>B){let b=a<=B?null:1===B?a8():2===B?a9():3===B?ba():null;if(b)return void E(b)}E(null),C(a)},footerRight:(0,b.jsx)(j.Button,{disabled:aV,onClick:()=>void bb(),type:"button",children:aV?"Submitting...":"Submit booking"}),children:[1===B?(0,b.jsx)("div",{className:"space-y-4",children:"wizard"===F?(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device type"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)(m.Select,{value:H,onChange:a=>{E(null),I(a.target.value),K(""),M("")},children:[(0,b.jsx)("option",{value:"",children:"Select type"}),aN.map(a=>(0,b.jsx)("option",{value:String(a.id),children:a.name},a.id))]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Brand"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)(m.Select,{value:J,disabled:!H,onChange:a=>{E(null),K(a.target.value),M("")},children:[(0,b.jsx)("option",{value:"",children:"Select brand"}),aP.map(a=>(0,b.jsx)("option",{value:String(a.id),children:a.name},a.id))]})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)(m.Select,{value:L,disabled:!H||!J,onChange:a=>{E(null),M(a.target.value)},children:[(0,b.jsx)("option",{value:"",children:"Select device"}),aR.map(a=>(0,b.jsx)("option",{value:String(a.id),children:a.model},a.id))]})}),a_?(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"If your device is not listed, enter it below."}):null]}),a_?(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Other device"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:N,onChange:a=>{E(null),O(a.target.value)},placeholder:"e.g. Custom PC, Unknown model"})})]}):null,z.booking.turnOffIdImeiInBooking?null:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Serial / IMEI (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:P,onChange:a=>Q(a.target.value),placeholder:"Serial, IMEI"})})]}),z.devicesBrands.enablePinCodeField?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"PIN (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:R,onChange:a=>S(a.target.value),placeholder:"Device PIN"})})]}):null,(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device notes (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("textarea",{value:T,onChange:a=>U(a.target.value),placeholder:"Condition, accessories included, passcode notes, etc.",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-[var(--rb-text)] shadow-sm outline-none transition placeholder:text-zinc-400 focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",rows:4})})]}),V.length>0?(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Additional device info (optional)"}),(0,b.jsx)("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:V.map((a,c)=>(0,b.jsxs)("label",{className:"grid gap-1 text-sm",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--rb-text)]",children:a.label}),(0,b.jsx)(k.Input,{value:a.value_text,onChange:a=>{W(b=>{let d=b.slice();return d[c]={...d[c],value_text:a.target.value},d})}})]},a.key))})]}):null]}):(0,b.jsxs)("div",{className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device type"}),(0,b.jsx)("div",{className:"mt-2 grid gap-3 sm:grid-cols-3",children:aN.map(a=>{let c=H===String(a.id),e="string"==typeof a.image_url?a.image_url:null;return(0,b.jsxs)("button",{type:"button",onClick:()=>{E(null),I(String(a.id)),K(""),M("")},className:(0,q.cn)("group overflow-hidden rounded-[var(--rb-radius-md)] border bg-white text-left transition",c?"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_96%)]":"border-[var(--rb-border)] hover:bg-[var(--rb-surface-muted)]"),children:[(0,b.jsxs)("span",{className:"relative block aspect-[16/10] w-full overflow-hidden bg-[var(--rb-surface-muted)]",children:[e?(0,b.jsx)(d.default,{alt:a.name,src:e,fill:!0,sizes:"(min-width: 1024px) 320px, (min-width: 640px) 33vw, 100vw",className:"object-cover",loader:({src:a})=>a,unoptimized:!0}):(0,b.jsx)("span",{className:"flex h-full w-full items-center justify-center text-sm font-semibold text-zinc-500",children:a.name.slice(0,2).toUpperCase()}),(0,b.jsx)("span",{className:"pointer-events-none absolute inset-0 ring-1 ring-inset ring-black/5"})]}),(0,b.jsxs)("span",{className:"block p-3",children:[(0,b.jsx)("span",{className:"block truncate text-sm font-semibold text-[var(--rb-text)]",children:a.name}),a.description?(0,b.jsx)("span",{className:"mt-0.5 block line-clamp-2 text-xs text-zinc-600",children:a.description}):null]})]},a.id)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Brand"}),H?null:(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Select a device type to see brands."}),(0,b.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-3 sm:grid-cols-4",children:aP.map(a=>{let c=J===String(a.id),e="string"==typeof a.image_url?a.image_url:null;return(0,b.jsxs)("button",{type:"button",disabled:!H,onClick:()=>{E(null),K(String(a.id)),M("")},className:(0,q.cn)("group overflow-hidden rounded-[var(--rb-radius-md)] border bg-white text-left transition",H?"":"pointer-events-none opacity-60",c?"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_96%)]":"border-[var(--rb-border)] hover:bg-[var(--rb-surface-muted)]"),children:[(0,b.jsxs)("span",{className:"relative block aspect-[4/3] w-full overflow-hidden bg-white",children:[e?(0,b.jsx)(d.default,{alt:a.name,src:e,fill:!0,sizes:"(min-width: 1024px) 240px, (min-width: 640px) 25vw, 50vw",className:"object-contain p-4",loader:({src:a})=>a,unoptimized:!0}):(0,b.jsx)("span",{className:"flex h-full w-full items-center justify-center text-sm font-semibold text-zinc-500",children:a.name.slice(0,2).toUpperCase()}),(0,b.jsx)("span",{className:"pointer-events-none absolute inset-0 ring-1 ring-inset ring-black/5"})]}),(0,b.jsx)("span",{className:"block p-3 pt-2",children:(0,b.jsx)("span",{className:"block truncate text-sm font-semibold text-[var(--rb-text)]",children:a.name})})]},a.id)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device"}),H&&J?null:(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Select a type and brand to see devices."}),(0,b.jsx)("div",{className:"mt-2 grid gap-3 sm:grid-cols-3",children:aR.map(a=>{let c=L===String(a.id);return(0,b.jsx)("button",{type:"button",disabled:!H||!J,onClick:()=>{E(null),M(String(a.id))},className:(0,q.cn)("rounded-[var(--rb-radius-md)] border bg-white p-3 text-left transition",H&&J?"hover:bg-[var(--rb-surface-muted)]":"pointer-events-none opacity-60",c?"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_94%)]":"border-[var(--rb-border)]"),children:(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:a.model})},a.id)})}),a_?(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"If your device is not listed, enter it below."}):null]}),a_?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Other device"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:N,onChange:a=>{E(null),O(a.target.value)},placeholder:"e.g. Custom PC, Unknown model"})})]}):null,(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[z.booking.turnOffIdImeiInBooking?null:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Serial / IMEI (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:P,onChange:a=>Q(a.target.value),placeholder:"Serial, IMEI"})})]}),z.devicesBrands.enablePinCodeField?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"PIN (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:R,onChange:a=>S(a.target.value),placeholder:"Device PIN"})})]}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device notes (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("textarea",{value:T,onChange:a=>U(a.target.value),placeholder:"Condition, accessories included, passcode notes, etc.",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-[var(--rb-text)] shadow-sm outline-none transition placeholder:text-zinc-400 focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",rows:4})})]}),V.length>0?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Additional device info (optional)"}),(0,b.jsx)("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:V.map((a,c)=>(0,b.jsxs)("label",{className:"grid gap-1 text-sm",children:[(0,b.jsx)("span",{className:"font-semibold text-[var(--rb-text)]",children:a.label}),(0,b.jsx)(k.Input,{value:a.value_text,onChange:a=>{W(b=>{let d=b.slice();return d[c]={...d[c],value_text:a.target.value},d})}})]},a.key))})]}):null]})}):null,2===B?(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Search"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:ab,onChange:a=>ac(a.target.value),placeholder:"Search services"})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[aT.map(a=>(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:a.service_type?.name??"Services"}),(0,b.jsx)("div",{className:(0,q.cn)("mt-2","images"===F?"grid gap-2 sm:grid-cols-2":"grid gap-2"),children:a.services.filter(a=>a.is_active).filter(a=>{let b=ab.trim().toLowerCase();return!b||(a.name??"").toLowerCase().includes(b)||(a.description??"").toLowerCase().includes(b)}).map(a=>{let c=X===String(a.id);return(0,b.jsx)("button",{type:"button",onClick:()=>{E(null),Y(String(a.id)),aa("")},className:(0,q.cn)("w-full rounded-[var(--rb-radius-sm)] border p-3 text-left transition",c?"border-[color:color-mix(in_srgb,var(--rb-blue),white_65%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)]":"border-zinc-200 bg-white hover:bg-[var(--rb-surface-muted)]"),children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:a.name}),a.description?(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:a.description}):null]}),z.booking.turnOffServicePrice?null:(0,b.jsx)("div",{className:"shrink-0 text-sm font-semibold text-[var(--rb-text)]",children:(0,r.formatMoney)({amountCents:a.price?.amount_cents,currency:a.price?.currency})})]})},a.id)})})]},a.service_type?.id??"none")),a0?(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Other service"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:_,onChange:a=>{E(null),aa(a.target.value),a.target.value.trim().length>0&&Y("")},placeholder:"Describe the service you need"})})]}):null,(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Quantity"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{type:"number",min:1,max:9999,value:String(Z),onChange:a=>$(Math.max(1,Math.min(9999,Number(a.target.value)||1)))})})]})})]})]})}):null,3===B?(0,b.jsxs)("div",{className:"space-y-4",children:["warranty"===z.booking.publicBookingMode?(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Warranty: date of purchase"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{type:"date",value:aF,onChange:a=>aG(a.target.value)})})]}):null,(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"First name"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:ad,onChange:a=>ae(a.target.value),autoComplete:"given-name"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Last name"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:af,onChange:a=>ag(a.target.value),autoComplete:"family-name"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Email"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{type:"email",value:ah,onChange:a=>ai(a.target.value),placeholder:"you@example.com",autoComplete:"email"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Phone (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{type:"tel",value:aj,onChange:a=>ak(a.target.value),autoComplete:"tel"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Company (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:al,onChange:a=>am(a.target.value),autoComplete:"organization"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Tax ID (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:an,onChange:a=>ao(a.target.value)})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Address line 1 (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:ap,onChange:a=>aq(a.target.value),autoComplete:"address-line1"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Address line 2 (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:ar,onChange:a=>as(a.target.value),autoComplete:"address-line2"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"City (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:at,onChange:a=>au(a.target.value),autoComplete:"address-level2"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"State (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:av,onChange:a=>aw(a.target.value),autoComplete:"address-level1"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Postal code (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:ax,onChange:a=>ay(a.target.value),autoComplete:"postal-code"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Country (optional)"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)(k.Input,{value:az,onChange:a=>aA(a.target.value),placeholder:"US",autoComplete:"country"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Job details"}),(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsx)("textarea",{value:aB,onChange:a=>aC(a.target.value),placeholder:"Describe the issue, symptoms, error messages, and any constraints.",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-[var(--rb-text)] shadow-sm outline-none transition placeholder:text-zinc-400 focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",rows:6})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Attachments (optional)"}),(0,b.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,b.jsx)("input",{type:"file",multiple:!0,onChange:a=>{aI(Array.from(a.target.files??[]).slice(0,5))},className:"block w-full text-sm"}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Up to 5 files."}),aH.length>0?(0,b.jsx)("div",{className:"grid gap-2",children:aH.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate text-sm font-medium text-[var(--rb-text)]",children:a.name}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:[Math.max(1,Math.round(a.size/1024))," KB"]})]}),(0,b.jsx)(j.Button,{variant:"ghost",size:"sm",type:"button",onClick:()=>{aI(a=>a.filter((a,b)=>b!==c))},children:"Remove"})]},c))}):null]})]})]}),a2?(0,b.jsxs)("label",{className:"flex items-start gap-3 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:aD,onChange:a=>aE(a.target.checked)}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("div",{className:"font-semibold text-[var(--rb-text)]",children:"GDPR"}),(0,b.jsxs)("div",{className:"text-zinc-600",children:[a1,z.general.gdprLinkUrl&&z.general.gdprLinkLabel?(0,b.jsxs)("span",{children:[" ",(0,b.jsx)("a",{href:z.general.gdprLinkUrl,target:"_blank",rel:"noreferrer",className:"font-semibold text-[var(--rb-blue)] hover:underline",children:z.general.gdprLinkLabel})]}):null]})]})]}):null]}):null,4===B?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Review"}),(0,b.jsxs)("div",{className:"mt-3 grid gap-2 text-sm text-zinc-700",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Device:"})," ",s(L)?aR.find(a=>String(a.id)===L)?.model??"":N.trim()]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Service:"})," ",a3?a3.name:_.trim()]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Qty:"})," ",Z]}),!z.booking.turnOffServicePrice&&a3?.price?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Starting price:"})," ",(0,r.formatMoney)({amountCents:a3.price.amount_cents,currency:a3.price.currency})]}):null,(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Name:"})," ",ad.trim()," ",af.trim()]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Email:"})," ",ah.trim()]}),aj.trim().length>0?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Phone:"})," ",aj.trim()]}):null,"warranty"===z.booking.publicBookingMode?(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"font-semibold",children:"Date of purchase:"})," ",aF.trim()]}):null]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Notes"}),(0,b.jsx)("div",{className:"mt-2 whitespace-pre-wrap text-sm text-zinc-700",children:aB.trim()})]})]}):null]})]})})})})})}a.s(["default",()=>v])}];

//# sourceMappingURL=frontend_src_app_t_%5Btenant%5D_book_page_tsx_098711ce._.js.map