module.exports=[75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},4148,a=>{"use strict";function b(a){let b=a.amountCents,c=a.currency?.toUpperCase()??null;if("number"!=typeof b||!Number.isFinite(b))return a.fallback??"—";let d=b/100;if(!c||3!==c.length)return`${d.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:c,minimumFractionDigits:2,maximumFractionDigits:2}).format(d)}catch{return`${c} ${d.toFixed(2)}`}}a.s(["formatMoney",()=>b])},648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},26606,a=>{"use strict";var b=a.i(57850),c=a.i(7160),d=a.i(4600);function e({className:a,"aria-hidden":d=!0,...e}){return(0,b.jsx)("div",{"aria-hidden":d,className:(0,c.cn)("rb-skeleton",a),...e})}function f({lines:a=3,className:f}){let g=Math.max(1,Math.min(a,12));return(0,b.jsx)(d.Card,{className:(0,c.cn)("overflow-hidden",f),children:(0,b.jsxs)(d.CardContent,{className:"space-y-3 pt-5",children:[(0,b.jsx)(e,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:g}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",d===g-1?"w-3/5":"w-full")},d))]})})}function g({rows:a=6,columns:d=5,className:f}){let g=Math.max(1,Math.min(a,20)),h=Math.max(1,Math.min(d,10));return(0,b.jsxs)("div",{className:(0,c.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",f),children:[(0,b.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,c)=>(0,b.jsx)(e,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},c))})}),(0,b.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:g}).map((a,d)=>(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===d?"w-3/4":"w-full")},d))},d))})})]})}a.s(["CardSkeleton",()=>f,"Skeleton",()=>e,"TableSkeleton",()=>g])},54177,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160),e=a.i(97867),f=a.i(46036),g=a.i(26606),h=a.i(34075);function i({title:a,data:i,columns:j,getRowId:k,loading:l=!1,emptyMessage:m="No data.",search:n,filters:o=[],pageSizeOptions:p=[10,25,50],initialPageSize:q=10,server:r,exportConfig:s,columnVisibilityKey:t,onRowClick:u,className:v}){let[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(0),[A,B]=(0,c.useState)(q),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(0),I=(0,c.useId)(),J=!!r,K=J?r.query:w,L=J?r.onQueryChange:x,M=J?r.pageIndex:y,N=J?r.onPageIndexChange:z,O=J?r.pageSize:A,P=J?r.onPageSizeChange:B,Q=J?r.sort??null:null,R=J?r.onSortChange:void 0,S=(0,c.useMemo)(()=>{let a=Array.isArray(j)?j:[];{let b=a.filter(a=>!a.hiddenByDefault);return b.length>0?b:a.slice(0,1)}},[t,j,G]),T=(0,c.useMemo)(()=>{if(J)return Array.isArray(i)?i:[];let a=K.trim().toLowerCase();return(Array.isArray(i)?i:[]).filter(b=>{if(n&&n.getSearchText&&a.length>0&&!n.getSearchText(b).toLowerCase().includes(a))return!1;for(let a of o)if(a.predicate&&!a.predicate(b,a.value))return!1;return!0})},[i,o,J,K,n]),U=J?r.totalRows:T.length,V=Math.max(1,Math.ceil(U/O)),W=Math.min(M,V-1),X=Math.max(1,Math.min(8,O||10)),Y=(0,c.useMemo)(()=>{if(J)return T;let a=W*O,b=a+O;return T.slice(a,b)},[W,T,J,O]),Z=W>0,$=W<V-1,_=!!n||o.length>0||!!s||!!t;function aa(a,b){}async function ab(a){if(s&&!C){F(null),D(a);try{let b=new URLSearchParams;for(let a of(K.trim().length>0&&b.set("q",K.trim()),o)){let c=a.value;null!=c&&0!==String(c).length&&b.set(a.id,String(c))}if(J&&Q?.id&&Q?.dir&&(b.set("sort",Q.id),b.set("dir",Q.dir)),b.set("format",a),s.extraQuery)for(let[a,c]of Object.entries(s.extraQuery))null!=c&&b.set(a,String(c));let c=`${s.url}${s.url.includes("?")?"&":"?"}${b.toString()}`,d=s.filename?.({format:a});await (0,h.apiDownload)(c,{filename:d})}catch(a){F(a instanceof Error?a.message:"Export failed.")}finally{D(null)}}}return(0,b.jsxs)("div",{className:(0,d.cn)("space-y-3",v),children:[a?(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:a}):null,_?(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[n?(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_search`,children:"Search"}),(0,b.jsx)("input",{id:`${I}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:K,onChange:a=>{L(a.target.value),N(0)},placeholder:n.placeholder??"Search..."})]}):null,o.map(a=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_filter_${a.id}`,children:a.label}),(0,b.jsx)("select",{id:`${I}_datatable_filter_${a.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(a.value),onChange:b=>{let c=a.options.find(a=>String(a.value)===b.target.value),d=c?c.value:b.target.value;a.onChange(d),N(0)},children:a.options.map(a=>(0,b.jsx)("option",{value:String(a.value),children:a.label},String(a.value)))})]},a.id))]}),(0,b.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:[U," result(s)"]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[s?(0,b.jsx)(f.DropdownMenu,{align:"right",trigger:({toggle:a})=>(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:a,disabled:!!C,children:C?"Exporting...":"Export"}),children:({close:a})=>{let c=s.formats??["csv","xlsx","pdf"];return(0,b.jsx)(b.Fragment,{children:c.map(c=>(0,b.jsxs)(f.DropdownMenuItem,{onSelect:()=>{a(),ab(c)},disabled:!!C,children:["Export ",c.toUpperCase()]},c))})}}):null,t?(0,b.jsx)(f.DropdownMenu,{align:"right",trigger:({toggle:a})=>(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:a,children:"Columns"}),children:({close:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.DropdownMenuItem,{onSelect:()=>{for(let b of(a(),j))aa(b.id,!0)},children:"Show all"}),(0,b.jsx)(f.DropdownMenuItem,{onSelect:()=>{for(let b of(a(),j))aa(b.id,!b.hiddenByDefault)},children:"Reset defaults"}),(0,b.jsx)(f.DropdownMenuSeparator,{}),j.map(a=>{let c=S.some(b=>b.id===a.id);return(0,b.jsxs)(f.DropdownMenuItem,{onSelect:()=>{aa(a.id,!c)},children:[(0,b.jsx)("span",{className:"mr-2 inline-block w-4",children:c?"✓":""}),"string"==typeof a.header?a.header:a.id]},a.id)})]})}):null]})]})]}):null,E?(0,b.jsx)("div",{className:"text-sm text-red-600",children:E}):null,(0,b.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,b.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,b.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,b.jsx)("tr",{children:S.map(a=>(0,b.jsx)("th",{className:(0,d.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",a.headerClassName),children:J&&a.sortId&&R?(0,b.jsxs)("button",{type:"button",onClick:()=>(function(a){if(J&&a.sortId&&R){if(!Q||Q.id!==a.sortId){R({id:a.sortId,dir:"asc"}),N(0);return}if("asc"===Q.dir){R({id:a.sortId,dir:"desc"}),N(0);return}R(null),N(0)}})(a),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,b.jsx)("span",{children:a.header}),J&&a.sortId?Q&&Q.id===a.sortId?"asc"===Q.dir?(0,b.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,b.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,b.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):a.header},a.id))})}),(0,b.jsx)("tbody",{children:l?Array.from({length:X}).map((a,c)=>(0,b.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:S.map((a,c)=>(0,b.jsx)("td",{className:(0,d.cn)("px-3 py-2 align-middle",a.className),children:(0,b.jsx)(g.Skeleton,{className:(0,d.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===c?"w-3/4":c===S.length-1?"w-16":"w-full")})},a.id))},`loading_${c}`)):0===Y.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,S.length),children:m})}):Y.map(a=>(0,b.jsx)("tr",{className:(0,d.cn)("border-t border-[var(--rb-border)]",u?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:u?0:void 0,role:u?"button":void 0,onClick:u?()=>{u(a)}:void 0,onKeyDown:u?b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),u(a))}:void 0,children:S.map(c=>(0,b.jsx)("td",{className:(0,d.cn)("px-3 py-2 align-middle",c.className),children:c.cell(a)},c.id))},String(k(a))))})]})}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:function(){N(Math.max(0,W-1))},disabled:!Z,children:"Prev"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:function(){N(Math.min(V-1,W+1))},disabled:!$,children:"Next"}),(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",W+1," / ",V]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,b.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(O),onChange:a=>{P(Number(a.target.value)),N(0)},children:p.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]})]})]})}a.s(["DataTable",()=>i])},54804,a=>{"use strict";var b=a.i(57850),c=a.i(648),d=a.i(75385),e=a.i(4600);function f({title:a,description:f,actions:g,filters:h,loading:i,loadingFallback:j,error:k,empty:l,emptyTitle:m="Nothing here yet",emptyDescription:n="No items to display.",children:o}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(c.PageHeader,{title:a,description:f,actions:g}),h?(0,b.jsx)(e.Card,{className:"shadow-none",children:(0,b.jsx)(e.CardContent,{className:"pt-5",children:h})}):null,k?(0,b.jsx)(d.Alert,{variant:"danger",title:"Something went wrong",children:k}):null,i?j??(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading..."}):null,i||k||!l?null:(0,b.jsx)(e.Card,{className:"shadow-none",children:(0,b.jsxs)(e.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:m}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:n})]})}),i||k||l?null:o]})}a.s(["ListPageShell",()=>f])},45004,a=>{"use strict";function b(a){return new Date(a).toISOString()}let c=[{id:"client_001",name:"Alex Johnson",email:"alex@example.com",phone:"+1 555 0101",created_at:b("2026-01-05T10:00:00Z")},{id:"client_002",name:"Sam Rivera",email:"sam@example.com",phone:"+1 555 0102",created_at:b("2026-01-06T09:00:00Z")},{id:"client_003",name:"Taylor Chen",email:"taylor@example.com",phone:"+1 555 0103",created_at:b("2026-01-08T15:30:00Z")},{id:"client_004",name:"Jordan Patel",email:"jordan@example.com",phone:"+1 555 0104",created_at:b("2026-01-10T11:45:00Z")},{id:"client_005",name:"Morgan Lee",email:"morgan@example.com",phone:"+1 555 0105",created_at:b("2026-01-12T08:20:00Z")}],d=[{id:"pay_001",job_id:"job_001",status:"paid",method:"card",amount:{currency:"USD",amount_cents:7500},created_at:b("2026-01-26T14:12:00Z")},{id:"pay_002",job_id:"job_002",status:"pending",method:"cash",amount:{currency:"USD",amount_cents:4500},created_at:b("2026-01-27T10:20:00Z")},{id:"pay_003",job_id:"job_004",status:"paid",method:"bank_transfer",amount:{currency:"USD",amount_cents:12e3},created_at:b("2026-01-22T16:40:00Z")}],e=[{id:"exp_001",job_id:"job_001",category_id:"expcat_001",label:"Replacement battery",amount:{currency:"USD",amount_cents:3200},created_at:b("2026-01-26T09:05:00Z")},{id:"exp_002",job_id:"job_002",category_id:"expcat_002",label:"Courier",amount:{currency:"USD",amount_cents:1500},created_at:b("2026-01-27T11:10:00Z")}],f=[{id:"timelog_001",job_id:"job_001",user_label:"Technician A",minutes:90,rate:{currency:"USD",amount_cents:9e3},created_at:b("2026-01-26T12:10:00Z")},{id:"timelog_002",job_id:"job_002",user_label:"Technician B",minutes:45,rate:{currency:"USD",amount_cents:8e3},created_at:b("2026-01-27T12:30:00Z")}],g=[{id:"att_001",job_id:"job_001",filename:"intake-photo.jpg",mime_type:"image/jpeg",size_bytes:245312,url:"/mock/uploads/intake-photo.jpg",created_at:b("2026-01-26T08:58:00Z")},{id:"att_002",job_id:"job_003",filename:"screen-video.mp4",mime_type:"video/mp4",size_bytes:1245e3,url:"/mock/uploads/screen-video.mp4",created_at:b("2026-01-23T09:15:00Z")}],h=[{id:"msg_001",job_id:"job_001",author:"customer",body:"Hi, I dropped it off today. Please let me know the ETA.",created_at:b("2026-01-26T09:00:00Z"),attachments:[g[0]]},{id:"msg_002",job_id:"job_001",author:"staff",body:"Thanks! We are running diagnostics now.",created_at:b("2026-01-26T09:20:00Z")},{id:"msg_003",job_id:"job_003",author:"customer",body:"The screen flickers randomly. It’s worse at night.",created_at:b("2026-01-23T09:10:00Z"),attachments:[g[1]]}],i=(a,b)=>b.map(b=>({...b,job_id:a})),j=[{id:"estimate_001",job_id:"job_001",client_id:"client_001",status:"approved",lines:[{id:"estline_001",label:"Battery replacement",qty:1,unit_price:{currency:"USD",amount_cents:7500}}],created_at:b("2026-01-26T10:00:00Z"),updated_at:b("2026-01-26T10:30:00Z")},{id:"estimate_002",job_id:"job_003",client_id:"client_003",status:"pending",lines:[{id:"estline_002",label:"Display diagnostics",qty:1,unit_price:{currency:"USD",amount_cents:2500}},{id:"estline_003",label:"Potential screen replacement",qty:1,unit_price:{currency:"USD",amount_cents:19900}}],created_at:b("2026-01-23T10:20:00Z"),updated_at:b("2026-01-23T10:20:00Z")},{id:"estimate_003",job_id:"job_005",client_id:"client_005",status:"rejected",lines:[{id:"estline_004",label:"Thermal paste + cleaning",qty:1,unit_price:{currency:"USD",amount_cents:6900}}],created_at:b("2026-01-19T12:00:00Z"),updated_at:b("2026-01-20T09:00:00Z")}],k=[{id:"job_001",case_number:"RB-10421",title:"Dell XPS 13 battery replacement",status:"in_process",client_id:"client_001",customer_device_ids:["custdev_001"],estimate_id:"estimate_001",payment_ids:["pay_001"],created_at:b("2026-01-26T08:50:00Z"),updated_at:b("2026-01-26T14:15:00Z"),timeline:i("job_001",[{id:"tl_001",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-26T08:50:00Z"),meta:{status:"new_quote"}},{id:"tl_002",type:"estimate",title:"Estimate created",created_at:b("2026-01-26T10:00:00Z"),meta:{estimate_id:"estimate_001"}},{id:"tl_003",type:"status_changed",title:"Status set to In Process",created_at:b("2026-01-26T10:45:00Z"),meta:{status:"in_process"}},{id:"tl_004",type:"payment",title:"Payment received",created_at:b("2026-01-26T14:12:00Z"),meta:{payment_id:"pay_001"}}]),messages:h.filter(a=>"job_001"===a.job_id),attachments:g.filter(a=>"job_001"===a.job_id)},{id:"job_002",case_number:"RB-10418",title:"Lenovo ThinkPad intermittent boot",status:"new_quote",client_id:"client_002",customer_device_ids:["custdev_002"],estimate_id:null,payment_ids:["pay_002"],created_at:b("2026-01-25T11:30:00Z"),updated_at:b("2026-01-27T10:22:00Z"),timeline:i("job_002",[{id:"tl_005",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-25T11:30:00Z"),meta:{status:"new_quote"}}]),messages:[],attachments:[]},{id:"job_003",case_number:"RB-10412",title:"Galaxy S23 screen flicker",status:"new_quote",client_id:"client_003",customer_device_ids:["custdev_003"],estimate_id:"estimate_002",payment_ids:[],created_at:b("2026-01-23T09:00:00Z"),updated_at:b("2026-01-23T10:20:00Z"),timeline:i("job_003",[{id:"tl_006",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-23T09:00:00Z"),meta:{status:"new_quote"}},{id:"tl_007",type:"estimate",title:"Estimate created",created_at:b("2026-01-23T10:20:00Z"),meta:{estimate_id:"estimate_002"}}]),messages:h.filter(a=>"job_003"===a.job_id),attachments:g.filter(a=>"job_003"===a.job_id)},{id:"job_004",case_number:"RB-10399",title:"iPad charging port repair",status:"delivered",client_id:"client_004",customer_device_ids:["custdev_004"],estimate_id:null,payment_ids:["pay_003"],created_at:b("2026-01-18T10:00:00Z"),updated_at:b("2026-01-22T16:45:00Z"),timeline:i("job_004",[{id:"tl_008",type:"status_changed",title:"Status set to Completed",created_at:b("2026-01-21T14:00:00Z"),meta:{status:"completed"}},{id:"tl_009",type:"status_changed",title:"Status set to Delivered",created_at:b("2026-01-22T16:45:00Z"),meta:{status:"delivered"}}]),messages:[],attachments:[]},{id:"job_005",case_number:"RB-10380",title:"HP desktop overheating",status:"cancelled",client_id:"client_005",customer_device_ids:["custdev_005"],estimate_id:"estimate_003",payment_ids:[],created_at:b("2026-01-19T11:40:00Z"),updated_at:b("2026-01-20T09:05:00Z"),timeline:i("job_005",[{id:"tl_010",type:"status_changed",title:"Status set to Cancelled",created_at:b("2026-01-20T09:05:00Z"),meta:{status:"cancelled"}}]),messages:[],attachments:[]}],l=[{id:"review_001",job_id:"job_004",client_id:"client_004",rating:5,comment:"Fast service and great communication.",created_at:b("2026-01-23T08:00:00Z")},{id:"review_002",job_id:"job_001",client_id:"client_001",rating:4,comment:"Good work. Slight delay but handled well.",created_at:b("2026-01-27T18:00:00Z")}],m={statuses:[{key:"new_quote",label:"New/Quote"},{key:"in_process",label:"In Process"},{key:"ready",label:"Ready"},{key:"completed",label:"Completed"},{key:"delivered",label:"Delivered"},{key:"cancelled",label:"Cancelled"}],clients:c,device_brands:[{id:"brand_001",name:"Apple"},{id:"brand_002",name:"Dell"},{id:"brand_003",name:"HP"},{id:"brand_004",name:"Lenovo"},{id:"brand_005",name:"Samsung"}],device_types:[{id:"type_001",name:"Laptop"},{id:"type_002",name:"Desktop"},{id:"type_003",name:"Phone"},{id:"type_004",name:"Tablet"},{id:"type_005",name:"Game Console"}],devices:[{id:"device_001",brand_id:"brand_002",type_id:"type_001",model:"XPS 13"},{id:"device_002",brand_id:"brand_001",type_id:"type_004",model:"iPad Pro"},{id:"device_003",brand_id:"brand_005",type_id:"type_003",model:"Galaxy S23"},{id:"device_004",brand_id:"brand_004",type_id:"type_001",model:"ThinkPad T14"},{id:"device_005",brand_id:"brand_003",type_id:"type_002",model:"Pavilion Desktop"}],customer_devices:[{id:"custdev_001",client_id:"client_001",device_id:"device_001",serial_number:"SN-XPS13-0001",notes:"Battery drains quickly."},{id:"custdev_002",client_id:"client_002",device_id:"device_004",serial_number:"SN-TP-0012",notes:"Intermittent boot issues."},{id:"custdev_003",client_id:"client_003",device_id:"device_003",serial_number:"SN-GS23-031",notes:"Screen flickers at low brightness."},{id:"custdev_004",client_id:"client_004",device_id:"device_002",serial_number:"SN-IPAD-888",notes:"Charging port is loose."},{id:"custdev_005",client_id:"client_005",device_id:"device_005",serial_number:"SN-HPD-555",notes:"Runs very hot under load."}],jobs:k,estimates:j,appointments:[{id:"appt_001",scheduled_at:b("2026-01-29T10:00:00Z"),status:"confirmed",client_name:"Alex Johnson",client_email:"alex@example.com",client_phone:"+1 555 0101",notes:"Drop off in the morning.",created_at:b("2026-01-26T16:00:00Z")},{id:"appt_002",scheduled_at:b("2026-02-01T13:30:00Z"),status:"requested",client_name:"Sam Rivera",client_email:"sam@example.com",client_phone:"+1 555 0102",notes:"Prefer weekend.",created_at:b("2026-01-27T09:45:00Z")}],payments:d,expenses:e,expense_categories:[{id:"expcat_001",name:"Parts"},{id:"expcat_002",name:"Shipping"},{id:"expcat_003",name:"Tools"}],time_logs:f,reviews:l,services:[{id:"service_001",name:"Diagnostics",description:"Hardware and software diagnostics.",base_price:{currency:"USD",amount_cents:2500}},{id:"service_002",name:"Battery replacement",description:"Laptop battery replacement service.",base_price:{currency:"USD",amount_cents:7500}},{id:"service_003",name:"Screen replacement",description:"Phone/tablet screen replacement (parts excluded).",base_price:{currency:"USD",amount_cents:19900}}],parts:[{id:"part_001",name:"Laptop battery (generic)",sku:"BAT-GEN-001",price:{currency:"USD",amount_cents:3200},stock:12},{id:"part_002",name:"USB-C port module",sku:"USB-C-MOD-020",price:{currency:"USD",amount_cents:1800},stock:7},{id:"part_003",name:"Thermal paste",sku:"THERM-PASTE-010",price:{currency:"USD",amount_cents:900},stock:30}]};function n(a){return new Promise(b=>{setTimeout(b,a)})}async function o(a,b=350){return await n(b),await a()}function p(a){}function q(a){let b={msg:0,att:0,appt:0},c={...b,[a]:(b[a]??0)+1},d=String(c[a]).padStart(3,"0");return`${a}_${d}`}function r(){return new Date().toISOString()}function s(){var a;let b,c,d,e,f,g;return b=(a={}).estimatesById??{},c=a.jobsById??{},d=a.jobMessagesByJobId??{},e=a.appointments??null,f=m.estimates.map(a=>{let c=b[a.id]??null;return c?{...a,...c}:a}),g=m.jobs.map(a=>{let b=c[a.id]??null,e=d[a.id]??null;return b||e?{...a,...b??{},messages:e||a.messages}:a}),{...m,estimates:f,jobs:g,appointments:e||m.appointments}}function t(a,b){if(!a||"string"!=typeof a||0===a.trim().length)throw Error(`${b} is required.`)}a.s(["mockApi",0,{sleep:n,withLatency:o,getBundle:async()=>await o(()=>s()),getStatuses:async()=>await o(()=>s().statuses),listJobs:async()=>await o(()=>s().jobs),getJob:async a=>await o(()=>s().jobs.find(b=>b.id===a)??null),getJobByCaseNumber:async a=>await o(()=>{var b;let c;return b=s(),c=a.trim().toUpperCase(),b.jobs.find(a=>a.case_number.toUpperCase()===c)??null}),listClients:async()=>await o(()=>s().clients),getClient:async a=>await o(()=>s().clients.find(b=>b.id===a)??null),listCustomerDevices:async()=>await o(()=>s().customer_devices),getCustomerDevice:async a=>await o(()=>s().customer_devices.find(b=>b.id===a)??null),listDevices:async()=>await o(()=>s().devices),listDeviceBrands:async()=>await o(()=>s().device_brands),listDeviceTypes:async()=>await o(()=>s().device_types),listEstimates:async()=>await o(()=>s().estimates),getEstimate:async a=>await o(()=>s().estimates.find(b=>b.id===a)??null),setEstimateStatus:async a=>await o(()=>{let{estimateId:b,status:c}=a,d=s().estimates.find(a=>a.id===b)??null;if(!d)throw Error("Estimate not found.");let e={},f={...e.estimatesById??{}};return f[b]={...f[b]??{},status:c,updated_at:r()},p({...e,estimatesById:f}),{...d,status:c,updated_at:r()}}),listAppointments:async()=>await o(()=>s().appointments),createAppointment:async a=>await o(()=>{t(a.scheduled_at,"scheduled_at"),t(a.client_name,"client_name");let b={id:q("appt"),scheduled_at:new Date(a.scheduled_at).toISOString(),status:"requested",client_name:a.client_name.trim(),client_email:a.client_email??null,client_phone:a.client_phone??null,notes:a.notes??null,created_at:r()},c={},d=[b,...Array.isArray(c.appointments)?c.appointments:s().appointments];return p({...c,appointments:d}),b}),listPayments:async()=>await o(()=>s().payments),listExpenses:async()=>await o(()=>s().expenses),listExpenseCategories:async()=>await o(()=>s().expense_categories),listTimeLogs:async()=>await o(()=>s().time_logs),listServices:async()=>await o(()=>s().services),listParts:async()=>await o(()=>s().parts),listReviews:async()=>await o(()=>s().reviews),postJobMessage:async a=>await o(()=>{let{jobId:b,author:c}=a,d=a.body.trim();if(!d)throw Error("Message body is required.");let e=s().jobs.find(a=>a.id===b)??null;if(!e)throw Error("Job not found.");let f={id:q("msg"),job_id:b,author:c,body:d,created_at:r(),attachments:a.attachments&&a.attachments.length>0?a.attachments.map((a,c)=>({id:0===c?q("att"):`${q("att")}_${c}`,job_id:b,filename:a.filename,mime_type:a.mime_type,size_bytes:a.size_bytes,url:"/mock/uploads/placeholder",created_at:r()})):void 0},g={},h={...g.jobMessagesByJobId??{}},i=h[b]??e.messages;return h[b]=[...i,f],p({...g,jobMessagesByJobId:h}),f}),computeEstimateTotalCents:function(a){return a.lines.reduce((a,b)=>a+b.qty*b.unit_price.amount_cents,0)}}],45004)},69467,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(97867),f=a.i(17933),g=a.i(4600),h=a.i(54177),i=a.i(54804),j=a.i(45004),k=a.i(4148);function l(){let a=(0,d.useParams)(),l=a.business??a.tenant,[m,n]=c.default.useState(!0),[o,p]=c.default.useState(null),[q,r]=c.default.useState([]),[s,t]=c.default.useState([]),[u,v]=c.default.useState(""),[w,x]=c.default.useState(0),[y,z]=c.default.useState(10);c.default.useEffect(()=>{let a=!0;return async function(){try{n(!0),p(null);let[b,c]=await Promise.all([j.mockApi.listPayments(),j.mockApi.listJobs()]);if(!a)return;r(Array.isArray(b)?b:[]),t(Array.isArray(c)?c:[])}catch(b){if(!a)return;p(b instanceof Error?b.message:"Failed to load payments.")}finally{if(!a)return;n(!1)}}(),()=>{a=!1}},[]);let A=c.default.useMemo(()=>new Map(s.map(a=>[a.id,a])),[s]),B=c.default.useMemo(()=>{let a=u.trim().toLowerCase();return a?q.filter(b=>{let c=A.get(b.job_id)?.case_number??"";return`${b.id} ${b.job_id} ${c} ${b.method} ${b.status}`.toLowerCase().includes(a)}):q},[A,q,u]),C=B.length,D=c.default.useMemo(()=>{let a=w*y,b=a+y;return B.slice(a,b)},[B,w,y]),E=c.default.useMemo(()=>[{id:"id",header:"Payment",cell:a=>(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:a.id}),(0,b.jsx)("div",{className:"truncate text-xs text-zinc-600",children:A.get(a.job_id)?.case_number??a.job_id})]}),className:"min-w-[240px]"},{id:"amount",header:"Amount",cell:a=>(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap",children:(0,k.formatMoney)({amountCents:a.amount.amount_cents,currency:a.amount.currency})}),className:"whitespace-nowrap"},{id:"method",header:"Method",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.method.replace(/_/g," ")}),className:"whitespace-nowrap"},{id:"status",header:"Status",cell:a=>{var c;return(0,b.jsx)(f.Badge,{variant:"paid"===(c=a.status)?"success":"refunded"===c?"warning":"failed"===c?"danger":"default",children:a.status})},className:"whitespace-nowrap"},{id:"created",header:"Created",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:new Date(a.created_at).toLocaleString()}),className:"whitespace-nowrap"}],[A]);return(0,b.jsx)(i.ListPageShell,{title:"Payments",description:"Record and track payments for jobs.",actions:(0,b.jsx)(e.Button,{disabled:!0,variant:"outline",size:"sm",children:"New payment"}),loading:m,error:o,empty:!m&&!o&&0===q.length,emptyTitle:"No payments",emptyDescription:"Payments recorded against jobs will show here.",children:(0,b.jsx)(g.Card,{className:"shadow-none",children:(0,b.jsx)(g.CardContent,{className:"pt-5",children:(0,b.jsx)(h.DataTable,{title:"string"==typeof l?`Payments \xb7 ${l}`:"Payments",data:D,loading:m,emptyMessage:"No payments.",columns:E,getRowId:a=>a.id,search:{placeholder:"Search payments..."},server:{query:u,onQueryChange:a=>{v(a),x(0)},pageIndex:w,onPageIndexChange:x,pageSize:y,onPageSizeChange:a=>{z(a),x(0)},totalRows:C}})})})})}a.s(["default",()=>l])}];

//# sourceMappingURL=frontend_src_bc1cde04._.js.map