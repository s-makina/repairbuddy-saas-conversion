{"version":3,"sources":["../../../../../frontend/src/app/admin/billing/plans/%5BplanId%5D/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { useDashboardHeader } from \"@/components/DashboardShell\";\r\nimport { Alert } from \"@/components/ui/Alert\";\r\nimport { Badge } from \"@/components/ui/Badge\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/Card\";\r\nimport { Input } from \"@/components/ui/Input\";\r\nimport { Modal } from \"@/components/ui/Modal\";\r\nimport { Skeleton } from \"@/components/ui/Skeleton\";\r\nimport { createDraftBillingPlanVersionFromActive, getBillingCatalog, updateBillingPlan } from \"@/lib/billing\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport type { BillingPlan, BillingPlanVersion, BillingPrice } from \"@/lib/types\";\r\n\r\nfunction formatCents(args: { currency?: string | null; amountCents?: number | null }) {\r\n  const currency = (args.currency || \"usd\").toUpperCase();\r\n  const amountCents = typeof args.amountCents === \"number\" ? args.amountCents : 0;\r\n  const amount = amountCents / 100;\r\n\r\n  try {\r\n    return new Intl.NumberFormat(undefined, {\r\n      style: \"currency\",\r\n      currency,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  } catch {\r\n    return `${currency} ${amount.toFixed(2)}`;\r\n  }\r\n}\r\n\r\nfunction intervalLabel(interval?: string | null) {\r\n  const v = String(interval || \"\").toLowerCase();\r\n  if (!v) return \"\";\r\n  if (v === \"month\" || v === \"monthly\") return \"/mo\";\r\n  if (v === \"year\" || v === \"yearly\" || v === \"annual\") return \"/yr\";\r\n  return `/${v}`;\r\n}\r\n\r\nfunction pickDisplayVersion(plan: BillingPlan): BillingPlanVersion | null {\r\n  const versions = Array.isArray(plan.versions) ? plan.versions : [];\r\n  const active = versions.find((v) => v.status === \"active\") ?? null;\r\n  if (active) return active;\r\n  const latest = versions.slice().sort((a, b) => (b.version ?? 0) - (a.version ?? 0))[0] ?? null;\r\n  return latest;\r\n}\r\n\r\nfunction pickDisplayPrice(version: BillingPlanVersion | null): BillingPrice | null {\r\n  if (!version) return null;\r\n  const prices = Array.isArray(version.prices) ? version.prices : [];\r\n  const preferred = prices.find((p) => p.is_default) ?? null;\r\n  return preferred ?? prices[0] ?? null;\r\n}\r\n\r\nfunction formatDate(value?: string | null) {\r\n  if (!value) return \"—\";\r\n  const d = new Date(value);\r\n  if (Number.isNaN(d.getTime())) return \"—\";\r\n  try {\r\n    return new Intl.DateTimeFormat(undefined, {\r\n      year: \"numeric\",\r\n      month: \"short\",\r\n      day: \"2-digit\",\r\n    }).format(d);\r\n  } catch {\r\n    return d.toISOString().slice(0, 10);\r\n  }\r\n}\r\n\r\nfunction BillingPlanDetailSkeleton() {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <Card className=\"overflow-hidden\">\r\n        <div className=\"h-1.5 w-full bg-[var(--rb-border)]\" />\r\n        <CardHeader className=\"space-y-3\">\r\n          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n            <div className=\"min-w-0\">\r\n              <Skeleton className=\"h-3 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n              <div className=\"mt-2 flex flex-wrap items-center gap-2\">\r\n                <Skeleton className=\"h-7 w-56 rounded-[var(--rb-radius-sm)]\" />\r\n                <Skeleton className=\"h-5 w-20 rounded-full\" />\r\n              </div>\r\n              <Skeleton className=\"mt-2 h-4 w-80 rounded-[var(--rb-radius-sm)]\" />\r\n            </div>\r\n\r\n            <div className=\"sm:text-right\">\r\n              <Skeleton className=\"ml-auto h-3 w-20 rounded-[var(--rb-radius-sm)]\" />\r\n              <div className=\"mt-2 flex items-baseline gap-2 sm:justify-end\">\r\n                <Skeleton className=\"h-8 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n                <Skeleton className=\"h-4 w-12 rounded-[var(--rb-radius-sm)]\" />\r\n              </div>\r\n              <Skeleton className=\"mt-2 ml-auto h-3 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n            </div>\r\n          </div>\r\n        </CardHeader>\r\n\r\n        <CardContent>\r\n          <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\n            {Array.from({ length: 3 }).map((_, idx) => (\r\n              <div\r\n                key={idx}\r\n                className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-4\"\r\n              >\r\n                <Skeleton className=\"h-3 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n                <div className=\"mt-4 space-y-3\">\r\n                  <div>\r\n                    <Skeleton className=\"h-3 w-16 rounded-[var(--rb-radius-sm)]\" />\r\n                    <Skeleton className=\"mt-2 h-4 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n                  </div>\r\n                  <div>\r\n                    <Skeleton className=\"h-3 w-20 rounded-[var(--rb-radius-sm)]\" />\r\n                    <Skeleton className=\"mt-2 h-4 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n                  </div>\r\n                  <div>\r\n                    <Skeleton className=\"h-3 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n                    <Skeleton className=\"mt-2 h-4 w-20 rounded-[var(--rb-radius-sm)]\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      <div className=\"space-y-3\">\r\n        <div className=\"flex flex-col gap-3 md:flex-row md:items-end md:justify-between\">\r\n          <div className=\"min-w-0\">\r\n            <Skeleton className=\"h-5 w-40 rounded-[var(--rb-radius-sm)]\" />\r\n            <Skeleton className=\"mt-2 h-4 w-72 rounded-[var(--rb-radius-sm)]\" />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col gap-2 sm:flex-row sm:items-end\">\r\n            <Skeleton className=\"h-9 w-full rounded-[var(--rb-radius-sm)] sm:w-[260px]\" />\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              {Array.from({ length: 4 }).map((_, idx) => (\r\n                <Skeleton key={idx} className=\"h-8 w-20 rounded-[var(--rb-radius-sm)]\" />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-5\">\r\n          <div className=\"space-y-4\">\r\n            {Array.from({ length: 3 }).map((_, idx) => (\r\n              <div key={idx} className=\"flex gap-4\">\r\n                <div className=\"relative flex w-5 flex-col items-center\">\r\n                  <div className=\"mt-1 h-3 w-3 rounded-full bg-[var(--rb-border)]\" />\r\n                  {idx < 2 ? <div className=\"mt-2 w-px flex-1 bg-[var(--rb-border)]\" /> : null}\r\n                </div>\r\n                <div className=\"min-w-0 flex-1 rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-4 py-4\">\r\n                  <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"flex flex-wrap items-center gap-2\">\r\n                        <Skeleton className=\"h-5 w-12 rounded-[var(--rb-radius-sm)]\" />\r\n                        <Skeleton className=\"h-5 w-16 rounded-full\" />\r\n                        <Skeleton className=\"h-3 w-14 rounded-[var(--rb-radius-sm)]\" />\r\n                      </div>\r\n                      <Skeleton className=\"mt-2 h-3 w-40 rounded-[var(--rb-radius-sm)]\" />\r\n                      <div className=\"mt-3 flex flex-wrap items-center gap-2\">\r\n                        <Skeleton className=\"h-5 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n                        <Skeleton className=\"h-5 w-16 rounded-[var(--rb-radius-sm)]\" />\r\n                        <Skeleton className=\"h-5 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n                      </div>\r\n                    </div>\r\n                    <Skeleton className=\"h-8 w-16 rounded-[var(--rb-radius-sm)]\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function AdminBillingPlanDetailPage() {\r\n  const params = useParams<{ planId: string }>();\r\n  const dashboardHeader = useDashboardHeader();\r\n  const router = useRouter();\r\n  const auth = useAuth();\r\n\r\n  const planId = Number(params.planId);\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [actionError, setActionError] = useState<string | null>(null);\r\n  const [draftBusy, setDraftBusy] = useState(false);\r\n  const [plan, setPlan] = useState<BillingPlan | null>(null);\r\n  const [reloadNonce, setReloadNonce] = useState(0);\r\n  const [versionQuery, setVersionQuery] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState<\"all\" | \"active\" | \"draft\" | \"retired\" | \"other\">(\"all\");\r\n\r\n  const [editOpen, setEditOpen] = useState(false);\r\n  const [editBusy, setEditBusy] = useState(false);\r\n  const [editError, setEditError] = useState<string | null>(null);\r\n  const [editName, setEditName] = useState(\"\");\r\n  const [editCode, setEditCode] = useState(\"\");\r\n  const [editDescription, setEditDescription] = useState(\"\");\r\n  const [editIsActive, setEditIsActive] = useState(true);\r\n\r\n  const canWrite = auth.can(\"admin.billing.write\");\r\n\r\n  useEffect(() => {\r\n    dashboardHeader.setHeader({\r\n      breadcrumb: \"Admin / Billing / Plans\",\r\n      title: plan ? plan.name : Number.isFinite(planId) ? `Plan ${planId}` : \"Plan\",\r\n      subtitle: plan ? plan.code : undefined,\r\n      actions: (\r\n        <div className=\"flex items-center gap-2\">\r\n          <Link href=\"/admin/billing/plans\">\r\n            <Button variant=\"outline\" size=\"sm\">\r\n              Back\r\n            </Button>\r\n          </Link>\r\n          {canWrite ? (\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              disabled={loading || editBusy || !plan}\r\n              onClick={() => {\r\n                if (!plan) return;\r\n                setEditError(null);\r\n                setEditName(plan.name ?? \"\");\r\n                setEditCode(plan.code ?? \"\");\r\n                setEditDescription(plan.description ?? \"\");\r\n                setEditIsActive(Boolean(plan.is_active));\r\n                setEditOpen(true);\r\n              }}\r\n            >\r\n              Edit plan\r\n            </Button>\r\n          ) : null}\r\n          {canWrite ? (\r\n            <Button\r\n              variant=\"secondary\"\r\n              size=\"sm\"\r\n              disabled={loading || draftBusy || !Number.isFinite(planId) || planId <= 0}\r\n              onClick={async () => {\r\n                if (draftBusy) return;\r\n                try {\r\n                  setDraftBusy(true);\r\n                  setActionError(null);\r\n                  const res = await createDraftBillingPlanVersionFromActive({ planId });\r\n                  router.push(`/admin/billing/plans/${planId}/versions/${res.version.id}`);\r\n                } catch (e) {\r\n                  setActionError(e instanceof Error ? e.message : \"Failed to create draft version.\");\r\n                } finally {\r\n                  setDraftBusy(false);\r\n                }\r\n              }}\r\n            >\r\n              {draftBusy ? \"Creating…\" : \"Create draft\"}\r\n            </Button>\r\n          ) : null}\r\n          <Button variant=\"outline\" size=\"sm\" onClick={() => setReloadNonce((v) => v + 1)} disabled={loading}>\r\n            Refresh\r\n          </Button>\r\n        </div>\r\n      ),\r\n    });\r\n\r\n    return () => dashboardHeader.setHeader(null);\r\n  }, [canWrite, dashboardHeader, draftBusy, loading, plan, planId, router]);\r\n\r\n  async function onSavePlan() {\r\n    if (!plan) return;\r\n\r\n    const nextName = editName.trim();\r\n    const nextCode = editCode.trim();\r\n\r\n    if (!nextName) {\r\n      setEditError(\"Name is required.\");\r\n      return;\r\n    }\r\n    if (!nextCode) {\r\n      setEditError(\"Code is required.\");\r\n      return;\r\n    }\r\n\r\n    setEditBusy(true);\r\n    setEditError(null);\r\n\r\n    try {\r\n      await updateBillingPlan({\r\n        planId: plan.id,\r\n        name: nextName,\r\n        code: nextCode,\r\n        description: editDescription,\r\n        isActive: editIsActive,\r\n      });\r\n\r\n      setEditOpen(false);\r\n      setReloadNonce((v) => v + 1);\r\n    } catch (e) {\r\n      setEditError(e instanceof Error ? e.message : \"Failed to update plan.\");\r\n    } finally {\r\n      setEditBusy(false);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function load() {\r\n      if (!Number.isFinite(planId) || planId <= 0) {\r\n        setError(\"Invalid plan id.\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        const res = await getBillingCatalog({ includeInactive: true });\r\n        if (!alive) return;\r\n\r\n        const found = (Array.isArray(res.billing_plans) ? res.billing_plans : []).find((p) => p.id === planId) ?? null;\r\n        setPlan(found);\r\n\r\n        if (!found) {\r\n          setError(\"Plan not found.\");\r\n        }\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setPlan(null);\r\n        setError(e instanceof Error ? e.message : \"Failed to load plan.\");\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    void load();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [planId, reloadNonce]);\r\n\r\n  const versions = useMemo(() => (Array.isArray(plan?.versions) ? plan?.versions : []) as BillingPlanVersion[], [plan]);\r\n  const displayVersion = useMemo(() => (plan ? pickDisplayVersion(plan) : null), [plan]);\r\n  const displayPrice = useMemo(() => pickDisplayPrice(displayVersion), [displayVersion]);\r\n  const currencies = useMemo(() => {\r\n    const allPrices = versions.flatMap((v) => (Array.isArray(v.prices) ? v.prices : []));\r\n    return Array.from(new Set(allPrices.map((x) => x.currency).filter(Boolean)))\r\n      .map((c) => String(c).toUpperCase())\r\n      .sort();\r\n  }, [versions]);\r\n\r\n  const versionCounts = useMemo(() => {\r\n    const base = { all: 0, active: 0, draft: 0, retired: 0, other: 0 };\r\n    for (const v of versions) {\r\n      base.all += 1;\r\n      const status = String(v.status || \"\").toLowerCase();\r\n      if (status === \"active\") base.active += 1;\r\n      else if (status === \"draft\") base.draft += 1;\r\n      else if (status === \"retired\") base.retired += 1;\r\n      else base.other += 1;\r\n    }\r\n    return base;\r\n  }, [versions]);\r\n\r\n  const filteredVersions = useMemo(() => {\r\n    const q = versionQuery.trim().toLowerCase();\r\n    const rows = versions\r\n      .slice()\r\n      .sort((a, b) => (b.version ?? 0) - (a.version ?? 0))\r\n      .filter((v) => {\r\n        const status = String(v.status || \"\").toLowerCase();\r\n        if (statusFilter === \"active\" && status !== \"active\") return false;\r\n        if (statusFilter === \"draft\" && status !== \"draft\") return false;\r\n        if (statusFilter === \"retired\" && status !== \"retired\") return false;\r\n        if (statusFilter === \"other\" && (status === \"active\" || status === \"draft\" || status === \"retired\")) return false;\r\n        if (!q) return true;\r\n\r\n        const prices = Array.isArray(v.prices) ? v.prices : [];\r\n        const priceText = prices\r\n          .map((p) => `${p.currency} ${p.interval} ${p.amount_cents}`)\r\n          .join(\" \")\r\n          .toLowerCase();\r\n\r\n        return (\r\n          `v${v.version} ${v.status} ${v.id}`.toLowerCase().includes(q) ||\r\n          priceText.includes(q)\r\n        );\r\n      });\r\n    return rows;\r\n  }, [statusFilter, versionQuery, versions]);\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"admin.billing.read\">\r\n      <div className=\"space-y-6\">\r\n        {error ? (\r\n          <Alert variant=\"danger\" title=\"Could not load plan\">\r\n            {error}\r\n          </Alert>\r\n        ) : null}\r\n\r\n        {actionError ? (\r\n          <Alert variant=\"danger\" title=\"Action failed\">\r\n            {actionError}\r\n          </Alert>\r\n        ) : null}\r\n\r\n        {loading && !plan && !error ? <BillingPlanDetailSkeleton /> : null}\r\n\r\n        {plan ? (\r\n          <Card className=\"overflow-hidden\">\r\n            <div className={\"h-1.5 w-full \" + (plan.is_active ? \"bg-[var(--rb-blue)]\" : \"bg-[var(--rb-border)]\")} />\r\n            <CardHeader className=\"space-y-3\">\r\n              <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n                <div className=\"min-w-0\">\r\n                  <div className=\"text-xs font-medium uppercase tracking-wide text-zinc-500\">Billing plan</div>\r\n                  <div className=\"mt-1 flex flex-wrap items-center gap-2\">\r\n                    <div className=\"truncate text-xl font-semibold tracking-tight text-[var(--rb-text)]\">{plan.name}</div>\r\n                    <Badge variant={plan.is_active ? \"success\" : \"default\"}>{plan.is_active ? \"active\" : \"inactive\"}</Badge>\r\n                  </div>\r\n                  <div className=\"mt-1 text-sm text-zinc-600\">{plan.description ?? \"—\"}</div>\r\n                </div>\r\n\r\n                <div className=\"sm:text-right\">\r\n                  <div className=\"text-xs text-zinc-500\">Starting at</div>\r\n                  <div className=\"mt-1 flex items-baseline gap-2 sm:justify-end\">\r\n                    <div className=\"text-2xl font-semibold tracking-tight text-[var(--rb-text)]\">\r\n                      {displayPrice ? formatCents({ currency: displayPrice.currency, amountCents: displayPrice.amount_cents }) : \"—\"}\r\n                    </div>\r\n                    <div className=\"text-sm text-zinc-600\">{displayPrice ? intervalLabel(displayPrice.interval) : \"\"}</div>\r\n                  </div>\r\n                  {displayPrice?.trial_days ? (\r\n                    <div className=\"mt-1 text-xs text-zinc-500\">{displayPrice.trial_days} day trial</div>\r\n                  ) : null}\r\n                </div>\r\n              </div>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\n                <div className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-4\">\r\n                  <div className=\"text-xs font-medium uppercase tracking-wide text-zinc-500\">Overview</div>\r\n                  <div className=\"mt-3 space-y-3\">\r\n                    <div>\r\n                      <div className=\"text-xs text-zinc-500\">Code</div>\r\n                      <div className=\"mt-1 text-sm font-medium text-zinc-800\">{plan.code}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-xs text-zinc-500\">Plan ID</div>\r\n                      <div className=\"mt-1 text-sm font-medium text-zinc-800\">{plan.id}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-xs text-zinc-500\">Last updated</div>\r\n                      <div className=\"mt-1 text-sm font-medium text-zinc-800\">{formatDate(plan.updated_at)}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-4\">\r\n                  <div className=\"text-xs font-medium uppercase tracking-wide text-zinc-500\">Current version</div>\r\n                  <div className=\"mt-3 space-y-2\">\r\n                    <div className=\"text-sm text-zinc-700\">\r\n                      {displayVersion ? (\r\n                        <>\r\n                          <span className=\"font-medium text-zinc-900\">v{displayVersion.version}</span>\r\n                          <span className=\"ml-2\">\r\n                            <Badge\r\n                              variant={displayVersion.status === \"active\" ? \"success\" : displayVersion.status === \"draft\" ? \"info\" : \"default\"}\r\n                            >\r\n                              {displayVersion.status}\r\n                            </Badge>\r\n                          </span>\r\n                        </>\r\n                      ) : (\r\n                        \"—\"\r\n                      )}\r\n                    </div>\r\n                    <div className=\"text-xs text-zinc-500\">Total versions: {versions.length}</div>\r\n                    {displayVersion ? (\r\n                      <div className=\"pt-1\">\r\n                        <Link href={`/admin/billing/plans/${planId}/versions/${displayVersion.id}`}>\r\n                          <Button variant=\"outline\" size=\"sm\">\r\n                            View current version\r\n                          </Button>\r\n                        </Link>\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-4\">\r\n                  <div className=\"text-xs font-medium uppercase tracking-wide text-zinc-500\">Coverage</div>\r\n                  <div className=\"mt-3 space-y-3\">\r\n                    <div>\r\n                      <div className=\"text-xs text-zinc-500\">Currencies</div>\r\n                      <div className=\"mt-1 text-sm font-medium text-zinc-800\">{currencies.length > 0 ? currencies.join(\", \") : \"—\"}</div>\r\n                    </div>\r\n                    <div>\r\n                      <div className=\"text-xs text-zinc-500\">Default currency</div>\r\n                      <div className=\"mt-1 text-sm font-medium text-zinc-800\">{displayPrice?.currency ? String(displayPrice.currency).toUpperCase() : \"—\"}</div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        ) : null}\r\n\r\n        <Modal\r\n          open={editOpen}\r\n          onClose={() => {\r\n            if (!editBusy) setEditOpen(false);\r\n          }}\r\n          title=\"Edit billing plan\"\r\n          footer={\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => {\r\n                  if (!editBusy) setEditOpen(false);\r\n                }}\r\n                disabled={editBusy}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button variant=\"primary\" onClick={() => void onSavePlan()} disabled={editBusy}>\r\n                {editBusy ? \"Saving…\" : \"Save\"}\r\n              </Button>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"space-y-4\">\r\n            {editError ? (\r\n              <Alert variant=\"danger\" title=\"Cannot save\">\r\n                {editError}\r\n              </Alert>\r\n            ) : null}\r\n\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\">Name</label>\r\n              <Input value={editName} onChange={(e) => setEditName(e.target.value)} disabled={editBusy} />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\">Code</label>\r\n              <Input value={editCode} onChange={(e) => setEditCode(e.target.value)} disabled={editBusy} />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\">Description</label>\r\n              <textarea\r\n                className=\"min-h-[90px] w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={editDescription}\r\n                onChange={(e) => setEditDescription(e.target.value)}\r\n                disabled={editBusy}\r\n              />\r\n            </div>\r\n\r\n            <label className=\"flex items-center gap-2 text-sm\">\r\n              <input type=\"checkbox\" checked={editIsActive} onChange={(e) => setEditIsActive(e.target.checked)} disabled={editBusy} />\r\n              Active\r\n            </label>\r\n          </div>\r\n        </Modal>\r\n\r\n        <div className=\"space-y-3\">\r\n          <div className=\"flex flex-col gap-3 md:flex-row md:items-end md:justify-between\">\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Version history</div>\r\n              <div className=\"mt-1 text-sm text-zinc-600\">Track changes over time and inspect each version.</div>\r\n            </div>\r\n\r\n            <div className=\"flex flex-col gap-2 sm:flex-row sm:items-end\">\r\n              <div className=\"w-full sm:w-[260px]\">\r\n                <Input\r\n                  value={versionQuery}\r\n                  onChange={(e: React.ChangeEvent<HTMLInputElement>) => setVersionQuery(e.target.value)}\r\n                  placeholder=\"Search versions…\"\r\n                />\r\n              </div>\r\n              <div className=\"flex flex-wrap items-center gap-2\">\r\n                <Button\r\n                  variant={statusFilter === \"all\" ? \"secondary\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setStatusFilter(\"all\")}\r\n                >\r\n                  All ({versionCounts.all})\r\n                </Button>\r\n                <Button\r\n                  variant={statusFilter === \"active\" ? \"secondary\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setStatusFilter(\"active\")}\r\n                >\r\n                  Active ({versionCounts.active})\r\n                </Button>\r\n                <Button\r\n                  variant={statusFilter === \"draft\" ? \"secondary\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setStatusFilter(\"draft\")}\r\n                >\r\n                  Draft ({versionCounts.draft})\r\n                </Button>\r\n                <Button\r\n                  variant={statusFilter === \"retired\" ? \"secondary\" : \"outline\"}\r\n                  size=\"sm\"\r\n                  onClick={() => setStatusFilter(\"retired\")}\r\n                >\r\n                  Retired ({versionCounts.retired})\r\n                </Button>\r\n                {(statusFilter !== \"all\" || versionQuery.trim().length > 0) ? (\r\n                  <Button\r\n                    variant=\"ghost\"\r\n                    size=\"sm\"\r\n                    onClick={() => {\r\n                      setStatusFilter(\"all\");\r\n                      setVersionQuery(\"\");\r\n                    }}\r\n                  >\r\n                    Clear\r\n                  </Button>\r\n                ) : null}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {loading ? null : null}\r\n\r\n          {!loading && filteredVersions.length === 0 ? (\r\n            <div className=\"text-sm text-zinc-500\">No versions found.</div>\r\n          ) : null}\r\n\r\n          {!loading && filteredVersions.length > 0 ? (\r\n            <div className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-5\">\r\n              <div className=\"mb-4 flex items-center justify-between gap-3\">\r\n                <div className=\"text-sm text-zinc-600\">\r\n                  Showing <span className=\"font-medium text-zinc-900\">{filteredVersions.length}</span> of {versions.length}\r\n                </div>\r\n              </div>\r\n              <div className=\"space-y-0\">\r\n                {filteredVersions.map((v, idx) => {\r\n                  const prices = Array.isArray(v.prices) ? v.prices : [];\r\n                  const ent = Array.isArray(v.entitlements) ? v.entitlements : [];\r\n                  const defaultPrice = pickDisplayPrice(v);\r\n                  const isLast = idx === filteredVersions.length - 1;\r\n\r\n                  const status = String(v.status || \"\").toLowerCase();\r\n                  const nodeColor =\r\n                    status === \"active\"\r\n                      ? \"bg-[var(--rb-blue)]\"\r\n                      : status === \"draft\"\r\n                        ? \"bg-[var(--rb-orange)]\"\r\n                        : \"bg-zinc-400\";\r\n                  const ringColor =\r\n                    status === \"active\"\r\n                      ? \"ring-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]\"\r\n                      : status === \"draft\"\r\n                        ? \"ring-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]\"\r\n                        : \"ring-[color:color-mix(in_srgb,var(--rb-border),white_70%)]\";\r\n\r\n                  return (\r\n                    <div key={v.id} className={\"relative flex gap-4 \" + (isLast ? \"\" : \"pb-6\")}\r\n                    >\r\n                      <div className=\"relative flex w-5 flex-col items-center\">\r\n                        <div className={\"mt-1 h-3 w-3 rounded-full ring-4 \" + nodeColor + \" \" + ringColor} />\r\n                        {!isLast ? <div className=\"mt-2 w-px flex-1 bg-[var(--rb-border)]\" /> : null}\r\n                      </div>\r\n\r\n                      <div className=\"min-w-0 flex-1\">\r\n                        <div className=\"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-4 py-4\">\r\n                          <div className=\"flex flex-col gap-3 sm:flex-row sm:items-start sm:justify-between\">\r\n                            <div className=\"min-w-0\">\r\n                              <div className=\"flex flex-wrap items-center gap-2\">\r\n                                <div className=\"text-base font-semibold text-[var(--rb-text)]\">v{v.version}</div>\r\n                                <Badge variant={status === \"active\" ? \"success\" : status === \"draft\" ? \"info\" : \"default\"}>\r\n                                  {v.status}\r\n                                </Badge>\r\n                                <div className=\"text-xs text-zinc-500\">ID {v.id}</div>\r\n                              </div>\r\n\r\n                              <div className=\"mt-1 text-xs text-zinc-500\">\r\n                                {status === \"active\" ? (\r\n                                  <>Activated: {formatDate(v.activated_at ?? v.created_at)}</>\r\n                                ) : status === \"retired\" ? (\r\n                                  <>Retired: {formatDate(v.retired_at ?? v.created_at)}</>\r\n                                ) : (\r\n                                  <>Created: {formatDate(v.created_at)}</>\r\n                                )}\r\n                              </div>\r\n\r\n                              <div className=\"mt-2 flex flex-wrap items-center gap-2\">\r\n                                {defaultPrice ? (\r\n                                  <div className=\"text-sm font-medium text-zinc-900\">\r\n                                    {formatCents({ currency: defaultPrice.currency, amountCents: defaultPrice.amount_cents })}\r\n                                    <span className=\"ml-1 text-sm font-normal text-zinc-600\">{intervalLabel(defaultPrice.interval)}</span>\r\n                                  </div>\r\n                                ) : (\r\n                                  <div className=\"text-sm text-zinc-600\">—</div>\r\n                                )}\r\n\r\n                                <div className=\"text-xs text-zinc-500\">•</div>\r\n                                <div className=\"text-sm text-zinc-700\">{prices.length} price(s)</div>\r\n                                <div className=\"text-xs text-zinc-500\">•</div>\r\n                                <div className=\"text-sm text-zinc-700\">{ent.length} entitlements</div>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center justify-between gap-3 sm:flex-col sm:items-end sm:justify-start\">\r\n                              <Link href={`/admin/billing/plans/${planId}/versions/${v.id}`}>\r\n                                <Button variant=\"outline\" size=\"sm\">\r\n                                  View\r\n                                </Button>\r\n                              </Link>\r\n                            </div>\r\n                          </div>\r\n\r\n                          {prices.length > 0 ? (\r\n                            <div className=\"mt-3 flex flex-wrap gap-2\">\r\n                              {prices.slice(0, 4).map((p) => (\r\n                                <span\r\n                                  key={p.id}\r\n                                  className={\r\n                                    \"inline-flex items-center gap-2 rounded-full border px-2.5 py-1 text-xs font-medium \" +\r\n                                    (p.is_default\r\n                                      ? \"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-blue)]\"\r\n                                      : \"border-[var(--rb-border)] bg-white text-[var(--rb-text)]\")\r\n                                  }\r\n                                >\r\n                                  <span>{String(p.currency).toUpperCase()}</span>\r\n                                  <span>\r\n                                    {formatCents({ currency: p.currency, amountCents: p.amount_cents })}\r\n                                    {intervalLabel(p.interval)}\r\n                                  </span>\r\n                                  {p.is_default ? <span className=\"text-[10px] uppercase tracking-wide\">default</span> : null}\r\n                                </span>\r\n                              ))}\r\n\r\n                              {prices.length > 4 ? (\r\n                                <span className=\"inline-flex items-center rounded-full border border-[var(--rb-border)] bg-white px-2.5 py-1 text-xs font-medium text-zinc-600\">\r\n                                  +{prices.length - 4} more\r\n                                </span>\r\n                              ) : null}\r\n                            </div>\r\n                          ) : null}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}