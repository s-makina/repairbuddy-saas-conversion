{"version":3,"sources":["../../../../../frontend/src/components/ui/Modal.tsx","../../../../../frontend/src/components/ui/ConfirmDialog.tsx","../../../../../frontend/src/lib/money.ts","../../../../../frontend/src/components/shells/ListPageShell.tsx","../../../../../frontend/src/app/app/get-up-and-glo/services/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useEffect } from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport function Modal({\r\n  open,\r\n  onClose,\r\n  title,\r\n  children,\r\n  footer,\r\n  position = \"center\",\r\n  variant = \"glass\",\r\n  className,\r\n}: {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  title?: React.ReactNode;\r\n  children: React.ReactNode;\r\n  footer?: React.ReactNode;\r\n  position?: \"center\" | \"top-center\";\r\n  variant?: \"glass\" | \"solid\";\r\n  className?: string;\r\n}) {\r\n  useEffect(() => {\r\n    function onKeyDown(e: KeyboardEvent) {\r\n      if (!open) return;\r\n      if (e.key === \"Escape\") onClose();\r\n    }\r\n\r\n    document.addEventListener(\"keydown\", onKeyDown);\r\n    return () => document.removeEventListener(\"keydown\", onKeyDown);\r\n  }, [onClose, open]);\r\n\r\n  if (!open) return null;\r\n\r\n  const containerClassName =\r\n    position === \"top-center\"\r\n      ? \"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8\"\r\n      : \"fixed inset-0 z-50 flex items-center justify-center px-4\";\r\n\r\n  const panelClassName =\r\n    variant === \"solid\"\r\n      ? cn(\r\n          \"relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]\",\r\n          \"border border-[var(--rb-border)]\",\r\n          \"bg-white\",\r\n          \"shadow-[var(--rb-shadow)]\",\r\n        )\r\n      : cn(\r\n          \"relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]\",\r\n          \"border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]\",\r\n          \"bg-white/75 backdrop-blur-xl\",\r\n          \"shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]\",\r\n          \"ring-1 ring-white/25\",\r\n        );\r\n\r\n  const showInnerGlow = variant === \"glass\";\r\n\r\n  return (\r\n    <div className={containerClassName}>\r\n      <button\r\n        type=\"button\"\r\n        className={cn(\r\n          \"absolute inset-0\",\r\n          \"bg-black/35 backdrop-blur-md\",\r\n          \"bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]\",\r\n        )}\r\n        aria-label=\"Close\"\r\n        onClick={onClose}\r\n      />\r\n      <div\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        className={cn(\r\n          panelClassName,\r\n          className,\r\n        )}\r\n      >\r\n        {showInnerGlow ? (\r\n          <div className=\"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]\" />\r\n        ) : null}\r\n        {title ? (\r\n          <div\r\n            className={cn(\r\n              \"relative px-5 py-4\",\r\n              variant === \"solid\"\r\n                ? \"border-b border-[var(--rb-border)]\"\r\n                : \"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]\",\r\n            )}\r\n          >\r\n            <div className=\"text-sm font-semibold text-[var(--rb-text)]\">{title}</div>\r\n          </div>\r\n        ) : null}\r\n\r\n        <div className=\"relative px-5 py-4\">{children}</div>\r\n\r\n        {footer ? (\r\n          <div\r\n            className={cn(\r\n              \"relative px-5 py-4\",\r\n              variant === \"solid\"\r\n                ? \"border-t border-[var(--rb-border)]\"\r\n                : \"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]\",\r\n            )}\r\n          >\r\n            {footer}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { Modal } from \"@/components/ui/Modal\";\r\nimport { Button } from \"@/components/ui/Button\";\r\n\r\nexport function ConfirmDialog({\r\n  open,\r\n  title,\r\n  message,\r\n  confirmText = \"Confirm\",\r\n  confirmVariant = \"primary\",\r\n  cancelText = \"Cancel\",\r\n  busy = false,\r\n  onCancel,\r\n  onConfirm,\r\n}: {\r\n  open: boolean;\r\n  title: string;\r\n  message: React.ReactNode;\r\n  confirmText?: string;\r\n  confirmVariant?: \"primary\" | \"secondary\" | \"outline\" | \"ghost\";\r\n  cancelText?: string;\r\n  busy?: boolean;\r\n  onCancel: () => void;\r\n  onConfirm: () => void;\r\n}) {\r\n  return (\r\n    <Modal\r\n      open={open}\r\n      onClose={() => {\r\n        if (!busy) onCancel();\r\n      }}\r\n      title={title}\r\n      footer={\r\n        <div className=\"flex items-center justify-end gap-2\">\r\n          <Button variant=\"outline\" onClick={onCancel} disabled={busy}>\r\n            {cancelText}\r\n          </Button>\r\n          <Button variant={confirmVariant} onClick={onConfirm} disabled={busy}>\r\n            {busy ? \"Working...\" : confirmText}\r\n          </Button>\r\n        </div>\r\n      }\r\n    >\r\n      <div className=\"text-sm text-zinc-700\">{message}</div>\r\n    </Modal>\r\n  );\r\n}\r\n","export function formatMoney(args: {\r\n  amountCents: number | null | undefined;\r\n  currency: string | null | undefined;\r\n  fallback?: string;\r\n}): string {\r\n  const amountCents = args.amountCents;\r\n  const currency = args.currency?.toUpperCase() ?? null;\r\n\r\n  if (typeof amountCents !== \"number\" || !Number.isFinite(amountCents)) {\r\n    return args.fallback ?? \"—\";\r\n  }\r\n\r\n  const amount = amountCents / 100;\r\n\r\n  if (!currency || currency.length !== 3) {\r\n    return `${amount.toFixed(2)}`;\r\n  }\r\n\r\n  try {\r\n    return new Intl.NumberFormat(undefined, {\r\n      style: \"currency\",\r\n      currency,\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  } catch {\r\n    return `${currency} ${amount.toFixed(2)}`;\r\n  }\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Alert } from \"@/components/ui/Alert\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\n\r\nexport function ListPageShell({\r\n  title,\r\n  description,\r\n  actions,\r\n  filters,\r\n  loading,\r\n  loadingFallback,\r\n  error,\r\n  empty,\r\n  emptyTitle = \"Nothing here yet\",\r\n  emptyDescription = \"No items to display.\",\r\n  children,\r\n}: {\r\n  title: string;\r\n  description?: string;\r\n  actions?: React.ReactNode;\r\n  filters?: React.ReactNode;\r\n  loading?: boolean;\r\n  loadingFallback?: React.ReactNode;\r\n  error?: string | React.ReactNode | null;\r\n  empty?: boolean;\r\n  emptyTitle?: string;\r\n  emptyDescription?: string;\r\n  children?: React.ReactNode;\r\n}) {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <PageHeader title={title} description={description} actions={actions} />\r\n\r\n      {filters ? <Card className=\"shadow-none\"><CardContent className=\"pt-5\">{filters}</CardContent></Card> : null}\r\n\r\n      {error ? (\r\n        <Alert variant=\"danger\" title=\"Something went wrong\">\r\n          {error}\r\n        </Alert>\r\n      ) : null}\r\n\r\n      {loading ? (\r\n        loadingFallback ?? <div className=\"text-sm text-zinc-500\">Loading...</div>\r\n      ) : null}\r\n\r\n      {!loading && !error && empty ? (\r\n        <Card className=\"shadow-none\">\r\n          <CardContent className=\"pt-5\">\r\n            <div className=\"text-sm font-semibold text-[var(--rb-text)]\">{emptyTitle}</div>\r\n            <div className=\"mt-1 text-sm text-zinc-600\">{emptyDescription}</div>\r\n          </CardContent>\r\n        </Card>\r\n      ) : null}\r\n\r\n      {!loading && !error && !empty ? children : null}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\nimport { ConfirmDialog } from \"@/components/ui/ConfirmDialog\";\r\nimport { DataTable, type DataTableColumn } from \"@/components/ui/DataTable\";\r\nimport { DropdownMenu, DropdownMenuItem, DropdownMenuSeparator } from \"@/components/ui/DropdownMenu\";\r\nimport { ListPageShell } from \"@/components/shells/ListPageShell\";\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport { formatMoney } from \"@/lib/money\";\r\n\r\ntype ApiService = {\r\n    id: number;\r\n    name: string;\r\n    description: string | null;\r\n    service_type_id: number | null;\r\n    service_code: string | null;\r\n    time_required: string | null;\r\n    warranty: string | null;\r\n    pick_up_delivery_available: boolean;\r\n    laptop_rental_available: boolean;\r\n    base_price: { currency: string; amount_cents: number } | null;\r\n    tax_id: number | null;\r\n    is_active: boolean;\r\n};\r\n\r\ntype ApiServiceType = {\r\n    id: number;\r\n    name: string;\r\n    is_active: boolean;\r\n};\r\n\r\nexport default function TenantServicesPage() {\r\n    const auth = useAuth();\r\n    const router = useRouter();\r\n    const tenantSlug = \"get-up-and-glo\";\r\n\r\n    const [loading, setLoading] = React.useState(true);\r\n    const [error, setError] = React.useState<string | null>(null);\r\n    const [status, setStatus] = React.useState<string | null>(null);\r\n    const [busy, setBusy] = React.useState(false);\r\n    const [services, setServices] = React.useState<ApiService[]>([]);\r\n    const [serviceTypes, setServiceTypes] = React.useState<ApiServiceType[]>([]);\r\n    const [q, setQ] = React.useState(\"\");\r\n\r\n    const [pageIndex, setPageIndex] = React.useState(0);\r\n    const [pageSize, setPageSize] = React.useState(10);\r\n\r\n    const [editId, setEditId] = React.useState<number | null>(null);\r\n    const [editName, setEditName] = React.useState(\"\");\r\n    const [editDescription, setEditDescription] = React.useState(\"\");\r\n    const [editServiceTypeId, setEditServiceTypeId] = React.useState<number | null>(null);\r\n    const [editServiceCode, setEditServiceCode] = React.useState(\"\");\r\n    const [editTimeRequired, setEditTimeRequired] = React.useState(\"\");\r\n    const [editWarranty, setEditWarranty] = React.useState(\"\");\r\n    const [editBasePrice, setEditBasePrice] = React.useState(\"\");\r\n    const [editIsActive, setEditIsActive] = React.useState(true);\r\n\r\n    const [confirmOpen, setConfirmOpen] = React.useState(false);\r\n    const [confirmTitle, setConfirmTitle] = React.useState(\"\");\r\n    const [confirmMessage, setConfirmMessage] = React.useState<React.ReactNode>(\"\");\r\n    const [confirmAction, setConfirmAction] = React.useState<(() => Promise<void>) | null>(null);\r\n\r\n    const canManage = auth.can(\"services.manage\");\r\n\r\n    React.useEffect(() => {\r\n        let alive = true;\r\n\r\n        async function load() {\r\n            try {\r\n                setLoading(true);\r\n                setError(null);\r\n                setStatus(null);\r\n\r\n                const [servicesRes, typesRes] = await Promise.all([\r\n                    apiFetch<{ services: ApiService[] }>(`/api/${tenantSlug}/app/repairbuddy/services`),\r\n                    apiFetch<{ service_types: ApiServiceType[] }>(`/api/${tenantSlug}/app/repairbuddy/service-types?limit=200`),\r\n                ]);\r\n                if (!alive) return;\r\n\r\n                setServices(Array.isArray(servicesRes?.services) ? servicesRes.services : []);\r\n                setServiceTypes(Array.isArray(typesRes?.service_types) ? typesRes.service_types : []);\r\n            } catch (e) {\r\n                if (!alive) return;\r\n\r\n                if (e instanceof ApiError && e.status === 428) {\r\n                    const next = `/app/${tenantSlug}/services`;\r\n                    router.replace(`/app/${tenantSlug}/branches/select?next=${encodeURIComponent(next)}`);\r\n                    return;\r\n                }\r\n\r\n                setError(e instanceof Error ? e.message : \"Failed to load services.\");\r\n            } finally {\r\n                if (!alive) return;\r\n                setLoading(false);\r\n            }\r\n        }\r\n\r\n        void load();\r\n\r\n        return () => {\r\n            alive = false;\r\n        };\r\n    }, [router, tenantSlug]);\r\n\r\n    function openConfirm(args: { title: string; message: React.ReactNode; action: () => Promise<void> }) {\r\n        setConfirmTitle(args.title);\r\n        setConfirmMessage(args.message);\r\n        setConfirmAction(() => args.action);\r\n        setConfirmOpen(true);\r\n    }\r\n\r\n    function resetForm() {\r\n        setEditId(null);\r\n        setEditName(\"\");\r\n        setEditDescription(\"\");\r\n        setEditServiceTypeId(null);\r\n        setEditServiceCode(\"\");\r\n        setEditTimeRequired(\"\");\r\n        setEditWarranty(\"\");\r\n        setEditBasePrice(\"\");\r\n        setEditIsActive(true);\r\n    }\r\n\r\n    function openCreate() {\r\n        if (!canManage) return;\r\n        resetForm();\r\n        setError(null);\r\n        setStatus(null);\r\n    }\r\n\r\n    function openEdit(row: ApiService) {\r\n        if (!canManage) return;\r\n        setEditId(row.id);\r\n        setEditName(row.name);\r\n        setEditDescription(row.description ?? \"\");\r\n        setEditServiceTypeId(typeof row.service_type_id === \"number\" ? row.service_type_id : null);\r\n        setEditServiceCode(row.service_code ?? \"\");\r\n        setEditTimeRequired(row.time_required ?? \"\");\r\n        setEditWarranty(row.warranty ?? \"\");\r\n        setEditBasePrice(row.base_price ? String(row.base_price.amount_cents / 100) : \"\");\r\n        setEditIsActive(Boolean(row.is_active));\r\n        setError(null);\r\n        setStatus(null);\r\n    }\r\n\r\n    async function onSave(e: React.FormEvent) {\r\n        e.preventDefault();\r\n        if (busy) return;\r\n        if (!canManage) {\r\n            setError(\"Forbidden.\");\r\n            return;\r\n        }\r\n\r\n        setBusy(true);\r\n        setError(null);\r\n        setStatus(null);\r\n\r\n        try {\r\n            const name = editName.trim();\r\n            if (name.length === 0) {\r\n                setError(\"Name is required.\");\r\n                return;\r\n            }\r\n\r\n            const rawPrice = editBasePrice.trim();\r\n            const priceAmountCents = rawPrice.length > 0 ? Math.round(Number(rawPrice) * 100) : null;\r\n            if (rawPrice.length > 0 && (!Number.isFinite(Number(rawPrice)) || priceAmountCents === null)) {\r\n                setError(\"Base price is invalid.\");\r\n                return;\r\n            }\r\n\r\n            const payload: Record<string, unknown> = {\r\n                name,\r\n                description: editDescription.trim().length > 0 ? editDescription.trim() : null,\r\n                service_type_id: typeof editServiceTypeId === \"number\" ? editServiceTypeId : null,\r\n                service_code: editServiceCode.trim().length > 0 ? editServiceCode.trim() : null,\r\n                time_required: editTimeRequired.trim().length > 0 ? editTimeRequired.trim() : null,\r\n                warranty: editWarranty.trim().length > 0 ? editWarranty.trim() : null,\r\n                base_price_amount_cents: typeof priceAmountCents === \"number\" ? priceAmountCents : null,\r\n                is_active: Boolean(editIsActive),\r\n            };\r\n\r\n            if (editId) {\r\n                const res = await apiFetch<{ service: ApiService }>(`/api/${tenantSlug}/app/repairbuddy/services/${editId}`, {\r\n                    method: \"PATCH\",\r\n                    body: payload,\r\n                });\r\n                setStatus(\"Service updated.\");\r\n                setServices((prev) => prev.map((s) => (s.id === editId ? (res.service ?? s) : s)));\r\n            } else {\r\n                const res = await apiFetch<{ service: ApiService }>(`/api/${tenantSlug}/app/repairbuddy/services`, {\r\n                    method: \"POST\",\r\n                    body: payload,\r\n                });\r\n                setStatus(\"Service created.\");\r\n                if (res.service) {\r\n                    setServices((prev) => [res.service, ...prev]);\r\n                }\r\n            }\r\n\r\n            resetForm();\r\n            setPageIndex(0);\r\n        } catch (err) {\r\n            if (err instanceof ApiError) {\r\n                setError(err.message);\r\n            } else {\r\n                setError(editId ? \"Failed to update service.\" : \"Failed to create service.\");\r\n            }\r\n        } finally {\r\n            setBusy(false);\r\n        }\r\n    }\r\n\r\n    async function onDelete(row: ApiService) {\r\n        if (busy) return;\r\n        if (!canManage) {\r\n            setError(\"Forbidden.\");\r\n            return;\r\n        }\r\n\r\n        openConfirm({\r\n            title: \"Delete service\",\r\n            message: (\r\n                <div className=\"space-y-2\">\r\n                    <div>\r\n                        You are about to delete <span className=\"font-semibold\">{row.name}</span>.\r\n                    </div>\r\n                    <div className=\"text-sm text-zinc-600\">This action cannot be undone.</div>\r\n                </div>\r\n            ),\r\n            action: async () => {\r\n                setBusy(true);\r\n                setError(null);\r\n                setStatus(null);\r\n                try {\r\n                    await apiFetch(`/api/${tenantSlug}/app/repairbuddy/services/${row.id}`, { method: \"DELETE\" });\r\n                    setServices((prev) => prev.filter((x) => x.id !== row.id));\r\n                    setStatus(\"Service deleted.\");\r\n                    setPageIndex(0);\r\n                    if (editId === row.id) {\r\n                        resetForm();\r\n                    }\r\n                } catch (err) {\r\n                    if (err instanceof ApiError) {\r\n                        setError(err.message);\r\n                    } else {\r\n                        setError(\"Failed to delete service.\");\r\n                    }\r\n                } finally {\r\n                    setBusy(false);\r\n                }\r\n            },\r\n        });\r\n    }\r\n\r\n    const filtered = React.useMemo(() => {\r\n        const needle = q.trim().toLowerCase();\r\n        if (!needle) return services;\r\n        return services.filter((s) => `${s.name} ${s.description ?? \"\"} ${s.id}`.toLowerCase().includes(needle));\r\n    }, [q, services]);\r\n\r\n    const totalRows = filtered.length;\r\n    const pageRows = React.useMemo(() => {\r\n        const start = pageIndex * pageSize;\r\n        const end = start + pageSize;\r\n        return filtered.slice(start, end);\r\n    }, [filtered, pageIndex, pageSize]);\r\n\r\n    const columns = React.useMemo<Array<DataTableColumn<ApiService>>>(\r\n        () => [\r\n            {\r\n                id: \"name\",\r\n                header: \"Service\",\r\n                cell: (row) => (\r\n                    <div className=\"min-w-0\">\r\n                        <div className=\"truncate font-semibold text-[var(--rb-text)]\">{row.name}</div>\r\n                        <div className=\"truncate text-xs text-zinc-600\">{row.id}</div>\r\n                    </div>\r\n                ),\r\n                className: \"min-w-[220px]\",\r\n            },\r\n            {\r\n                id: \"desc\",\r\n                header: \"Description\",\r\n                cell: (row) => <div className=\"text-sm text-zinc-700\">{row.description ?? \"—\"}</div>,\r\n                className: \"min-w-[280px]\",\r\n            },\r\n            {\r\n                id: \"price\",\r\n                header: \"Base price\",\r\n                cell: (row) => {\r\n                    if (!row.base_price) return <div className=\"text-sm text-zinc-600\">—</div>;\r\n                    return (\r\n                        <div className=\"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap\">\r\n                            {formatMoney({ amountCents: row.base_price.amount_cents, currency: row.base_price.currency })}\r\n                        </div>\r\n                    );\r\n                },\r\n                className: \"whitespace-nowrap\",\r\n            },\r\n            {\r\n                id: \"actions\",\r\n                header: \"\",\r\n                cell: (row) => {\r\n                    if (!canManage) return null;\r\n                    return (\r\n                        <DropdownMenu\r\n                            trigger={({ toggle }) => (\r\n                                <Button size=\"sm\" variant=\"outline\" disabled={busy} onClick={toggle}>\r\n                                    Actions\r\n                                </Button>\r\n                            )}\r\n                        >\r\n                            {({ close }) => (\r\n                                <>\r\n                                    <DropdownMenuItem\r\n                                        onSelect={() => {\r\n                                            close();\r\n                                            openEdit(row);\r\n                                        }}\r\n                                    >\r\n                                        Edit\r\n                                    </DropdownMenuItem>\r\n                                    <DropdownMenuSeparator />\r\n                                    <DropdownMenuItem\r\n                                        destructive\r\n                                        onSelect={() => {\r\n                                            close();\r\n                                            void onDelete(row);\r\n                                        }}\r\n                                    >\r\n                                        Delete\r\n                                    </DropdownMenuItem>\r\n                                </>\r\n                            )}\r\n                        </DropdownMenu>\r\n                    );\r\n                },\r\n                className: \"w-[1%] whitespace-nowrap\",\r\n            },\r\n        ],\r\n        [busy, canManage],\r\n    );\r\n\r\n    function onConfirm() {\r\n        void (async () => {\r\n            if (!confirmAction) return;\r\n            await confirmAction();\r\n            setConfirmOpen(false);\r\n        })();\r\n    }\r\n\r\n    return (\r\n        <RequireAuth>\r\n            <ListPageShell\r\n                title=\"Services\"\r\n                description=\"Service catalog used for estimates and jobs.\"\r\n                filters={null}\r\n                loading={loading}\r\n                error={error}\r\n                empty={false}\r\n                emptyTitle=\"No services\"\r\n                emptyDescription=\"Add services to standardize pricing.\"\r\n            >\r\n                <div className=\"space-y-4\">\r\n                    <Card className=\"shadow-none\">\r\n                        <CardContent className=\"pt-5\">\r\n                            <div className=\"flex items-start justify-between gap-3\">\r\n                                <div className=\"min-w-0\">\r\n                                    <div className=\"truncate text-sm font-semibold text-[var(--rb-text)]\">{editId ? \"Edit service\" : \"New service\"}</div>\r\n                                    <div className=\"mt-1 text-sm text-zinc-600\">Create or update a service record.</div>\r\n                                </div>\r\n                                <Button variant=\"outline\" size=\"sm\" onClick={openCreate} disabled={!canManage || busy}>\r\n                                    New\r\n                                </Button>\r\n                            </div>\r\n\r\n                            <form className=\"mt-5 space-y-4\" onSubmit={onSave}>\r\n                                <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n                                    <div className=\"space-y-1 lg:col-span-2\">\r\n                                        <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Name</div>\r\n                                        <input\r\n                                            value={editName}\r\n                                            onChange={(e) => setEditName(e.target.value)}\r\n                                            placeholder=\"e.g., Screen replacement\"\r\n                                            className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 text-sm\"\r\n                                            disabled={!canManage || busy}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1\">\r\n                                        <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Service code</div>\r\n                                        <input\r\n                                            value={editServiceCode}\r\n                                            onChange={(e) => setEditServiceCode(e.target.value)}\r\n                                            className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 text-sm\"\r\n                                            disabled={!canManage || busy}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1\">\r\n                                        <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Base price</div>\r\n                                        <input\r\n                                            value={editBasePrice}\r\n                                            onChange={(e) => setEditBasePrice(e.target.value)}\r\n                                            placeholder=\"e.g., 49.99\"\r\n                                            className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 text-sm\"\r\n                                            disabled={!canManage || busy}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1 lg:col-span-2\">\r\n                                        <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Description</div>\r\n                                        <input\r\n                                            value={editDescription}\r\n                                            onChange={(e) => setEditDescription(e.target.value)}\r\n                                            placeholder=\"Brief service description...\"\r\n                                            className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 text-sm\"\r\n                                            disabled={!canManage || busy}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"space-y-1\">\r\n                                        <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Service type</div>\r\n                                        <select\r\n                                            value={typeof editServiceTypeId === \"number\" ? String(editServiceTypeId) : \"\"}\r\n                                            onChange={(e) => {\r\n                                                const v = e.target.value;\r\n                                                setEditServiceTypeId(v ? Number(v) : null);\r\n                                            }}\r\n                                            className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 text-sm\"\r\n                                            disabled={!canManage || busy}\r\n                                        >\r\n                                            <option value=\"\">—</option>\r\n                                            {serviceTypes\r\n                                                .filter((t) => Boolean(t.is_active) || (typeof editServiceTypeId === \"number\" && t.id === editServiceTypeId))\r\n                                                .map((t) => (\r\n                                                    <option key={t.id} value={t.id}>\r\n                                                        {t.name}\r\n                                                    </option>\r\n                                                ))}\r\n                                        </select>\r\n                                    </div>\r\n\r\n                                    <div className=\"grid grid-cols-2 gap-3 lg:col-span-1\">\r\n                                        <div className=\"space-y-1\">\r\n                                            <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Time</div>\r\n                                            <input\r\n                                                value={editTimeRequired}\r\n                                                onChange={(e) => setEditTimeRequired(e.target.value)}\r\n                                                placeholder=\"30 min\"\r\n                                                className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-2 text-sm text-center\"\r\n                                                disabled={!canManage || busy}\r\n                                            />\r\n                                        </div>\r\n                                        <div className=\"space-y-1\">\r\n                                            <div className=\"text-xs font-semibold text-[var(--rb-text)] uppercase tracking-wider\">Warranty</div>\r\n                                            <input\r\n                                                value={editWarranty}\r\n                                                onChange={(e) => setEditWarranty(e.target.value)}\r\n                                                placeholder=\"90 days\"\r\n                                                className=\"h-9 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-2 text-sm text-center\"\r\n                                                disabled={!canManage || busy}\r\n                                            />\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex flex-wrap items-center gap-x-6 gap-y-2 py-1 lg:col-span-3\">\r\n                                        <label className=\"flex items-center gap-2 text-sm select-none\">\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                checked={editIsActive}\r\n                                                onChange={(e) => setEditIsActive(e.target.checked)}\r\n                                                className=\"h-4 w-4 rounded border-zinc-300 text-indigo-600 focus:ring-indigo-500\"\r\n                                                disabled={!canManage || busy}\r\n                                            />\r\n                                            <span className=\"font-medium text-zinc-700\">Active</span>\r\n                                        </label>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex items-center justify-end gap-2 lg:col-span-1\">\r\n                                        <Button type=\"button\" variant=\"outline\" size=\"sm\" onClick={resetForm} disabled={!canManage || busy}>\r\n                                            Clear\r\n                                        </Button>\r\n                                        <Button type=\"submit\" size=\"sm\" disabled={!canManage || busy} className=\"px-6\">\r\n                                            {editId ? \"Save\" : \"Create\"}\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            </form>\r\n\r\n                            {status ? <div className=\"mt-4 text-sm text-emerald-700\">{status}</div> : null}\r\n                        </CardContent>\r\n                    </Card>\r\n\r\n                    <Card className=\"shadow-none\">\r\n                        <CardContent className=\"pt-5\">\r\n                            <DataTable\r\n                                title=\"Services · get-up-and-glo\"\r\n                                data={pageRows}\r\n                                loading={loading}\r\n                                emptyMessage=\"No services.\"\r\n                                columns={columns}\r\n                                getRowId={(row) => row.id}\r\n                                search={{\r\n                                    placeholder: \"Search services...\",\r\n                                }}\r\n                                server={{\r\n                                    query: q,\r\n                                    onQueryChange: (value) => {\r\n                                        setQ(value);\r\n                                        setPageIndex(0);\r\n                                    },\r\n                                    pageIndex,\r\n                                    onPageIndexChange: setPageIndex,\r\n                                    pageSize,\r\n                                    onPageSizeChange: (value) => {\r\n                                        setPageSize(value);\r\n                                        setPageIndex(0);\r\n                                    },\r\n                                    totalRows,\r\n                                }}\r\n                            />\r\n                        </CardContent>\r\n                    </Card>\r\n                </div>\r\n\r\n                <ConfirmDialog\r\n                    open={confirmOpen}\r\n                    title={confirmTitle}\r\n                    message={confirmMessage}\r\n                    confirmText=\"Confirm\"\r\n                    busy={busy}\r\n                    onCancel={() => setConfirmOpen(false)}\r\n                    onConfirm={onConfirm}\r\n                />\r\n            </ListPageShell>\r\n        </RequireAuth>\r\n    );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAEO,SAAS,EAAM,MACpB,CAAI,SACJ,CAAO,OACP,CAAK,UACL,CAAQ,QACR,CAAM,CACN,WAAW,QAAQ,SACnB,EAAU,OAAO,WACjB,CAAS,CAUV,EAWC,GAVA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,SAAS,EAAU,CAAgB,EAC5B,GACS,AAAV,GADO,UACL,GAAG,EAAe,GAC1B,CAGA,OADA,SAAS,gBAAgB,CAAC,UAAW,GAC9B,IAAM,SAAS,mBAAmB,CAAC,UAAW,EACvD,EAAG,CAAC,EAAS,EAAK,EAEd,CAAC,EAAM,OAAO,KAOlB,IAAM,EACQ,UAAZ,EACI,CAAA,EAAA,EAAA,EAAA,AAAE,EACA,yEACA,mCACA,WACA,6BAEF,CAAA,EAAA,EAAA,EAAA,AAAE,EACA,yEACA,sEACA,+BACA,8CACA,wBAKR,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAvBQ,CAuBG,cAvBhB,EACI,+DACA,qEAsBF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACC,KAAK,SACL,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,mBACA,+BACA,0UAEF,aAAW,QACX,QAAS,IAEX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,KAAK,SACL,aAAW,OACX,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,EACA,aAGD,AAtBe,AAAY,YAuB1B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gQACb,KACH,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,qBACY,UAAZ,EACI,qCACA,kFAGN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDAA+C,MAE9D,KAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,IAEpC,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACT,qBACY,UAAZ,EACI,qCACA,kFAGL,IAED,UAIZ,+DC7GA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAEO,SAAS,EAAc,MAC5B,CAAI,OACJ,CAAK,SACL,CAAO,aACP,EAAc,SAAS,gBACvB,EAAiB,SAAS,YAC1B,EAAa,QAAQ,CACrB,OAAO,EAAK,UACZ,CAAQ,WACR,CAAS,CAWV,EACC,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAM,EACN,QAAS,KACH,AAAC,GAAM,GACb,EACA,MAAO,EACP,OACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,gDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,EAAU,SAAU,WACpD,IAEH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAgB,QAAS,EAAW,SAAU,WAC5D,EAAO,aAAe,gBAK7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,KAG9C,qDChDO,SAAS,EAAY,CAI3B,EACC,IAAM,EAAc,EAAK,WAAW,CAC9B,EAAW,EAAK,QAAQ,EAAE,eAAiB,KAEjD,GAA2B,UAAvB,OAAO,GAA4B,CAAC,OAAO,QAAQ,CAAC,GACtD,OAAO,EAAK,EADwD,MAChD,EAAI,IAG1B,IAAM,EAAS,EAAc,IAE7B,GAAI,CAAC,GAAgC,GAAG,CAAvB,EAAS,MAAM,CAC9B,MAAO,CAAA,EAAG,EAAO,OAAO,CAAC,GAAA,CAAI,CAG/B,GAAI,CACF,OAAO,IAAI,KAAK,YAAY,CAAC,OAAW,CACtC,MAAO,oBACP,EACA,sBAAuB,EACvB,sBAAuB,CACzB,GAAG,MAAM,CAAC,EACZ,CAAE,KAAM,CACN,MAAO,CAAA,EAAG,EAAS,CAAC,EAAE,EAAO,OAAO,CAAC,GAAA,CAAI,AAC3C,CACF,qECzBA,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAEO,SAAS,EAAc,OAC5B,CAAK,aACL,CAAW,SACX,CAAO,SACP,CAAO,CACP,SAAO,CACP,iBAAe,OACf,CAAK,OACL,CAAK,YACL,EAAa,kBAAkB,kBAC/B,EAAmB,sBAAsB,UACzC,CAAQ,CAaT,EACC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAO,EAAO,YAAa,EAAa,QAAS,IAE5D,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,uBAAc,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBAAQ,MAAgC,KAEvG,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,SAAS,MAAM,gCAC3B,IAED,KAEH,EACC,GAAmB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,eACxD,KAEH,AAAC,GAAY,IAAS,EAOnB,EAPS,GACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,uBACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDAA+C,IAC9D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA8B,SAKjD,AAAD,GAAa,GAAU,EAAmB,GAA9B,CAAU,CAAS,IAGtC,uEC1DA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAuBe,SAAS,IACpB,IAAM,EAAO,CAAA,EAAA,EAAA,OAAA,AAAO,IACd,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAa,iBAEb,CAAC,EAAS,EAAW,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GACvC,CAAC,EAAO,EAAS,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAgB,MAClD,CAAC,EAAQ,EAAU,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAgB,MACpD,CAAC,EAAM,EAAQ,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GACjC,CAAC,EAAU,EAAY,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAe,EAAE,EACzD,CAAC,EAAc,EAAgB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAmB,EAAE,EACrE,CAAC,EAAG,EAAK,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IAE3B,CAAC,EAAW,EAAa,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,GAC3C,CAAC,EAAU,EAAY,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IAEzC,CAAC,EAAQ,EAAU,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAgB,MACpD,CAAC,EAAU,EAAY,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACzC,CAAC,EAAiB,EAAmB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACvD,CAAC,EAAmB,EAAqB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAgB,MAC1E,CAAC,EAAiB,EAAmB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACvD,CAAC,EAAkB,EAAoB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACzD,CAAC,EAAc,EAAgB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACjD,CAAC,EAAe,EAAiB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACnD,CAAC,EAAc,EAAgB,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GAEjD,CAAC,EAAa,EAAe,CAAG,EAAA,OAAK,CAAC,QAAQ,EAAC,GAC/C,CAAC,GAAc,GAAgB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAC,IACjD,CAAC,GAAgB,GAAkB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAAkB,IACtE,CAAC,GAAe,GAAiB,CAAG,EAAA,OAAK,CAAC,QAAQ,CAA+B,MAEjF,GAAY,EAAK,GAAG,CAAC,mBAiD3B,SAAS,KACL,EAAU,MACV,EAAY,IACZ,EAAmB,IACnB,EAAqB,MACrB,EAAmB,IACnB,EAAoB,IACpB,EAAgB,IAChB,EAAiB,IACjB,GAAgB,EACpB,CAwBA,eAAe,GAAO,CAAkB,EAEpC,GADA,EAAE,cAAc,IACZ,GACJ,GADU,AACN,CAAC,GAAW,YACZ,EAAS,cAIb,GAAQ,GACR,EAAS,MACT,EAAU,MAEV,GAAI,CACA,IAAM,EAAO,EAAS,IAAI,GAC1B,GAAoB,IAAhB,EAAK,MAAM,CAAQ,YACnB,EAAS,qBAIb,IAAM,EAAW,EAAc,IAAI,GAC7B,EAAmB,EAAS,MAAM,CAAG,EAAI,KAAK,KAAK,CAAoB,IAAnB,OAAO,IAAmB,KACpF,GAAI,EAAS,MAAM,CAAG,IAAM,CAAC,AAAF,OAAS,QAAQ,CAAC,OAAO,KAAc,AAAqB,QAAA,CAAI,CAAG,YAC1F,EAAS,0BAIb,IAAM,EAAmC,MACrC,EACA,YAAa,EAAgB,IAAI,GAAG,MAAM,CAAG,EAAI,EAAgB,IAAI,GAAK,KAC1E,gBAA8C,UAA7B,OAAO,EAAiC,EAAoB,KAC7E,aAAc,EAAgB,IAAI,GAAG,MAAM,CAAG,EAAI,EAAgB,IAAI,GAAK,KAC3E,cAAe,EAAiB,IAAI,GAAG,MAAM,CAAG,EAAI,EAAiB,IAAI,GAAK,KAC9E,SAAU,EAAa,IAAI,GAAG,MAAM,CAAG,EAAI,EAAa,IAAI,GAAK,KACjE,wBAAqD,UAA5B,OAAO,EAAgC,EAAmB,KACnF,WAAW,CAAQ,CACvB,EAEA,GAAI,EAAQ,CACR,IAAM,EAAM,MAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,CAAC,KAAK,EAAE,EAAW,0BAA0B,EAAE,EAAA,CAAQ,CAAE,CACzG,OAAQ,QACR,KAAM,CACV,GACA,EAAU,oBACV,EAAa,AAAD,GAAU,EAAK,GAAG,CAAC,AAAC,GAAO,EAAE,EAAE,GAAK,EAAU,EAAI,OAAO,EAAI,EAAK,GAClF,KAAO,CACH,IAAM,EAAM,MAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,CAAC,KAAK,EAAE,EAAW,yBAAyB,CAAC,CAAE,CAC/F,OAAQ,OACR,KAAM,CACV,GACA,EAAU,oBACN,EAAI,OAAO,EAAE,AACb,EAAY,AAAC,GAAS,CAAC,EAAI,OAAO,IAAK,EAAK,CAEpD,CAEA,KACA,EAAa,EACjB,CAAE,MAAO,EAAK,CACN,aAAe,EAAA,QAAQ,CACvB,CADyB,CAChB,EAAI,OAAO,EAEpB,EAAS,EAAS,4BAA8B,4BAExD,QAAU,CACN,GAAQ,EACZ,EACJ,CAEA,eAAe,GAAS,CAAe,EACnC,IAAI,MAAM,GACV,GAAI,CAAC,GAAW,YACZ,EAAS,cAhHI,EAoHL,CACR,CArH2F,KAqHpF,iBACP,QACI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WAAI,2BACuB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,yBAAiB,EAAI,IAAI,GAAQ,OAE7E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,qCAG/C,OAAQ,UACJ,EAAQ,IACR,EAAS,MACT,EAAU,MACV,GAAI,CACA,MAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,CAAC,KAAK,EAAE,EAAW,0BAA0B,EAAE,EAAI,EAAE,CAAA,CAAE,CAAE,CAAE,OAAQ,QAAS,GAC3F,EAAY,AAAC,GAAS,EAAK,MAAM,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,EAAI,EAAE,GACxD,EAAU,oBACV,EAAa,GACT,IAAW,EAAI,EAAE,EAAE,AACnB,IAER,CAAE,MAAO,EAAK,CACN,aAAe,EAAA,QAAQ,CACvB,CADyB,CAChB,EAAI,OAAO,EAEpB,EAAS,4BAEjB,QAAU,CACN,GAAQ,EACZ,CACJ,CACJ,EAnJA,GAAgB,EAAK,KAAK,EAC1B,GAAkB,EAAK,OAAO,EAC9B,GAAiB,IAAM,EAAK,MAAM,EAClC,EAAe,IAiJnB,CA7LA,EAAA,OAAK,CAAC,SAAS,CAAC,KACZ,IAAI,GAAQ,EAkCZ,OAFK,AA9BL,eAAe,EACX,GAAI,CACA,GAAW,GACX,EAAS,MACT,EAAU,MAEV,GAAM,CAAC,EAAa,EAAS,CAAG,MAAM,QAAQ,GAAG,CAAC,CAC9C,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA6B,CAAC,KAAK,EAAE,EAAW,yBAAyB,CAAC,EAClF,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsC,CAAC,KAAK,EAAE,EAAW,wCAAwC,CAAC,EAC7G,EACD,GAAI,CAAC,EAAO,OAEZ,EAAY,MAAM,OAAO,CAAC,GAAa,UAAY,EAAY,QAAQ,CAAG,EAAE,EAC5E,EAAgB,MAAM,OAAO,CAAC,GAAU,eAAiB,EAAS,aAAa,CAAG,EAAE,CACxF,CAAE,MAAO,EAAG,CACR,GAAI,CAAC,EAAO,OAEZ,GAAI,aAAa,EAAA,QAAQ,EAAiB,MAAb,EAAE,MAAM,CAAU,CAC3C,IAAM,EAAO,CAAC,KAAK,EAAE,EAAW,SAAS,CAAC,CAC1C,EAAO,OAAO,CAAC,CAAC,KAAK,EAAE,EAAW,sBAAsB,EAAE,mBAAmB,GAAA,CAAO,EACpF,MACJ,CAEA,EAAS,aAAa,MAAQ,EAAE,OAAO,CAAG,2BAC9C,QAAU,CACN,GAAI,CAAC,EAAO,OACZ,GAAW,EACf,CACJ,IAIO,KACH,EAAQ,EACZ,CACJ,EAAG,CAAC,EAAQ,EAAW,EAyJvB,IAAM,GAAW,EAAA,OAAK,CAAC,OAAO,CAAC,KAC3B,IAAM,EAAS,EAAE,IAAI,GAAG,WAAW,UACnC,AAAK,EACE,EADH,AACY,IADH,EACS,CAAC,AAAC,GAAM,CAAA,EAAG,EAAE,IAAI,CAAC,CAAC,EAAE,EAAE,WAAW,EAAI,GAAG,CAAC,EAAE,EAAE,EAAE,CAAA,CAAE,CAAC,WAAW,GAAG,QAAQ,CAAC,IAD5E,CAExB,EAAG,CAAC,EAAG,EAAS,EAEV,GAAY,GAAS,MAAM,CAC3B,GAAW,EAAA,OAAK,CAAC,OAAO,CAAC,KAC3B,IAAM,EAAQ,EAAY,EACpB,EAAM,EAAQ,EACpB,OAAO,GAAS,KAAK,CAAC,EAAO,EACjC,EAAG,CAAC,GAAU,EAAW,EAAS,EAE5B,GAAU,EAAA,OAAK,CAAC,OAAO,CACzB,IAAM,CACF,CACI,GAAI,OACJ,OAAQ,UACR,KAAM,AAAC,GACH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wDAAgD,EAAI,IAAI,GACvE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAAkC,EAAI,EAAE,MAG/D,UAAW,eACf,EACA,CACI,GAAI,OACJ,OAAQ,cACR,KAAM,AAAC,GAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAI,WAAW,EAAI,MAC1E,UAAW,eACf,EACA,CACI,GAAI,QACJ,OAAQ,aACR,KAAM,AAAC,GACH,AAAK,EAAI,EAAL,QAAe,CAEf,CAFiB,AAEjB,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yEACV,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,CAAE,YAAa,EAAI,UAAU,CAAC,YAAY,CAAE,SAAU,EAAI,UAAU,CAAC,QAAQ,AAAC,KAHvE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,MAOvE,UAAW,mBACf,EACA,CACI,GAAI,UACJ,OAAQ,GACR,KAAM,AAAC,GACH,AAAK,GAED,CAAA,AAFA,EAEA,EAAA,GAAA,AAFY,EAEX,EAAA,YAAY,CAAA,CACT,QAAS,CAAC,QAAE,CAAM,CAAE,GAChB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QAAQ,UAAU,SAAU,EAAM,QAAS,WAAQ,qBAKxE,CAAC,OAAE,CAAK,CAAE,GACP,CAAA,EAAA,EAAA,IAAA,EAAA,EAAA,QAAA,CAAA,WACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CACb,SAAU,KACN,IA1L/B,KACL,EAAU,EAAI,EAAE,AADA,EAEhB,EAAY,EAAI,IAAI,EACpB,EAAmB,EAAI,WAAW,EAAI,IACtC,EAAoD,UAA/B,OAAO,EAAI,eAAe,CAAgB,EAAI,eAAe,CAAG,MACrF,EAAmB,EAAI,YAAY,EAAI,IACvC,EAqL6C,AArLzB,EAAI,aAAa,EAAI,IACzC,EAAgB,EAAI,QAAQ,EAAI,IAChC,EAAiB,EAAI,UAAU,CAAG,OAAO,EAAI,UAAU,CAAC,YAAY,CAAG,KAAO,IAC9E,GAAgB,CAAQ,EAAI,SAAS,EACrC,EAAS,MACT,EAAU,MAiLsB,WACH,SAGD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,qBAAqB,CAAA,CAAA,GACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,CACb,WAAW,CAAA,CAAA,EACX,SAAU,KACN,IACK,GAAS,EAClB,WACH,gBA1BM,KAkC3B,UAAW,0BACf,EACH,CACD,CAAC,EAAM,GAAU,EAWrB,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACR,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CACV,MAAM,WACN,YAAY,+CACZ,QAAS,KACT,QAAS,EACT,MAAO,EACP,OAAO,EACP,WAAW,cACX,iBAAiB,iDAEjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,uBACZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACnB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gEAAwD,EAAS,eAAiB,gBACjG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA6B,0CAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,KAAK,QAzPhE,CAyPyE,QAzPhE,EACA,KACL,KACA,CAFgB,CAEP,MACT,EAAU,MACd,EAoPqF,SAAU,CAAC,IAAa,WAAM,WAK3F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,iBAAiB,SAAU,YACvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iEACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,SACtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,2BACZ,UAAU,kGACV,SAAU,CAAC,IAAa,OAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,iBACtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,UAAU,kGACV,SAAU,CAAC,IAAa,OAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,eACtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAiB,EAAE,MAAM,CAAC,KAAK,EAChD,YAAY,cACZ,UAAU,kGACV,SAAU,CAAC,IAAa,OAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,gBACtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAmB,EAAE,MAAM,CAAC,KAAK,EAClD,YAAY,+BACZ,UAAU,kGACV,SAAU,CAAC,IAAa,OAIhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,iBACtF,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CACG,MAAoC,UAA7B,OAAO,EAAiC,OAAO,GAAqB,GAC3E,SAAU,AAAC,IACP,IAAM,EAAI,EAAE,MAAM,CAAC,KAAK,CACxB,EAAqB,EAAI,OAAO,GAAK,KACzC,EACA,UAAU,kGACV,SAAU,CAAC,IAAa,YAExB,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,MAAM,YAAG,MAChB,EACI,MAAM,CAAC,AAAC,IAAM,CAAQ,EAAE,SAAS,EAAM,AAA6B,iBAAtB,GAAkC,EAAE,EAAE,GAAK,GACzF,GAAG,CAAC,AAAC,GACF,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAkB,MAAO,EAAE,EAAE,UACzB,EAAE,IAAI,EADE,EAAE,EAAE,SAOjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,SACtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAoB,EAAE,MAAM,CAAC,KAAK,EACnD,YAAY,SACZ,UAAU,8GACV,SAAU,CAAC,IAAa,OAGhC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAuE,aACtF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,MAAO,EACP,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,KAAK,EAC/C,YAAY,UACZ,UAAU,8GACV,SAAU,CAAC,IAAa,UAKpC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0EACX,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAAM,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACG,KAAK,WACL,QAAS,EACT,SAAU,AAAC,GAAM,EAAgB,EAAE,MAAM,CAAC,OAAO,EACjD,UAAU,wEACV,SAAU,CAAC,IAAa,IAE5B,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCAA4B,gBAIpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8DACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,KAAK,KAAK,QAAS,GAAW,SAAU,CAAC,IAAa,WAAM,UAGpG,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,KAAK,KAAK,SAAU,CAAC,IAAa,EAAM,UAAU,gBACnE,EAAS,OAAS,mBAMlC,EAAS,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yCAAiC,IAAgB,UAIlF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,uBACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CACN,MAAM,4BACN,KAAM,GACN,QAAS,EACT,aAAa,eACb,QAAS,GACT,SAAU,AAAC,GAAQ,EAAI,EAAE,CACzB,OAAQ,CACJ,YAAa,oBACjB,EACA,OAAQ,CACJ,MAAO,EACP,cAAe,AAAC,IACZ,EAAK,GACL,EAAa,EACjB,YACA,EACA,kBAAmB,WACnB,EACA,iBAAkB,AAAC,IACf,EAAY,GACZ,EAAa,EACjB,YACA,EACJ,WAMhB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,CACV,KAAM,EACN,MAAO,GACP,QAAS,GACT,YAAY,UACZ,KAAM,EACN,SAAU,IAAM,GAAe,GAC/B,UA9LhB,CA8L2B,QA9LlB,EACA,CAAC,UACG,KACL,MAAM,IADc,CAEpB,GAAe,IACnB,CAAC,EACL,QA6LJ"}