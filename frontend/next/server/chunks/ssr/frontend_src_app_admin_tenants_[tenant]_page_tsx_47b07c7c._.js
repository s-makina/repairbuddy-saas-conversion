module.exports=[42156,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(59843),f=a.i(34075),g=a.i(91601),h=a.i(25533),i=a.i(75458),j=a.i(46664),k=a.i(4600),l=a.i(17933),m=a.i(97867),n=a.i(29054),o=a.i(75385),p=a.i(54177),q=a.i(73016),r=a.i(21282);function s(){let a=(0,d.useParams)(),s=(0,d.useRouter)(),t=(0,i.useAuth)(),u=(0,h.useDashboardHeader)(),v=Number(a.business),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null),K=(0,c.useRef)(!1),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)(null),[_,aa]=(0,c.useState)([]),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(null),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)(null),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(!1),[at,au]=(0,c.useState)(""),[av,aw]=(0,c.useState)(null),[ax,ay]=(0,c.useState)(!1),az=!!A&&!!C&&"closed"!==A.status,aA=!!A&&"closed"!==A.status&&"suspended"!==A.status,aB=!!A&&"suspended"===A.status,aC=!!A&&"closed"!==A.status,aD=!!A&&!!C&&"closed"!==A.status,aE=(0,c.useMemo)(()=>a=>"active"===a?"success":"trial"===a?"info":"past_due"===a?"warning":"suspended"===a?"danger":"default",[]),aF=(0,c.useCallback)(async()=>{if(!Number.isFinite(v)||v<=0){z("Invalid business id."),x(!1);return}try{x(!0),z(null);let a=await (0,f.apiFetch)(`/api/admin/businesses/${v}`);B(a.tenant),D(a.owner),W("number"==typeof a.tenant.plan_id?String(a.tenant.plan_id):"")}catch(a){z(a instanceof Error?a.message:"Failed to load business.")}finally{x(!1)}},[v]),aG=(0,c.useCallback)(async()=>{if(!K.current){K.current=!0,J(null),H(!0);try{let a=await (0,f.apiFetch)("/api/admin/plans");F(Array.isArray(a.plans)?a.plans:[])}catch(a){J(a instanceof Error?a.message:"Failed to load plans."),F([])}finally{K.current=!1,H(!1)}}},[]),aH=(0,c.useCallback)(async()=>{if(Number.isFinite(v)&&!(v<=0)&&!L){O(null),M(!0);try{let a=await (0,f.apiFetch)(`/api/admin/businesses/${v}/entitlements`);Q(a),S(JSON.stringify(a.entitlement_overrides??{},null,2)),U(null)}catch(a){O(a instanceof Error?a.message:"Failed to load entitlements."),Q(null)}finally{M(!1)}}},[L,v]),aI=(0,c.useCallback)(async()=>{if(Number.isFinite(v)&&!(v<=0)&&!X){$(null),Y(!0);try{let a=await (0,f.apiFetch)(`/api/admin/businesses/${v}/audit?limit=100`);aa(Array.isArray(a.audit)?a.audit:[])}catch(a){$(a instanceof Error?a.message:"Failed to load audit log."),aa([])}finally{Y(!1)}}},[X,v]),aJ=(0,c.useCallback)(async()=>{if(Number.isFinite(v)&&!(v<=0)&&!ab){ae(null),ac(!0);try{let a=await (0,f.apiFetch)(`/api/admin/businesses/${v}/diagnostics`);ag(a)}catch(a){ae(a instanceof Error?a.message:"Failed to load diagnostics."),ag(null)}finally{ac(!1)}}},[ab,v]);(0,c.useEffect)(()=>{aF()},[aF]),(0,c.useEffect)(()=>(u.setHeader({breadcrumb:"Admin / Businesses",title:A?A.name:`Business ${v}`,subtitle:A?`Business ID ${A.id} • ${A.slug}`:`Business ID ${v}`,actions:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.default,{href:`/admin/businesses/${v}/billing`,children:(0,b.jsx)(m.Button,{variant:"outline",size:"sm",children:"Billing"})}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:()=>s.back(),children:"Back"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aF,disabled:w||!!ah,children:"Refresh"})]})}),()=>{u.setHeader(null)}),[ah,u,aF,w,s,A,v]);let aK=(0,c.useCallback)(async(a,b)=>{if(!ah){ai(a),ay(!1);try{await b(),await aF()}finally{ai(null)}}},[ah,aF]);async function aL(){A&&C&&await aK("impersonate",async()=>{let a=await (0,f.apiFetch)("/api/admin/impersonation",{method:"POST",body:{tenant_id:A.id,target_user_id:C.id,reason:aj.trim()||"support",reference_id:al.trim()||`tenant-${A.id}`,duration_minutes:60}});a.session?.id&&(await t.refresh(),s.push(`/app/${A.slug}`))})}async function aM(){aq(!0)}async function aN(){await aK("unsuspend",async()=>{await (0,f.apiFetch)(`/api/admin/businesses/${v}/unsuspend`,{method:"PATCH",body:{reason:aj.trim()||void 0}})})}async function aO(){as(!0)}async function aP(){aq(!1),await aK("suspend",async()=>{await (0,f.apiFetch)(`/api/admin/businesses/${v}/suspend`,{method:"PATCH",body:{reason:aj.trim()||void 0}})})}async function aQ(){as(!1),await aK("close",async()=>{let a=an.trim().length>0?Number(an.trim()):null;await (0,f.apiFetch)(`/api/admin/businesses/${v}/close`,{method:"PATCH",body:{reason:aj.trim()||void 0,data_retention_days:a&&Number.isFinite(a)?a:void 0}})})}async function aR(){if(!Number.isFinite(v)||v<=0||ah)return;let a=V.trim().length>0?Number(V):null;await aK("set-plan",async()=>{await (0,f.apiFetch)(`/api/admin/businesses/${v}/plan`,{method:"PUT",body:{plan_id:a&&Number.isFinite(a)?a:null,reason:aj.trim()||void 0}}),await aH()})}async function aS(){let a;if(Number.isFinite(v)&&!(v<=0)&&!ah){U(null);try{a=R.trim().length>0?JSON.parse(R):{}}catch{U("Invalid JSON.");return}if(null!==a&&"object"!=typeof a)return void U("Overrides must be a JSON object.");await aK("set-entitlements",async()=>{await (0,f.apiFetch)(`/api/admin/businesses/${v}/entitlements`,{method:"PUT",body:{entitlement_overrides:a,reason:aj.trim()||void 0}}),await aH()})}}async function aT(){await aK("reset-owner-password",async()=>{aw(await (0,f.apiFetch)(`/api/admin/businesses/${v}/owner/reset-password`,{method:"POST",body:{reason:aj.trim()||void 0,password:at.trim()||void 0}})),ay(!1),au("")})}async function aU(){if(av?.password)try{await navigator.clipboard.writeText(av.password),ay(!0)}catch{ay(!1)}}return(0,c.useEffect)(()=>{aG()},[aG]),(0,b.jsx)(g.RequireAuth,{requiredPermission:"admin.tenants.read",children:(0,b.jsxs)("div",{className:"space-y-6",children:[w?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading business…"}):null,y?(0,b.jsx)(o.Alert,{variant:"danger",title:"Could not load business",children:y}):null,A?(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,b.jsx)("div",{className:"space-y-6 lg:col-span-2",children:(0,b.jsxs)(q.Tabs,{defaultValue:"overview",children:[(0,b.jsxs)(q.TabsList,{children:[(0,b.jsx)(q.TabsTrigger,{value:"overview",children:"Overview"}),(0,b.jsx)(q.TabsTrigger,{value:"plan",onClick:()=>{aH()},children:"Plan & Entitlements"}),(0,b.jsx)(q.TabsTrigger,{value:"diagnostics",onClick:()=>void aJ(),children:"Diagnostics"}),(0,b.jsx)(q.TabsTrigger,{value:"audit",onClick:()=>void aI(),children:"Audit Log"}),(0,b.jsx)(q.TabsTrigger,{value:"actions",children:"Actions"})]}),(0,b.jsx)(q.TabsContent,{value:"overview",children:(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(k.CardTitle,{className:"truncate",children:"Overview"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Status, plan, and key account details"})]}),(0,b.jsx)(l.Badge,{className:"shrink-0",variant:aE(A.status),children:A.status})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Contact email"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:A.contact_email??"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Plan"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:A.plan?.name??"—"}),A.plan?.code?(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Code: ",A.plan.code]}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Created"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,j.formatDateTime)(A.created_at??null)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Activated"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,j.formatDateTime)(A.activated_at??null)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Suspended"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,j.formatDateTime)(A.suspended_at??null)}),A.suspension_reason?(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Reason: ",A.suspension_reason]}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Closed"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,j.formatDateTime)(A.closed_at??null)}),A.closed_reason?(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Reason: ",A.closed_reason]}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Data retention"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:"number"==typeof A.data_retention_days?`${A.data_retention_days} days`:"—"})]})]})})]})})}),(0,b.jsx)(q.TabsContent,{value:"plan",children:(0,b.jsxs)("div",{className:"space-y-6",children:[I?(0,b.jsx)(o.Alert,{variant:"danger",title:"Could not load plans",children:I}):null,(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(k.CardTitle,{children:"Plan"}),(0,b.jsx)(k.CardDescription,{children:"Assign a plan to control default entitlements."})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Current plan"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:A.plan?.name??"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Assign plan"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsxs)("select",{className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:V,onChange:a=>W(a.target.value),disabled:G||!!ah,children:[(0,b.jsx)("option",{value:"",children:"— No plan —"}),E.map(a=>(0,b.jsxs)("option",{value:String(a.id),children:[a.name," (",a.code,")"]},a.id))]})})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(m.Button,{variant:"primary",size:"sm",onClick:aR,disabled:!!ah,children:"set-plan"===ah?"Saving…":"Save plan"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:()=>void aH(),disabled:L||!!ah,children:"Refresh entitlements"})]})]})]}),N?(0,b.jsx)(o.Alert,{variant:"danger",title:"Could not load entitlements",children:N}):null,(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(k.CardTitle,{children:"Entitlements"}),(0,b.jsx)(k.CardDescription,{children:"Plan defaults, overrides, and effective entitlements for this tenant."})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[L?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading entitlements…"}):null,P||L?null:(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"No entitlements loaded yet."}),P?(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,b.jsx)(k.Card,{className:"bg-[var(--rb-surface-muted)]",children:(0,b.jsxs)(k.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:"Plan entitlements"}),(0,b.jsx)("pre",{className:"mt-3 max-h-[240px] overflow-auto rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-3 text-xs text-zinc-700",children:JSON.stringify(P.plan_entitlements??{},null,2)})]})}),(0,b.jsx)(k.Card,{className:"bg-[var(--rb-surface-muted)]",children:(0,b.jsxs)(k.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:"Effective entitlements"}),(0,b.jsx)("pre",{className:"mt-3 max-h-[240px] overflow-auto rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-3 text-xs text-zinc-700",children:JSON.stringify(P.effective_entitlements??{},null,2)})]})}),(0,b.jsx)(k.Card,{className:"bg-[var(--rb-surface-muted)]",children:(0,b.jsxs)(k.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:"Overrides"}),(0,b.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,b.jsx)("textarea",{className:"min-h-[240px] w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-3 font-mono text-xs text-zinc-800",value:R,onChange:a=>{S(a.target.value),U(null)},spellCheck:!1}),T?(0,b.jsx)("div",{className:"text-sm text-red-600",children:T}):null,(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(m.Button,{variant:"primary",size:"sm",onClick:aS,disabled:!!ah,children:"set-entitlements"===ah?"Saving…":"Save overrides"})})]})]})})]}):null]})]})]})}),(0,b.jsx)(q.TabsContent,{value:"diagnostics",children:(0,b.jsxs)("div",{className:"space-y-6",children:[ad?(0,b.jsx)(o.Alert,{variant:"danger",title:"Could not load diagnostics",children:ad}):null,(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Diagnostics"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Recent auth activity and platform actions for this tenant."})]}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:()=>void aJ(),disabled:ab||!!ah,children:"Refresh"})]}),ab?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading diagnostics…"}):null,af?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Recent auth events"})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(p.DataTable,{data:Array.isArray(af.recent_auth_events)?af.recent_auth_events:[],loading:!1,emptyMessage:"No auth events found.",getRowId:a=>a.id,search:{placeholder:"Search event type or email…",getSearchText:a=>`${a.event_type} ${a.email??""} ${a.ip??""}`},columns:[{id:"time",header:"Time",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:(0,j.formatDateTime)(a.created_at??null)}),className:"whitespace-nowrap"},{id:"type",header:"Type",cell:a=>(0,b.jsx)("div",{className:"text-sm font-medium text-zinc-700",children:a.event_type}),className:"whitespace-nowrap"},{id:"email",header:"Email",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.email??"—"}),className:"whitespace-nowrap"},{id:"ip",header:"IP",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.ip??"—"}),className:"whitespace-nowrap"}]})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Recent platform actions"})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(p.DataTable,{data:Array.isArray(af.recent_platform_audit)?af.recent_platform_audit:[],loading:!1,emptyMessage:"No platform audit events found.",getRowId:a=>a.id,search:{placeholder:"Search action or actor…",getSearchText:a=>`${a.action} ${a.actor?.email??""} ${a.reason??""}`},columns:[{id:"time",header:"Time",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:(0,j.formatDateTime)(a.created_at??null)}),className:"whitespace-nowrap"},{id:"action",header:"Action",cell:a=>(0,b.jsx)("div",{className:"text-sm font-medium text-zinc-700",children:a.action}),className:"whitespace-nowrap"},{id:"actor",header:"Actor",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.actor?.email??a.actor_user_id??"—"}),className:"whitespace-nowrap"},{id:"reason",header:"Reason",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.reason??"—"}),className:"max-w-[360px] truncate"}]})})]})]}):(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"No diagnostics loaded yet."})]})}),(0,b.jsx)(q.TabsContent,{value:"audit",children:(0,b.jsxs)("div",{className:"space-y-6",children:[Z?(0,b.jsx)(o.Alert,{variant:"danger",title:"Could not load audit log",children:Z}):null,(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(k.CardTitle,{children:"Audit Log"}),(0,b.jsx)(k.CardDescription,{children:"Tenant-scoped platform audit events."})]}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:()=>void aI(),disabled:X||!!ah,children:"Refresh"})]})}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)(p.DataTable,{data:_,loading:X,emptyMessage:"No audit events.",getRowId:a=>a.id,search:{placeholder:"Search action, reason, or actor…",getSearchText:a=>`${a.action} ${a.reason??""} ${a.actor?.email??""}`},columns:[{id:"time",header:"Time",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:(0,j.formatDateTime)(a.created_at??null)}),className:"whitespace-nowrap"},{id:"action",header:"Action",cell:a=>(0,b.jsx)("div",{className:"text-sm font-medium text-zinc-700",children:a.action}),className:"whitespace-nowrap"},{id:"actor",header:"Actor",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.actor?.email??a.actor_user_id??"—"}),className:"whitespace-nowrap"},{id:"reason",header:"Reason",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.reason??"—"}),className:"max-w-[420px] truncate"},{id:"ip",header:"IP",cell:a=>(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:a.ip??"—"}),className:"whitespace-nowrap",headerClassName:"whitespace-nowrap"}]})})]})]})}),(0,b.jsx)(q.TabsContent,{value:"actions",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Support context"})}),(0,b.jsx)(k.CardContent,{className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Reason"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(n.Input,{value:aj,onChange:a=>ak(a.target.value),placeholder:"Ticket ID / reason (optional)"})}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Used for audit trails when performing admin actions."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Reference ID"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(n.Input,{value:al,onChange:a=>am(a.target.value),placeholder:"e.g. ticket-1234"})}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Optional. If empty, defaults to tenant-",A.id,"."]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Close retention days"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(n.Input,{value:an,onChange:a=>ao(a.target.value),placeholder:"e.g. 30",inputMode:"numeric"})}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Optional: overrides retention when closing the tenant."})]})]})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(k.CardTitle,{children:"Tenant actions"}),(0,b.jsx)(k.CardDescription,{children:"Operational actions that affect tenant access and security."})]}),(0,b.jsx)(l.Badge,{className:"shrink-0",variant:aE(A.status),children:A.status})]})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Impersonation"}),(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,b.jsx)(m.Button,{variant:"primary",size:"sm",onClick:aL,disabled:!!ah||!az,children:"impersonate"===ah?"Starting…":"Impersonate owner"})}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Starts a temporary session as the tenant owner for support."})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Access / lifecycle"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(m.Button,{variant:"secondary",size:"sm",onClick:aM,disabled:!!ah||!aA,children:"suspend"===ah?"Suspending…":"Suspend"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aN,disabled:!!ah||!aB,children:"unsuspend"===ah?"Unsuspending…":"Unsuspend"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aO,disabled:!!ah||!aC,children:"close"===ah?"Closing…":"Close tenant"})]}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"Suspend blocks access. Close is destructive and final."})]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Security"})}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsx)(o.Alert,{variant:"warning",title:"Force-reset owner password",children:"This will immediately change the owner password. The new password is shown once below. Treat it as a secret."}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Set a specific password"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(n.Input,{value:at,onChange:a=>au(a.target.value),placeholder:"Leave blank to generate",type:"password"})}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Optional. If empty, a secure password is generated."})]}),(0,b.jsx)("div",{className:"flex items-end",children:(0,b.jsx)(m.Button,{variant:"primary",size:"sm",onClick:aT,disabled:!!ah||!aD,children:"reset-owner-password"===ah?"Resetting…":"Reset owner password"})})]}),av?(0,b.jsx)(o.Alert,{variant:"warning",title:"New password generated",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"break-all font-mono text-sm text-[var(--rb-text)]",children:av.password}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aU,children:ax?"Copied":"Copy"}),(0,b.jsx)(m.Button,{variant:"ghost",size:"sm",onClick:()=>{aw(null),ay(!1)},children:"Hide"})]})]})}):null]})]})]})})]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Owner"})}),(0,b.jsx)(k.CardContent,{children:C?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:C.name}),(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:C.email}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["User ID: ",C.id]})]}):(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"No owner found."})})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsx)(k.CardTitle,{children:"Quick actions"})}),(0,b.jsxs)(k.CardContent,{className:"space-y-2",children:[(0,b.jsx)(m.Button,{variant:"primary",size:"sm",onClick:aL,disabled:!!ah||!az,className:"w-full",children:"impersonate"===ah?"Starting…":"Impersonate owner"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aM,disabled:!!ah||!aA,className:"w-full",children:"suspend"===ah?"Suspending…":"Suspend"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aN,disabled:!!ah||!aB,className:"w-full",children:"unsuspend"===ah?"Unsuspending…":"Unsuspend"}),(0,b.jsx)(m.Button,{variant:"outline",size:"sm",onClick:aO,disabled:!!ah||!aC,className:"w-full",children:"close"===ah?"Closing…":"Close tenant"})]})]})]})]}):null,(0,b.jsx)(r.ConfirmDialog,{open:ap,title:"Suspend tenant",message:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{children:"This will suspend the tenant and prevent normal access."}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Reason (optional): ",aj.trim().length>0?aj.trim():"—"]})]}),confirmText:"Suspend",confirmVariant:"secondary",busy:"suspend"===ah,onCancel:()=>aq(!1),onConfirm:()=>void aP()}),(0,b.jsx)(r.ConfirmDialog,{open:ar,title:"Close tenant",message:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{children:"This is a destructive action. The tenant will be closed."}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Reason (optional): ",aj.trim().length>0?aj.trim():"—"]}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Retention override (optional): ",an.trim().length>0?an.trim():"—"]})]}),confirmText:"Close tenant",confirmVariant:"secondary",busy:"close"===ah,onCancel:()=>as(!1),onConfirm:()=>void aQ()})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=frontend_src_app_admin_tenants_%5Btenant%5D_page_tsx_47b07c7c._.js.map