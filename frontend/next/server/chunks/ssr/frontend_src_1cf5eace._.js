module.exports=[648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},58920,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(34075),f=a.i(97867),g=a.i(4600),h=a.i(648);function i(){let a=(0,d.useRouter)(),i=(0,d.useParams)(),j=i.business??i.tenant,k=(0,d.useSearchParams)(),l=(0,c.useMemo)(()=>{let a=k.get("next");return a&&a.startsWith("/")?a:null},[k]),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)([]),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(null);async function u(b){t(b),r(null);try{await (0,e.apiFetch)(`/api/${j}/app/branches/active`,{method:"POST",body:{branch_id:b}}),a.replace(l??`/app/${j}`)}catch(a){a instanceof e.ApiError?r(a.message):r("Failed to select branch.")}finally{t(null)}}(0,c.useEffect)(()=>{let a=!0;async function b(){try{r(null),n(!0);let b=await (0,e.apiFetch)(`/api/${j}/app/branches`);if(!a)return;p(Array.isArray(b.branches)?b.branches:[])}catch(b){if(!a)return;r(b instanceof Error?b.message:"Failed to load branches.")}finally{if(!a)return;n(!1)}}return"string"==typeof j&&j.length>0?b():(n(!1),r("Tenant is missing.")),()=>{a=!1}},[j]);let v=(0,c.useMemo)(()=>o.filter(a=>a.is_active),[o]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(h.PageHeader,{title:"Choose branch",description:"Select the shop you want to work in."}),m?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading branches..."}):null,q?(0,b.jsx)("div",{className:"text-sm text-red-600",children:q}):null,m||q||0!==v.length?null:(0,b.jsx)(g.Card,{className:"shadow-none",children:(0,b.jsxs)(g.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"No branches available"}),(0,b.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Please contact your administrator."})]})}),(0,b.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:v.map(a=>{let c=s===a.id;return(0,b.jsx)(g.Card,{className:"shadow-none",children:(0,b.jsxs)(g.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:a.code}),(0,b.jsx)("div",{className:"mt-2 text-sm font-semibold text-[var(--rb-text)]",children:a.name}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(f.Button,{variant:"primary",disabled:c,onClick:()=>{u(a.id)},children:c?"Selecting...":"Select"})})]})},a.id)})})]})}a.s(["default",()=>i])}];

//# sourceMappingURL=frontend_src_1cf5eace._.js.map