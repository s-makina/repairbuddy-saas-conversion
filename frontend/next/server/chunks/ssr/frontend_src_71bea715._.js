module.exports=[648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},29054,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,className:(0,c.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",a),...e})}a.s(["Input",()=>d])},71513,a=>{"use strict";var b=a.i(6454);a.s(["notify",0,{success:(a,c={})=>b.toast.success(a,c),error:(a,c={})=>b.toast.error(a,c),info:(a,c={})=>b.toast.info(a,c),warning:(a,c={})=>b.toast.warning(a,c),loading:(a,c={})=>b.toast.loading(a,c),dismiss(a){b.toast.dismiss(a)},message:(a,c,d={})=>"success"===a?b.toast.success(c,d):"error"===a?b.toast.error(c,d):"warning"===a?b.toast.warning(c,d):"loading"===a?b.toast.loading(c,d):b.toast.info(c,d)}])},90319,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({label:a,fieldId:d,description:e,error:f,required:g,className:h,labelClassName:i,fieldClassName:j,children:k}){let l=e?`${d}__description`:void 0,m=f?`${d}__error`:void 0,n=[l,m].filter(Boolean).join(" ")||void 0,o="function"==typeof k?k({describedBy:n,descriptionId:l,errorId:m,invalid:!!f}):k;return(0,b.jsxs)("div",{className:(0,c.cn)("grid gap-1 sm:grid-cols-[220px_1fr] sm:gap-4",h),children:[(0,b.jsx)("div",{className:"sm:pt-2",children:(0,b.jsxs)("label",{className:(0,c.cn)("block text-sm font-medium text-[var(--rb-text)]",i),htmlFor:d,children:[a,g?(0,b.jsx)("span",{className:"text-red-600",children:" *"}):null]})}),(0,b.jsxs)("div",{className:(0,c.cn)("min-w-0",j),children:[o,e?(0,b.jsx)("div",{id:l,className:"mt-1 text-xs text-zinc-500",children:e}):null,f?(0,b.jsx)("div",{id:m,className:"mt-1 text-xs text-red-600",children:f}):null]})]})}a.s(["FormRow",()=>d])},73719,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(34075),f=a.i(71513),g=a.i(91601),h=a.i(648),i=a.i(4600),j=a.i(97867),k=a.i(29054),l=a.i(90319);function m(){let a=(0,d.useRouter)(),m=(0,d.useParams)(),n=m.business??m.tenant,o=m.partId,p="string"==typeof o&&o.length>0?Number(o):null,[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)(null),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)(""),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)(""),[$,_]=(0,c.useState)(""),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(!0);async function ae(b){if((b.preventDefault(),"string"==typeof n&&0!==n.length)&&p&&Number.isFinite(p)&&!(p<=0)){t(!0),v(null);try{let b=C.trim();if(0===b.length)return void v("Name is required.");let c=O.trim(),d=null;if(c.length>0){let a=Number(c);if(!Number.isFinite(a))return void v("Price is invalid.");d=Math.round(100*a)}let g=Y.trim(),h=null;if(g.length>0){let a=Number(g);if(!Number.isFinite(a))return void v("Installation charges is invalid.");h=Math.round(100*a)}let i=aa.trim(),j=null;if(i.length>0){let a=Number(i);if(!Number.isFinite(a))return void v("Stock is invalid.");j=Math.trunc(a)}let k={name:b,sku:""!==E.trim()?E.trim():null,part_type_id:G,part_brand_id:I,manufacturing_code:""!==K.trim()?K.trim():null,stock_code:""!==M.trim()?M.trim():null,price_amount_cents:d,tax_id:Q,warranty:""!==S.trim()?S.trim():null,core_features:""!==W.trim()?W.trim():null,capacity:""!==U.trim()?U.trim():null,installation_charges_amount_cents:h,installation_message:""!==$.trim()?$.trim():null,stock:j,is_active:ac};await (0,e.apiFetch)(`/api/${n}/app/repairbuddy/parts/${p}`,{method:"PATCH",body:k}),f.notify.success("Part updated."),a.replace(`/app/${n}/parts`)}catch(a){a instanceof e.ApiError?v(a.message):v("Failed to update part.")}finally{t(!1)}}}(0,c.useEffect)(()=>{let a=!0;return async function(){if("string"==typeof n&&0!==n.length&&p&&Number.isFinite(p)&&!(p<=0)){r(!0),v(null);try{let[b,c,d,f]=await Promise.all([(0,e.apiFetch)(`/api/${n}/app/repairbuddy/parts/${p}`),(0,e.apiFetch)(`/api/${n}/app/repairbuddy/part-types?limit=200`),(0,e.apiFetch)(`/api/${n}/app/repairbuddy/part-brands?limit=200`),(0,e.apiFetch)(`/api/${n}/app/repairbuddy/taxes?limit=200`)]);if(!a)return;let g=b.part;D(g?.name??""),F(g?.sku??""),H("number"==typeof g?.part_type_id?g.part_type_id:null),J("number"==typeof g?.part_brand_id?g.part_brand_id:null),L(g?.manufacturing_code??""),N(g?.stock_code??""),P(g?.price?(g.price.amount_cents/100).toFixed(2):""),R("number"==typeof g?.tax_id?g.tax_id:null),T(g?.warranty??""),V(g?.capacity??""),X(g?.core_features??""),Z(g?.installation_charges?(g.installation_charges.amount_cents/100).toFixed(2):""),_(g?.installation_message??""),ab("number"==typeof g?.stock?String(g.stock):""),ad(!!g?.is_active),x(Array.isArray(c.part_types)?c.part_types:[]),z(Array.isArray(d.part_brands)?d.part_brands:[]),B(Array.isArray(f.taxes)?f.taxes:[])}catch(b){if(!a)return;v(b instanceof Error?b.message:"Failed to load part.")}finally{if(!a)return;r(!1)}}}(),()=>{a=!1}},[p,n]);let af=!p||!Number.isFinite(p)||p<=0,ag=s||q;return(0,b.jsx)(g.RequireAuth,{requiredPermission:"parts.manage",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(h.PageHeader,{title:af?"Edit part":`Edit part #${p}`,description:"Update part details.",actions:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Button,{variant:"outline",size:"sm",onClick:()=>{"string"==typeof n&&0!==n.length&&a.push(`/app/${n}/parts`)},children:"Cancel"}),(0,b.jsx)(j.Button,{variant:"primary",size:"sm",type:"submit",form:"rb_part_edit_form",disabled:ag||af,children:s?"Saving...":"Save"})]})}),af?(0,b.jsx)("div",{className:"text-sm text-red-600",children:"Invalid part id."}):null,u?(0,b.jsx)("div",{className:"text-sm text-red-600",children:u}):null,(0,b.jsx)(i.Card,{className:"shadow-none",children:(0,b.jsx)(i.CardContent,{className:"pt-5",children:(0,b.jsxs)("form",{id:"rb_part_edit_form",className:"space-y-4",onSubmit:ae,children:[(0,b.jsx)(l.FormRow,{label:"Name",fieldId:"part_name",required:!0,children:(0,b.jsx)(k.Input,{id:"part_name",value:C,onChange:a=>D(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"SKU",fieldId:"part_sku",children:(0,b.jsx)(k.Input,{id:"part_sku",value:E,onChange:a=>F(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Manufacturing code",fieldId:"part_manufacturing_code",children:(0,b.jsx)(k.Input,{id:"part_manufacturing_code",value:K,onChange:a=>L(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Stock code",fieldId:"part_stock_code",children:(0,b.jsx)(k.Input,{id:"part_stock_code",value:M,onChange:a=>N(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Part type",fieldId:"part_type",children:(0,b.jsxs)("select",{id:"part_type",className:"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]",value:G??"",onChange:a=>{let b=a.target.value;if(!b)return void H(null);let c=Number(b);H(Number.isFinite(c)?c:null)},disabled:ag||af,children:[(0,b.jsx)("option",{value:"",children:"(none)"}),w.slice().sort((a,b)=>a.name.localeCompare(b.name)).map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})}),(0,b.jsx)(l.FormRow,{label:"Part brand",fieldId:"part_brand",children:(0,b.jsxs)("select",{id:"part_brand",className:"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]",value:I??"",onChange:a=>{let b=a.target.value;if(!b)return void J(null);let c=Number(b);J(Number.isFinite(c)?c:null)},disabled:ag||af,children:[(0,b.jsx)("option",{value:"",children:"(none)"}),y.slice().sort((a,b)=>a.name.localeCompare(b.name)).map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})}),(0,b.jsx)(l.FormRow,{label:"Price",fieldId:"part_price",children:(0,b.jsx)(k.Input,{id:"part_price",value:O,onChange:a=>P(a.target.value),disabled:ag||af,inputMode:"decimal"})}),(0,b.jsx)(l.FormRow,{label:"Tax",fieldId:"part_tax",children:(0,b.jsxs)("select",{id:"part_tax",className:"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]",value:Q??"",onChange:a=>{let b=a.target.value;if(!b)return void R(null);let c=Number(b);R(Number.isFinite(c)?c:null)},disabled:ag||af,children:[(0,b.jsx)("option",{value:"",children:"(none)"}),A.slice().sort((a,b)=>a.name.localeCompare(b.name)).map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})}),(0,b.jsx)(l.FormRow,{label:"Warranty",fieldId:"part_warranty",children:(0,b.jsx)(k.Input,{id:"part_warranty",value:S,onChange:a=>T(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Capacity",fieldId:"part_capacity",children:(0,b.jsx)(k.Input,{id:"part_capacity",value:U,onChange:a=>V(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Core features",fieldId:"part_core_features",children:(0,b.jsx)("textarea",{id:"part_core_features",className:"w-full min-h-[96px] rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]",value:W,onChange:a=>X(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Installation charges",fieldId:"part_installation_charges",children:(0,b.jsx)(k.Input,{id:"part_installation_charges",value:Y,onChange:a=>Z(a.target.value),disabled:ag||af,inputMode:"decimal"})}),(0,b.jsx)(l.FormRow,{label:"Installation message",fieldId:"part_installation_message",children:(0,b.jsx)(k.Input,{id:"part_installation_message",value:$,onChange:a=>_(a.target.value),disabled:ag||af})}),(0,b.jsx)(l.FormRow,{label:"Stock",fieldId:"part_stock",children:(0,b.jsx)(k.Input,{id:"part_stock",value:aa,onChange:a=>ab(a.target.value),disabled:ag||af,inputMode:"numeric"})}),(0,b.jsxs)("div",{className:"grid gap-1 sm:grid-cols-[220px_1fr] sm:gap-4",children:[(0,b.jsx)("div",{className:"sm:pt-2",children:(0,b.jsx)("span",{className:"block text-sm font-medium text-[var(--rb-text)]",children:"Active"})}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:ac,onChange:a=>ad(a.target.checked),disabled:ag||af}),"Enabled"]})]})]})})})]})})}a.s(["default",()=>m])}];

//# sourceMappingURL=frontend_src_71bea715._.js.map