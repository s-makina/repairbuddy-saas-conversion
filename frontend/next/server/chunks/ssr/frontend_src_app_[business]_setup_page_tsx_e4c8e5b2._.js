module.exports=[48839,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(59843),f=a.i(91601),g=a.i(54260),h=a.i(75385),i=a.i(97867),j=a.i(17933),k=a.i(4600),l=a.i(29054),m=a.i(648),n=a.i(94703),o=a.i(21282),p=a.i(75458),q=a.i(54177),r=a.i(39159),s=a.i(34075),t=a.i(71513),u=a.i(36747),v=a.i(49604),w=a.i(4870);let x=["welcome","business","address","branches","branding","preferences","tax","team","finish"],y=["branding","preferences","tax","team"],z=["UTC","Europe/London","Europe/Berlin","Europe/Paris","Africa/Cairo","Asia/Dubai","Asia/Riyadh","Asia/Kolkata","Asia/Singapore","Asia/Tokyo","Australia/Sydney","America/New_York","America/Chicago","America/Denver","America/Los_Angeles"];function A(a){return"welcome"===a?"Welcome":"business"===a?"Business":"address"===a?"Address":"branches"===a?"Branches":"branding"===a?"Brand":"preferences"===a?"Operations":"tax"===a?"Tax":"team"===a?"Team":"Finish"}function B(a){return"welcome"===a?"Set expectations and start setup.":"business"===a?"Confirm your business details.":"address"===a?"Add your address and locale details.":"branches"===a?"Add and manage your shop locations.":"branding"===a?"Upload a logo and configure customer-facing info.":"preferences"===a?"Set default operations and notification preferences.":"tax"===a?"Configure VAT and invoice numbering (optional).":"team"===a?"Invite your team (optional).":"Review and complete setup."}function C(){let a=(0,p.useAuth)(),C=(0,d.useRouter)(),D=(0,d.useParams)(),E=D.business??D.tenant,[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)("welcome"),[L,M]=(0,c.useState)({name:"",display_name:"",primary_contact_name:"",contact_email:"",contact_phone:"",registration_number:"",billing_country:"",billing_vat_number:"",currency:"USD",address_line1:"",address_line2:"",address_city:"",address_state:"",address_postal_code:"",brand_color:"#2563eb",support_email:"",support_phone:"",website:"",document_footer:"",timezone:"UTC",language:"en",working_hours:"Mon–Fri 09:00–17:00",default_labor_rate:"",warranty_terms:"",notify_status_change:!0,notify_invoice_created:!1,tax_registered:!1,invoice_prefix:"RB",enable_taxes:!1,default_tax_id:"",invoice_amounts:"exclusive",team_invites:"",team_default_role:"member"}),[N,O]=(0,c.useState)(null),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(!1),[X,Y]=(0,c.useState)(!1),[Z,$]=(0,c.useState)([]),[_,aa]=(0,c.useState)(null),[ab,ac]=(0,c.useState)(!1),[ad,ae]=(0,c.useState)(!1),[af,ag]=(0,c.useState)(null),[ah,ai]=(0,c.useState)(""),[aj,ak]=(0,c.useState)(""),[al,am]=(0,c.useState)(!0),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)(""),[ar,as]=(0,c.useState)(null),[at,au]=(0,c.useState)(!1),[av,aw]=(0,c.useState)([]),[ax,ay]=(0,c.useState)(!1),[az,aA]=(0,c.useState)(!1),[aB,aC]=(0,c.useState)(!1),[aD,aE]=(0,c.useState)(""),[aF,aG]=(0,c.useState)("0"),[aH,aI]=(0,c.useState)(!0),[aJ,aK]=(0,c.useState)(!1),[aL,aM]=(0,c.useState)(null),[aN,aO]=(0,c.useState)(""),[aP,aQ]=(0,c.useState)("0"),[aR,aS]=(0,c.useState)(!0),[aT,aU]=(0,c.useState)(!1),[aV,aW]=(0,c.useState)(""),[aX,aY]=(0,c.useState)(0),[aZ,a$]=(0,c.useState)(10),a_=(0,c.useRef)(!1),a0=(0,c.useRef)(!1),a1=(0,c.useRef)(null),a2=x.indexOf(J),a3=Math.max(0,a2)/(x.length-1),a4=(0,c.useMemo)(()=>{try{let a=Intl,b="function"==typeof a.supportedValuesOf?a.supportedValuesOf("timeZone"):null;return Array.isArray(b)&&b.length>0?b:z}catch{return z}},[]),a5=(0,c.useCallback)(async()=>{if("string"==typeof E&&0!==E.length){Y(!0),aa(null);try{let a=await (0,s.apiFetch)(`/api/${E}/app/branches`);$(Array.isArray(a.branches)?a.branches:[])}catch(a){a instanceof s.ApiError?aa(a.message):aa(a instanceof Error?a.message:"Failed to load branches.")}finally{Y(!1)}}},[E]),a6=(0,c.useCallback)(async()=>{if("string"==typeof E&&0!==E.length){ac(!0),aa(null);try{let a={name:ah,code:aj,is_active:al};af?await (0,s.apiFetch)(`/api/${E}/app/branches/${af}`,{method:"PUT",body:a}):await (0,s.apiFetch)(`/api/${E}/app/branches`,{method:"POST",body:a}),ae(!1),t.notify.success("Saved branch."),await a5()}catch(a){a instanceof s.ApiError?aa(a.message):aa(a instanceof Error?a.message:"Failed to save branch.")}finally{ac(!1)}}},[aj,af,al,ah,E,a5]),a7=(0,c.useCallback)(async a=>{if("string"==typeof E&&0!==E.length){ac(!0),aa(null);try{let b=await (0,s.apiFetch)(`/api/${E}/app/branches/${a}/default`,{method:"POST",body:{}});I(b.tenant),t.notify.success("Default branch updated.")}catch(a){a instanceof s.ApiError?aa(a.message):aa(a instanceof Error?a.message:"Failed to set default branch.")}finally{ac(!1)}}},[E]),a8=(0,c.useCallback)(async()=>{if("string"==typeof E&&0!==E.length){au(!0);try{let a=await (0,w.getRepairBuddyTaxes)(E);aw(Array.isArray(a.taxes)?a.taxes:[])}catch(a){console.error("Failed to load taxes",a)}finally{au(!1)}}},[E]),a9=(0,c.useCallback)(async()=>{if("string"==typeof E&&0!==E.length){ay(!0),Q(null);try{let a=aD.trim(),b=Number(aF);if(!a)throw Error("Name is required.");if(!Number.isFinite(b))throw Error("Rate is invalid.");await (0,w.createRepairBuddyTax)(E,{name:a,rate:b,is_active:aH,is_default:aJ}),await a8(),aA(!1),aE(""),aG("0"),aI(!0),aK(!1),t.notify.success("Tax created.")}catch(a){Q(a instanceof Error?a.message:"Failed to create tax.")}finally{ay(!1)}}},[aH,aJ,aD,aF,E,a8]),ba=(0,c.useCallback)(async()=>{if(aL&&"string"==typeof E&&0!==E.length){ay(!0),Q(null);try{let a=Number(aL),b=aN.trim(),c=Number(aP);if(!b)throw Error("Name is required.");if(!Number.isFinite(c))throw Error("Rate is invalid.");await (0,w.updateRepairBuddyTax)(E,a,{name:b,rate:c}),await (0,w.setRepairBuddyTaxActive)(E,a,aR),aT&&await (0,w.setRepairBuddyTaxDefault)(E,a),await a8(),aC(!1),t.notify.success("Tax updated.")}catch(a){Q(a instanceof Error?a.message:"Failed to update tax.")}finally{ay(!1)}}},[E,aR,aT,aL,aN,aP,a8]),bb=(0,c.useCallback)(async a=>{if("string"==typeof E&&0!==E.length&&globalThis.confirm(`Delete tax "${a.name}"?`)){ay(!0),Q(null);try{await (0,w.deleteRepairBuddyTax)(E,Number(a.id)),await a8(),t.notify.success("Tax deleted.")}catch(a){Q(a instanceof Error?a.message:"Failed to delete tax.")}finally{ay(!1)}}},[E,a8]),bc=(0,c.useMemo)(()=>{let a={};return L.address_line1.trim()&&(a.line1=L.address_line1.trim()),L.address_line2.trim()&&(a.line2=L.address_line2.trim()),L.address_city.trim()&&(a.city=L.address_city.trim()),L.address_state.trim()&&(a.state=L.address_state.trim()),L.address_postal_code.trim()&&(a.postal_code=L.address_postal_code.trim()),Object.keys(a).length>0?a:null},[L.address_city,L.address_line1,L.address_line2,L.address_postal_code,L.address_state]),bd=a2>0,be=a2<x.length-1,bf=y.includes(J)&&be,bg=(0,c.useCallback)(a=>{if("welcome"===a)return null;if("business"===a){if(!L.name.trim())return"Business name is required.";if(!L.primary_contact_name.trim())return"Primary contact person name is required.";if(!L.contact_email.trim())return"Primary contact email is required.";if(!L.contact_phone.trim())return"Primary contact phone is required."}if("address"===a){if(!L.billing_country.trim())return"Billing country is required.";if(2!==L.billing_country.trim().length)return"Billing country must be a 2-letter code (e.g. US).";if(!L.currency.trim())return"Currency is required.";if(3!==L.currency.trim().length)return"Currency must be a 3-letter code (e.g. USD).";if(!L.address_line1.trim())return"Address line 1 is required.";if(!L.address_city.trim())return"City is required.";if(!L.address_postal_code.trim())return"Postal code is required."}if("preferences"===a&&!L.timezone.trim())return"Timezone is required.";if("tax"===a&&L.tax_registered&&!L.billing_vat_number.trim())return"VAT number is required when tax/VAT registered is enabled.";if("finish"===a){if(!L.name.trim())return"Business name is required.";if(!L.primary_contact_name.trim())return"Primary contact person name is required.";if(!L.contact_email.trim())return"Primary contact email is required.";if(!L.contact_phone.trim())return"Primary contact phone is required.";if(!L.billing_country.trim()||2!==L.billing_country.trim().length)return"Billing country is required.";if(!L.currency.trim()||3!==L.currency.trim().length)return"Currency is required.";if(!L.address_line1.trim())return"Address line 1 is required.";if(!L.address_city.trim())return"City is required.";if(!L.address_postal_code.trim())return"Postal code is required.";if(!L.timezone.trim())return"Timezone is required.";if(L.tax_registered&&!L.billing_vat_number.trim())return"VAT number is required when tax/VAT registered is enabled.";if(!H?.default_branch_id)return"Default branch is required."}return null},[L,H?.default_branch_id]);(0,c.useEffect)(()=>{"branches"===J?a5():"tax"===J&&a8()},[a5,a8,J]);let bh=(0,c.useCallback)(async(a,b)=>{if("string"!=typeof E||0===E.length)return;let c={...N??{},wizard:{step:a,saved_at:new Date().toISOString()},identity:{display_name:L.display_name.trim()||null,primary_contact_name:L.primary_contact_name.trim()||null,registration_number:L.registration_number.trim()||null},branding:{support_email:L.support_email.trim()||null,support_phone:L.support_phone.trim()||null,website:L.website.trim()||null,document_footer:L.document_footer.trim()||null},operations:{working_hours:L.working_hours.trim()||null,default_labor_rate:L.default_labor_rate.trim()||null,warranty_terms:L.warranty_terms.trim()||null,notify_status_change:!!L.notify_status_change,notify_invoice_created:!!L.notify_invoice_created},tax:{tax_registered:!!L.tax_registered,invoice_prefix:L.invoice_prefix.trim()||null},team:{invites:L.team_invites.trim()||null,default_role:L.team_default_role.trim()||null}};S(!0),Q(null);try{let d=await (0,u.updateSetup)(E,{name:L.name.trim()||void 0,contact_email:L.contact_email.trim()||null,contact_phone:L.contact_phone.trim()||null,billing_country:L.billing_country.trim()?L.billing_country.trim().toUpperCase():null,billing_vat_number:L.billing_vat_number.trim()||null,billing_address_json:bc,currency:L.currency.trim()?L.currency.trim().toUpperCase():null,timezone:L.timezone.trim()||null,language:"en",brand_color:L.brand_color.trim()||null,setup_step:a,setup_state:c}),e=(await (0,v.getRepairBuddySettings)(E)).settings;e&&await (0,v.updateRepairBuddySettings)(E,{...e,taxes:{...e.taxes,enableTaxes:L.enable_taxes,defaultTaxId:L.default_tax_id,invoiceAmounts:L.invoice_amounts}}),I(d.tenant),O(c),b&&t.notify.success("Saved."),a0.current=!1}catch(a){a instanceof s.ApiError?Q(a.message):Q(a instanceof Error?a.message:"Failed to save setup.")}finally{S(!1)}},[bc,E,L,N]);(0,c.useEffect)(()=>{if(!a.loading&&a.isAuthenticated&&a.isAdmin)return void C.replace("/admin")},[a.isAdmin,a.isAuthenticated,a.loading,C]),(0,c.useEffect)(()=>{let a=!0;return async function(){if("string"==typeof E&&0!==E.length){G(!0),Q(null);try{var b;let c=await (0,u.getSetup)(E);if(!a)return;I(c.tenant),O(c.setup.state??null);let d=c.tenant,e=d.billing_address_json??{},f=c.setup.state??{},g=f.identity??{},h=f.branding??{},i=f.operations??{},j=f.tax??{},k=f.team??{};M({name:d.name??"",display_name:"string"==typeof g.display_name?g.display_name:"",primary_contact_name:"string"==typeof g.primary_contact_name?g.primary_contact_name:"",contact_email:d.contact_email??"",contact_phone:d.contact_phone??"",registration_number:"string"==typeof g.registration_number?g.registration_number:"",billing_country:(d.billing_country??"").toUpperCase(),billing_vat_number:d.billing_vat_number??"",currency:(d.currency??"USD").toUpperCase(),address_line1:"string"==typeof e.line1?e.line1:"",address_line2:"string"==typeof e.line2?e.line2:"",address_city:"string"==typeof e.city?e.city:"",address_state:"string"==typeof e.state?e.state:"",address_postal_code:"string"==typeof e.postal_code?e.postal_code:"",brand_color:d.brand_color??"#2563eb",support_email:"string"==typeof h.support_email?h.support_email:"",support_phone:"string"==typeof h.support_phone?h.support_phone:"",website:"string"==typeof h.website?h.website:"",document_footer:"string"==typeof h.document_footer?h.document_footer:"",timezone:d.timezone??"UTC",language:"en",working_hours:"string"==typeof i.working_hours?i.working_hours:"Mon–Fri 09:00–17:00",default_labor_rate:"string"==typeof i.default_labor_rate?i.default_labor_rate:"",warranty_terms:"string"==typeof i.warranty_terms?i.warranty_terms:"",notify_status_change:"boolean"!=typeof i.notify_status_change||i.notify_status_change,notify_invoice_created:"boolean"==typeof i.notify_invoice_created&&i.notify_invoice_created,tax_registered:"boolean"==typeof j.tax_registered&&j.tax_registered,invoice_prefix:"string"==typeof j.invoice_prefix?j.invoice_prefix:"RB",enable_taxes:!1,default_tax_id:"",invoice_amounts:"exclusive",team_invites:"string"==typeof k.invites?k.invites:"",team_default_role:"string"==typeof k.default_role?k.default_role:"member"});try{let a=await (0,v.getRepairBuddySettings)(E);if(a.settings?.taxes){let b=a.settings.taxes;M(a=>({...a,enable_taxes:!!b.enableTaxes,default_tax_id:String(b.defaultTaxId||""),invoice_amounts:b.invoiceAmounts||"exclusive"}))}}catch(a){console.error("Failed to load RepairBuddy settings",a)}let l=c.setup.state&&"object"==typeof c.setup.state?c.setup.state.wizard?.step??null:null,m=(b=c.setup.step??l,"string"==typeof b&&x.includes(b)?b:"welcome");K(m),a_.current=!0,a0.current=!1}catch(b){if(!a)return;Q(b instanceof Error?b.message:"Failed to load setup.")}finally{if(!a)return;G(!1)}}}(),()=>{a=!1}},[E]),(0,c.useEffect)(()=>{!H?.default_branch_id||0===Z.length||Z.some(a=>a.id===H.default_branch_id)||a5()},[Z,a5,H?.default_branch_id]),(0,c.useEffect)(()=>{if(a_.current&&a0.current&&"string"==typeof E&&0!==E.length)return a1.current&&window.clearTimeout(a1.current),a1.current=window.setTimeout(()=>{bh(J,!1)},800),()=>{a1.current&&window.clearTimeout(a1.current)}},[E,L,bh,J]);let bi=(0,c.useCallback)((a,b)=>{M(c=>({...c,[a]:b})),a0.current=!0},[]),bj=(0,c.useCallback)(async()=>{if(!be)return;let a=x[a2+1]??J,b=bg(J);b?Q(b):(Q(null),K(a),await bh(a,!0))},[be,bh,J,a2,bg]),bk=(0,c.useCallback)(async()=>{if(!bf)return;let a=x[a2+1]??J;Q(null),K(a),await bh(a,!0)},[bf,bh,J,a2]),bl=(0,c.useCallback)(async()=>{if(!bd)return;let a=x[a2-1]??J;Q(null),K(a),await bh(a,!0)},[bd,bh,J,a2]),bm=(0,c.useCallback)(async a=>{if("string"==typeof E&&0!==E.length){U(!0),Q(null);try{let b=await (0,u.updateSetup)(E,{logo:a});I(b.tenant),t.notify.success("Logo uploaded.")}catch(a){a instanceof s.ApiError?Q(a.message):Q(a instanceof Error?a.message:"Failed to upload logo.")}finally{U(!1)}}},[E]),bn=(0,c.useCallback)(async()=>{if("string"!=typeof E||0===E.length)return;let b=bg("finish");if(b)return void Q(b);W(!0),Q(null);try{if(await bh("finish",!1),!bc)throw Error("Billing address is required.");await (0,u.completeSetup)(E,{name:L.name.trim(),contact_email:L.contact_email.trim(),contact_phone:L.contact_phone.trim(),billing_country:L.billing_country.trim().toUpperCase(),billing_address_json:bc,currency:L.currency.trim().toUpperCase(),timezone:L.timezone.trim(),language:"en"}),await a.refresh(),C.replace(`/app/${E}`)}catch(a){a instanceof s.ApiError?Q(a.message):Q(a instanceof Error?a.message:"Failed to complete setup.")}finally{W(!1)}},[a,bc,E,L.billing_country,L.contact_email,L.contact_phone,L.currency,L.language,L.name,L.timezone,bh,C,bg]),bo=H?.name??E,bp=(0,c.useMemo)(()=>Z.slice().sort((a,b)=>(a.name??"").localeCompare(b.name??"")),[Z]);return a.loading||F?(0,b.jsx)(g.Preloader,{label:"Loading setup"}):"string"!=typeof E||0===E.length?(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[var(--rb-surface)] px-6",children:(0,b.jsx)(k.Card,{className:"w-full max-w-lg shadow-none",children:(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:"Setup wizard"}),(0,b.jsx)(k.CardDescription,{children:"Business is missing."})]})})}):(0,b.jsx)(f.RequireAuth,{children:(0,b.jsxs)("div",{className:"min-h-screen text-[var(--rb-text)] [background:radial-gradient(1200px_circle_at_20%_0%,color-mix(in_srgb,var(--rb-blue),white_88%)_0%,transparent_55%),radial-gradient(900px_circle_at_80%_15%,color-mix(in_srgb,var(--rb-orange),white_86%)_0%,transparent_60%),var(--rb-surface)]",children:[(0,b.jsx)("header",{className:"sticky top-0 z-20 border-b border-[var(--rb-border)] bg-white/70 backdrop-blur",children:(0,b.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(e.default,{href:"/",className:"font-semibold tracking-tight text-[var(--rb-text)]",children:"99smartx"}),(0,b.jsx)(j.Badge,{variant:"info",className:"hidden sm:inline-flex",children:"Setup"})]}),(0,b.jsxs)("nav",{className:"hidden items-center gap-6 text-sm text-zinc-600 md:flex",children:[(0,b.jsx)(e.default,{href:"/#features",className:"hover:text-[var(--rb-text)]",children:"Features"}),(0,b.jsx)(e.default,{href:"/#pricing",className:"hover:text-[var(--rb-text)]",children:"Pricing"}),(0,b.jsx)(e.default,{href:"/#faq",className:"hover:text-[var(--rb-text)]",children:"FAQ"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>C.replace(`/${E}/plans`),children:"Back"})})]})}),(0,b.jsxs)("main",{children:[(0,b.jsx)("section",{className:"mx-auto w-full max-w-6xl px-4 py-10",children:(0,b.jsxs)("div",{className:"mx-auto w-full max-w-5xl space-y-6",children:[(0,b.jsx)(m.PageHeader,{title:"Business setup",description:`Finish setting up ${bo} to start using the app.`,actions:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"hidden sm:block text-xs text-zinc-500",children:R?"Saving...":"Autosave on"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",disabled:R,onClick:()=>{bh(J,!0)},children:"Save"})]})}),P?(0,b.jsx)(h.Alert,{variant:"danger",title:"Setup error",children:P}):null,(0,b.jsx)(n.Modal,{open:ad,onClose:()=>{ab||ae(!1)},title:af?"Edit branch":"Create branch",footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>ae(!1),disabled:ab,children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:()=>void a6(),disabled:ab,children:ab?"Saving...":"Save"})]}),children:(0,b.jsxs)("div",{className:"grid gap-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",htmlFor:"setup_branch_name",children:"Name"}),(0,b.jsx)(l.Input,{id:"setup_branch_name",value:ah,onChange:a=>ai(a.target.value),placeholder:"e.g. Main Shop",disabled:ab})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",htmlFor:"setup_branch_code",children:"Code"}),(0,b.jsx)(l.Input,{id:"setup_branch_code",value:aj,onChange:a=>ak(a.target.value),placeholder:"e.g. MAIN",disabled:ab,maxLength:16})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,b.jsx)("input",{type:"checkbox",checked:al,onChange:a=>am(a.target.checked),disabled:ab}),"Active"]})]})}),(0,b.jsx)(o.ConfirmDialog,{open:an,title:"Set default branch",message:ap,busy:ab,onCancel:()=>{ab||(ao(!1),as(null))},onConfirm:()=>{ar&&(async()=>{await ar(),ao(!1),as(null)})()}}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[260px_1fr]",children:[(0,b.jsxs)(k.Card,{className:"shadow-none lg:sticky lg:top-6 lg:self-start",children:[(0,b.jsxs)(k.CardHeader,{className:"pb-3",children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:"Setup steps"}),(0,b.jsx)(k.CardDescription,{children:"Complete the steps to start using the app."})]}),(0,b.jsxs)(k.CardContent,{className:"space-y-4",children:[(0,b.jsx)("div",{className:"h-2 w-full rounded-full bg-[var(--rb-border)] overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-[linear-gradient(90deg,var(--rb-blue),var(--rb-orange))]",style:{width:`${Math.round(100*a3)}%`}})}),(0,b.jsx)("nav",{"aria-label":"Setup steps",className:"space-y-1",children:x.map((a,c)=>{let d=c===a2,e=c<a2,f=c<=a2;return(0,b.jsx)("button",{type:"button",disabled:!f||R||V,onClick:()=>{f&&(Q(null),K(a),bh(a,!0))},className:"w-full rounded-[var(--rb-radius-md)] border px-3 py-2 text-left transition "+(d?"border-[color:color-mix(in_srgb,var(--rb-blue),white_65%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)]":e?"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-white hover:bg-[var(--rb-surface-muted)]":"border-[var(--rb-border)] bg-white opacity-60"),children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full border text-xs font-semibold "+(d?"border-[var(--rb-blue)] bg-[var(--rb-blue)] text-white":e?"border-[var(--rb-blue)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_90%)] text-[var(--rb-blue)]":"border-[var(--rb-border)] bg-white text-zinc-600"),children:e?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):c+1}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:A(a)}),(0,b.jsx)("div",{className:"mt-0.5 text-xs text-zinc-600 line-clamp-2",children:B(a)})]})]})},a)})})]})]}),(0,b.jsxs)(k.Card,{className:"shadow-none flex min-h-[calc(100vh-220px)] flex-col",children:[(0,b.jsx)(k.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.CardTitle,{className:"text-base",children:A(J)}),(0,b.jsx)(k.CardDescription,{children:B(J)})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Step ",a2+1," of ",x.length]}),(0,b.jsxs)("div",{className:"mt-2 flex items-center justify-end gap-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-1","aria-label":"Progress",children:x.map((a,c)=>{let d=c<a2,e=c===a2;return(0,b.jsx)("span",{className:"h-1.5 w-5 rounded-full transition "+(e?"bg-[var(--rb-blue)]":d?"bg-[color:color-mix(in_srgb,var(--rb-blue),white_55%)]":"bg-[var(--rb-border)]")},c)})}),(0,b.jsxs)("div",{className:"rounded-full border border-[var(--rb-border)] bg-white px-2 py-1 text-[11px] font-medium text-zinc-600",children:[Math.round(100*a3),"%"]})]})]})]})}),(0,b.jsxs)(k.CardContent,{className:"flex-1 space-y-6",children:["welcome"===J?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"relative overflow-hidden rounded-[var(--rb-radius-lg)] border border-[color:color-mix(in_srgb,var(--rb-blue),white_80%)] bg-[linear-gradient(135deg,color-mix(in_srgb,var(--rb-blue),white_90%),white_70%)] p-6",children:[(0,b.jsx)("div",{className:"absolute -right-16 -top-16 h-56 w-56 rounded-full bg-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] blur-2xl","aria-hidden":"true"}),(0,b.jsxs)("div",{className:"relative flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex h-11 w-11 shrink-0 items-center justify-center rounded-full border border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)] bg-white/70 text-[var(--rb-blue)]",children:(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 2l1.7 5.3L19 9l-5.3 1.7L12 16l-1.7-5.3L5 9l5.3-1.7L12 2z"}),(0,b.jsx)("path",{d:"M5 14l.9 2.8L9 18l-3.1 1.2L5 22l-.9-2.8L1 18l3.1-1.2L5 14z"})]})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-xl font-semibold text-[var(--rb-text)]",children:"Welcome — let’s get your business ready"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:"This wizard saves as you go and takes about 3–5 minutes. You can skip optional steps and come back later."})]})]}),(0,b.jsxs)("div",{className:"relative mt-5 grid gap-3 sm:grid-cols-3",children:[(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Time"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:"3–5 minutes"})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Saving"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:"Auto-saved"})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Flexibility"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:"Optional steps"})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"What you’ll configure"}),(0,b.jsx)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:x.filter(a=>"welcome"!==a).map(a=>{let c=y.includes(a);return(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:A(a)}),c?(0,b.jsx)("span",{className:"rounded-full border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-2 py-0.5 text-[11px] font-medium text-zinc-600",children:"Optional"}):null]}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:B(a)})]},a)})})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,b.jsx)(i.Button,{variant:"primary",size:"lg",disabled:R||V,onClick:()=>{bj()},children:"Start setup"}),(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"You can adjust everything later from Settings."})]})]}):null,"business"===J?(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Business name"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.name,onChange:a=>bi("name",a.target.value),placeholder:"e.g. RepairBuddy Electronics",autoComplete:"organization"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Display name (optional)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.display_name,onChange:a=>bi("display_name",a.target.value),placeholder:"Defaults to business name"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Primary contact person name"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.primary_contact_name,onChange:a=>bi("primary_contact_name",a.target.value),placeholder:"e.g. Alex Johnson",autoComplete:"name"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Contact email"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{type:"email",value:L.contact_email,onChange:a=>bi("contact_email",a.target.value),placeholder:"billing@company.com",autoComplete:"email"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Contact phone"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.contact_phone,onChange:a=>bi("contact_phone",a.target.value),placeholder:"+1 555 123 4567",autoComplete:"tel"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Business registration number (optional)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.registration_number,onChange:a=>bi("registration_number",a.target.value),placeholder:"e.g. CRN-123456"})})]})]}):null,"branches"===J?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Your shops / branches"}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:"Branches are used for staff access and branch-specific invoice numbering."})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>void a5(),disabled:X||ab,children:"Refresh"}),(0,b.jsx)(i.Button,{size:"sm",onClick:function(){ag(null),ai(""),ak(""),am(!0),ae(!0)},disabled:ab,children:"New branch"})]})]})}),_?(0,b.jsx)(h.Alert,{variant:"danger",title:"Branches error",children:_}):null,(0,b.jsxs)("div",{className:"space-y-2",children:[X?(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Loading branches..."}):null,X||0!==bp.length?null:(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"No branches found."}),bp.map(a=>{let c=H?.default_branch_id===a.id;return(0,b.jsxs)("div",{className:"flex flex-col gap-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:[a.code," - ",a.name]}),(0,b.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-zinc-600",children:[(0,b.jsx)("span",{children:a.is_active?"Active":"Inactive"}),c?(0,b.jsx)("span",{className:"rounded-full border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-2 py-0.5 text-[11px] font-medium text-zinc-600",children:"Default"}):null]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{ag(a.id),ai(a.name??""),ak(a.code??""),am(!!a.is_active),ae(!0)},disabled:ab,children:"Edit"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{aq((0,b.jsxs)("div",{children:["Set ",(0,b.jsxs)("span",{className:"font-semibold",children:[a.code," - ",a.name]})," as the default branch?"]})),as(()=>async()=>a7(a.id)),ao(!0)},disabled:ab||c,children:"Set default"})]})]},a.id)})]})]}):null,"tax"===J?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsx)("div",{className:"sm:col-span-2",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,b.jsx)("input",{type:"checkbox",checked:L.tax_registered,onChange:a=>bi("tax_registered",a.target.checked)}),"Tax/VAT registered?"]})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"VAT number"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.billing_vat_number,onChange:a=>bi("billing_vat_number",a.target.value),placeholder:"EU123456789"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invoice prefix (optional)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.invoice_prefix,onChange:a=>bi("invoice_prefix",a.target.value),placeholder:"RB"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invoice format preview"}),(0,b.jsx)("div",{className:"mt-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-zinc-700",children:(L.invoice_prefix.trim()||"RB")+"-"+E+"-YYYY-000001"})]})]}),(0,b.jsx)("div",{className:"border-t border-[var(--rb-border)] pt-6",children:(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,b.jsx)("input",{type:"checkbox",checked:L.enable_taxes,onChange:a=>bi("enable_taxes",a.target.checked)}),"Enable taxes"]})}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Tax rates"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>aA(!0),children:"Add tax"})]}),(0,b.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-1",children:(0,b.jsx)(q.DataTable,{data:av,columns:[{id:"name",header:"Name",cell:a=>(0,b.jsx)("div",{className:"text-sm",children:a.name})},{id:"rate",header:"Rate (%)",cell:a=>(0,b.jsx)("div",{className:"text-sm",children:Number(a.rate)})},{id:"active",header:"Active",cell:a=>(0,b.jsx)("div",{className:"text-sm",children:a.is_active?"Yes":"No"})},{id:"default",header:"Default",cell:a=>(0,b.jsx)("div",{className:"text-sm",children:a.is_default?"Yes":"No"})},{id:"actions",header:"",cell:a=>(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>{aM(String(a.id)),aO(a.name),aQ(String(a.rate)),aS(a.is_active),aU(a.is_default),aC(!0)},children:"Edit"}),(0,b.jsx)(i.Button,{size:"sm",variant:"outline",onClick:()=>void bb(a),children:"Delete"})]})}],getRowId:a=>String(a.id),loading:at,emptyMessage:"No tax rates defined."})})]}),(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default tax"}),(0,b.jsxs)(r.Select,{value:L.default_tax_id,disabled:0===av.filter(a=>a.is_active).length,onChange:a=>bi("default_tax_id",a.target.value),children:[(0,b.jsx)("option",{value:"",children:"None"}),av.filter(a=>a.is_active).map(a=>(0,b.jsxs)("option",{value:String(a.id),children:[a.name," (",Number(a.rate),"%)"]},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invoice amounts"}),(0,b.jsxs)(r.Select,{value:L.invoice_amounts,onChange:a=>bi("invoice_amounts",a.target.value),children:[(0,b.jsx)("option",{value:"exclusive",children:"Exclusive"}),(0,b.jsx)("option",{value:"inclusive",children:"Inclusive"})]})]})]})]}):null,"team"===J?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invite team members (optional)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.team_invites,onChange:a=>bi("team_invites",a.target.value),placeholder:"Emails separated by commas"})}),(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Invites are stored for later processing (email sending not implemented yet)."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default role for invites (optional)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.team_default_role,onChange:a=>bi("team_default_role",a.target.value),placeholder:"member"})}),(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Example values: owner, member, technician, front_desk."})]})]}):null,"address"===J?(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Billing country (2-letter)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.billing_country,onChange:a=>bi("billing_country",a.target.value.toUpperCase()),placeholder:"US",maxLength:2})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Currency"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.currency,onChange:a=>bi("currency",a.target.value.toUpperCase()),placeholder:"USD",maxLength:3})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"VAT number (optional)"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:L.billing_vat_number,onChange:a=>bi("billing_vat_number",a.target.value),placeholder:"EU123456789"})})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Address"}),(0,b.jsxs)("div",{className:"mt-1 grid gap-3 sm:grid-cols-2",children:[(0,b.jsx)("div",{className:"sm:col-span-2",children:(0,b.jsx)(l.Input,{value:L.address_line1,onChange:a=>bi("address_line1",a.target.value),placeholder:"Address line 1",autoComplete:"address-line1"})}),(0,b.jsx)("div",{className:"sm:col-span-2",children:(0,b.jsx)(l.Input,{value:L.address_line2,onChange:a=>bi("address_line2",a.target.value),placeholder:"Address line 2",autoComplete:"address-line2"})}),(0,b.jsx)(l.Input,{value:L.address_city,onChange:a=>bi("address_city",a.target.value),placeholder:"City",autoComplete:"address-level2"}),(0,b.jsx)(l.Input,{value:L.address_state,onChange:a=>bi("address_state",a.target.value),placeholder:"State / Region",autoComplete:"address-level1"}),(0,b.jsx)(l.Input,{value:L.address_postal_code,onChange:a=>bi("address_postal_code",a.target.value),placeholder:"Postal code",autoComplete:"postal-code"})]})]})]}):null,"branding"===J?(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Brand color"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,b.jsx)("input",{type:"color",value:L.brand_color,onChange:a=>bi("brand_color",a.target.value),className:"h-10 w-14 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white shadow-sm","aria-label":"Brand color"}),(0,b.jsx)(l.Input,{value:L.brand_color,onChange:a=>bi("brand_color",a.target.value),placeholder:"#2563eb"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Logo"}),(0,b.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[H?.logo_url?(0,b.jsx)("img",{src:H.logo_url,alt:"Logo",className:"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white object-contain"}):(0,b.jsx)("div",{className:"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white"}),(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/webp",disabled:T,onChange:a=>{let b=a.target.files&&a.target.files[0]?a.target.files[0]:null;b&&bm(b)},className:"block w-full text-sm text-zinc-700 file:mr-3 file:rounded-[var(--rb-radius-sm)] file:border-0 file:bg-[var(--rb-surface-muted)] file:px-3 file:py-2 file:text-sm file:font-medium file:text-[var(--rb-text)] hover:file:bg-[color:color-mix(in_srgb,var(--rb-surface-muted),black_4%)]"})})]}),(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:T?"Uploading...":"PNG/JPG/WEBP up to 5MB"})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Customer-facing contact (optional)"}),(0,b.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,b.jsx)(l.Input,{value:L.support_email,onChange:a=>bi("support_email",a.target.value),placeholder:"Public support email",autoComplete:"email"}),(0,b.jsx)(l.Input,{value:L.support_phone,onChange:a=>bi("support_phone",a.target.value),placeholder:"Public support phone",autoComplete:"tel"}),(0,b.jsx)("div",{className:"sm:col-span-2",children:(0,b.jsx)(l.Input,{value:L.website,onChange:a=>bi("website",a.target.value),placeholder:"Website (optional)"})}),(0,b.jsx)("div",{className:"sm:col-span-2",children:(0,b.jsx)(l.Input,{value:L.document_footer,onChange:a=>bi("document_footer",a.target.value),placeholder:"Document footer text (optional)"})})]})]})]}):null,"preferences"===J?(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Timezone"}),(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)(l.Input,{value:L.timezone,onChange:a=>bi("timezone",a.target.value),placeholder:"UTC",list:"rb-timezones"}),(0,b.jsx)("datalist",{id:"rb-timezones",children:a4.map(a=>(0,b.jsx)("option",{value:a},a))})]}),(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Example: UTC, Europe/Berlin, America/New_York"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Language"}),(0,b.jsx)("div",{className:"mt-1",children:(0,b.jsx)(l.Input,{value:"English (en)",disabled:!0})}),(0,b.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Currently supported language: English"})]}),(0,b.jsxs)("div",{className:"sm:col-span-2",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Operations defaults (optional)"}),(0,b.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,b.jsx)("div",{className:"sm:col-span-2",children:(0,b.jsx)(l.Input,{value:L.working_hours,onChange:a=>bi("working_hours",a.target.value),placeholder:"Working hours (e.g. Mon–Fri 09:00–17:00)"})}),(0,b.jsx)(l.Input,{value:L.default_labor_rate,onChange:a=>bi("default_labor_rate",a.target.value),placeholder:"Default labor rate (optional)"}),(0,b.jsx)(l.Input,{value:L.warranty_terms,onChange:a=>bi("warranty_terms",a.target.value),placeholder:"Default warranty terms (optional)"}),(0,b.jsxs)("label",{className:"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,b.jsx)("input",{type:"checkbox",checked:L.notify_status_change,onChange:a=>bi("notify_status_change",a.target.checked)}),"Email on status change"]}),(0,b.jsxs)("label",{className:"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,b.jsx)("input",{type:"checkbox",checked:L.notify_invoice_created,onChange:a=>bi("notify_invoice_created",a.target.checked)}),"Email on invoice created"]})]})]})]}):null,"finish"===J?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(h.Alert,{variant:"info",title:"Review",children:"Please confirm the required fields. Clicking complete will finish setup and take you to the dashboard."}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Business"}),(0,b.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:L.name.trim()||"—"}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Contact: ",L.contact_email.trim()||"—"]}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Primary contact: ",L.primary_contact_name.trim()||"—"]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Defaults"}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Timezone: ",L.timezone.trim()||"—"]}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Language: ",L.language.trim()||"—"]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Billing"}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Country: ",L.billing_country.trim()||"—"," | Currency: ",L.currency.trim()||"—"]}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["VAT: ",L.billing_vat_number.trim()||"—"]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Tax & invoicing"}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Registered: ",L.tax_registered?"Yes":"No"]}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Prefix: ",L.invoice_prefix.trim()||"—"]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Branding"}),(0,b.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Color: ",L.brand_color]}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Logo: ",H?.logo_url?"Uploaded":"—"]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Team"}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Invites: ",L.team_invites.trim()?"Drafted":"—"]}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Role: ",L.team_default_role.trim()||"—"]})]})]}),(0,b.jsx)(i.Button,{variant:"primary",disabled:V||R,onClick:()=>{bn()},children:V?"Completing...":"Complete setup"})]}):null]}),(0,b.jsx)("div",{className:"sticky bottom-0 border-t border-[var(--rb-border)] bg-white/90 px-5 py-4 backdrop-blur",children:(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,b.jsx)(i.Button,{variant:"ghost",disabled:!bd||R||V,onClick:()=>void bl(),children:(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"hidden sm:block text-xs text-zinc-500",children:[A(J),(0,b.jsx)("span",{className:"mx-2",children:"•"}),Math.round(100*a3),"%"]}),bf?(0,b.jsx)(i.Button,{variant:"outline",disabled:R||V,onClick:()=>void bk(),children:"Skip for now"}):null,"finish"!==J?(0,b.jsx)(i.Button,{variant:"primary",disabled:!be||R||V,onClick:()=>void bj(),children:(0,b.jsxs)("span",{className:"inline-flex items-center gap-2",children:["welcome"===J?"Start":"Next",(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M9 18l6-6-6-6"})})]})}):null]})]})})]})]}),(0,b.jsx)("footer",{className:"mt-12 border-t border-[var(--rb-border)] pt-8 text-xs text-zinc-600",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:["© ",new Date().getFullYear()," 99smartx"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.default,{href:"/login",className:"hover:text-[var(--rb-text)]",children:"Login"}),(0,b.jsx)(e.default,{href:"/register",className:"hover:text-[var(--rb-text)]",children:"Register"})]})]})})]})}),(0,b.jsx)(n.Modal,{open:az,onClose:()=>aA(!1),title:"Add tax",footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>aA(!1),disabled:ax,children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:()=>void a9(),disabled:ax,children:ax?"Saving...":"Save"})]}),children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Name"}),(0,b.jsx)(l.Input,{value:aD,onChange:a=>aE(a.target.value),placeholder:"e.g. VAT",disabled:ax})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Rate (%)"}),(0,b.jsx)(l.Input,{type:"number",min:0,value:aF,onChange:a=>aG(a.target.value),disabled:ax})]}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Active"}),(0,b.jsxs)(r.Select,{value:aH?"yes":"no",onChange:a=>aI("yes"===a.target.value),disabled:ax,children:[(0,b.jsx)("option",{value:"yes",children:"Yes"}),(0,b.jsx)("option",{value:"no",children:"No"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default"}),(0,b.jsxs)(r.Select,{value:aJ?"yes":"no",onChange:a=>aK("yes"===a.target.value),disabled:ax,children:[(0,b.jsx)("option",{value:"no",children:"No"}),(0,b.jsx)("option",{value:"yes",children:"Yes"})]})]})]})]})}),(0,b.jsx)(n.Modal,{open:aB,onClose:()=>aC(!1),title:"Edit tax",footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>aC(!1),disabled:ax,children:"Cancel"}),(0,b.jsx)(i.Button,{onClick:()=>void ba(),disabled:ax,children:ax?"Saving...":"Save"})]}),children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Name"}),(0,b.jsx)(l.Input,{value:aN,onChange:a=>aO(a.target.value),disabled:ax})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Rate (%)"}),(0,b.jsx)(l.Input,{type:"number",min:0,value:aP,onChange:a=>aQ(a.target.value),disabled:ax})]}),(0,b.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Active"}),(0,b.jsxs)(r.Select,{value:aR?"yes":"no",onChange:a=>aS("yes"===a.target.value),disabled:ax,children:[(0,b.jsx)("option",{value:"yes",children:"Yes"}),(0,b.jsx)("option",{value:"no",children:"No"})]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default"}),(0,b.jsxs)(r.Select,{value:aT?"yes":"no",onChange:a=>aU("yes"===a.target.value),disabled:ax,children:[(0,b.jsx)("option",{value:"no",children:"No"}),(0,b.jsx)("option",{value:"yes",children:"Yes"})]})]})]})]})})]})]})})}a.s(["default",()=>C])}];

//# sourceMappingURL=frontend_src_app_%5Bbusiness%5D_setup_page_tsx_e4c8e5b2._.js.map