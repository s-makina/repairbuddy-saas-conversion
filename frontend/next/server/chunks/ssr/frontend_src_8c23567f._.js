module.exports=[75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},94703,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);function e({open:a,onClose:e,title:f,children:g,footer:h,position:i="center",variant:j="glass",className:k}){if((0,c.useEffect)(()=>{function b(b){a&&"Escape"===b.key&&e()}return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e,a]),!a)return null;let l="solid"===j?(0,d.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[var(--rb-border)]","bg-white","shadow-[var(--rb-shadow)]"):(0,d.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]","bg-white/75 backdrop-blur-xl","shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]","ring-1 ring-white/25");return(0,b.jsxs)("div",{className:"top-center"===i?"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8":"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,b.jsx)("button",{type:"button",className:(0,d.cn)("absolute inset-0","bg-black/35 backdrop-blur-md","bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]"),"aria-label":"Close",onClick:e}),(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:(0,d.cn)(l,k),children:["glass"===j?(0,b.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]"}):null,f?(0,b.jsx)("div",{className:(0,d.cn)("relative px-5 py-4","solid"===j?"border-b border-[var(--rb-border)]":"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:f})}):null,(0,b.jsx)("div",{className:"relative px-5 py-4",children:g}),h?(0,b.jsx)("div",{className:(0,d.cn)("relative px-5 py-4","solid"===j?"border-t border-[var(--rb-border)]":"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:h}):null]})]})}a.s(["Modal",()=>e])},21282,a=>{"use strict";var b=a.i(57850),c=a.i(94703),d=a.i(97867);function e({open:a,title:e,message:f,confirmText:g="Confirm",confirmVariant:h="primary",cancelText:i="Cancel",busy:j=!1,onCancel:k,onConfirm:l}){return(0,b.jsx)(c.Modal,{open:a,onClose:()=>{j||k()},title:e,footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:k,disabled:j,children:i}),(0,b.jsx)(d.Button,{variant:h,onClick:l,disabled:j,children:j?"Working...":g})]}),children:(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:f})})}a.s(["ConfirmDialog",()=>e])},648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},26606,a=>{"use strict";var b=a.i(57850),c=a.i(7160),d=a.i(4600);function e({className:a,"aria-hidden":d=!0,...e}){return(0,b.jsx)("div",{"aria-hidden":d,className:(0,c.cn)("rb-skeleton",a),...e})}function f({lines:a=3,className:f}){let g=Math.max(1,Math.min(a,12));return(0,b.jsx)(d.Card,{className:(0,c.cn)("overflow-hidden",f),children:(0,b.jsxs)(d.CardContent,{className:"space-y-3 pt-5",children:[(0,b.jsx)(e,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:g}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",d===g-1?"w-3/5":"w-full")},d))]})})}function g({rows:a=6,columns:d=5,className:f}){let g=Math.max(1,Math.min(a,20)),h=Math.max(1,Math.min(d,10));return(0,b.jsxs)("div",{className:(0,c.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",f),children:[(0,b.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,c)=>(0,b.jsx)(e,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},c))})}),(0,b.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:g}).map((a,d)=>(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===d?"w-3/4":"w-full")},d))},d))})})]})}a.s(["CardSkeleton",()=>f,"Skeleton",()=>e,"TableSkeleton",()=>g])},54804,a=>{"use strict";var b=a.i(57850),c=a.i(648),d=a.i(75385),e=a.i(4600);function f({title:a,description:f,actions:g,filters:h,loading:i,loadingFallback:j,error:k,empty:l,emptyTitle:m="Nothing here yet",emptyDescription:n="No items to display.",children:o}){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(c.PageHeader,{title:a,description:f,actions:g}),h?(0,b.jsx)(e.Card,{className:"shadow-none",children:(0,b.jsx)(e.CardContent,{className:"pt-5",children:h})}):null,k?(0,b.jsx)(d.Alert,{variant:"danger",title:"Something went wrong",children:k}):null,i?j??(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading..."}):null,i||k||!l?null:(0,b.jsx)(e.Card,{className:"shadow-none",children:(0,b.jsxs)(e.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:m}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:n})]})}),i||k||l?null:o]})}a.s(["ListPageShell",()=>f])},86409,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(97867);function e({className:a}){return(0,b.jsxs)("svg",{viewBox:"0 0 24 24",width:"16",height:"16","aria-hidden":"true",className:a,fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,b.jsx)("path",{d:"M18 6 6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]})}function f({label:a="Image",file:f,existingUrl:g,disabled:h,accept:i="image/png,image/jpeg,image/webp",maxBytes:j=5242880,onFileChange:k,onRemoveExisting:l,onError:m}){let n=c.default.useRef(null),[o,p]=c.default.useState(null);c.default.useEffect(()=>{if(!f){p(null),n.current&&(n.current.value="");return}let a=URL.createObjectURL(f);return p(a),()=>{URL.revokeObjectURL(a)}},[f]);let q=o??g??null,r=!o&&!!g,s=!!f||r&&!!l;return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:a}),(0,b.jsx)("input",{ref:n,type:"file",accept:i,className:"hidden",onChange:function(a){let b=a.target.files?.[0]??null;if(b){if(!function(a){if(!a.type.startsWith("image/"))return m?.("Please select an image file."),!1;if(a.size>j){let a=Math.floor(j/1048576);return m?.(`Image must be ${a}MB or smaller.`),!1}return!0}(b)){n.current&&(n.current.value="");return}k(b)}},disabled:h}),(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,b.jsx)(d.Button,{variant:"outline",size:"sm",type:"button",onClick:()=>n.current?.click(),disabled:h,children:f?"Change selected image":"Choose image"})}),q?(0,b.jsxs)("div",{className:"relative inline-block",children:[(0,b.jsx)("img",{src:q,alt:"Selected image",className:"max-h-40 rounded border border-[var(--rb-border)]"}),s?(0,b.jsx)("button",{type:"button",onClick:()=>{f?k(null):l?.()},disabled:h,"aria-label":f?"Remove selected image":"Remove image",className:"absolute right-2 top-2 inline-flex h-7 w-7 items-center justify-center rounded-full border border-[var(--rb-border)] bg-white/90 text-zinc-700 shadow-sm transition hover:bg-white disabled:pointer-events-none disabled:opacity-50",children:(0,b.jsx)(e,{})}):null]}):null]})}a.s(["ImagePickerWithPreview",()=>f])},98669,67388,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160),e=a.i(97867),f=a.i(26606);function g({title:a,data:g,renderItem:h,getItemId:i,loading:j=!1,emptyMessage:k="No data.",search:l,filters:m=[],pageSizeOptions:n=[10,25,50],initialPageSize:o=10,server:p,onItemClick:q,className:r,gridClassName:s}){let[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(0),[x,y]=(0,c.useState)(o),z=(0,c.useId)(),A=!!p,B=A?p.query:t,C=A?p.onQueryChange:u,D=A?p.pageIndex:v,E=A?p.onPageIndexChange:w,F=A?p.pageSize:x,G=A?p.onPageSizeChange:y,H=(0,c.useMemo)(()=>{if(A)return Array.isArray(g)?g:[];let a=B.trim().toLowerCase();return(Array.isArray(g)?g:[]).filter(b=>{if(l&&l.getSearchText&&a.length>0&&!l.getSearchText(b).toLowerCase().includes(a))return!1;for(let a of m)if(a.predicate&&!a.predicate(b,a.value))return!1;return!0})},[g,m,A,B,l]),I=A?p.totalRows:H.length,J=Math.max(1,Math.ceil(I/F)),K=Math.min(D,J-1),L=(0,c.useMemo)(()=>{if(A)return H;let a=K*F,b=a+F;return H.slice(a,b)},[K,H,A,F]),M=K>0,N=K<J-1,O=!!l||m.length>0,P=Math.max(1,Math.min(12,F||10));return(0,b.jsxs)("div",{className:(0,d.cn)("space-y-3",r),children:[a?(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:a}):null,O?(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[l?(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:`${z}_datagrid_search`,children:"Search"}),(0,b.jsx)("input",{id:`${z}_datagrid_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:B,onChange:a=>{C(a.target.value),E(0)},placeholder:l.placeholder??"Search..."})]}):null,m.map(a=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:`${z}_datagrid_filter_${a.id}`,children:a.label}),(0,b.jsx)("select",{id:`${z}_datagrid_filter_${a.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(a.value),onChange:b=>{let c=a.options.find(a=>String(a.value)===b.target.value),d=c?c.value:b.target.value;a.onChange(d),E(0)},children:a.options.map(a=>(0,b.jsx)("option",{value:String(a.value),children:a.label},String(a.value)))})]},a.id))]}),(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:[I," result(s)"]})]}):null,j?(0,b.jsx)("div",{className:(0,d.cn)("grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",s),children:Array.from({length:P}).map((a,c)=>(0,b.jsx)(f.CardSkeleton,{lines:3,className:"shadow-none"},c))}):0===L.length?(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:k}):(0,b.jsx)("div",{className:(0,d.cn)("grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",s),children:L.map(a=>{let c=!!q;return(0,b.jsx)("div",{className:(0,d.cn)(c?"cursor-pointer":null),tabIndex:c?0:void 0,role:c?"button":void 0,onClick:c?()=>{q?.(a)}:void 0,onKeyDown:c?b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),q?.(a))}:void 0,children:h(a)},String(i(a)))})}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:function(){E(Math.max(0,K-1))},disabled:!M,children:"Prev"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:function(){E(Math.min(J-1,K+1))},disabled:!N,children:"Next"}),(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",K+1," / ",J]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Items per page"}),(0,b.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(F),onChange:a=>{G(Number(a.target.value)),E(0)},children:n.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]})]})]})}a.s(["DataGrid",()=>g],98669);var h=a.i(93609);function i(a,b){if(!a)return b;let c=Number(a);if(!Number.isFinite(c))return b;let d=Math.floor(c);return d<=0?b:d}function j({queryKey:a="q",pageKey:b="page",pageSizeKey:d="per_page",defaultPageSize:e=10}={}){let f=(0,h.useRouter)(),g=(0,h.usePathname)(),k=(0,h.useSearchParams)(),l=k.get(a)??"",m=i(k.get(b),1),n=i(k.get(d),e),o=Math.max(0,m-1),p=c.default.useCallback(a=>{let b=a.toString(),c=b.length>0?`${g}?${b}`:g;f.replace(c,{scroll:!1})},[g,f]),q=c.default.useCallback((a,c={})=>{let d=new URLSearchParams(k.toString());for(let[b,c]of Object.entries(a)){let a=function(a){if(null==a)return null;if("boolean"==typeof a)return a?"1":"0";let b=String(a);return 0===b.trim().length?null:b}(c);null===a?d.delete(b):d.set(b,a)}c.resetPage&&d.set(b,"1"),k.toString()!==d.toString()&&p(d)},[b,p,k]),r=c.default.useCallback(b=>{q({[a]:b})},[a,q]),s=c.default.useCallback(a=>{q({[b]:String((Number.isFinite(a)?Math.max(0,Math.floor(a)):0)+1)})},[b,q]),t=c.default.useCallback(a=>{q({[d]:String(Number.isFinite(a)?Math.max(1,Math.floor(a)):e)})},[e,d,q]),u=c.default.useCallback((a,b,c={})=>{q({[a]:b},c)},[q]);return{query:l,onQueryChange:r,pageIndex:o,onPageIndexChange:s,pageSize:n,onPageSizeChange:t,getParam:c.default.useCallback(a=>k.get(a),[k]),setParam:u,updateParams:q}}a.s(["useUrlDataGridState",()=>j],67388)},91380,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(91601),f=a.i(75458),g=a.i(97867),h=a.i(17933),i=a.i(4600),j=a.i(21282),k=a.i(98669),l=a.i(46036),m=a.i(86409),n=a.i(94703),o=a.i(26606),p=a.i(54804),q=a.i(67388),r=a.i(34075);function s(){let a=(0,f.useAuth)(),s=(0,d.useRouter)(),t=(0,d.useParams)(),u=t.business??t.tenant,v=(0,q.useUrlDataGridState)({defaultPageSize:12}),w=v.getParam("is_active")??"all",[x,y]=c.default.useState(!0),[z,A]=c.default.useState(null),[B,C]=c.default.useState(null),[D,E]=c.default.useState(!1),[F,G]=c.default.useState([]),[H,I]=c.default.useState(0),[J,K]=c.default.useState(!1),[L,M]=c.default.useState(null),[N,O]=c.default.useState(""),[P,Q]=c.default.useState(!0),[R,S]=c.default.useState(null),[T,U]=c.default.useState(null),[V,W]=c.default.useState(!1),[X,Y]=c.default.useState(""),[Z,$]=c.default.useState(""),[_,aa]=c.default.useState(null),[ab,ac]=c.default.useState(0),ad=a.can("device_brands.manage"),ae=c.default.useCallback(async()=>{try{if(y(!0),A(null),"string"!=typeof u||0===u.length)throw Error("Business is missing.");let a=new URLSearchParams;v.query.trim().length>0&&a.set("q",v.query.trim()),a.set("page",String(v.pageIndex+1)),a.set("per_page",String(v.pageSize)),"all"!==w&&a.set("is_active",w);let b=await (0,r.apiFetch)(`/api/${u}/app/repairbuddy/device-brands?${a.toString()}`);G(Array.isArray(b.device_brands)?b.device_brands:[]),ac("number"==typeof b.meta?.total?b.meta.total:0)}catch(a){if(a instanceof r.ApiError&&428===a.status&&"string"==typeof u&&u.length>0){let a=`/app/${u}/device-brands`;s.replace(`/app/${u}/branches/select?next=${encodeURIComponent(a)}`);return}A(a instanceof Error?a.message:"Failed to load device brands.")}finally{y(!1)}},[v.pageIndex,v.pageSize,v.query,H,s,w,u]);async function af(a){if((a.preventDefault(),!D)&&"string"==typeof u&&0!==u.length){if(!ad)return void A("Forbidden.");E(!0),A(null),C(null);try{let a=N.trim();if(0===a.length)return void A("Name is required.");let b={name:a,is_active:P},c=null;L?(c=(await (0,r.apiFetch)(`/api/${u}/app/repairbuddy/device-brands/${L}`,{method:"PATCH",body:b})).device_brand??null,C("Device brand updated.")):(c=(await (0,r.apiFetch)(`/api/${u}/app/repairbuddy/device-brands`,{method:"POST",body:b})).device_brand??null,C("Device brand created."));let d=c?.id??L;if(d&&T){let a=new FormData;a.append("image",T);let b=await (0,r.apiFetch)(`/api/${u}/app/repairbuddy/device-brands/${d}/image`,{method:"POST",body:a});S(b.device_brand?.image_url??null)}K(!1),v.onPageIndexChange(0),I(a=>a+1)}catch(a){a instanceof r.ApiError?A(a.message):A(L?"Failed to update device brand.":"Failed to create device brand.")}finally{E(!1)}}}async function ag(){if(!D&&L&&"string"==typeof u&&0!==u.length&&ad){E(!0),A(null),C(null);try{let a=await (0,r.apiFetch)(`/api/${u}/app/repairbuddy/device-brands/${L}/image`,{method:"DELETE"});S(a.device_brand?.image_url??null),C("Image removed."),U(null),v.onPageIndexChange(0),I(a=>a+1)}catch(a){a instanceof r.ApiError?A(a.message):A("Failed to remove image.")}finally{E(!1)}}}async function ah(a){if(!D&&"string"==typeof u&&0!==u.length){var c;if(!ad)return void A("Forbidden.");c={title:"Delete device brand",message:(0,b.jsxs)("div",{children:["Delete ",(0,b.jsx)("span",{className:"font-semibold",children:a.name}),"?"]}),action:async()=>{E(!0),A(null),C(null);try{await (0,r.apiFetch)(`/api/${u}/app/repairbuddy/device-brands/${a.id}`,{method:"DELETE"}),C("Device brand deleted."),v.onPageIndexChange(0),I(a=>a+1)}catch(a){a instanceof r.ApiError?A(a.message):A("Failed to delete device brand.")}finally{E(!1)}}},Y(c.title),$(c.message),aa(()=>c.action),W(!0)}}return c.default.useEffect(()=>{ae()},[ae]),(0,b.jsx)(e.RequireAuth,{requiredPermission:"device_brands.view",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(j.ConfirmDialog,{open:V,title:X,message:Z,busy:D,confirmText:"Delete",confirmVariant:"secondary",onCancel:()=>{D||(W(!1),aa(null))},onConfirm:()=>{_&&(async()=>{await _(),W(!1),aa(null)})()}}),(0,b.jsx)(n.Modal,{open:J,onClose:()=>{D||K(!1)},title:L?"Edit device brand":"New device brand",footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>K(!1),disabled:D,children:"Cancel"}),(0,b.jsx)(g.Button,{disabled:D,type:"submit",form:"rb_device_brand_form",children:D?"Saving...":"Save"})]}),children:(0,b.jsxs)("form",{id:"rb_device_brand_form",className:"space-y-3",onSubmit:af,children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"device_brand_name",children:"Name"}),(0,b.jsx)("input",{id:"device_brand_name",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:N,onChange:a=>O(a.target.value),required:!0,disabled:D})]}),(0,b.jsx)(m.ImagePickerWithPreview,{label:"Image",file:T,existingUrl:R,disabled:D,onFileChange:a=>{A(null),C(null),U(a)},onRemoveExisting:L?()=>void ag():void 0,onError:a=>{A(a),C(null)}}),(0,b.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:P,onChange:a=>Q(a.target.checked),disabled:D}),"Active"]})]})}),B?(0,b.jsx)("div",{className:"text-sm text-green-700",children:B}):null,z?(0,b.jsx)("div",{className:"text-sm text-red-600",children:z}):null,(0,b.jsx)(p.ListPageShell,{title:"Device Brands",description:"Brand taxonomy for devices.",actions:(0,b.jsx)(g.Button,{variant:"primary",size:"sm",onClick:function(){ad&&(M(null),O(""),Q(!0),S(null),U(null),K(!0),A(null),C(null))},disabled:!ad||x||D,children:"New brand"}),filters:(0,b.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"rb_device_brand_status",children:"Status"}),(0,b.jsxs)("select",{id:"rb_device_brand_status",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:w,onChange:a=>{let b=a.target.value;v.setParam("is_active","all"===b?null:b,{resetPage:!0})},disabled:x||D,children:[(0,b.jsx)("option",{value:"all",children:"All"}),(0,b.jsx)("option",{value:"1",children:"Active"}),(0,b.jsx)("option",{value:"0",children:"Inactive"})]})]})}),loading:x,loadingFallback:(0,b.jsx)(i.Card,{className:"shadow-none",children:(0,b.jsx)(i.CardContent,{className:"pt-5",children:(0,b.jsx)(o.TableSkeleton,{rows:8,columns:4,className:"shadow-none"})})}),error:null,empty:!x&&!z&&0===F.length,emptyTitle:"No brands",emptyDescription:"Add brands to organize your devices.",children:(0,b.jsx)(i.Card,{className:"shadow-none",children:(0,b.jsx)(i.CardContent,{className:"pt-5",children:(0,b.jsx)(k.DataGrid,{title:"string"==typeof u?`Device Brands \xb7 ${u}`:"Device Brands",data:F,loading:x,emptyMessage:"No brands.",getItemId:a=>a.id,search:{placeholder:"Search brands..."},filters:[],server:{query:v.query,onQueryChange:v.onQueryChange,pageIndex:v.pageIndex,onPageIndexChange:v.onPageIndexChange,pageSize:v.pageSize,onPageSizeChange:v.onPageSizeChange,totalRows:ab},renderItem:a=>(0,b.jsxs)(i.Card,{className:"overflow-hidden shadow-none",children:[(0,b.jsx)("div",{className:"flex h-32 items-center justify-center bg-[var(--rb-surface-muted)]",children:a.image_url?(0,b.jsx)("img",{src:a.image_url,alt:a.name,className:"h-full w-full object-contain"}):(0,b.jsx)("div",{className:"text-xs text-zinc-500",children:"No image"})}),(0,b.jsxs)(i.CardContent,{className:"pt-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:a.name}),(0,b.jsx)("div",{className:"truncate text-xs text-zinc-600",children:a.id})]}),ad?(0,b.jsx)(l.DropdownMenu,{align:"right",trigger:({toggle:a})=>(0,b.jsx)(g.Button,{variant:"ghost",size:"sm",onClick:a,disabled:D,className:"px-2",children:"Actions"}),children:({close:c})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.DropdownMenuItem,{onSelect:()=>{c(),ad&&(M(a.id),O(a.name),Q(!!a.is_active),S(a.image_url??null),U(null),K(!0),A(null),C(null))},disabled:D,children:"Edit"}),(0,b.jsx)(l.DropdownMenuSeparator,{}),(0,b.jsx)(l.DropdownMenuItem,{destructive:!0,onSelect:()=>{c(),ah(a)},disabled:D,children:"Delete"})]})}):null]}),(0,b.jsx)("div",{className:"mt-3 flex items-center justify-between",children:(0,b.jsx)(h.Badge,{variant:a.is_active?"success":"default",children:a.is_active?"Active":"Inactive"})})]})]})})})})})]})})}a.s(["default",()=>s])}];

//# sourceMappingURL=frontend_src_8c23567f._.js.map