module.exports=[648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},26606,a=>{"use strict";var b=a.i(57850),c=a.i(7160),d=a.i(4600);function e({className:a,"aria-hidden":d=!0,...e}){return(0,b.jsx)("div",{"aria-hidden":d,className:(0,c.cn)("rb-skeleton",a),...e})}function f({lines:a=3,className:f}){let g=Math.max(1,Math.min(a,12));return(0,b.jsx)(d.Card,{className:(0,c.cn)("overflow-hidden",f),children:(0,b.jsxs)(d.CardContent,{className:"space-y-3 pt-5",children:[(0,b.jsx)(e,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:g}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",d===g-1?"w-3/5":"w-full")},d))]})})}function g({rows:a=6,columns:d=5,className:f}){let g=Math.max(1,Math.min(a,20)),h=Math.max(1,Math.min(d,10));return(0,b.jsxs)("div",{className:(0,c.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",f),children:[(0,b.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,c)=>(0,b.jsx)(e,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},c))})}),(0,b.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:g}).map((a,d)=>(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===d?"w-3/4":"w-full")},d))},d))})})]})}a.s(["CardSkeleton",()=>f,"Skeleton",()=>e,"TableSkeleton",()=>g])},39159,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,children:d,...e}){return(0,b.jsx)("select",{className:(0,c.cn)("w-full appearance-none rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70","bg-[right_0.75rem_center] bg-no-repeat pr-10",'[background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%236b7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>\')]',a),...e,children:d})}a.s(["Select",()=>d])},99841,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(79360),f=a.i(80751),g=a.i(52887),h=a.i(51612),i=a.i(18396),j=a.i(648),k=a.i(97867),l=a.i(4600),m=a.i(17933),n=a.i(39159),o=a.i(26606),p=a.i(75458);function q({field:a,label:c,active:d,onSelect:e}){return(0,b.jsx)(k.Button,{size:"sm",variant:d?"primary":"outline",className:"rounded-none border-0",onClick:()=>e(a),children:c})}function r(){let a=(0,p.useAuth)(),r=(0,d.useParams)(),s=r.business??r.tenant,t=a.isAdmin,[u,v]=c.default.useState("pickup_date"),[w,x]=c.default.useState("all"),[y,z]=c.default.useState(!1),A=c.default.useRef(null),B=c.default.useRef(0),C=c.default.useMemo(()=>[{id:"RB-10421",type:"job",customer:"Alex Johnson",status:"In Process",assigned_to_me:!0,pickup_date:"2026-01-28",delivery_date:"2026-01-30",post_date:"2026-01-26"},{id:"RB-10418",type:"job",customer:"Sam Rivera",status:"New/Quote",assigned_to_me:!1,pickup_date:"2026-01-29",delivery_date:"2026-02-02",post_date:"2026-01-25"},{id:"E-883",type:"estimate",customer:"Taylor Chen",status:"New/Quote",assigned_to_me:!0,pickup_date:"2026-01-27",delivery_date:"2026-01-31",post_date:"2026-01-23"},{id:"RB-10412",type:"job",customer:"Jordan Patel",status:"Delivered",assigned_to_me:!1,pickup_date:"2026-01-20",delivery_date:"2026-01-22",post_date:"2026-01-18"},{id:"E-879",type:"estimate",customer:"Morgan Lee",status:"Cancelled",assigned_to_me:!1,pickup_date:"2026-01-21",delivery_date:"2026-01-24",post_date:"2026-01-19"}],[]);c.default.useEffect(()=>{"my_assignments"!==w||t||x("all")},[w,t]);let D=c.default.useMemo(()=>"jobs"===w?C.filter(a=>"job"===a.type):"estimates"===w?C.filter(a=>"estimate"===a.type):"my_assignments"===w?C.filter(a=>a.assigned_to_me):C,[w,C]),E=c.default.useMemo(()=>({jobs:D.filter(a=>"job"===a.type).length,estimates:D.filter(a=>"estimate"===a.type).length}),[D]),F=c.default.useCallback(a=>"pickup_date"===u?a.pickup_date:"delivery_date"===u?a.delivery_date:"next_service_date"===u?a.next_service_date??a.pickup_date:a.post_date,[u]),G=c.default.useCallback((a,b,c)=>{let d=++B.current;z(!0),window.setTimeout(()=>{if(d!==B.current)return;let e=a.startStr.split("T")[0]??a.startStr,f=a.endStr.split("T")[0]??a.endStr,g=D.map(a=>{var b;let c=F(a);return{id:a.id,title:`${"estimate"===a.type?"Estimate":"Job"} ${a.id} - ${a.customer}`,start:c,allDay:!0,classNames:["estimate"===a.type?"estimate-event":"job-event",(b=a.status,`status-${b.toLowerCase().replace(/\s+/g,"").replace(/\//g,"")}`)],extendedProps:{type:a.type,status:a.status,tooltip:`Case: ${a.id} | Customer: ${a.customer} | Status: ${a.status}`}}}).filter(a=>{let b="string"==typeof a.start?a.start:"";return b>=e&&b<f});try{b(g)}catch(a){c(a instanceof Error?a:Error("Failed to load calendar events."))}z(!1)},450)},[F,D]);c.default.useEffect(()=>{A.current?.getApi().refetchEvents()},[u,w]);let H=c.default.useCallback(a=>v(a),[]);return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(j.PageHeader,{title:"Service Calendar",description:"View and manage all your service appointments and estimates",actions:(0,b.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,b.jsxs)("div",{className:"inline-flex overflow-hidden rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white",children:[(0,b.jsx)(q,{field:"pickup_date",label:"Pickup Date",active:"pickup_date"===u,onSelect:H}),(0,b.jsx)("div",{className:"h-8 w-px bg-[var(--rb-border)]"}),(0,b.jsx)(q,{field:"delivery_date",label:"Delivery Date",active:"delivery_date"===u,onSelect:H}),null,(0,b.jsx)("div",{className:"h-8 w-px bg-[var(--rb-border)]"}),(0,b.jsx)(q,{field:"post_date",label:"Creation",active:"post_date"===u,onSelect:H})]})})}),(0,b.jsx)(l.Card,{className:"shadow-none",children:(0,b.jsxs)(l.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"rounded-[var(--rb-radius-md)] bg-[var(--rb-surface-muted)] p-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Filter:"}),(0,b.jsxs)(n.Select,{value:w,onChange:a=>x(a.target.value),className:"w-auto min-w-[180px]",disabled:y,children:[(0,b.jsx)("option",{value:"all",children:"All Items"}),(0,b.jsx)("option",{value:"jobs",children:"Jobs Only"}),(0,b.jsx)("option",{value:"estimates",children:"Estimates Only"}),t?(0,b.jsx)("option",{value:"my_assignments",children:"My Assignments"}):null]}),(0,b.jsx)("input",{type:"hidden",value:u,readOnly:!0})]}),(0,b.jsx)("div",{children:(0,b.jsx)(k.Button,{size:"sm",variant:"primary",onClick:function(){A.current?.getApi().refetchEvents()},disabled:y,children:y?"Loading...":"Refresh"})})]})}),(0,b.jsxs)("div",{className:"relative mt-4",children:[(0,b.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",style:{minHeight:500},children:(0,b.jsx)(e.default,{ref:A,plugins:[f.default,g.default,h.default,i.default],initialView:"dayGridMonth",headerToolbar:{left:"prevYear,prev,next,nextYear today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},buttonText:{today:"Today",month:"Month",week:"Week",day:"Day",list:"List"},height:"auto",expandRows:!0,navLinks:!0,nowIndicator:!0,editable:!1,selectable:!0,dayMaxEvents:10,events:G,eventDidMount:a=>{let b=a.event.extendedProps?.tooltip;"string"==typeof b&&b.length>0&&a.el.setAttribute("title",b)},eventContent:a=>{let c=a.event.extendedProps?.status;return(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("div",{className:"text-[0.875rem] font-medium leading-[1.1]",children:a.event.title}),c?(0,b.jsx)("div",{className:"text-[0.8125rem] opacity-80",children:c}):null]})},loading:a=>{z(a)}})}),y?(0,b.jsx)("div",{className:"absolute inset-0 z-10 rounded-[var(--rb-radius-md)] bg-white/70 p-4 backdrop-blur-[1px]",children:(0,b.jsxs)("div",{className:"mx-auto mt-20 w-full max-w-[640px] rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-5 shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)(o.Skeleton,{className:"h-4 w-44 rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(o.Skeleton,{className:"mt-2 h-4 w-72 rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsx)(o.Skeleton,{className:"h-9 w-24 rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsx)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:Array.from({length:6}).map((a,c)=>(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-3",children:[(0,b.jsx)(o.Skeleton,{className:"h-3 w-24 rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(o.Skeleton,{className:"mt-2 h-4 w-full rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(o.Skeleton,{className:"mt-2 h-3 w-20 rounded-[var(--rb-radius-sm)]"})]},c))})]})}):null]}),(0,b.jsx)("div",{className:"mt-5 border-t border-[var(--rb-border)] pt-4",children:(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm text-zinc-500",children:"Legend:"}),(0,b.jsx)(m.Badge,{className:"bg-[var(--rb-blue)] text-white border-transparent",children:"Job"}),(0,b.jsx)(m.Badge,{className:"bg-[var(--rb-orange)] text-white border-transparent",children:"Estimate"}),(0,b.jsx)(m.Badge,{className:"bg-[#16a34a] text-white border-transparent",children:"New/Quote"}),(0,b.jsx)(m.Badge,{className:"bg-[#0ea5e9] text-white border-transparent",children:"In Process"}),(0,b.jsx)(m.Badge,{className:"bg-[#dc2626] text-white border-transparent",children:"Cancelled"}),(0,b.jsx)(m.Badge,{className:"bg-[#fd7e14] text-white border-transparent",children:"Ready"}),(0,b.jsx)(m.Badge,{className:"bg-[#6f42c1] text-white border-transparent",children:"Completed"}),(0,b.jsx)(m.Badge,{className:"bg-[#e83e8c] text-white border-transparent",children:"Delivered"})]})})]})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsx)(l.Card,{className:"border-0 bg-[var(--rb-blue)] text-white shadow-none",children:(0,b.jsxs)(l.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Total Jobs"}),(0,b.jsx)("div",{className:"mt-2 text-4xl font-bold",children:E.jobs})]})}),(0,b.jsx)(l.Card,{className:"border-0 bg-[#16a34a] text-white shadow-none",children:(0,b.jsxs)(l.CardContent,{className:"pt-5",children:[(0,b.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Total Estimates"}),(0,b.jsx)("div",{className:"mt-2 text-4xl font-bold",children:E.estimates})]})})]}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Tenant: ",s]})]})}a.s(["default",()=>r])}];

//# sourceMappingURL=frontend_src_924ce9b3._.js.map