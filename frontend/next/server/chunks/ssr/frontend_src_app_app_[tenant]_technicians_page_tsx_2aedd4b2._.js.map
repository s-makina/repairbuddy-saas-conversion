{"version":3,"sources":["../../../../../frontend/src/app/app/%5Btenant%5D/technicians/page.tsx","../../../../../frontend/node_modules/lucide-react/src/icons/dollar-sign.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { Badge } from \"@/components/ui/Badge\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\nimport { DataTable, type DataTableColumn } from \"@/components/ui/DataTable\";\r\nimport { ListPageShell } from \"@/components/shells/ListPageShell\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport { Modal } from \"@/components/ui/Modal\";\r\nimport { DropdownMenu, DropdownMenuItem } from \"@/components/ui/DropdownMenu\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { notify } from \"@/lib/notify\";\r\nimport { formatMoney } from \"@/lib/money\";\r\nimport { DollarSign, MoreHorizontal } from \"lucide-react\";\r\nimport type { Branch, User, UserStatus } from \"@/lib/types\";\r\n\r\ntype TechRow = {\r\n  id: number;\r\n  name: string;\r\n  email: string;\r\n  phone?: string;\r\n  status: UserStatus;\r\n  tech_hourly_rate_cents?: number | null;\r\n  client_hourly_rate_cents?: number | null;\r\n};\r\n\r\nexport default function TenantTechniciansPage() {\r\n  const auth = useAuth();\r\n  const params = useParams() as { tenant?: string; business?: string };\r\n  const tenantSlug = params.business ?? params.tenant;\r\n\r\n  const canManageUsers = auth.can(\"users.manage\");\r\n\r\n  const [query, setQuery] = React.useState(\"\");\r\n  const [pageIndex, setPageIndex] = React.useState(0);\r\n  const [pageSize, setPageSize] = React.useState(10);\r\n  const [sort, setSort] = React.useState<{ id: string; dir: \"asc\" | \"desc\" } | null>(null);\r\n  const [statusFilter, setStatusFilter] = React.useState<string>(\"all\");\r\n\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [error, setError] = React.useState<string | null>(null);\r\n  const [rows, setRows] = React.useState<TechRow[]>([]);\r\n  const [totalRows, setTotalRows] = React.useState(0);\r\n\r\n  const [reloadKey, setReloadKey] = React.useState(0);\r\n\r\n  const [createOpen, setCreateOpen] = React.useState(false);\r\n  const [createBusy, setCreateBusy] = React.useState(false);\r\n  const [newName, setNewName] = React.useState(\"\");\r\n  const [newEmail, setNewEmail] = React.useState(\"\");\r\n  const [branches, setBranches] = React.useState<Branch[]>([]);\r\n  const [newShopQuery, setNewShopQuery] = React.useState<string>(\"\");\r\n  const [newShopSelected, setNewShopSelected] = React.useState<Record<number, boolean>>({});\r\n\r\n  const [ratesOpen, setRatesOpen] = React.useState(false);\r\n  const [ratesBusy, setRatesBusy] = React.useState(false);\r\n  const [ratesUser, setRatesUser] = React.useState<TechRow | null>(null);\r\n  const [ratesTech, setRatesTech] = React.useState<string>(\"\");\r\n  const [ratesClient, setRatesClient] = React.useState<string>(\"\");\r\n\r\n  const branchOptions = React.useMemo(() => {\r\n    const list = branches.slice().sort((a, b) => `${a.code} ${a.name}`.localeCompare(`${b.code} ${b.name}`));\r\n    return list.map((b) => ({\r\n      id: b.id,\r\n      label: `${b.code} - ${b.name}${b.is_active ? \"\" : \" (inactive)\"}`,\r\n      isActive: b.is_active,\r\n    }));\r\n  }, [branches]);\r\n\r\n  const activeBranchOptions = React.useMemo(() => branchOptions.filter((b) => b.isActive), [branchOptions]);\r\n\r\n  const filteredNewShopOptions = React.useMemo(() => {\r\n    const q = newShopQuery.trim().toLowerCase();\r\n    if (!q) return activeBranchOptions;\r\n    return activeBranchOptions.filter((b) => b.label.toLowerCase().includes(q));\r\n  }, [activeBranchOptions, newShopQuery]);\r\n\r\n  const newShopAllChecked = React.useMemo(() => {\r\n    if (filteredNewShopOptions.length === 0) return false;\r\n    return filteredNewShopOptions.every((b) => Boolean(newShopSelected[b.id]));\r\n  }, [filteredNewShopOptions, newShopSelected]);\r\n\r\n  const newShopSomeChecked = React.useMemo(() => {\r\n    return filteredNewShopOptions.some((b) => Boolean(newShopSelected[b.id]));\r\n  }, [filteredNewShopOptions, newShopSelected]);\r\n\r\n  const newShopCheckAllRef = React.useRef<HTMLInputElement | null>(null);\r\n  React.useEffect(() => {\r\n    if (!newShopCheckAllRef.current) return;\r\n    newShopCheckAllRef.current.indeterminate = newShopSomeChecked && !newShopAllChecked;\r\n  }, [newShopAllChecked, newShopSomeChecked]);\r\n\r\n  const statusOptions = React.useMemo(() => {\r\n    return [\r\n      { label: \"All statuses\", value: \"all\" },\r\n      { label: \"Pending\", value: \"pending\" },\r\n      { label: \"Active\", value: \"active\" },\r\n      { label: \"Inactive\", value: \"inactive\" },\r\n      { label: \"Suspended\", value: \"suspended\" },\r\n    ];\r\n  }, []);\r\n\r\n  const statusBadgeVariant = React.useMemo(() => {\r\n    return new Map<UserStatus, \"default\" | \"info\" | \"success\" | \"warning\" | \"danger\">([\r\n      [\"pending\", \"warning\"],\r\n      [\"active\", \"success\"],\r\n      [\"inactive\", \"default\"],\r\n      [\"suspended\", \"danger\"],\r\n    ]);\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function loadBranches() {\r\n      if (!canManageUsers) return;\r\n      if (!createOpen) return;\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n      if (branches.length > 0) return;\r\n\r\n      try {\r\n        const res = await apiFetch<{ branches: Branch[] }>(`/api/${tenantSlug}/app/branches`);\r\n        if (!alive) return;\r\n        const list = Array.isArray(res.branches) ? res.branches : [];\r\n        setBranches(list);\r\n\r\n        const defaultBranchId = auth.tenant?.default_branch_id ?? null;\r\n        const activeBranchIds = list.filter((b) => b.is_active).map((b) => b.id);\r\n        const seedIds =\r\n          (defaultBranchId && activeBranchIds.includes(defaultBranchId) ? [defaultBranchId] : [])\r\n            .concat(activeBranchIds.length > 0 ? [activeBranchIds[0]] : [])\r\n            .filter((v, idx, arr) => arr.indexOf(v) === idx);\r\n\r\n        setNewShopSelected((prev) => {\r\n          if (Object.keys(prev).length > 0) return prev;\r\n          const next: Record<number, boolean> = {};\r\n          for (const id of seedIds) next[id] = true;\r\n          return next;\r\n        });\r\n      } catch (err) {\r\n        if (!alive) return;\r\n        notify.error(err instanceof Error ? err.message : \"Failed to load shops.\");\r\n      }\r\n    }\r\n\r\n    void loadBranches();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [auth.tenant?.default_branch_id, branches.length, canManageUsers, createOpen, tenantSlug]);\r\n\r\n  const currency = auth.tenant?.currency ?? \"USD\";\r\n\r\n  const openRatesModal = React.useCallback(\r\n    (row: TechRow) => {\r\n      if (!canManageUsers) return;\r\n      setRatesUser(row);\r\n      setRatesTech(\r\n        typeof row.tech_hourly_rate_cents === \"number\" && Number.isFinite(row.tech_hourly_rate_cents)\r\n          ? (row.tech_hourly_rate_cents / 100).toFixed(2)\r\n          : \"\",\r\n      );\r\n      setRatesClient(\r\n        typeof row.client_hourly_rate_cents === \"number\" && Number.isFinite(row.client_hourly_rate_cents)\r\n          ? (row.client_hourly_rate_cents / 100).toFixed(2)\r\n          : \"\",\r\n      );\r\n      setRatesOpen(true);\r\n    },\r\n    [canManageUsers],\r\n  );\r\n\r\n  const onSaveRates = React.useCallback(async () => {\r\n    if (!canManageUsers) return;\r\n    if (!ratesUser) return;\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n    if (ratesBusy) return;\r\n\r\n    const parseToCents = (s: string): { cents: number | null; valid: boolean } => {\r\n      const trimmed = s.trim();\r\n      if (trimmed.length === 0) return { cents: null, valid: true };\r\n      const num = Number(trimmed);\r\n      if (!Number.isFinite(num)) return { cents: null, valid: false };\r\n      return { cents: Math.round(num * 100), valid: true };\r\n    };\r\n\r\n    const techParsed = parseToCents(ratesTech);\r\n    const clientParsed = parseToCents(ratesClient);\r\n\r\n    if (!techParsed.valid || !clientParsed.valid) {\r\n      notify.error(\"Enter valid numbers for hourly rates.\");\r\n      return;\r\n    }\r\n\r\n    const techCents = techParsed.cents;\r\n    const clientCents = clientParsed.cents;\r\n\r\n    if (typeof techCents === \"number\" && techCents < 0) {\r\n      notify.error(\"Tech hourly rate must be 0 or greater.\");\r\n      return;\r\n    }\r\n    if (typeof clientCents === \"number\" && clientCents < 0) {\r\n      notify.error(\"Client hourly rate must be 0 or greater.\");\r\n      return;\r\n    }\r\n\r\n    setRatesBusy(true);\r\n\r\n    try {\r\n      await apiFetch<{ user: User }>(`/api/${tenantSlug}/app/technicians/${ratesUser.id}/rates`, {\r\n        method: \"PATCH\",\r\n        body: {\r\n          tech_hourly_rate_cents: techCents,\r\n          client_hourly_rate_cents: clientCents,\r\n        },\r\n      });\r\n\r\n      notify.success(\"Hourly rates updated.\");\r\n      setRatesOpen(false);\r\n      setRatesUser(null);\r\n      setReloadKey((v) => v + 1);\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        notify.error(err.message);\r\n      } else {\r\n        notify.error(err instanceof Error ? err.message : \"Failed to update hourly rates.\");\r\n      }\r\n    } finally {\r\n      setRatesBusy(false);\r\n    }\r\n  }, [canManageUsers, ratesBusy, ratesClient, ratesTech, ratesUser, tenantSlug]);\r\n\r\n  React.useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function load() {\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const qs = new URLSearchParams();\r\n        if (query.trim().length > 0) qs.set(\"q\", query.trim());\r\n        if (statusFilter && statusFilter !== \"all\") qs.set(\"status\", statusFilter);\r\n        if (sort?.id && sort?.dir) {\r\n          qs.set(\"sort\", sort.id);\r\n          qs.set(\"dir\", sort.dir);\r\n        }\r\n        qs.set(\"page\", String(pageIndex + 1));\r\n        qs.set(\"per_page\", String(pageSize));\r\n\r\n        const res = await apiFetch<{ users: User[]; meta?: { total?: number; per_page?: number } }>(\r\n          `/api/${tenantSlug}/app/technicians?${qs.toString()}`,\r\n        );\r\n\r\n        if (!alive) return;\r\n\r\n        const list = Array.isArray(res.users) ? res.users : [];\r\n        setRows(\r\n          list.map((u) => ({\r\n            id: u.id,\r\n            name: u.name,\r\n            email: u.email,\r\n            phone: u.phone ?? undefined,\r\n            status: (u.status ?? \"active\") as UserStatus,\r\n            tech_hourly_rate_cents: u.tech_hourly_rate_cents ?? null,\r\n            client_hourly_rate_cents: u.client_hourly_rate_cents ?? null,\r\n          })),\r\n        );\r\n\r\n        setTotalRows(typeof res.meta?.total === \"number\" ? res.meta.total : list.length);\r\n        setPageSize(typeof res.meta?.per_page === \"number\" ? res.meta.per_page : pageSize);\r\n      } catch (err) {\r\n        if (!alive) return;\r\n        setError(err instanceof Error ? err.message : \"Failed to load technicians.\");\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    void load();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [pageIndex, pageSize, query, reloadKey, sort?.dir, sort?.id, statusFilter, tenantSlug]);\r\n\r\n  async function onCreateTechnician(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (!canManageUsers) return;\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n    if (activeBranchOptions.length === 0) return;\r\n\r\n    const selectedBranchIds = Object.entries(newShopSelected)\r\n      .filter(([, v]) => v)\r\n      .map(([k]) => Number(k))\r\n      .filter((n) => Number.isFinite(n) && n > 0);\r\n\r\n    if (selectedBranchIds.length === 0) {\r\n      notify.error(\"Select at least one shop.\");\r\n      return;\r\n    }\r\n\r\n    setCreateBusy(true);\r\n\r\n    try {\r\n      await apiFetch<{ user: User }>(`/api/${tenantSlug}/app/technicians`, {\r\n        method: \"POST\",\r\n        body: {\r\n          name: newName,\r\n          email: newEmail,\r\n          branch_ids: selectedBranchIds,\r\n        },\r\n      });\r\n\r\n      notify.success(\"Technician created.\");\r\n      setCreateOpen(false);\r\n      setNewName(\"\");\r\n      setNewEmail(\"\");\r\n      setNewShopQuery(\"\");\r\n      setNewShopSelected({});\r\n      setPageIndex(0);\r\n      setReloadKey((v) => v + 1);\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        notify.error(err.message);\r\n      } else {\r\n        notify.error(err instanceof Error ? err.message : \"Failed to create technician.\");\r\n      }\r\n    } finally {\r\n      setCreateBusy(false);\r\n    }\r\n  }\r\n\r\n  const columns = React.useMemo<Array<DataTableColumn<TechRow>>>(\r\n    () => [\r\n      {\r\n        id: \"name\",\r\n        header: \"Technician\",\r\n        sortId: \"name\",\r\n        cell: (row) => (\r\n          <div className=\"min-w-0\">\r\n            <div className=\"truncate font-semibold text-[var(--rb-text)]\">{row.name}</div>\r\n            <div className=\"truncate text-xs text-zinc-600\">#{row.id}</div>\r\n          </div>\r\n        ),\r\n        className: \"min-w-[260px]\",\r\n      },\r\n      {\r\n        id: \"email\",\r\n        header: \"Email\",\r\n        sortId: \"email\",\r\n        cell: (row) => <div className=\"text-sm text-zinc-700\">{row.email}</div>,\r\n        className: \"min-w-[260px]\",\r\n      },\r\n      {\r\n        id: \"phone\",\r\n        header: \"Phone\",\r\n        cell: (row) => <div className=\"text-sm text-zinc-700\">{row.phone ?? \"—\"}</div>,\r\n        className: \"min-w-[160px]\",\r\n      },\r\n      {\r\n        id: \"status\",\r\n        header: \"Status\",\r\n        sortId: \"status\",\r\n        cell: (row) => <Badge variant={statusBadgeVariant.get(row.status) ?? \"default\"}>{row.status}</Badge>,\r\n        className: \"whitespace-nowrap\",\r\n      },\r\n      {\r\n        id: \"tech_hourly_rate\",\r\n        header: \"Tech hourly\",\r\n        cell: (row) => (\r\n          <div className=\"whitespace-nowrap text-sm font-semibold text-[var(--rb-text)]\">\r\n            {formatMoney({ amountCents: row.tech_hourly_rate_cents ?? null, currency, fallback: \"—\" })} / hr\r\n          </div>\r\n        ),\r\n        className: \"whitespace-nowrap\",\r\n      },\r\n      {\r\n        id: \"client_hourly_rate\",\r\n        header: \"Client hourly\",\r\n        cell: (row) => (\r\n          <div className=\"whitespace-nowrap text-sm font-semibold text-[var(--rb-text)]\">\r\n            {formatMoney({ amountCents: row.client_hourly_rate_cents ?? null, currency, fallback: \"—\" })} / hr\r\n          </div>\r\n        ),\r\n        className: \"whitespace-nowrap\",\r\n      },\r\n      {\r\n        id: \"actions\",\r\n        header: \"\",\r\n        cell: (row) => (\r\n          <div className=\"flex justify-end\">\r\n            <DropdownMenu\r\n              align=\"right\"\r\n              trigger={({ toggle }) => (\r\n                <Button\r\n                  variant=\"ghost\"\r\n                  size=\"sm\"\r\n                  disabled={!canManageUsers}\r\n                  onClick={(e) => {\r\n                    e.stopPropagation();\r\n                    toggle();\r\n                  }}\r\n                  aria-label=\"Actions\"\r\n                >\r\n                  <MoreHorizontal className=\"h-4 w-4\" />\r\n                </Button>\r\n              )}\r\n            >\r\n              {({ close }) => (\r\n                <>\r\n                  <DropdownMenuItem\r\n                    onSelect={() => {\r\n                      close();\r\n                      openRatesModal(row);\r\n                    }}\r\n                    disabled={!canManageUsers}\r\n                  >\r\n                    <span className=\"inline-flex items-center gap-2\">\r\n                      <DollarSign className=\"h-4 w-4\" />\r\n                      <span>Update hourly rates</span>\r\n                    </span>\r\n                  </DropdownMenuItem>\r\n                </>\r\n              )}\r\n            </DropdownMenu>\r\n          </div>\r\n        ),\r\n        className: \"w-[1%] whitespace-nowrap text-right\",\r\n        headerClassName: \"w-[1%]\",\r\n      },\r\n    ],\r\n    [canManageUsers, currency, openRatesModal, statusBadgeVariant],\r\n  );\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"technicians.view\">\r\n      <ListPageShell\r\n        title=\"Technicians\"\r\n        description=\"Technician roster.\"\r\n        actions={\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            disabled={!canManageUsers}\r\n            onClick={() => {\r\n              if (!canManageUsers) return;\r\n              setCreateOpen(true);\r\n            }}\r\n          >\r\n            Add technician\r\n          </Button>\r\n        }\r\n        loading={false}\r\n        error={error}\r\n        empty={false}\r\n      >\r\n        <Modal\r\n          open={ratesOpen}\r\n          title={ratesUser ? `Update rates · ${ratesUser.name}` : \"Update rates\"}\r\n          onClose={() => {\r\n            if (ratesBusy) return;\r\n            setRatesOpen(false);\r\n            setRatesUser(null);\r\n          }}\r\n          footer={\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                disabled={ratesBusy}\r\n                onClick={() => {\r\n                  if (ratesBusy) return;\r\n                  setRatesOpen(false);\r\n                  setRatesUser(null);\r\n                }}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                disabled={ratesBusy || !canManageUsers || !ratesUser}\r\n                onClick={() => {\r\n                  void onSaveRates();\r\n                }}\r\n              >\r\n                {ratesBusy ? \"Saving...\" : \"Save\"}\r\n              </Button>\r\n            </div>\r\n          }\r\n        >\r\n          <div className=\"space-y-4\">\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\" htmlFor=\"tech_hourly_rate\">\r\n                Tech hourly rate ({currency})\r\n              </label>\r\n              <input\r\n                id=\"tech_hourly_rate\"\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={ratesTech}\r\n                onChange={(e) => setRatesTech(e.target.value)}\r\n                placeholder=\"e.g. 45.00\"\r\n                disabled={ratesBusy}\r\n                inputMode=\"decimal\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\" htmlFor=\"client_hourly_rate\">\r\n                Client hourly rate ({currency})\r\n              </label>\r\n              <input\r\n                id=\"client_hourly_rate\"\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={ratesClient}\r\n                onChange={(e) => setRatesClient(e.target.value)}\r\n                placeholder=\"e.g. 60.00\"\r\n                disabled={ratesBusy}\r\n                inputMode=\"decimal\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"text-xs text-zinc-600\">Leave blank to clear a rate.</div>\r\n          </div>\r\n        </Modal>\r\n\r\n        <Modal\r\n          open={createOpen}\r\n          title=\"Add technician\"\r\n          onClose={() => {\r\n            if (createBusy) return;\r\n            setCreateOpen(false);\r\n          }}\r\n          className=\"max-w-3xl\"\r\n          footer={\r\n            <div className=\"flex items-center justify-end gap-2\">\r\n              <Button\r\n                variant=\"outline\"\r\n                disabled={createBusy}\r\n                onClick={() => {\r\n                  if (createBusy) return;\r\n                  setCreateOpen(false);\r\n                }}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button\r\n                disabled={\r\n                  createBusy ||\r\n                  !canManageUsers ||\r\n                  activeBranchOptions.length === 0 ||\r\n                  Object.values(newShopSelected).filter(Boolean).length === 0\r\n                }\r\n                onClick={() => {\r\n                  const form = document.getElementById(\"create_technician_form\") as HTMLFormElement | null;\r\n                  form?.requestSubmit();\r\n                }}\r\n              >\r\n                {createBusy ? \"Saving...\" : \"Create\"}\r\n              </Button>\r\n            </div>\r\n          }\r\n        >\r\n          <form\r\n            id=\"create_technician_form\"\r\n            onSubmit={onCreateTechnician}\r\n            className=\"max-h-[70vh] space-y-4 overflow-y-auto pr-1\"\r\n          >\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\" htmlFor=\"tech_name\">\r\n                Name\r\n              </label>\r\n              <input\r\n                id=\"tech_name\"\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={newName}\r\n                onChange={(e) => setNewName(e.target.value)}\r\n                required\r\n                disabled={createBusy}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <label className=\"text-sm font-medium\" htmlFor=\"tech_email\">\r\n                Email\r\n              </label>\r\n              <input\r\n                id=\"tech_email\"\r\n                className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                value={newEmail}\r\n                onChange={(e) => setNewEmail(e.target.value)}\r\n                type=\"email\"\r\n                required\r\n                disabled={createBusy}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"space-y-1\">\r\n              <div className=\"text-sm text-zinc-600\">\r\n                A one-time password will be generated and emailed to the technician.\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-4\">\r\n              <div className=\"flex items-start justify-between gap-3\">\r\n                <div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Shops</div>\r\n                  <div className=\"mt-1 text-xs text-zinc-600\">Select one or more shops this technician can access.</div>\r\n                </div>\r\n                <div className=\"text-xs text-zinc-600\">Selected: {Object.values(newShopSelected).filter(Boolean).length}</div>\r\n              </div>\r\n\r\n              <div className=\"mt-3 space-y-1\">\r\n                <label className=\"text-sm font-medium\" htmlFor=\"new_tech_shop_search\">\r\n                  Search\r\n                </label>\r\n                <input\r\n                  id=\"new_tech_shop_search\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                  value={newShopQuery}\r\n                  onChange={(e) => setNewShopQuery(e.target.value)}\r\n                  placeholder=\"Search shops...\"\r\n                  disabled={createBusy}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mt-3 max-h-[260px] overflow-y-auto pr-1\">\r\n                <div className=\"grid gap-2\">\r\n                  <label className=\"flex items-center justify-between gap-3 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2\">\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"truncate text-sm font-medium text-[var(--rb-text)]\">Check all</div>\r\n                    </div>\r\n                    <input\r\n                      ref={newShopCheckAllRef}\r\n                      type=\"checkbox\"\r\n                      checked={newShopAllChecked}\r\n                      onChange={(e) => {\r\n                        const next = e.target.checked;\r\n                        setNewShopSelected((prev) => {\r\n                          const copy = { ...prev };\r\n                          for (const b of filteredNewShopOptions) {\r\n                            copy[b.id] = next;\r\n                          }\r\n                          return copy;\r\n                        });\r\n                      }}\r\n                      disabled={createBusy}\r\n                    />\r\n                  </label>\r\n\r\n                  {filteredNewShopOptions.map((b) => {\r\n                    const checked = Boolean(newShopSelected[b.id]);\r\n                    return (\r\n                      <label\r\n                        key={b.id}\r\n                        className=\"flex items-center justify-between gap-3 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2\"\r\n                      >\r\n                        <div className=\"min-w-0\">\r\n                          <div className=\"truncate text-sm font-medium text-[var(--rb-text)]\">{b.label}</div>\r\n                        </div>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={checked}\r\n                          onChange={(e) =>\r\n                            setNewShopSelected((prev) => ({\r\n                              ...prev,\r\n                              [b.id]: e.target.checked,\r\n                            }))\r\n                          }\r\n                          disabled={createBusy}\r\n                        />\r\n                      </label>\r\n                    );\r\n                  })}\r\n                </div>\r\n              </div>\r\n\r\n              {activeBranchOptions.length === 0 ? (\r\n                <div className=\"mt-2 text-sm text-zinc-600\">Create a shop first before adding technicians.</div>\r\n              ) : null}\r\n            </div>\r\n          </form>\r\n        </Modal>\r\n\r\n        <Card className=\"shadow-none\">\r\n          <CardContent className=\"pt-5\">\r\n            <DataTable\r\n              // title={typeof tenantSlug === \"string\" ? `Technicians` : \"Technicians\"}\r\n              data={rows}\r\n              loading={loading}\r\n              columns={columns}\r\n              getRowId={(row) => String(row.id)}\r\n              emptyMessage=\"No technicians.\"\r\n              search={{\r\n                placeholder: \"Search technicians...\",\r\n              }}\r\n              server={{\r\n                query,\r\n                onQueryChange: (value) => {\r\n                  setQuery(value);\r\n                  setPageIndex(0);\r\n                },\r\n                pageIndex,\r\n                onPageIndexChange: setPageIndex,\r\n                pageSize,\r\n                onPageSizeChange: (value) => {\r\n                  setPageSize(value);\r\n                  setPageIndex(0);\r\n                },\r\n                totalRows,\r\n                sort,\r\n                onSortChange: (next) => {\r\n                  setSort(next);\r\n                  setPageIndex(0);\r\n                },\r\n              }}\r\n              filters={[\r\n                {\r\n                  id: \"status\",\r\n                  label: \"Status\",\r\n                  value: statusFilter,\r\n                  options: statusOptions,\r\n                  onChange: (value) => {\r\n                    setStatusFilter(String(value));\r\n                    setPageIndex(0);\r\n                  },\r\n                },\r\n              ]}\r\n            />\r\n          </CardContent>\r\n        </Card>\r\n      </ListPageShell>\r\n    </RequireAuth>\r\n  );\r\n}\r\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['line', { x1: '12', x2: '12', y1: '2', y2: '22', key: '7eqyqh' }],\n  ['path', { d: 'M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6', key: '1b0p4s' }],\n];\n\n/**\n * @component @name DollarSign\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8bGluZSB4MT0iMTIiIHgyPSIxMiIgeTE9IjIiIHkyPSIyMiIgLz4KICA8cGF0aCBkPSJNMTcgNUg5LjVhMy41IDMuNSAwIDAgMCAwIDdoNWEzLjUgMy41IDAgMCAxIDAgN0g2IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/dollar-sign\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst DollarSign = createLucideIcon('dollar-sign', __iconNode);\n\nexport default DollarSign;\n"],"names":[],"mappings":"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","ignoreList":[1]}