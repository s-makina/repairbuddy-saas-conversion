module.exports=[25533,a=>{"use strict";var b=a.i(57850),c=a.i(70579),d=a.i(59843),e=a.i(45056),f=a.i(93609),g=a.i(75458),h=a.i(7160),i=a.i(34075),j=a.i(33452),k=a.i(4600),l=a.i(97867),m=a.i(46036);function n({userName:a,userEmail:c,avatarUrl:g,profileHref:i,settingsHref:k,securityHref:l,onLogout:m,className:n}){let[o,p]=(0,e.useState)(!1),[q,r]=(0,e.useState)(!1),s=(0,e.useRef)(null),t=(0,f.useRouter)(),u=(0,f.usePathname)(),v=(0,e.useMemo)(()=>a.split(" ").filter(Boolean).slice(0,2).map(a=>a[0]?.toUpperCase()).join("").slice(0,2)||"U",[a]);(0,e.useEffect)(()=>{function a(a){if(!o)return;let b=s.current;b&&a.target instanceof Node&&!b.contains(a.target)&&p(!1)}function b(a){o&&"Escape"===a.key&&p(!1)}return document.addEventListener("mousedown",a),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",b)}},[o]),(0,e.useEffect)(()=>{o&&p(!1)},[u]);let w=!!l;async function x(){if(!q){p(!1),r(!0);try{await m()}finally{t.replace("/login"),r(!1)}}}return(0,b.jsxs)("div",{ref:s,className:(0,h.cn)("relative z-50",n),children:[(0,b.jsxs)("button",{type:"button",onClick:()=>p(a=>!a),disabled:q,className:(0,h.cn)("group inline-flex items-center gap-2 rounded-full border px-3 py-1.5","bg-[var(--rb-surface-muted)] text-zinc-600 border-[var(--rb-border)]","hover:bg-white hover:text-[var(--rb-text)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgba(6,62,112,0.20)] focus-visible:ring-offset-2 focus-visible:ring-offset-white"),"aria-haspopup":"menu","aria-expanded":o,"aria-label":"Account menu",children:[(0,b.jsx)(j.Avatar,{src:g,alt:a||"User",fallback:v,size:32,className:"bg-[var(--rb-blue)] text-white"}),(0,b.jsx)("span",{className:"hidden max-w-[160px] truncate text-sm font-semibold text-current sm:inline",children:a||"User"})]}),o?(0,b.jsxs)("div",{role:"menu",className:"absolute right-0 z-50 mt-2 w-56 overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",children:[(0,b.jsxs)("div",{className:"border-b border-[var(--rb-border)] px-3 py-2",children:[(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:a||"User"}),(0,b.jsx)("div",{className:"truncate text-xs text-zinc-600",children:c||""})]}),(0,b.jsxs)("div",{className:"py-1",children:[w?(0,b.jsx)(d.default,{role:"menuitem",className:"block px-3 py-2 text-sm text-zinc-700 hover:bg-[var(--rb-surface-muted)]",href:l,onClick:()=>p(!1),children:"Security"}):null,(0,b.jsx)(d.default,{role:"menuitem",className:"block px-3 py-2 text-sm text-zinc-700 hover:bg-[var(--rb-surface-muted)]",href:i,onClick:()=>p(!1),children:"Profile"}),(0,b.jsx)(d.default,{role:"menuitem",className:"block px-3 py-2 text-sm text-zinc-700 hover:bg-[var(--rb-surface-muted)]",href:k,onClick:()=>p(!1),children:"Settings"}),(0,b.jsx)("div",{className:"my-1 h-px bg-[var(--rb-border)]"}),(0,b.jsx)("button",{role:"menuitem",type:"button",disabled:q,className:(0,h.cn)("block w-full px-3 py-2 text-left text-sm",q?"text-zinc-400":"text-zinc-700 hover:bg-[var(--rb-surface-muted)]"),onClick:()=>{x()},children:q?"Logging outâ€¦":"Logout"})]})]}):null]})}var o=a.i(31261);let p=(0,o.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var q=a.i(72245),r=a.i(7954),s=a.i(40360);let t=(0,o.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),u=(0,o.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),v=(0,o.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var w=a.i(3596),x=a.i(78807),y=a.i(72481),z=a.i(23585);let A=(0,o.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),B=(0,o.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),C=(0,o.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var D=a.i(35199),E=a.i(95506),F=a.i(75412),G=a.i(89523),H=a.i(7963),I=a.i(22663);let J=(0,o.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var K=a.i(38794),L=a.i(72438);let M=(0,o.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),N=e.default.createContext(null);function O(){let a=e.default.useContext(N);if(!a)throw Error("useDashboardHeader must be used within <DashboardShell />");return a}function P({name:a,className:c}){let d=(0,h.cn)("h-4 w-4 shrink-0",c),e={home:A,admin:M,dashboard:B,building:q.Building2,calendar:s.Calendar,wrench:K.Wrench,file:z.FileText,services:F.Sparkles,devices:L.Laptop,tags:H.Tag,parts:C,payments:y.CreditCard,reports:p,calculator:r.Calculator,users:J,review:G.Star,clock:x.Clock,printer:D.Printer,shield:M,profile:I.User,settings:E.Settings,default:w.CircleHelp}[a]??w.CircleHelp;return(0,b.jsx)(e,{className:d,"aria-hidden":!0})}function Q({className:a}){return(0,b.jsx)(v,{className:(0,h.cn)("h-4 w-4 shrink-0",a),"aria-hidden":!0})}function R({className:a}){return(0,b.jsx)(u,{className:(0,h.cn)("h-4 w-4 shrink-0",a),"aria-hidden":!0})}function S({className:a}){return(0,b.jsx)(t,{className:(0,h.cn)("h-4 w-4 shrink-0",a),"aria-hidden":!0})}function T({title:a,children:o}){let p=(0,g.useAuth)(),q=(0,f.usePathname)(),[r,s]=e.default.useState(null),t=p.tenant?.slug??null,u=!!(!p.isAdmin&&t&&p.tenant&&!p.tenant.setup_completed_at),v=t?`/${t}/setup`:"/app",w=p.user?.name??"",x=p.user?.email??"",y=p.user?.avatar_url??null,z=w.split(" ").filter(Boolean).slice(0,2).map(a=>a[0]?.toUpperCase()).join("").slice(0,2),A=t?`/app/${t}`:null,[B,C]=e.default.useState([]),[D,E]=e.default.useState(null),[F,G]=e.default.useState(!1),[H,I]=e.default.useState(null);e.default.useEffect(()=>{let a=!0;return async function(){if(t&&!p.isAdmin){G(!0);try{let[b,c]=await Promise.all([(0,i.apiFetch)(`/api/${t}/app/branches`),(0,i.apiFetch)(`/api/${t}/app/branches/current`)]);if(!a)return;C(Array.isArray(b.branches)?b.branches:[]),E("number"==typeof c.active_branch_id?c.active_branch_id:null)}catch{if(!a)return;C([]),E(null)}finally{if(!a)return;G(!1)}}}(),()=>{a=!1}},[p.isAdmin,t]);let J=e.default.useMemo(()=>{let a=B.find(a=>a.id===D)??null;return a?`${a.code} - ${a.name}`:F?"Loading...":"Select branch"},[D,B,F]),K=e.default.useMemo(()=>B.find(a=>a.id===D)??null,[D,B]);async function L(a){if(t){I(a);try{await (0,i.apiFetch)(`/api/${t}/app/branches/active`,{method:"POST",body:{branch_id:a}}),E(a)}finally{I(null)}}}let M=e.default.useMemo(()=>[{items:[{label:"Businesses",href:"/admin/businesses",icon:"admin",show:p.can("admin.tenants.read")}]},{title:"Overview",items:[{label:"Dashboard",href:"/admin",icon:"dashboard",show:p.can("admin.access")},{label:p.can("admin.access")?"Business Dashboard":"Dashboard",href:A??"/app",icon:"dashboard",show:!!A&&p.can("dashboard.view")},{label:"Appointments",href:t?`/app/${t}/calendar`:"/app",icon:"calendar",show:!!A&&p.can("appointments.view")},{label:"Business Settings",href:t?`/app/${t}/business-settings`:"/app",icon:"services",show:p.isAuthenticated&&!!t&&p.can("settings.manage")},{label:"Statuses",href:t?`/app/${t}/business-settings?section=job-statuses`:"/app",icon:"tags",show:p.isAuthenticated&&!!t&&p.can("settings.manage")&&p.can("jobs.view")},{label:"Users",href:t?`/app/${t}/users`:"/app",icon:"users",show:p.isAuthenticated&&!!t&&p.can("users.manage")},{label:"Roles",href:t?`/app/${t}/roles`:"/app",icon:"shield",show:p.isAuthenticated&&!!t&&p.can("roles.manage")},{label:"Branches",href:t?`/app/${t}/branches`:"/app",icon:"home",show:p.isAuthenticated&&!!t&&p.can("branches.manage")},{label:"Settings",href:p.isAdmin?"/admin/settings":t?`/app/${t}/settings`:"/app",icon:"settings",show:p.isAuthenticated&&p.isAdmin&&p.can("settings.manage")},{label:"Security",href:t?`/app/${t}/security`:"/app",icon:"shield",show:p.isAuthenticated&&!!t&&p.can("security.manage")}]},{title:"Billing",items:[{label:"Plans",href:"/admin/billing/plans",icon:"payments",show:p.can("admin.billing.read")},{label:"Plan Builder",href:"/admin/billing/builder",icon:"file",show:p.can("admin.billing.read")},{label:"Intervals",href:"/admin/billing/intervals",icon:"calendar",show:p.can("admin.billing.read")},{label:"Entitlements",href:"/admin/billing/entitlements",icon:"tags",show:p.can("admin.billing.read")},{label:"Currencies",href:"/admin/billing/currencies",icon:"payments",show:p.can("admin.billing.read")},{label:"Business Billing",href:"/admin/billing/businesses",icon:"users",show:p.can("admin.billing.read")&&p.can("admin.tenants.read")}]},{title:"Operations",items:[{label:"Jobs",href:t?`/app/${t}/jobs`:"/app",icon:"wrench",show:!!A&&p.can("jobs.view")},{label:"Estimates",href:t?`/app/${t}/estimates`:"/app",icon:"file",show:!!A&&p.can("estimates.view")},{label:"Services",href:t?`/app/${t}/services`:"/app",icon:"services",show:!!A&&p.can("services.view")},{label:"Service Types",href:t?`/app/${t}/service-types`:"/app",icon:"services",show:!!A&&p.can("service_types.view")},{label:"Service Price Overrides",href:t?`/app/${t}/service-price-overrides`:"/app",icon:"services",show:p.isAuthenticated&&!!t&&p.can("settings.manage")}]},{title:"Inventory",items:[{label:"Devices",href:t?`/app/${t}/devices`:"/app",icon:"devices",show:!!A&&p.can("devices.view")},{label:"Device Brands",href:t?`/app/${t}/device-brands`:"/app",icon:"tags",show:!!A&&p.can("device_brands.view")},{label:"Device Types",href:t?`/app/${t}/device-types`:"/app",icon:"tags",show:!!A&&p.can("device_types.view")},{label:"Device Fields",href:t?`/app/${t}/device-field-definitions`:"/app",icon:"tags",show:p.isAuthenticated&&!!t&&p.can("settings.manage")},{label:"Parts",href:t?`/app/${t}/parts`:"/app",icon:"parts",show:!!A&&p.can("parts.view")},{label:"Part Brands",href:t?`/app/${t}/part-brands`:"/app",icon:"tags",show:!!A&&p.can("parts.view")},{label:"Part Types",href:t?`/app/${t}/part-types`:"/app",icon:"tags",show:!!A&&p.can("parts.view")}]},{title:"Finance",items:[{label:"Payments",href:t?`/app/${t}/payments`:"/app",icon:"payments",show:!!A&&p.can("payments.view")},{label:"Reports",href:t?`/app/${t}/reports`:"/app",icon:"reports",show:!!A&&p.can("reports.view")},{label:"Expenses",href:t?`/app/${t}/expenses`:"/app",icon:"calculator",show:!!A&&p.can("expenses.view")},{label:"Expense Categories",href:t?`/app/${t}/expense-categories`:"/app",icon:"calculator",show:!!A&&p.can("expense_categories.view")}]},{title:"People",items:[{label:"Customers",href:t?`/app/${t}/clients`:"/app",icon:"users",show:!!A&&p.can("clients.view")},{label:"Customer Devices",href:t?`/app/${t}/customer-devices`:"/app",icon:"devices",show:!!A&&p.can("customer_devices.view")},{label:"Technicians",href:t?`/app/${t}/technicians`:"/app",icon:"users",show:!!A&&p.can("technicians.view")},{label:"Managers",href:t?`/app/${t}/managers`:"/app",icon:"users",show:!!A&&p.can("managers.view")},{label:"Users",href:t?`/app/${t}/users`:"/app",icon:"users",show:!!t&&p.can("users.manage")},{label:"Roles",href:t?`/app/${t}/roles`:"/app",icon:"shield",show:!!t&&p.can("roles.manage")},{label:"Branches",href:t?`/app/${t}/branches`:"/app",icon:"home",show:!!t&&p.can("branches.manage")}]},{title:"Quality",items:[{label:"Job Reviews",href:t?`/app/${t}/job-reviews`:"/app",icon:"review",show:!!A&&p.can("job_reviews.view")}]},{title:"Tools",items:[{label:"Time Logs",href:t?`/app/${t}/time-logs`:"/app",icon:"clock",show:!!A&&p.can("time_logs.view")},{label:"Manage Hourly Rates",href:t?`/app/${t}/hourly-rates`:"/app",icon:"clock",show:!!A&&p.can("hourly_rates.view")},{label:"Reminder Logs",href:t?`/app/${t}/reminder-logs`:"/app",icon:"clock",show:!!A&&p.can("reminder_logs.view")},{label:"Print Screen",href:t?`/app/${t}/print-screen`:"/app",icon:"printer",show:!!A&&p.can("print_screen.view")}]},{title:"Account",items:[{label:"Security",href:t?`/app/${t}/security`:"/app",icon:"shield",show:!!t&&p.can("security.manage")},{label:"Profile",href:"/app/profile",icon:"users",show:p.isAuthenticated&&p.can("profile.manage")},{label:"Settings",href:p.isAdmin?"/admin/settings":"/app/settings",icon:"settings",show:p.isAuthenticated&&p.isAdmin&&p.can("settings.manage")},{label:"Business Settings",href:t?`/app/${t}/business-settings`:"/app",icon:"services",show:p.isAuthenticated&&!!t&&p.can("settings.manage")}]}],[p,A,t]),O=e.default.useMemo(()=>{let a=M.flatMap(a=>a.items).filter(a=>a.show).map(a=>"/"===a.href?"/"===q?{href:a.href,score:1}:{href:a.href,score:-1}:q===a.href||q.startsWith(`${a.href}/`)?{href:a.href,score:a.href.length}:{href:a.href,score:-1}).filter(a=>a.score>=0).sort((a,b)=>b.score-a.score);return a[0]?.href??null},[M,q]),T=e.default.useMemo(()=>M.map((a,b)=>{let c=a.title?`section:${a.title}`:`section:${b}`,d=a.items.filter(a=>a.show),e=!!O&&d.some(a=>a.href===O);return{key:c,title:a.title,items:d,hasActiveItem:e}}).filter(a=>a.items.length>0),[O,M]),[U,V]=e.default.useState({}),W=e.default.useMemo(()=>{let a=p.user?.email||p.user?.name||"anon";return`rb.sidebar.openSections:v1:${a}`},[p.user?.email,p.user?.name]);e.default.useEffect(()=>{},[W]),e.default.useEffect(()=>{V(a=>{let b=T.find(a=>!!a.title&&a.hasActiveItem),c={...a},d=!1,e=T.find(a=>"Overview"===a.title);if(e&&void 0===c[e.key]&&(c[e.key]=!0,d=!0),!b)return d?c:a;for(let a of T){if(!a.title||"Overview"===a.title)continue;let e=a.key===b.key;c[a.key]!==e&&(c[a.key]=e,d=!0)}return d?c:a})},[T]),e.default.useEffect(()=>{},[U,W]);let X=(()=>{if("/admin"===q)return"Dashboard";if(q.startsWith("/app/")){let a=q.split("/").filter(Boolean);return 2===a.length?"Dashboard":a.length>=3?a[2].split("-").filter(Boolean).map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" "):"App"}return"/"===q?"Home":"/login"===q?"Login":"/register"===q?"Register":"/verify-email"===q?"Verify Email":(q.split("/").filter(Boolean).slice(-1)[0]??"").split("-").filter(Boolean).map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")||"Page"})(),Y=q.startsWith("/app/")?`App / ${X}`:q.startsWith("/admin")?`Admin / ${X}`:X,Z=p.isAdmin?"/admin/profile":t?`/app/${t}/profile`:"/app",$=p.isAdmin?"/admin/settings":t?`/app/${t}/settings`:"/app",_=t&&p.can("security.manage")?`/app/${t}/security`:null,aa=e.default.useMemo(()=>({setHeader:s}),[]);return(0,b.jsx)(N.Provider,{value:aa,children:(0,b.jsx)("div",{className:"min-h-screen bg-[var(--rb-surface-muted)] text-[var(--rb-text)]",children:(0,b.jsxs)("div",{className:"flex min-h-screen",children:[(0,b.jsxs)("aside",{className:"sticky top-0 flex h-screen w-[280px] shrink-0 flex-col bg-[var(--rb-blue)] text-white",children:[(0,b.jsx)("div",{className:"border-b border-white/10 bg-white px-4 py-5 text-[var(--rb-text)]",children:(0,b.jsx)("div",{className:"flex items-center gap-3",children:(0,b.jsx)(c.default,{alt:"99smartx",src:"/brand/repair-buddy-logo.png",width:140,height:36,priority:!0})})}),(0,b.jsx)("nav",{className:"flex flex-1 flex-col gap-3 overflow-y-auto px-2 py-3",children:T.map(a=>{if(!a.title)return(0,b.jsx)("div",{className:"space-y-1",children:a.items.map(a=>{let c=!!O&&a.href===O;return(0,b.jsx)(d.default,{href:a.href,className:(0,h.cn)("block rounded-[var(--rb-radius-sm)] px-3 py-2 text-sm font-medium",c?"bg-[var(--rb-orange)] text-white":"text-white/90 hover:bg-[var(--rb-orange)] hover:text-white"),children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(P,{name:a.icon??"default",className:"text-white/80"}),(0,b.jsx)("span",{className:"min-w-0 truncate",children:a.label})]})},a.href)})},a.key);let c=U[a.key]??!1,e=`sidebar-${a.key.replace(/[^a-zA-Z0-9_-]/g,"-")}`;return(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>{V(b=>{let c=!b[a.key],d={...b};for(let b of T)b.title&&("Overview"===a.title||"Overview"!==b.title)&&(d[b.key]=!1);return d[a.key]=c,d})},className:(0,h.cn)("flex w-full items-center justify-between rounded-[var(--rb-radius-sm)] px-3 py-2 text-left","text-[11px] font-semibold uppercase tracking-wider",a.hasActiveItem?"bg-white/10 text-white":"text-white/70 hover:bg-white/10 hover:text-white"),"aria-expanded":c,"aria-controls":e,children:[(0,b.jsx)("span",{children:a.title}),(0,b.jsx)(Q,{className:(0,h.cn)("text-white/70 transition-transform motion-reduce:transition-none",c?"rotate-90":"rotate-0")})]}),(0,b.jsx)("div",{id:e,"aria-hidden":!c,className:(0,h.cn)("overflow-hidden pl-2","transition-[max-height,opacity] duration-200 ease-out motion-reduce:transition-none",c?"max-h-[560px] opacity-100":"max-h-0 opacity-0"),children:(0,b.jsx)("div",{className:(0,h.cn)("space-y-1",c?"pt-1":"pt-0",c?"":"pointer-events-none"),children:a.items.map(a=>{let c=!!O&&a.href===O;return(0,b.jsx)(d.default,{href:a.href,className:(0,h.cn)("block rounded-[var(--rb-radius-sm)] px-3 py-2 text-sm font-medium",c?"bg-[var(--rb-orange)] text-white":"text-white/90 hover:bg-[var(--rb-orange)] hover:text-white"),children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(P,{name:a.icon??"default",className:"text-white/80"}),(0,b.jsx)("span",{className:"min-w-0 truncate",children:a.label})]})},a.href)})})})]},a.key)})}),(0,b.jsx)("div",{className:"border-t border-white/10 p-3",children:(0,b.jsxs)("div",{className:"flex items-center gap-3 rounded-[var(--rb-radius-md)] bg-white/5 px-3 py-3",children:[(0,b.jsx)(j.Avatar,{src:y,alt:w||"User",fallback:z||"U",size:36,className:"bg-white/15"}),(0,b.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-white",children:w||"User"}),(0,b.jsx)("div",{className:"truncate text-xs text-white/70",children:x||""})]})]})})]}),(0,b.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,b.jsxs)("div",{className:"mx-auto w-full max-w-6xl px-4",children:[p.isImpersonating?(0,b.jsx)(k.Card,{className:"mt-6 border border-amber-200 bg-amber-50 px-5 py-3",children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"text-sm text-amber-900",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Impersonation active."})," ",(0,b.jsxs)("span",{children:["Acting as ",p.user?.email,p.actorUser?.email?` (by ${p.actorUser.email})`:"","."]})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(l.Button,{variant:"outline",size:"sm",onClick:async()=>{let a=p.impersonation?.session_id;try{a&&await (0,i.apiFetch)(`/api/admin/impersonation/${a}/stop`,{method:"POST",impersonationSessionId:null,body:{reason:"ended_by_user"}})}finally{p.clearImpersonation(),await p.refresh()}},children:"Exit impersonation"})})]})}):null,(0,b.jsx)(k.Card,{className:"mt-6 px-5 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:r?.breadcrumb??Y}),(0,b.jsx)("div",{className:"mt-1 truncate text-lg font-semibold text-[var(--rb-text)]",children:r?.title??X}),r?.subtitle?(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:r.subtitle}):null]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[!p.isAdmin&&t?(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)(m.DropdownMenu,{align:"right",trigger:({open:a,toggle:c})=>{let d=F||null!==H||0===B.length;return(0,b.jsxs)("button",{type:"button",onClick:c,disabled:d,className:(0,h.cn)("group inline-flex h-9 max-w-[320px] items-center gap-2.5 rounded-[var(--rb-radius-sm)] border px-2.5","bg-white text-zinc-700 border-zinc-200","hover:bg-[var(--rb-surface-muted)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)]",d?"pointer-events-none opacity-60":""),"aria-haspopup":"menu","aria-expanded":a,"aria-label":"Active shop",children:[(0,b.jsx)(P,{name:"building",className:"h-4 w-4 text-zinc-500"}),(0,b.jsx)("span",{className:"min-w-0 flex-1 text-left",children:(0,b.jsx)("span",{className:"block truncate text-sm font-semibold text-[var(--rb-text)]",children:K?.name||J})}),(0,b.jsx)(R,{className:(0,h.cn)("text-zinc-500 transition-transform",a?"rotate-180":"rotate-0")})]})},children:({close:a})=>{let c=B.filter(a=>a.is_active);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"px-3 py-2",children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Shop"}),(0,b.jsx)("div",{className:"mt-1 truncate text-sm font-semibold text-[var(--rb-text)]",children:K?.name||J})]}),(0,b.jsx)(m.DropdownMenuSeparator,{}),F?(0,b.jsx)(m.DropdownMenuItem,{onSelect:()=>a(),disabled:!0,children:"Loading shops..."}):0===c.length?(0,b.jsx)(m.DropdownMenuItem,{onSelect:()=>a(),disabled:!0,children:"No shops available"}):c.map(c=>{let d=c.id===D,e=H===c.id;return(0,b.jsx)(m.DropdownMenuItem,{disabled:null!==H,onSelect:()=>{a(),e||d||L(c.id)},children:(0,b.jsxs)("span",{className:"flex w-full items-center justify-between gap-3",children:[(0,b.jsxs)("span",{className:"min-w-0",children:[(0,b.jsx)("span",{className:"block truncate text-sm font-medium text-zinc-800",children:c.name}),(0,b.jsx)("span",{className:"block truncate text-[11px] font-medium text-zinc-500",children:c.code})]}),(0,b.jsx)("span",{className:"shrink-0",children:e?(0,b.jsx)("span",{className:"text-xs font-medium text-zinc-500",children:"Switching..."}):d?(0,b.jsx)(S,{className:"text-[var(--rb-blue)]"}):null})]})},c.id)})]})}})}):null,r?.actions?(0,b.jsx)("div",{className:"flex items-center gap-2",children:r.actions}):null,(0,b.jsx)(n,{userName:w,userEmail:x,avatarUrl:y,profileHref:Z,settingsHref:$,securityHref:_,onLogout:p.logout})]})]})})]}),u?(0,b.jsx)(k.Card,{className:"mx-auto mt-6 w-full max-w-6xl px-5 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Finish setup"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Your workspace isn't fully configured yet. Some features may be limited until setup is complete."})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsx)(d.default,{href:v,className:"inline-flex h-10 items-center justify-center whitespace-nowrap rounded-[var(--rb-radius-sm)] bg-[var(--rb-blue)] px-4 text-sm font-medium text-white transition-colors hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:"Resume setup"})})]})}):null,(0,b.jsx)("main",{className:"mx-auto mt-6 w-full max-w-6xl px-4 pb-8",children:o})]})]})})})}a.s(["DashboardShell",()=>T,"useDashboardHeader",()=>O],25533)}];

//# sourceMappingURL=frontend_src_components_DashboardShell_tsx_8fae84a8._.js.map