{"version":3,"sources":["../../../../../frontend/src/components/ui/PageHeader.tsx","../../../../../frontend/src/components/ui/Skeleton.tsx","../../../../../frontend/src/app/app/%5Btenant%5D/roles/page.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport function PageHeader({\r\n  title,\r\n  description,\r\n  actions,\r\n  className,\r\n}: {\r\n  title: string;\r\n  description?: string;\r\n  actions?: React.ReactNode;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <div className={cn(\"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between\", className)}>\r\n      <div>\r\n        <h1 className=\"text-xl font-semibold text-[var(--rb-text)]\">{title}</h1>\r\n        {description ? <p className=\"mt-1 text-sm text-zinc-600\">{description}</p> : null}\r\n      </div>\r\n      {actions ? <div className=\"flex items-center gap-2\">{actions}</div> : null}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\n\r\ntype SkeletonProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  \"aria-hidden\"?: boolean;\r\n};\r\n\r\nexport function Skeleton({ className, \"aria-hidden\": ariaHidden = true, ...props }: SkeletonProps) {\r\n  return <div aria-hidden={ariaHidden} className={cn(\"rb-skeleton\", className)} {...props} />;\r\n}\r\n\r\nexport function CardSkeleton({\r\n  lines = 3,\r\n  className,\r\n}: {\r\n  lines?: number;\r\n  className?: string;\r\n}) {\r\n  const safeLines = Math.max(1, Math.min(lines, 12));\r\n\r\n  return (\r\n    <Card className={cn(\"overflow-hidden\", className)}>\r\n      <CardContent className=\"space-y-3 pt-5\">\r\n        <Skeleton className=\"h-4 w-32 rounded-[var(--rb-radius-sm)]\" />\r\n        {Array.from({ length: safeLines }).map((_, idx) => (\r\n          <Skeleton\r\n            key={idx}\r\n            className={cn(\r\n              \"h-3 rounded-[var(--rb-radius-sm)]\",\r\n              idx === safeLines - 1 ? \"w-3/5\" : \"w-full\",\r\n            )}\r\n          />\r\n        ))}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport function TableSkeleton({\r\n  rows = 6,\r\n  columns = 5,\r\n  className,\r\n}: {\r\n  rows?: number;\r\n  columns?: number;\r\n  className?: string;\r\n}) {\r\n  const safeRows = Math.max(1, Math.min(rows, 20));\r\n  const safeCols = Math.max(1, Math.min(columns, 10));\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]\",\r\n        className,\r\n      )}\r\n    >\r\n      <div className=\"border-b border-[var(--rb-border)] px-5 py-4\">\r\n        <div className=\"grid gap-3\" style={{ gridTemplateColumns: `repeat(${safeCols}, minmax(0, 1fr))` }}>\r\n          {Array.from({ length: safeCols }).map((_, idx) => (\r\n            <Skeleton key={idx} className=\"h-3 w-full rounded-[var(--rb-radius-sm)]\" />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"px-5 pb-5 pt-4\">\r\n        <div className=\"space-y-3\">\r\n          {Array.from({ length: safeRows }).map((_, rowIdx) => (\r\n            <div\r\n              key={rowIdx}\r\n              className=\"grid gap-3\"\r\n              style={{ gridTemplateColumns: `repeat(${safeCols}, minmax(0, 1fr))` }}\r\n            >\r\n              {Array.from({ length: safeCols }).map((_, colIdx) => (\r\n                <Skeleton\r\n                  key={colIdx}\r\n                  className={cn(\r\n                    \"h-3 rounded-[var(--rb-radius-sm)]\",\r\n                    colIdx === 0 ? \"w-3/4\" : \"w-full\",\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport type { Permission, Role } from \"@/lib/types\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Skeleton } from \"@/components/ui/Skeleton\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { useParams } from \"next/navigation\";\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\n\r\ntype RolesPayload = {\r\n  roles: Role[];\r\n};\r\n\r\ntype PermissionsPayload = {\r\n  permissions: Permission[];\r\n};\r\n\r\nexport default function TenantRolesPage() {\r\n  const params = useParams() as { tenant?: string; business?: string };\r\n  const tenant = params.business ?? params.tenant;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [roles, setRoles] = useState<Role[]>([]);\r\n  const [permissions, setPermissions] = useState<Permission[]>([]);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [status, setStatus] = useState<string | null>(null);\r\n  const [busy, setBusy] = useState(false);\r\n\r\n  const [selectedRoleId, setSelectedRoleId] = useState<number | null>(null);\r\n\r\n  const selectedRole = useMemo(() => {\r\n    if (!selectedRoleId) return null;\r\n    return roles.find((r) => r.id === selectedRoleId) ?? null;\r\n  }, [roles, selectedRoleId]);\r\n\r\n  const [editName, setEditName] = useState(\"\");\r\n  const [editPerms, setEditPerms] = useState<Record<string, boolean>>({});\r\n\r\n  async function load() {\r\n    if (typeof tenant !== \"string\" || tenant.length === 0) {\r\n      setRoles([]);\r\n      setPermissions([]);\r\n      setSelectedRoleId(null);\r\n      setError(\"Workspace not found.\");\r\n      setStatus(null);\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    setStatus(null);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const [rolesRes, permsRes] = await Promise.all([\r\n        apiFetch<RolesPayload>(`/api/${tenant}/app/roles`),\r\n        apiFetch<PermissionsPayload>(`/api/${tenant}/app/permissions`),\r\n      ]);\r\n\r\n      const nextRoles = Array.isArray(rolesRes.roles) ? rolesRes.roles : [];\r\n      const nextPerms = Array.isArray(permsRes.permissions) ? permsRes.permissions : [];\r\n\r\n      setRoles(nextRoles);\r\n      setPermissions(nextPerms);\r\n\r\n      const firstRoleId = nextRoles[0]?.id ?? null;\r\n      setSelectedRoleId((prev) => {\r\n        if (typeof prev === \"number\" && nextRoles.some((r) => r.id === prev)) return prev;\r\n        return firstRoleId;\r\n      });\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Failed to load roles.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  function RolesSkeleton() {\r\n    return (\r\n      <Card className=\"shadow-none\">\r\n        <CardContent className=\"pt-5\">\r\n          <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n            <div>\r\n              <Skeleton className=\"h-4 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n              <Skeleton className=\"mt-2 h-4 w-64 rounded-[var(--rb-radius-sm)]\" />\r\n            </div>\r\n            <Skeleton className=\"h-9 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n          </div>\r\n\r\n          <div className=\"mt-4 grid gap-4 lg:grid-cols-3\">\r\n            <div className=\"space-y-2\">\r\n              {Array.from({ length: 6 }).map((_, idx) => (\r\n                <div key={idx} className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2\">\r\n                  <Skeleton className=\"h-4 w-40 rounded-[var(--rb-radius-sm)]\" />\r\n                  <Skeleton className=\"mt-2 h-3 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <div className=\"lg:col-span-2 space-y-4\">\r\n              <div className=\"space-y-1\">\r\n                <Skeleton className=\"h-4 w-24 rounded-[var(--rb-radius-sm)]\" />\r\n                <Skeleton className=\"h-9 w-full rounded-[var(--rb-radius-sm)]\" />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Skeleton className=\"h-4 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n                <div className=\"grid gap-2 sm:grid-cols-2\">\r\n                  {Array.from({ length: 10 }).map((_, idx) => (\r\n                    <div key={idx} className=\"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2\">\r\n                      <Skeleton className=\"h-4 w-40 rounded-[var(--rb-radius-sm)]\" />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <Skeleton className=\"h-9 w-20 rounded-[var(--rb-radius-sm)]\" />\r\n                <Skeleton className=\"h-9 w-20 rounded-[var(--rb-radius-sm)]\" />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  useEffect(() => {\r\n    void load();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [tenant]);\r\n\r\n  useEffect(() => {\r\n    if (!selectedRole) return;\r\n    setEditName(selectedRole.name);\r\n\r\n    const map: Record<string, boolean> = {};\r\n    const current = selectedRole.permissions ?? [];\r\n    for (const p of current) map[p.name] = true;\r\n    setEditPerms(map);\r\n  }, [selectedRole]);\r\n\r\n  async function onCreateRole() {\r\n    setBusy(true);\r\n    setError(null);\r\n    setStatus(null);\r\n\r\n    try {\r\n      const roleName = window.prompt(\"Role name\");\r\n      const trimmed = (roleName ?? \"\").trim();\r\n      if (!trimmed) {\r\n        setBusy(false);\r\n        return;\r\n      }\r\n\r\n      await apiFetch<{ role: Role }>(`/api/${tenant}/app/roles`, {\r\n        method: \"POST\",\r\n        body: { name: trimmed, permission_names: [] },\r\n      });\r\n\r\n      setStatus(\"Role created.\");\r\n      await load();\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to create role.\");\r\n      }\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function onSaveRole(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (!selectedRole) return;\r\n\r\n    setBusy(true);\r\n    setError(null);\r\n    setStatus(null);\r\n\r\n    try {\r\n      const trimmedName = editName.trim();\r\n      if (trimmedName.length === 0) {\r\n        setError(\"Role name is required.\");\r\n        setBusy(false);\r\n        return;\r\n      }\r\n\r\n      const names = Object.entries(editPerms)\r\n        .filter(([, v]) => v)\r\n        .map(([k]) => k);\r\n\r\n      await apiFetch<{ role: Role }>(`/api/${tenant}/app/roles/${selectedRole.id}`, {\r\n        method: \"PUT\",\r\n        body: {\r\n          name: trimmedName,\r\n          permission_names: names,\r\n        },\r\n      });\r\n\r\n      setStatus(\"Role updated.\");\r\n      await load();\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to update role.\");\r\n      }\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  async function onDeleteRole() {\r\n    if (!selectedRole) return;\r\n\r\n    const ok = window.confirm(`Delete role \"${selectedRole.name}\"?`);\r\n    if (!ok) return;\r\n\r\n    setBusy(true);\r\n    setError(null);\r\n    setStatus(null);\r\n\r\n    try {\r\n      await apiFetch<{ status: \"ok\" }>(`/api/${tenant}/app/roles/${selectedRole.id}`, {\r\n        method: \"DELETE\",\r\n      });\r\n\r\n      setSelectedRoleId(null);\r\n      setStatus(\"Role deleted.\");\r\n      await load();\r\n    } catch (err) {\r\n      if (err instanceof ApiError) {\r\n        setError(err.message);\r\n      } else {\r\n        setError(\"Failed to delete role.\");\r\n      }\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"roles.manage\">\r\n      <div className=\"space-y-6\">\r\n        <PageHeader title=\"Roles\" description=\"Create roles and assign permissions.\" />\r\n\r\n        {status ? <div className=\"text-sm text-green-700\">{status}</div> : null}\r\n        {error ? <div className=\"text-sm text-red-600\">{error}</div> : null}\r\n\r\n        <Card className=\"shadow-none\">\r\n          <CardContent className=\"pt-5\">\r\n            <div className=\"flex flex-col gap-3 md:flex-row md:items-center md:justify-between\">\r\n              <div>\r\n                <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Roles</div>\r\n                <div className=\"mt-1 text-sm text-zinc-600\">Select a role to edit its permissions.</div>\r\n              </div>\r\n              <Button type=\"button\" onClick={() => void onCreateRole()} disabled={busy}>\r\n                Create role\r\n              </Button>\r\n            </div>\r\n\r\n            {loading ? (\r\n              <div className=\"mt-4\">\r\n                <RolesSkeleton />\r\n              </div>\r\n            ) : (\r\n              <div className=\"mt-4 grid gap-4 lg:grid-cols-3\">\r\n                <div className=\"space-y-2\">\r\n                  {roles.length === 0 ? (\r\n                    <div className=\"space-y-2\">\r\n                      <div className=\"text-sm text-zinc-600\">No roles.</div>\r\n                      <Button type=\"button\" variant=\"outline\" onClick={() => void load()} disabled={busy}>\r\n                        Retry\r\n                      </Button>\r\n                    </div>\r\n                  ) : null}\r\n\r\n                  {roles.map((r) => {\r\n                    const active = r.id === selectedRoleId;\r\n                    return (\r\n                      <button\r\n                        key={r.id}\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedRoleId(r.id)}\r\n                        className={\r\n                          \"w-full rounded-[var(--rb-radius-md)] border px-3 py-2 text-left \" +\r\n                          (active\r\n                            ? \"border-[var(--rb-orange)] bg-[rgba(244,162,46,0.10)]\"\r\n                            : \"border-[var(--rb-border)] bg-white hover:bg-[var(--rb-surface-muted)]\")\r\n                        }\r\n                      >\r\n                        <div className=\"text-sm font-semibold text-[var(--rb-text)]\">{r.name}</div>\r\n                        <div className=\"mt-1 text-xs text-zinc-600\">{(r.permissions ?? []).length} permissions</div>\r\n                      </button>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                <div className=\"lg:col-span-2\">\r\n                  {selectedRole ? (\r\n                    <form className=\"space-y-4\" onSubmit={onSaveRole}>\r\n                      <div className=\"space-y-1\">\r\n                        <label className=\"text-sm font-medium\" htmlFor=\"role_name\">\r\n                          Role name\r\n                        </label>\r\n                        <input\r\n                          id=\"role_name\"\r\n                          className=\"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                          value={editName}\r\n                          onChange={(e) => setEditName(e.target.value)}\r\n                          required\r\n                          disabled={busy}\r\n                        />\r\n                      </div>\r\n\r\n                      <div className=\"space-y-2\">\r\n                        <div className=\"text-sm font-medium\">Permissions</div>\r\n                        <div className=\"grid gap-2 sm:grid-cols-2\">\r\n                          {permissions.map((p) => {\r\n                            const checked = Boolean(editPerms[p.name]);\r\n                            return (\r\n                              <label\r\n                                key={p.id}\r\n                                className=\"flex items-center gap-2 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm\"\r\n                              >\r\n                                <input\r\n                                  type=\"checkbox\"\r\n                                  checked={checked}\r\n                                  onChange={(e) =>\r\n                                    setEditPerms((prev) => ({\r\n                                      ...prev,\r\n                                      [p.name]: e.target.checked,\r\n                                    }))\r\n                                  }\r\n                                />\r\n                                <span className=\"font-mono text-[12px] text-zinc-700\">{p.name}</span>\r\n                              </label>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Button type=\"submit\" disabled={busy}>\r\n                          {busy ? \"Saving...\" : \"Save\"}\r\n                        </Button>\r\n                        <Button type=\"button\" variant=\"outline\" onClick={() => void onDeleteRole()} disabled={busy}>\r\n                          Delete\r\n                        </Button>\r\n                      </div>\r\n                    </form>\r\n                  ) : (\r\n                    <div className=\"text-sm text-zinc-600\">{roles.length > 0 ? \"Select a role to edit.\" : \"Create a role to get started.\"}</div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"sDACA,EAAA,EAAA,CAAA,CAAA,MAEO,SAAS,EAAW,OACzB,CAAK,aACL,CAAW,SACX,CAAO,WACP,CAAS,CAMV,EACC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,kEAAmE,aACpF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uDAA+C,IAC5D,EAAc,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA8B,IAAmB,QAE9E,EAAU,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mCAA2B,IAAiB,OAG5E,oECpBA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,MAMO,SAAS,EAAS,CAAE,WAAS,CAAE,cAAe,GAAa,CAAI,CAAE,GAAG,EAAsB,EAC/F,MAAO,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,cAAa,EAAY,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,cAAe,GAAa,GAAG,CAAK,EACzF,CAEO,SAAS,EAAa,OAC3B,EAAQ,CAAC,CACT,WAAS,CAIV,EACC,IAAM,EAAY,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,EAAO,KAE9C,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EAAC,kBAAmB,YACrC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,2BACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,UAAU,2CACnB,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAU,GAAG,GAAG,CAAC,CAAC,EAAG,IACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACT,oCACA,IAAQ,EAAY,EAAI,QAAU,WAH/B,QAUjB,CAEO,SAAS,EAAc,MAC5B,EAAO,CAAC,CACR,UAAU,CAAC,WACX,CAAS,CAKV,EACC,IAAM,EAAW,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,EAAM,KACtC,EAAW,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,EAAS,KAE/C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CACC,UAAW,CAAA,EAAA,EAAA,EAAE,AAAF,EACT,oHACA,aAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,oBAAqB,CAAC,OAAO,EAAE,EAAS,iBAAiB,CAAC,AAAC,WAC7F,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAS,GAAG,GAAG,CAAC,CAAC,EAAG,IACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAmB,UAAU,4CAAf,QAIrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAS,GAAG,GAAG,CAAC,CAAC,EAAG,IACxC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAEC,UAAU,aACV,MAAO,CAAE,oBAAqB,CAAC,OAAO,EAAE,EAAS,iBAAiB,CAAC,AAAC,WAEnE,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAS,GAAG,GAAG,CAAC,CAAC,EAAG,IACxC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAEC,UAAW,CAAA,EAAA,EAAA,EAAA,AAAE,EACX,oCACW,AAAX,MAAe,QAAU,WAHtB,KANJ,UAmBnB,6GCxFA,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,KACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAUe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAS,EAAO,QAAQ,EAAI,EAAO,MAAM,CAEzC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,EAAE,EACvC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAuB,EAAE,EACzD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC5C,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAC9C,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAE3B,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,MAE9D,EAAe,CAAA,EAAA,EAAA,OAAA,AAAO,EAAC,IAC3B,AAAK,EACE,EADH,AACS,IAAI,CAAC,AAAC,GAAM,EAAE,EADN,AACQ,GAAK,IAAmB,KADzB,KAE3B,CAAC,EAAO,EAAe,EAEpB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACnC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA0B,CAAC,GAErE,eAAe,IACb,GAAI,AAAkB,iBAAX,GAAyC,IAAlB,EAAO,MAAM,CAAQ,CACrD,EAAS,EAAE,EACX,EAAe,EAAE,EACjB,EAAkB,MAClB,EAAS,wBACT,EAAU,MACV,GAAW,GACX,MACF,CAEA,EAAS,MACT,EAAU,MACV,GAAW,GAEX,GAAI,CACF,GAAM,CAAC,EAAU,EAAS,CAAG,MAAM,QAAQ,GAAG,CAAC,CAC7C,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAuB,CAAC,KAAK,EAAE,EAAO,UAAU,CAAC,EACjD,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,CAAC,KAAK,EAAE,EAAO,gBAAgB,CAAC,EAC9D,EAEK,EAAY,MAAM,OAAO,CAAC,EAAS,KAAK,EAAI,EAAS,KAAK,CAAG,EAAE,CAC/D,EAAY,MAAM,OAAO,CAAC,EAAS,WAAW,EAAI,EAAS,WAAW,CAAG,EAAE,CAEjF,EAAS,GACT,EAAe,GAEf,IAAM,EAAc,CAAS,CAAC,EAAE,EAAE,IAAM,KACxC,EAAkB,AAAC,GACjB,AAAoB,UAAhB,OAAO,GAAqB,EAAU,IAAI,CAAC,AAAC,GAAM,EAAE,EAAE,GAAK,GAAc,EACtE,EAD+D,AAG1E,CAAE,MAAO,EAAK,CACZ,EAAS,aAAe,MAAQ,EAAI,OAAO,CAAG,wBAChD,QAAU,CACR,GAAW,EACb,CACF,CAiEA,eAAe,IACb,GAAQ,GACR,EAAS,MACT,EAAU,MAEV,GAAI,CAEF,IAAM,EAAW,AAAD,CADC,OAAO,MAAM,CAAC,cACF,EAAA,CAAE,CAAE,IAAI,GACrC,GAAI,CAAC,EAAS,YACZ,GAAQ,EAIV,OAAM,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAyB,CAAC,KAAK,EAAE,EAAO,UAAU,CAAC,CAAE,CACzD,OAAQ,OACR,KAAM,CAAE,KAAM,EAAS,iBAAkB,EAAE,AAAC,CAC9C,GAEA,EAAU,iBACV,MAAM,GACR,CAAE,MAAO,EAAK,CACR,aAAe,EAAA,QAAQ,CACzB,CAD2B,CAClB,EAAI,OAAO,EAEpB,EAAS,yBAEb,QAAU,CACR,GAAQ,EACV,CACF,CAEA,eAAe,EAAW,CAAkB,EAE1C,GADA,CACI,CADF,cAAc,GACX,GAEL,GAAQ,GACR,EAAS,GAHU,GAInB,EAAU,MAEV,GAAI,CACF,IAAM,EAAc,EAAS,IAAI,GACjC,GAA2B,IAAvB,EAAY,MAAM,CAAQ,CAC5B,EAAS,0BACT,GAAQ,GACR,MACF,CAEA,IAAM,EAAQ,OAAO,OAAO,CAAC,GAC1B,MAAM,CAAC,CAAC,EAAG,EAAE,GAAK,GAClB,GAAG,CAAC,CAAC,CAAC,EAAE,GAAK,EAEhB,OAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,CAAC,KAAK,EAAE,EAAO,WAAW,EAAE,EAAa,EAAE,CAAA,CAAE,CAAE,CAC5E,OAAQ,MACR,KAAM,CACJ,KAAM,EACN,iBAAkB,CACpB,CACF,GAEA,EAAU,iBACV,MAAM,GACR,CAAE,MAAO,EAAK,CACR,aAAe,EAAA,QAAQ,CACzB,CAD2B,CAClB,EAAI,OAAO,EAEpB,EAAS,yBAEb,QAAU,CACR,GAAQ,EACV,EACF,CAEA,eAAe,IACb,GAAK,CAAD,EAEO,OAAO,IAFC,GAEM,CAAC,CAAC,aAAa,EAAE,EAAa,IAAI,CAAC,EAAE,CAAC,GAG/D,GAAQ,GACR,EAAS,MACT,EAAU,MAEV,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAmB,CAAC,KAAK,EAAE,EAAO,WAAW,EAAE,EAAa,EAAE,CAAA,CAAE,CAAE,CAC9E,OAAQ,QACV,GAEA,EAAkB,MAClB,EAAU,iBACV,MAAM,GACR,CAAE,MAAO,EAAK,CACR,aAAe,EAAA,QAAQ,CACzB,CAD2B,CAClB,EAAI,OAAO,EAEpB,EAAS,yBAEb,QAAU,CACR,EAAQ,GACV,EACF,CAEA,MApHA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,KACH,GAEP,EAAG,CAAC,EAAO,EAEX,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,CAAC,EAAc,OACnB,EAAY,EAAa,IAAI,EAE7B,IAAM,EAA+B,CAAC,EAEtC,IAAK,IAAM,KAAK,AADA,EAAa,WAAW,EAAI,EAAE,CACrB,CAAG,CAAC,EAAE,IAAI,CAAC,EAAG,EACvC,EAAa,EACf,EAAG,CAAC,EAAa,EAwGf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,mBAAmB,wBAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,QAAQ,YAAY,yCAErC,EAAS,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCAA0B,IAAgB,KAClE,EAAQ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gCAAwB,IAAe,KAE/D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,uBACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDAA8C,UAC7D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCAA6B,8CAE9C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAS,IAAM,KAAK,IAAgB,SAAU,WAAM,mBAK3E,EACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gBACb,CAAA,EAAA,EAAA,GAAA,EA1Ld,AA0Le,SA1LN,EACP,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,uBACd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,2CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,mDAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,8CAGtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,MAAM,IAAI,CAAC,CAAE,OAAQ,CAAE,GAAG,GAAG,CAAC,CAAC,EAAG,IACjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAc,UAAU,8FACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,2CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,kDAFZ,MAOd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,2CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,gDAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,2CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,MAAM,IAAI,CAAC,CAAE,OAAQ,EAAG,GAAG,GAAG,CAAC,CAAC,EAAG,IAClC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAc,UAAU,6FACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,4CADZ,SAMhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,2CACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,wDAOlC,EA4Ie,CAAA,KAGH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACK,IAAjB,EAAM,MAAM,CACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAwB,cACvC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,QAAS,IAAM,KAAK,IAAQ,SAAU,WAAM,aAIpF,KAEH,EAAM,GAAG,CAAC,AAAC,IACV,IAAM,EAAS,EAAE,EAAE,GAAK,EACxB,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,SAAA,CAEC,KAAK,SACL,QAAS,IAAM,EAAkB,EAAE,EAAE,EACrC,UACE,oEACC,CAAD,CACI,uDACA,uEAAA,CAAuE,WAG7E,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,uDAA+C,EAAE,IAAI,GACpE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCAA8B,AAAC,GAAE,WAAW,EAAI,EAAA,AAAE,EAAE,MAAM,CAAC,oBAXrE,EAAE,EAAE,CAcf,MAGF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,yBACZ,EACC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,YAAY,SAAU,YACpC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,sBAAsB,QAAQ,qBAAY,cAG3D,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,YACH,UAAU,mGACV,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,QAAQ,CAAA,CAAA,EACR,SAAU,OAId,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAAsB,gBACrC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qCACZ,EAAY,GAAG,CAAC,AAAC,IAChB,IAAM,EAAU,EAAQ,CAAS,CAAC,EAAE,IAAI,CAAC,CACzC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,QAAA,CAEC,UAAU,8HAEV,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,WACL,QAAS,EACT,SAAU,AAAC,GACT,EAAa,AAAC,IAAU,CACtB,EADqB,CAClB,CAAI,CACP,CAAC,EAAE,IAAI,CAAC,CAAE,EAAE,MAAM,CAAC,OAAO,CAC5B,CAAC,IAGL,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,+CAAuC,EAAE,IAAI,KAbxD,EAAE,EAAE,CAgBf,QAIJ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,SAAU,WAC7B,EAAO,YAAc,SAExB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,SAAS,QAAQ,UAAU,QAAS,IAAM,KAAK,IAAgB,SAAU,WAAM,iBAMhG,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCAAyB,EAAM,MAAM,CAAG,EAAI,yBAA2B,gDAU1G"}