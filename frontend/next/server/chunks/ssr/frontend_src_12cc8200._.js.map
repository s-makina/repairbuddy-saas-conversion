{"version":3,"sources":["../../../../../frontend/src/components/ui/PageHeader.tsx","../../../../../frontend/src/components/ui/Input.tsx","../../../../../frontend/src/lib/notify.ts","../../../../../frontend/src/components/ui/FormRow.tsx","../../../../../frontend/src/app/app/%5Btenant%5D/devices/new/page.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport function PageHeader({\r\n  title,\r\n  description,\r\n  actions,\r\n  className,\r\n}: {\r\n  title: string;\r\n  description?: string;\r\n  actions?: React.ReactNode;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <div className={cn(\"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between\", className)}>\r\n      <div>\r\n        <h1 className=\"text-xl font-semibold text-[var(--rb-text)]\">{title}</h1>\r\n        {description ? <p className=\"mt-1 text-sm text-zinc-600\">{description}</p> : null}\r\n      </div>\r\n      {actions ? <div className=\"flex items-center gap-2\">{actions}</div> : null}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport function Input({ className, type, ...props }: React.InputHTMLAttributes<HTMLInputElement>) {\r\n  return (\r\n    <input\r\n      type={type}\r\n      className={cn(\r\n        \"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition\",\r\n        \"placeholder:text-zinc-400\",\r\n        \"focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white\",\r\n        \"disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70\",\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n","import { toast } from \"sonner\";\r\n\r\nexport type NotifyStatus = \"success\" | \"error\" | \"info\" | \"warning\" | \"loading\";\r\n\r\ntype NotifyOptions = {\r\n  description?: string;\r\n  id?: string | number;\r\n  duration?: number;\r\n};\r\n\r\nexport const notify = {\r\n  success(message: string, options: NotifyOptions = {}) {\r\n    return toast.success(message, options);\r\n  },\r\n\r\n  error(message: string, options: NotifyOptions = {}) {\r\n    return toast.error(message, options);\r\n  },\r\n\r\n  info(message: string, options: NotifyOptions = {}) {\r\n    return toast.info(message, options);\r\n  },\r\n\r\n  warning(message: string, options: NotifyOptions = {}) {\r\n    return toast.warning(message, options);\r\n  },\r\n\r\n  loading(message: string, options: NotifyOptions = {}) {\r\n    return toast.loading(message, options);\r\n  },\r\n\r\n  dismiss(id?: string | number) {\r\n    toast.dismiss(id);\r\n  },\r\n\r\n  message(status: NotifyStatus, message: string, options: NotifyOptions = {}) {\r\n    if (status === \"success\") return toast.success(message, options);\r\n    if (status === \"error\") return toast.error(message, options);\r\n    if (status === \"warning\") return toast.warning(message, options);\r\n    if (status === \"loading\") return toast.loading(message, options);\r\n    return toast.info(message, options);\r\n  },\r\n};\r\n","import React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\ntype RenderProps = {\r\n  describedBy?: string;\r\n  descriptionId?: string;\r\n  errorId?: string;\r\n  invalid: boolean;\r\n};\r\n\r\nexport function FormRow({\r\n  label,\r\n  fieldId,\r\n  description,\r\n  error,\r\n  required,\r\n  className,\r\n  labelClassName,\r\n  fieldClassName,\r\n  children,\r\n}: {\r\n  label: string;\r\n  fieldId: string;\r\n  description?: string;\r\n  error?: string | null;\r\n  required?: boolean;\r\n  className?: string;\r\n  labelClassName?: string;\r\n  fieldClassName?: string;\r\n  children: React.ReactNode | ((props: RenderProps) => React.ReactNode);\r\n}) {\r\n  const descriptionId = description ? `${fieldId}__description` : undefined;\r\n  const errorId = error ? `${fieldId}__error` : undefined;\r\n\r\n  const describedBy = [descriptionId, errorId].filter(Boolean).join(\" \") || undefined;\r\n  const invalid = Boolean(error);\r\n\r\n  const content = typeof children === \"function\" ? children({ describedBy, descriptionId, errorId, invalid }) : children;\r\n\r\n  return (\r\n    <div className={cn(\"grid gap-1 sm:grid-cols-[220px_1fr] sm:gap-4\", className)}>\r\n      <div className=\"sm:pt-2\">\r\n        <label\r\n          className={cn(\r\n            \"block text-sm font-medium text-[var(--rb-text)]\",\r\n            labelClassName,\r\n          )}\r\n          htmlFor={fieldId}\r\n        >\r\n          {label}\r\n          {required ? <span className=\"text-red-600\"> *</span> : null}\r\n        </label>\r\n      </div>\r\n\r\n      <div className={cn(\"min-w-0\", fieldClassName)}>\r\n        {content}\r\n\r\n        {description ? (\r\n          <div id={descriptionId} className=\"mt-1 text-xs text-zinc-500\">\r\n            {description}\r\n          </div>\r\n        ) : null}\r\n\r\n        {error ? (\r\n          <div id={errorId} className=\"mt-1 text-xs text-red-600\">\r\n            {error}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Input } from \"@/components/ui/Input\";\r\nimport { FormRow } from \"@/components/ui/FormRow\";\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport { notify } from \"@/lib/notify\";\r\n\r\ntype ApiDeviceType = {\r\n  id: number;\r\n  name: string;\r\n  is_active: boolean;\r\n};\r\n\r\ntype ApiDeviceBrand = {\r\n  id: number;\r\n  name: string;\r\n  image_path: string | null;\r\n  is_active: boolean;\r\n};\r\n\r\ntype ApiDevice = {\r\n  id: number;\r\n  model: string;\r\n  device_type_id: number;\r\n  device_brand_id: number;\r\n  parent_device_id: number | null;\r\n  disable_in_booking_form: boolean;\r\n  is_other: boolean;\r\n  is_active: boolean;\r\n};\r\n\r\nexport default function NewDevicePage() {\r\n  const router = useRouter();\r\n  const params = useParams() as { tenant?: string; business?: string };\r\n  const tenantSlug = params.business ?? params.tenant;\r\n\r\n  const [loadingLookups, setLoadingLookups] = useState(true);\r\n  const [busy, setBusy] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const [devices, setDevices] = useState<ApiDevice[]>([]);\r\n  const [brands, setBrands] = useState<ApiDeviceBrand[]>([]);\r\n  const [types, setTypes] = useState<ApiDeviceType[]>([]);\r\n\r\n  const [model, setModel] = useState(\"\");\r\n  const [typeId, setTypeId] = useState<number | null>(null);\r\n  const [brandId, setBrandId] = useState<number | null>(null);\r\n  const [parentId, setParentId] = useState<number | null>(null);\r\n  const [disableInBooking, setDisableInBooking] = useState(false);\r\n  const [isOther, setIsOther] = useState(false);\r\n  const [isActive, setIsActive] = useState(true);\r\n\r\n  const [variationRows, setVariationRows] = useState<string[]>([\"\"]);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function loadLookups() {\r\n      if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n\r\n      setLoadingLookups(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const [devicesRes, brandsRes, typesRes] = await Promise.all([\r\n          apiFetch<{ devices: ApiDevice[] }>(`/api/${tenantSlug}/app/repairbuddy/devices?limit=200`),\r\n          apiFetch<{ device_brands: ApiDeviceBrand[] }>(`/api/${tenantSlug}/app/repairbuddy/device-brands?limit=200`),\r\n          apiFetch<{ device_types: ApiDeviceType[] }>(`/api/${tenantSlug}/app/repairbuddy/device-types?limit=200`),\r\n        ]);\r\n\r\n        if (!alive) return;\r\n\r\n        const resolvedTypes = Array.isArray(typesRes.device_types) ? typesRes.device_types : [];\r\n        const resolvedBrands = Array.isArray(brandsRes.device_brands) ? brandsRes.device_brands : [];\r\n\r\n        setDevices(Array.isArray(devicesRes.devices) ? devicesRes.devices : []);\r\n        setBrands(resolvedBrands);\r\n        setTypes(resolvedTypes);\r\n\r\n        setTypeId(resolvedTypes.length > 0 ? resolvedTypes[0].id : null);\r\n        setBrandId(resolvedBrands.length > 0 ? resolvedBrands[0].id : null);\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setError(e instanceof Error ? e.message : \"Failed to load form data.\");\r\n        setDevices([]);\r\n        setBrands([]);\r\n        setTypes([]);\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoadingLookups(false);\r\n      }\r\n    }\r\n\r\n    void loadLookups();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [tenantSlug]);\r\n\r\n  const parentOptions = useMemo(() => {\r\n    return devices.slice().sort((a, b) => a.model.localeCompare(b.model));\r\n  }, [devices]);\r\n\r\n  async function onSubmit(e: React.FormEvent) {\r\n    e.preventDefault();\r\n    if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n    if (busy) return;\r\n\r\n    setBusy(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const trimmedModel = model.trim();\r\n      if (trimmedModel.length === 0) {\r\n        setError(\"Model is required.\");\r\n        return;\r\n      }\r\n\r\n      if (typeof typeId !== \"number\") {\r\n        setError(\"Device type is required.\");\r\n        return;\r\n      }\r\n\r\n      if (typeof brandId !== \"number\") {\r\n        setError(\"Device brand is required.\");\r\n        return;\r\n      }\r\n\r\n      const basePayload = {\r\n        model: trimmedModel,\r\n        device_type_id: typeId,\r\n        device_brand_id: brandId,\r\n        parent_device_id: parentId,\r\n        disable_in_booking_form: disableInBooking,\r\n        is_other: isOther,\r\n        is_active: isActive,\r\n      };\r\n\r\n      if (typeof parentId === \"number\") {\r\n        await apiFetch<{ device: ApiDevice }>(`/api/${tenantSlug}/app/repairbuddy/devices`, {\r\n          method: \"POST\",\r\n          body: basePayload,\r\n        });\r\n\r\n        notify.success(\"Device created.\");\r\n        router.replace(`/app/${tenantSlug}/devices`);\r\n        return;\r\n      }\r\n\r\n      const baseRes = await apiFetch<{ device: ApiDevice }>(`/api/${tenantSlug}/app/repairbuddy/devices`, {\r\n        method: \"POST\",\r\n        body: basePayload,\r\n      });\r\n\r\n      const baseId = baseRes.device?.id;\r\n\r\n      if (typeof baseId !== \"number\") {\r\n        notify.success(\"Device created.\");\r\n        router.replace(`/app/${tenantSlug}/devices`);\r\n        return;\r\n      }\r\n\r\n      const variations = variationRows\r\n        .map((v) => v.trim())\r\n        .filter((v) => v.length > 0);\r\n\r\n      const uniqueVariations = Array.from(new Set(variations));\r\n\r\n      if (uniqueVariations.length > 0) {\r\n        for (const variation of uniqueVariations) {\r\n          await apiFetch<{ device: ApiDevice }>(`/api/${tenantSlug}/app/repairbuddy/devices`, {\r\n            method: \"POST\",\r\n            body: {\r\n              ...basePayload,\r\n              model: `${trimmedModel} - ${variation}`,\r\n              parent_device_id: baseId,\r\n            },\r\n          });\r\n        }\r\n\r\n        notify.success(\"Device and variations created.\");\r\n      } else {\r\n        notify.success(\"Device created.\");\r\n      }\r\n\r\n      router.replace(`/app/${tenantSlug}/devices`);\r\n    } catch (e) {\r\n      if (e instanceof ApiError) {\r\n        setError(e.message);\r\n      } else {\r\n        setError(\"Failed to create device.\");\r\n      }\r\n    } finally {\r\n      setBusy(false);\r\n    }\r\n  }\r\n\r\n  const disabled = busy || loadingLookups;\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"devices.manage\">\r\n      <div className=\"space-y-6\">\r\n        <PageHeader\r\n          title=\"New device\"\r\n          description=\"Create a new device model (optionally with variations).\"\r\n          actions={\r\n            <>\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                onClick={() => {\r\n                  if (typeof tenantSlug !== \"string\" || tenantSlug.length === 0) return;\r\n                  router.push(`/app/${tenantSlug}/devices`);\r\n                }}\r\n                disabled={busy}\r\n              >\r\n                Cancel\r\n              </Button>\r\n              <Button variant=\"primary\" size=\"sm\" type=\"submit\" form=\"rb_device_new_form\" disabled={disabled}>\r\n                {busy ? \"Saving...\" : \"Save\"}\r\n              </Button>\r\n            </>\r\n          }\r\n        />\r\n\r\n        {error ? <div className=\"text-sm text-red-600\">{error}</div> : null}\r\n\r\n        <Card className=\"shadow-none\">\r\n          <CardContent className=\"pt-5\">\r\n            <form id=\"rb_device_new_form\" className=\"space-y-4\" onSubmit={onSubmit}>\r\n              <FormRow label=\"Model\" fieldId=\"device_model\" required>\r\n                <Input id=\"device_model\" value={model} onChange={(e) => setModel(e.target.value)} disabled={disabled} />\r\n              </FormRow>\r\n\r\n              <FormRow label=\"Device type\" fieldId=\"device_type\" required>\r\n                <select\r\n                  id=\"device_type\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                  value={typeId ?? \"\"}\r\n                  onChange={(e) => {\r\n                    const raw = e.target.value;\r\n                    if (!raw) {\r\n                      setTypeId(null);\r\n                      return;\r\n                    }\r\n                    const n = Number(raw);\r\n                    setTypeId(Number.isFinite(n) ? n : null);\r\n                  }}\r\n                  disabled={disabled}\r\n                >\r\n                  {types\r\n                    .slice()\r\n                    .sort((a, b) => a.name.localeCompare(b.name))\r\n                    .map((t) => (\r\n                      <option key={t.id} value={t.id}>\r\n                        {t.name}\r\n                      </option>\r\n                    ))}\r\n                </select>\r\n              </FormRow>\r\n\r\n              <FormRow label=\"Device brand\" fieldId=\"device_brand\" required>\r\n                <select\r\n                  id=\"device_brand\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                  value={brandId ?? \"\"}\r\n                  onChange={(e) => {\r\n                    const raw = e.target.value;\r\n                    if (!raw) {\r\n                      setBrandId(null);\r\n                      return;\r\n                    }\r\n                    const n = Number(raw);\r\n                    setBrandId(Number.isFinite(n) ? n : null);\r\n                  }}\r\n                  disabled={disabled}\r\n                >\r\n                  {brands\r\n                    .slice()\r\n                    .sort((a, b) => a.name.localeCompare(b.name))\r\n                    .map((b) => (\r\n                      <option key={b.id} value={b.id}>\r\n                        {b.name}\r\n                      </option>\r\n                    ))}\r\n                </select>\r\n              </FormRow>\r\n\r\n              <FormRow label=\"Variation base\" fieldId=\"device_parent\" description=\"Leave empty to create a base device.\">\r\n                <select\r\n                  id=\"device_parent\"\r\n                  className=\"w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)]\"\r\n                  value={parentId ?? \"\"}\r\n                  onChange={(e) => {\r\n                    const raw = e.target.value;\r\n                    if (!raw) {\r\n                      setParentId(null);\r\n                      return;\r\n                    }\r\n                    const n = Number(raw);\r\n                    setParentId(Number.isFinite(n) ? n : null);\r\n                    setVariationRows([\"\"]);\r\n                  }}\r\n                  disabled={disabled}\r\n                >\r\n                  <option value=\"\">(none)</option>\r\n                  {parentOptions.map((d) => (\r\n                    <option key={d.id} value={d.id}>\r\n                      {d.model}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </FormRow>\r\n\r\n              {parentId === null ? (\r\n                <FormRow\r\n                  label=\"Variations\"\r\n                  fieldId=\"device_variations_0\"\r\n                  description='Each entry becomes a child device. Example: \"Black\", \"64GB\", \"Silver\".'\r\n                >\r\n                  <div className=\"space-y-2\">\r\n                    {variationRows.map((value, index) => {\r\n                      const id = `device_variations_${index}`;\r\n                      return (\r\n                        <div key={id} className=\"flex items-center gap-2\">\r\n                          <Input\r\n                            id={id}\r\n                            value={value}\r\n                            onChange={(e) => {\r\n                              const next = e.target.value;\r\n                              setVariationRows((prev) => prev.map((v, i) => (i === index ? next : v)));\r\n                            }}\r\n                            disabled={disabled}\r\n                          />\r\n                          {variationRows.length > 1 ? (\r\n                            <Button\r\n                              type=\"button\"\r\n                              variant=\"outline\"\r\n                              size=\"sm\"\r\n                              onClick={() => {\r\n                                setVariationRows((prev) => prev.filter((_, i) => i !== index));\r\n                              }}\r\n                              disabled={disabled}\r\n                            >\r\n                              Remove\r\n                            </Button>\r\n                          ) : null}\r\n                        </div>\r\n                      );\r\n                    })}\r\n\r\n                    <div>\r\n                      <Button\r\n                        type=\"button\"\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          setVariationRows((prev) => [...prev, \"\"]);\r\n                        }}\r\n                        disabled={disabled}\r\n                      >\r\n                        Add variation\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </FormRow>\r\n              ) : null}\r\n\r\n              <div className=\"grid gap-1 sm:grid-cols-[220px_1fr] sm:gap-4\">\r\n                <div className=\"sm:pt-2\">\r\n                  <span className=\"block text-sm font-medium text-[var(--rb-text)]\">Options</span>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <label className=\"flex items-center gap-2 text-sm\">\r\n                    <input type=\"checkbox\" checked={disableInBooking} onChange={(e) => setDisableInBooking(e.target.checked)} disabled={disabled} />\r\n                    Disable in booking form\r\n                  </label>\r\n\r\n                  <label className=\"flex items-center gap-2 text-sm\">\r\n                    <input type=\"checkbox\" checked={isOther} onChange={(e) => setIsOther(e.target.checked)} disabled={disabled} />\r\n                    Is {\"\\\"Other\\\"\"} device\r\n                  </label>\r\n\r\n                  <label className=\"flex items-center gap-2 text-sm\">\r\n                    <input type=\"checkbox\" checked={isActive} onChange={(e) => setIsActive(e.target.checked)} disabled={disabled} />\r\n                    Active\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}