module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},1395,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactServerDOMTurbopackClient},4600,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 py-4",a),...d})}function f({className:a,...d}){return(0,b.jsx)("h3",{className:(0,c.cn)("text-sm font-semibold text-[var(--rb-text)]",a),...d})}function g({className:a,...d}){return(0,b.jsx)("p",{className:(0,c.cn)("mt-1 text-sm text-zinc-600",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 pb-5",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},7160,a=>{"use strict";function b(...a){return a.filter(Boolean).join(" ")}a.s(["cn",()=>b])},87973,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},97867,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);function e({className:a,variant:e="primary",size:f="md",asChild:g=!1,type:h="button",disabled:i,onClick:j,children:k,...l}){let m=(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-[var(--rb-radius-sm)] text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",{sm:"h-8 px-3",md:"h-10 px-4",lg:"h-11 px-5"}[f],{primary:"bg-[var(--rb-blue)] text-white hover:opacity-90",secondary:"bg-[var(--rb-orange)] text-white hover:opacity-90",outline:"border border-[var(--rb-border)] bg-white text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]",ghost:"bg-transparent text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]"}[e],i?"pointer-events-none opacity-50":"",a);if(g){let a=c.default.Children.only(k);return c.default.isValidElement(a)?c.default.cloneElement(a,{className:(0,d.cn)(m,a.props?.className),"aria-disabled":!!i||void 0,tabIndex:i?-1:a.props?.tabIndex,onClick:b=>{if(i){b.preventDefault(),b.stopPropagation();return}j?.(b),a.props?.onClick?.(b)}}):null}return(0,b.jsx)("button",{className:m,type:h,disabled:i,onClick:j,...l,children:k})}a.s(["Button",()=>e])},39693,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(45056);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},77038,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},74601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},29054,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,className:(0,c.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",a),...e})}a.s(["Input",()=>d])},89450,a=>{"use strict";var b=a.i(57850),c=a.i(59843),d=a.i(17933);function e({badge:a,actions:e,centerContent:f=!1,children:g}){return(0,b.jsxs)("div",{className:"flex min-h-screen flex-col text-[var(--rb-text)] [background:radial-gradient(1200px_circle_at_20%_0%,color-mix(in_srgb,var(--rb-blue),white_88%)_0%,transparent_55%),radial-gradient(900px_circle_at_80%_15%,color-mix(in_srgb,var(--rb-orange),white_86%)_0%,transparent_60%),var(--rb-surface)]",children:[(0,b.jsx)("header",{className:"sticky top-0 z-20 border-b border-[var(--rb-border)] bg-white/70 backdrop-blur",children:(0,b.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(c.default,{href:"/",className:"font-semibold tracking-tight text-[var(--rb-text)]",children:"99smartx"}),a?(0,b.jsx)(d.Badge,{variant:"info",className:"hidden sm:inline-flex",children:a}):null]}),(0,b.jsxs)("nav",{className:"hidden items-center gap-6 text-sm text-zinc-600 md:flex",children:[(0,b.jsx)(c.default,{href:"/#features",className:"hover:text-[var(--rb-text)]",children:"Features"}),(0,b.jsx)(c.default,{href:"/#pricing",className:"hover:text-[var(--rb-text)]",children:"Pricing"}),(0,b.jsx)(c.default,{href:"/#faq",className:"hover:text-[var(--rb-text)]",children:"FAQ"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:e})]})}),(0,b.jsx)("main",{className:f?"flex flex-1 items-center":"flex-1",children:f?(0,b.jsx)("div",{className:"w-full py-10",children:g}):g}),(0,b.jsx)("footer",{className:(f?"border-t border-[var(--rb-border)] pt-8":"mt-12 border-t border-[var(--rb-border)] pt-8")+" text-xs text-zinc-600",children:(0,b.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-col gap-2 px-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{children:["Â© ",new Date().getFullYear()," 99smartx"]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(c.default,{href:"/login",className:"hover:text-[var(--rb-text)]",children:"Login"}),(0,b.jsx)(c.default,{href:"/register",className:"hover:text-[var(--rb-text)]",children:"Register"})]})]})})]})}a.s(["PublicPageShell",()=>e])},73857,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(59843),e=a.i(93609),f=a.i(89450),g=a.i(4600),h=a.i(75385),i=a.i(97867),j=a.i(29054),k=a.i(17933),l=a.i(34075);function m(){var a;let m=(0,e.useRouter)(),n=(0,e.useParams)().tenant,[o,p]=c.default.useState(""),[q,r]=c.default.useState(!1),[s,t]=c.default.useState(null),[u,v]=c.default.useState(null),[w,x]=c.default.useState(null),[y,z]=c.default.useState(""),[A,B]=c.default.useState(!1),[C,D]=c.default.useState(null),[E,F]=c.default.useState(null),[G,H]=c.default.useState(0),I=c.default.useRef(""),[J,K]=c.default.useState(!1),[L,M]=c.default.useState(null),[N,O]=c.default.useState(null),P="string"==typeof n?n:"";async function Q(a){let b=a.trim();if(!b){t("Case number is required."),v(null);return}I.current=b,r(!0),t(null);try{if(!P)throw Error("Tenant slug is required in the URL.");let a=await (0,l.apiFetch)(`/api/t/${P}/status/lookup`,{method:"POST",body:{caseNumber:b},token:null,impersonationSessionId:null}),c="string"==typeof a?.entity_type?a.entity_type:"job",d=a?.job??null,e=a?.estimate??null;if(v("job"===c?d:null),x("estimate"===c?e:null),d?.case_number??e?.case_number,!(d?.id??e?.id))throw Error("No case found for that case number.");z(""),D(null),F(null)}catch(a){a instanceof l.ApiError&&404===a.status?t("No case found for that case number."):t(a instanceof Error?a.message:"Failed to load status."),v(null),x(null)}finally{r(!1)}}async function R(){D(null),F(null);let a=y.trim();if(!a)return void D("Message is required.");if(!u)return void D("Load a case first.");if(!P)return void D("Tenant slug is required in the URL.");B(!0);try{await (0,l.apiFetch)(`/api/t/${P}/status/${encodeURIComponent(u.case_number)}/message`,{method:"POST",body:{message:a},token:null,impersonationSessionId:null}),z(""),F("Message sent. We'll get back to you soon.")}catch(a){a instanceof l.ApiError?D(a.message):D(a instanceof Error?a.message:"Failed to send message.")}finally{B(!1)}}return c.default.useEffect(()=>{I.current&&Q(I.current)},[G]),c.default.useEffect(()=>{},[o,J,P]),(0,b.jsx)(f.PublicPageShell,{badge:"RepairBuddy",actions:P?(0,b.jsx)(d.default,{href:`/t/${P}/portal`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Customer portal"}):null,centerContent:!0,children:(0,b.jsx)("div",{className:"mx-auto w-full max-w-3xl px-4",children:(0,b.jsx)(g.Card,{className:"shadow-none",children:(0,b.jsx)(g.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xl font-semibold text-[var(--rb-text)]",children:"Status Check"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Enter your case number to see the latest updates."})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,b.jsx)(j.Input,{value:o,onChange:a=>p(a.target.value),placeholder:"e.g. RB-1001",disabled:q,onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),Q(o))}}),(0,b.jsx)(i.Button,{onClick:()=>void Q(o),disabled:q||!P,children:q?"Checking...":"Check"})]}),P?null:(0,b.jsx)(h.Alert,{variant:"warning",title:"Missing tenant",children:"Tenant slug is required in the URL."}),s?(0,b.jsx)(h.Alert,{variant:"danger",title:"Could not load status",children:s}):null,J?(0,b.jsx)(h.Alert,{variant:"info",title:"Processing estimate",children:"Please wait..."}):null,N?(0,b.jsx)(h.Alert,{variant:"success",title:"Estimate updated",children:N}):null,L?(0,b.jsx)(h.Alert,{variant:"danger",title:"Could not update estimate",children:L}):null,u?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:["Case ",u.case_number]}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:u.title}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:["Last updated: ",new Date(u.updated_at).toLocaleString()]})]}),(0,b.jsx)(k.Badge,{variant:"delivered"===(a=u.status)||"completed"===a?"success":"ready"===a?"warning":"cancelled"===a?"danger":"in_process"===a?"info":"default",children:u.status_label??u.status.replace(/_/g," ")})]}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{P&&m.push(`/t/${P}/portal`)},children:"Go to portal"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>H(a=>a+1),children:"Refresh"})]})]}),(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Send a message to the shop"}),(0,b.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Reference: ",u.case_number]}),E?(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)(h.Alert,{variant:"success",title:"Message sent",children:E})}):null,C?(0,b.jsx)("div",{className:"mt-3",children:(0,b.jsx)(h.Alert,{variant:"danger",title:"Could not send message",children:C})}):null,(0,b.jsx)("textarea",{value:y,onChange:a=>z(a.target.value),placeholder:"Write your message...",className:"mt-3 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",rows:4,disabled:A}),(0,b.jsx)("div",{className:"mt-3 flex items-center justify-end",children:(0,b.jsx)(i.Button,{onClick:()=>void R(),disabled:A||0===y.trim().length,children:A?"Sending...":"Send message"})})]})]}):null,w?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:["Case ",w.case_number]}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:w.title}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:["Last updated: ",new Date(w.updated_at).toLocaleString()]})]}),(0,b.jsx)(k.Badge,{variant:"warning",children:w.status_label??w.status.replace(/_/g," ")})]}),(0,b.jsxs)("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{P&&m.push(`/t/${P}/portal/estimates`)},children:"View estimate"}),(0,b.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>H(a=>a+1),children:"Refresh"})]})]}),(0,b.jsx)(h.Alert,{variant:"info",title:"Estimate case",children:"This case currently has an estimate (quote). If you have questions, you can approve/reject via the links in your email or from the portal."})]}):null]})})})})})}a.s(["default",()=>m])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e3f241f4._.js.map