module.exports=[75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},26606,a=>{"use strict";var b=a.i(57850),c=a.i(7160),d=a.i(4600);function e({className:a,"aria-hidden":d=!0,...e}){return(0,b.jsx)("div",{"aria-hidden":d,className:(0,c.cn)("rb-skeleton",a),...e})}function f({lines:a=3,className:f}){let g=Math.max(1,Math.min(a,12));return(0,b.jsx)(d.Card,{className:(0,c.cn)("overflow-hidden",f),children:(0,b.jsxs)(d.CardContent,{className:"space-y-3 pt-5",children:[(0,b.jsx)(e,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:g}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",d===g-1?"w-3/5":"w-full")},d))]})})}function g({rows:a=6,columns:d=5,className:f}){let g=Math.max(1,Math.min(a,20)),h=Math.max(1,Math.min(d,10));return(0,b.jsxs)("div",{className:(0,c.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",f),children:[(0,b.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,c)=>(0,b.jsx)(e,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},c))})}),(0,b.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:g}).map((a,d)=>(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===d?"w-3/4":"w-full")},d))},d))})})]})}a.s(["CardSkeleton",()=>f,"Skeleton",()=>e,"TableSkeleton",()=>g])},73016,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);let e=(0,c.createContext)(null);function f(){let a=(0,c.useContext)(e);if(!a)throw Error("Tabs components must be used within <Tabs />");return a}function g({value:a,defaultValue:f,onValueChange:g,className:h,children:i}){let j=(0,c.useId)(),[k,l]=(0,c.useState)(f??""),m="string"==typeof a?a:k,n=(0,c.useCallback)(b=>{b&&(g&&g(b),"string"!=typeof a&&l(b))},[g,a]),o=(0,c.useMemo)(()=>({value:m,setValue:n,baseId:j}),[j,m,n]);return(0,b.jsx)(e.Provider,{value:o,children:(0,b.jsx)("div",{className:(0,d.cn)("space-y-4",h),children:i})})}function h({className:a,...c}){return(0,b.jsx)("div",{className:(0,d.cn)("inline-flex items-center gap-1 rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-1 shadow-[var(--rb-shadow)]",a),role:"tablist",...c})}function i({value:a,className:c,...e}){let g=f(),h=g.value===a,{onClick:i,...j}=e;return(0,b.jsx)("button",{type:"button",role:"tab","aria-selected":h,"aria-controls":`${g.baseId}-panel-${a}`,id:`${g.baseId}-tab-${a}`,onClick:b=>{g.setValue(a),i?.(b)},className:(0,d.cn)("h-9 rounded-[var(--rb-radius-sm)] px-3 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",h?"bg-[var(--rb-surface-muted)] text-[var(--rb-text)]":"text-zinc-600 hover:bg-[var(--rb-surface-muted)]",c),...j})}function j({value:a,className:c,children:e,...g}){let h=f();return h.value!==a?null:(0,b.jsx)("div",{role:"tabpanel",id:`${h.baseId}-panel-${a}`,"aria-labelledby":`${h.baseId}-tab-${a}`,className:(0,d.cn)(c),...g,children:e})}a.s(["Tabs",()=>g,"TabsContent",()=>j,"TabsList",()=>h,"TabsTrigger",()=>i])},32145,a=>{"use strict";var b=a.i(57850),c=a.i(59843),d=a.i(7160),e=a.i(648),f=a.i(73016);function g({breadcrumb:a,backHref:g,backLabel:h="Back",title:i,description:j,actions:k,defaultTab:l="overview",tabs:m,className:n}){return(0,b.jsxs)("div",{className:(0,d.cn)("space-y-0 space-x-2",n),children:[(0,b.jsx)("div",{className:"space-y-2",children:g?(0,b.jsx)("div",{children:(0,b.jsx)(c.default,{href:g,className:"text-sm text-zinc-600 hover:text-[var(--rb-text)]",children:h})}):null}),(0,b.jsx)(e.PageHeader,{title:i,description:j,actions:k}),(0,b.jsxs)(f.Tabs,{defaultValue:l,children:[(0,b.jsxs)(f.TabsList,{children:[void 0!==m.overview?(0,b.jsx)(f.TabsTrigger,{value:"overview",children:"Overview"}):null,void 0!==m.devices?(0,b.jsx)(f.TabsTrigger,{value:"devices",children:"Devices"}):null,void 0!==m.timeline?(0,b.jsx)(f.TabsTrigger,{value:"timeline",children:"Timeline"}):null,void 0!==m.messages?(0,b.jsx)(f.TabsTrigger,{value:"messages",children:"Messages"}):null,void 0!==m.financial?(0,b.jsx)(f.TabsTrigger,{value:"financial",children:"Financial"}):null,void 0!==m.print?(0,b.jsx)(f.TabsTrigger,{value:"print",children:"Print"}):null]}),void 0!==m.overview?(0,b.jsx)(f.TabsContent,{value:"overview",children:m.overview}):null,void 0!==m.devices?(0,b.jsx)(f.TabsContent,{value:"devices",children:m.devices}):null,void 0!==m.timeline?(0,b.jsx)(f.TabsContent,{value:"timeline",children:m.timeline}):null,void 0!==m.messages?(0,b.jsx)(f.TabsContent,{value:"messages",children:m.messages}):null,void 0!==m.financial?(0,b.jsx)(f.TabsContent,{value:"financial",children:m.financial}):null,void 0!==m.print?(0,b.jsx)(f.TabsContent,{value:"print",children:m.print}):null]})]})}a.s(["DetailPageShell",()=>g])},10511,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(75385),f=a.i(17933),g=a.i(97867),h=a.i(4600),i=a.i(32145),j=a.i(26606),k=a.i(34075);function l(){let a=(0,d.useRouter)(),l=(0,d.useParams)(),m=l.business??l.tenant,n=l.clientId,[o,p]=c.default.useState(!0),[q,r]=c.default.useState(null),[s,t]=c.default.useState(null),[u,v]=c.default.useState([]);c.default.useEffect(()=>{let b=!0;return async function(){try{if(p(!0),r(null),!n){r("Client ID is missing."),t(null);return}if("string"!=typeof m||0===m.length)throw Error("Business is missing.");let[a,c]=await Promise.all([(0,k.apiFetch)(`/api/${m}/app/clients/${n}`),(0,k.apiFetch)(`/api/${m}/app/clients/${n}/jobs`)]);if(!b)return;t(a.client??null),v(Array.isArray(c.jobs)?c.jobs:[])}catch(c){if(!b)return;if(c instanceof k.ApiError&&428===c.status&&"string"==typeof m&&m.length>0){let b=`/app/${m}/clients/${n}`;a.replace(`/app/${m}/branches/select?next=${encodeURIComponent(b)}`);return}r(c instanceof Error?c.message:"Failed to load client."),t(null)}finally{if(!b)return;p(!1)}}(),()=>{b=!1}},[n,a,m]);let w=c.default.useMemo(()=>u.slice().sort((a,b)=>a.updated_at<b.updated_at?1:-1),[u]),x=c.default.useMemo(()=>{if(!s)return"—";let a=[s.address_line1,s.address_line2,[s.address_city,s.address_state].filter(Boolean).join(", "),s.address_postal_code,s.address_country].map(a=>"string"==typeof a?a.trim():"").filter(Boolean);return a.length>0?a.join("\n"):"—"},[s]);return(0,b.jsxs)("div",{className:"space-y-6",children:[q?(0,b.jsx)(e.Alert,{variant:"danger",title:"Could not load customer",children:q}):null,o?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Skeleton,{className:"h-4 w-48 rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(j.Skeleton,{className:"h-9 w-72 rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,b.jsx)(j.CardSkeleton,{lines:5,className:"shadow-none"}),(0,b.jsx)(j.CardSkeleton,{lines:5,className:"shadow-none"}),(0,b.jsx)(j.CardSkeleton,{lines:5,className:"shadow-none"})]}),(0,b.jsx)(j.CardSkeleton,{lines:7,className:"shadow-none"})]}):null,s&&!o?(0,b.jsx)(i.DetailPageShell,{title:s.name,description:s.email??s.phone??"Customer details",actions:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{a.back()},children:"Back"}),(0,b.jsx)(g.Button,{variant:"primary",size:"sm",onClick:()=>{"string"==typeof m&&0!==m.length&&a.push(`/app/${m}/clients/${s.id}/edit`)},children:"Edit"})]}),tabs:{overview:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)(f.Badge,{variant:"info",children:"Customer"}),(0,b.jsxs)(f.Badge,{variant:"default",children:["ID: ",s.id]}),(0,b.jsxs)(f.Badge,{variant:s.jobs_count>0?"info":"default",children:["Jobs: ",s.jobs_count??0]})]}),(0,b.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Contact"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Email"}),s.email?(0,b.jsx)("a",{className:"mt-1 block text-sm text-[var(--rb-blue)] hover:underline",href:`mailto:${s.email}`,children:s.email}):(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Phone"}),s.phone?(0,b.jsx)("a",{className:"mt-1 block text-sm text-[var(--rb-blue)] hover:underline",href:`tel:${s.phone}`,children:s.phone}):(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:"—"})]})]})]}),(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Company"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Company name"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:s.company??"—"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Tax ID"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:s.tax_id??"—"})]})]})]}),(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Meta"})}),(0,b.jsxs)(h.CardContent,{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Created"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:new Date(s.created_at).toLocaleString()})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Last update"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:w[0]?.updated_at?new Date(w[0].updated_at).toLocaleString():"—"})]})]})]})]}),(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Address"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"whitespace-pre-wrap text-sm text-zinc-700",children:x})})]})]}),timeline:(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsx)(h.CardTitle,{children:"Jobs"}),(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:[w.length," total"]})]})}),(0,b.jsxs)(h.CardContent,{children:[0===w.length?(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"No jobs for this customer."}):null,(0,b.jsx)("div",{className:"mt-2 divide-y divide-[var(--rb-border)] rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:w.map(c=>{let d;return(0,b.jsxs)("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:c.case_number}),c.status?(0,b.jsx)(f.Badge,{variant:(d=(c.status??"").toLowerCase()).includes("done")||d.includes("complete")||d.includes("closed")||d.includes("paid")?"success":d.includes("cancel")||d.includes("failed")||d.includes("declin")?"danger":d.includes("hold")||d.includes("await")||d.includes("pending")||d.includes("quote")?"warning":d.includes("progress")||d.includes("work")||d.includes("repair")||d.includes("open")?"info":"default",children:c.status}):null]}),(0,b.jsx)("div",{className:"mt-1 truncate text-sm text-zinc-600",children:c.title}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:["Updated: ",new Date(c.updated_at).toLocaleString()]})]}),(0,b.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{"string"==typeof m&&0!==m.length&&a.push(`/app/${m}/jobs/${c.id}`)},children:"View"})})]},c.id)})})]})]}),messages:(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Devices"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"mt-4 space-y-3",children:(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Customer devices will appear here after EPIC 5 (devices + customer devices) is enabled."})})})]}),financial:(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Financial"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Customer-level financials are wired in later phases."})})]}),print:(0,b.jsxs)(h.Card,{className:"shadow-none",children:[(0,b.jsx)(h.CardHeader,{children:(0,b.jsx)(h.CardTitle,{children:"Print"})}),(0,b.jsx)(h.CardContent,{children:(0,b.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Printable customer summaries are implemented in later phases."})})]})}}):null]})}a.s(["default",()=>l])}];

//# sourceMappingURL=frontend_src_4609b17c._.js.map