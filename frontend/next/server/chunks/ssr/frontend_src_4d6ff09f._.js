module.exports=[648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},26606,a=>{"use strict";var b=a.i(57850),c=a.i(7160),d=a.i(4600);function e({className:a,"aria-hidden":d=!0,...e}){return(0,b.jsx)("div",{"aria-hidden":d,className:(0,c.cn)("rb-skeleton",a),...e})}function f({lines:a=3,className:f}){let g=Math.max(1,Math.min(a,12));return(0,b.jsx)(d.Card,{className:(0,c.cn)("overflow-hidden",f),children:(0,b.jsxs)(d.CardContent,{className:"space-y-3 pt-5",children:[(0,b.jsx)(e,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:g}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",d===g-1?"w-3/5":"w-full")},d))]})})}function g({rows:a=6,columns:d=5,className:f}){let g=Math.max(1,Math.min(a,20)),h=Math.max(1,Math.min(d,10));return(0,b.jsxs)("div",{className:(0,c.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",f),children:[(0,b.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,c)=>(0,b.jsx)(e,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},c))})}),(0,b.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,b.jsx)("div",{className:"space-y-3",children:Array.from({length:g}).map((a,d)=>(0,b.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${h}, minmax(0, 1fr))`},children:Array.from({length:h}).map((a,d)=>(0,b.jsx)(e,{className:(0,c.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===d?"w-3/4":"w-full")},d))},d))})})]})}a.s(["CardSkeleton",()=>f,"Skeleton",()=>e,"TableSkeleton",()=>g])},54177,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160),e=a.i(97867),f=a.i(46036),g=a.i(26606),h=a.i(34075);function i({title:a,data:i,columns:j,getRowId:k,loading:l=!1,emptyMessage:m="No data.",search:n,filters:o=[],pageSizeOptions:p=[10,25,50],initialPageSize:q=10,server:r,exportConfig:s,columnVisibilityKey:t,onRowClick:u,className:v}){let[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(0),[A,B]=(0,c.useState)(q),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)(0),I=(0,c.useId)(),J=!!r,K=J?r.query:w,L=J?r.onQueryChange:x,M=J?r.pageIndex:y,N=J?r.onPageIndexChange:z,O=J?r.pageSize:A,P=J?r.onPageSizeChange:B,Q=J?r.sort??null:null,R=J?r.onSortChange:void 0,S=(0,c.useMemo)(()=>{let a=Array.isArray(j)?j:[];{let b=a.filter(a=>!a.hiddenByDefault);return b.length>0?b:a.slice(0,1)}},[t,j,G]),T=(0,c.useMemo)(()=>{if(J)return Array.isArray(i)?i:[];let a=K.trim().toLowerCase();return(Array.isArray(i)?i:[]).filter(b=>{if(n&&n.getSearchText&&a.length>0&&!n.getSearchText(b).toLowerCase().includes(a))return!1;for(let a of o)if(a.predicate&&!a.predicate(b,a.value))return!1;return!0})},[i,o,J,K,n]),U=J?r.totalRows:T.length,V=Math.max(1,Math.ceil(U/O)),W=Math.min(M,V-1),X=Math.max(1,Math.min(8,O||10)),Y=(0,c.useMemo)(()=>{if(J)return T;let a=W*O,b=a+O;return T.slice(a,b)},[W,T,J,O]),Z=W>0,$=W<V-1,_=!!n||o.length>0||!!s||!!t;function aa(a,b){}async function ab(a){if(s&&!C){F(null),D(a);try{let b=new URLSearchParams;for(let a of(K.trim().length>0&&b.set("q",K.trim()),o)){let c=a.value;null!=c&&0!==String(c).length&&b.set(a.id,String(c))}if(J&&Q?.id&&Q?.dir&&(b.set("sort",Q.id),b.set("dir",Q.dir)),b.set("format",a),s.extraQuery)for(let[a,c]of Object.entries(s.extraQuery))null!=c&&b.set(a,String(c));let c=`${s.url}${s.url.includes("?")?"&":"?"}${b.toString()}`,d=s.filename?.({format:a});await (0,h.apiDownload)(c,{filename:d})}catch(a){F(a instanceof Error?a.message:"Export failed.")}finally{D(null)}}}return(0,b.jsxs)("div",{className:(0,d.cn)("space-y-3",v),children:[a?(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:a}):null,_?(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[n?(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_search`,children:"Search"}),(0,b.jsx)("input",{id:`${I}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:K,onChange:a=>{L(a.target.value),N(0)},placeholder:n.placeholder??"Search..."})]}):null,o.map(a=>(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_filter_${a.id}`,children:a.label}),(0,b.jsx)("select",{id:`${I}_datatable_filter_${a.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(a.value),onChange:b=>{let c=a.options.find(a=>String(a.value)===b.target.value),d=c?c.value:b.target.value;a.onChange(d),N(0)},children:a.options.map(a=>(0,b.jsx)("option",{value:String(a.value),children:a.label},String(a.value)))})]},a.id))]}),(0,b.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:[U," result(s)"]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[s?(0,b.jsx)(f.DropdownMenu,{align:"right",trigger:({toggle:a})=>(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:a,disabled:!!C,children:C?"Exporting...":"Export"}),children:({close:a})=>{let c=s.formats??["csv","xlsx","pdf"];return(0,b.jsx)(b.Fragment,{children:c.map(c=>(0,b.jsxs)(f.DropdownMenuItem,{onSelect:()=>{a(),ab(c)},disabled:!!C,children:["Export ",c.toUpperCase()]},c))})}}):null,t?(0,b.jsx)(f.DropdownMenu,{align:"right",trigger:({toggle:a})=>(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:a,children:"Columns"}),children:({close:a})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.DropdownMenuItem,{onSelect:()=>{for(let b of(a(),j))aa(b.id,!0)},children:"Show all"}),(0,b.jsx)(f.DropdownMenuItem,{onSelect:()=>{for(let b of(a(),j))aa(b.id,!b.hiddenByDefault)},children:"Reset defaults"}),(0,b.jsx)(f.DropdownMenuSeparator,{}),j.map(a=>{let c=S.some(b=>b.id===a.id);return(0,b.jsxs)(f.DropdownMenuItem,{onSelect:()=>{aa(a.id,!c)},children:[(0,b.jsx)("span",{className:"mr-2 inline-block w-4",children:c?"✓":""}),"string"==typeof a.header?a.header:a.id]},a.id)})]})}):null]})]})]}):null,E?(0,b.jsx)("div",{className:"text-sm text-red-600",children:E}):null,(0,b.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,b.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,b.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,b.jsx)("tr",{children:S.map(a=>(0,b.jsx)("th",{className:(0,d.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",a.headerClassName),children:J&&a.sortId&&R?(0,b.jsxs)("button",{type:"button",onClick:()=>(function(a){if(J&&a.sortId&&R){if(!Q||Q.id!==a.sortId){R({id:a.sortId,dir:"asc"}),N(0);return}if("asc"===Q.dir){R({id:a.sortId,dir:"desc"}),N(0);return}R(null),N(0)}})(a),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,b.jsx)("span",{children:a.header}),J&&a.sortId?Q&&Q.id===a.sortId?"asc"===Q.dir?(0,b.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,b.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,b.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):a.header},a.id))})}),(0,b.jsx)("tbody",{children:l?Array.from({length:X}).map((a,c)=>(0,b.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:S.map((a,c)=>(0,b.jsx)("td",{className:(0,d.cn)("px-3 py-2 align-middle",a.className),children:(0,b.jsx)(g.Skeleton,{className:(0,d.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===c?"w-3/4":c===S.length-1?"w-16":"w-full")})},a.id))},`loading_${c}`)):0===Y.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,S.length),children:m})}):Y.map(a=>(0,b.jsx)("tr",{className:(0,d.cn)("border-t border-[var(--rb-border)]",u?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:u?0:void 0,role:u?"button":void 0,onClick:u?()=>{u(a)}:void 0,onKeyDown:u?b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),u(a))}:void 0,children:S.map(c=>(0,b.jsx)("td",{className:(0,d.cn)("px-3 py-2 align-middle",c.className),children:c.cell(a)},c.id))},String(k(a))))})]})}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:function(){N(Math.max(0,W-1))},disabled:!Z,children:"Prev"}),(0,b.jsx)(e.Button,{variant:"outline",size:"sm",onClick:function(){N(Math.min(V-1,W+1))},disabled:!$,children:"Next"}),(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",W+1," / ",V]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,b.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(O),onChange:a=>{P(Number(a.target.value)),N(0)},children:p.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]})]})]})}a.s(["DataTable",()=>i])},94703,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);function e({open:a,onClose:e,title:f,children:g,footer:h,position:i="center",variant:j="glass",className:k}){if((0,c.useEffect)(()=>{function b(b){a&&"Escape"===b.key&&e()}return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[e,a]),!a)return null;let l="solid"===j?(0,d.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[var(--rb-border)]","bg-white","shadow-[var(--rb-shadow)]"):(0,d.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]","bg-white/75 backdrop-blur-xl","shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]","ring-1 ring-white/25");return(0,b.jsxs)("div",{className:"top-center"===i?"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8":"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,b.jsx)("button",{type:"button",className:(0,d.cn)("absolute inset-0","bg-black/35 backdrop-blur-md","bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]"),"aria-label":"Close",onClick:e}),(0,b.jsxs)("div",{role:"dialog","aria-modal":"true",className:(0,d.cn)(l,k),children:["glass"===j?(0,b.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]"}):null,f?(0,b.jsx)("div",{className:(0,d.cn)("relative px-5 py-4","solid"===j?"border-b border-[var(--rb-border)]":"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:f})}):null,(0,b.jsx)("div",{className:"relative px-5 py-4",children:g}),h?(0,b.jsx)("div",{className:(0,d.cn)("relative px-5 py-4","solid"===j?"border-t border-[var(--rb-border)]":"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:h}):null]})]})}a.s(["Modal",()=>e])},21282,a=>{"use strict";var b=a.i(57850),c=a.i(94703),d=a.i(97867);function e({open:a,title:e,message:f,confirmText:g="Confirm",confirmVariant:h="primary",cancelText:i="Cancel",busy:j=!1,onCancel:k,onConfirm:l}){return(0,b.jsx)(c.Modal,{open:a,onClose:()=>{j||k()},title:e,footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:k,disabled:j,children:i}),(0,b.jsx)(d.Button,{variant:h,onClick:l,disabled:j,children:j?"Working...":g})]}),children:(0,b.jsx)("div",{className:"text-sm text-zinc-700",children:f})})}a.s(["ConfirmDialog",()=>e])},83932,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(59843),e=a.i(93609),f=a.i(34075),g=a.i(91601),h=a.i(75458),i=a.i(648),j=a.i(4600),k=a.i(97867),l=a.i(54177),m=a.i(94703),n=a.i(21282),o=a.i(26606);function p({className:a}){return(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:a,fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 20h9"}),(0,b.jsx)("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}function q(){let a=(0,h.useAuth)(),q=(0,e.useParams)(),r=q.business??q.tenant,[s,t]=(0,c.useState)(!0),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(null),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(!1),C=a.tenant?.default_branch_id??null,[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(!1),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)({}),[N,O]=(0,c.useState)(!1),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(null);async function V(){if("string"==typeof r&&0!==r.length){t(!0),x(null);try{let a=await (0,f.apiFetch)(`/api/${r}/app/branches`);v(Array.isArray(a.branches)?a.branches:[])}catch(a){x(a instanceof Error?a.message:"Failed to load branches.")}finally{t(!1)}}}(0,c.useEffect)(()=>{V()},[r]);let W="string"==typeof r&&r.length>0?`/app/${r}/branches`:"/app";async function X(b){if("string"==typeof r&&0!==r.length){B(!0),x(null),z(null);try{await (0,f.apiFetch)(`/api/${r}/app/branches/${b}/default`,{method:"POST",body:{}}),z("Default branch updated."),await a.refresh(),await V()}catch(a){a instanceof f.ApiError?x(a.message):x("Failed to set default branch.")}finally{B(!1)}}}async function Y(a){if("string"==typeof r&&0!==r.length){E(!0),G(a),K([]),M({}),I(!0),x(null);try{let b=await (0,f.apiFetch)(`/api/${r}/app/branches/${a}/users`),c=Array.isArray(b.users)?b.users:[],d=Array.isArray(b.assigned_user_ids)?b.assigned_user_ids:[],e={};for(let a of d)"number"==typeof a&&(e[a]=!0);K(c),M(e)}catch(a){a instanceof f.ApiError?x(a.message):x("Failed to load branch users.")}finally{I(!1)}}}async function Z(){if("string"==typeof r&&0!==r.length&&F){B(!0),x(null),z(null);try{let a=Object.entries(L).filter(([,a])=>a).map(([a])=>Number(a)).filter(a=>Number.isFinite(a)&&a>0);await (0,f.apiFetch)(`/api/${r}/app/branches/${F}/assign-users`,{method:"POST",body:{user_ids:a}}),E(!1),z("Assignments updated."),await V()}catch(a){a instanceof f.ApiError?x(a.message):x("Failed to save assignments.")}finally{B(!1)}}}let $=(0,c.useMemo)(()=>u.slice().sort((a,b)=>a.name.localeCompare(b.name)),[u]);return s&&0===u.length&&!w?(0,b.jsx)(g.RequireAuth,{requiredPermission:"branches.manage",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(i.PageHeader,{title:"Branches",description:"Manage shops (branches), set the default branch, and assign staff.",actions:(0,b.jsx)(k.Button,{size:"sm",variant:"outline",disabled:!0,children:"Refresh"})}),(0,b.jsx)(function(){return(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,b.jsx)("div",{className:"lg:col-span-4",children:(0,b.jsx)(j.Card,{className:"shadow-none",children:(0,b.jsxs)(j.CardContent,{className:"pt-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(o.Skeleton,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),(0,b.jsx)(o.Skeleton,{className:"mt-2 h-4 w-56 rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsx)(o.Skeleton,{className:"h-9 w-20 rounded-[var(--rb-radius-sm)]"})]}),(0,b.jsx)("div",{className:"mt-4",children:(0,b.jsx)(o.Skeleton,{className:"h-4 w-72 rounded-[var(--rb-radius-sm)]"})})]})})}),(0,b.jsx)("div",{className:"lg:col-span-8",children:(0,b.jsx)(o.TableSkeleton,{rows:6,columns:2})})]})},{})]})}):(0,b.jsx)(g.RequireAuth,{requiredPermission:"branches.manage",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(i.PageHeader,{title:"Branches",description:"Manage shops (branches), set the default branch, and assign staff.",actions:(0,b.jsx)(k.Button,{size:"sm",variant:"outline",onClick:()=>void V(),disabled:s||A,children:"Refresh"})}),y?(0,b.jsx)("div",{className:"text-sm text-green-700",children:y}):null,w?(0,b.jsx)("div",{className:"text-sm text-red-600",children:w}):null,(0,b.jsxs)(m.Modal,{open:D,onClose:()=>{A||E(!1)},title:"Assign users",footer:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(k.Button,{variant:"outline",onClick:()=>E(!1),disabled:A,children:"Cancel"}),(0,b.jsx)(k.Button,{onClick:()=>void Z(),disabled:A||H,children:A?"Saving...":"Save"})]}),children:[H?(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Loading users..."}):null,H?null:(0,b.jsxs)("div",{className:"grid gap-2",children:[0===J.length?(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"No users found."}):null,J.map(a=>{let c=!!L[a.id];return(0,b.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate text-sm font-medium text-[var(--rb-text)]",children:a.name}),(0,b.jsx)("div",{className:"truncate text-xs text-zinc-600",children:a.email})]}),(0,b.jsx)("input",{type:"checkbox",checked:c,onChange:b=>M(c=>({...c,[a.id]:b.target.checked})),disabled:A})]},a.id)})]})]}),(0,b.jsx)(n.ConfirmDialog,{open:N,title:P,message:R,busy:A,onCancel:()=>{A||(O(!1),U(null))},onConfirm:()=>{T&&(async()=>{await T(),O(!1),U(null)})()}}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,b.jsx)("div",{className:"lg:col-span-4",children:(0,b.jsx)(j.Card,{className:"shadow-none",children:(0,b.jsxs)(j.CardContent,{className:"pt-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Create branch"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Add another location under this business."})]}),(0,b.jsx)(k.Button,{asChild:!0,disabled:A,children:(0,b.jsx)(d.default,{href:`${W}/new`,children:"New"})})]}),(0,b.jsxs)("div",{className:"mt-4 text-sm text-zinc-600",children:["Tip: Keep the branch ",(0,b.jsx)("span",{className:"font-mono",children:"code"})," short (used in invoice numbers)."]})]})})}),(0,b.jsx)("div",{className:"lg:col-span-8",children:(0,b.jsx)(j.Card,{className:"shadow-none",children:(0,b.jsx)(j.CardContent,{className:"pt-5",children:(0,b.jsx)(l.DataTable,{title:"Branches",data:$,loading:s,emptyMessage:"No branches yet.",getRowId:a=>a.id,columnVisibilityKey:`rb:datatable:${r}:branches`,columns:[{id:"name",header:"Branch",cell:a=>(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:[a.code," - ",a.name]}),(0,b.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:C===a.id?"Default branch":a.is_active?"Active":"Inactive"})]}),className:"max-w-[420px]"},{id:"actions",header:"",headerClassName:"text-right",className:"whitespace-nowrap text-right",cell:a=>(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>void Y(a.id),disabled:A,children:"Assign"}),(0,b.jsx)(k.Button,{variant:"outline",size:"sm",onClick:()=>{Q("Set default branch"),S((0,b.jsxs)("div",{children:["Set ",(0,b.jsxs)("span",{className:"font-semibold",children:[a.code," - ",a.name]})," as the default branch?"]})),U(()=>async()=>X(a.id)),O(!0)},disabled:A||C===a.id,children:"Set default"}),(0,b.jsx)(k.Button,{variant:"ghost",size:"sm",disabled:A,"aria-label":"Edit branch",title:"Edit",className:"px-2",asChild:!0,children:(0,b.jsx)(d.default,{href:`${W}/${a.id}/edit`,children:(0,b.jsx)(p,{className:"h-4 w-4"})})})]})}]})})})})]})]})})}a.s(["default",()=>q])}];

//# sourceMappingURL=frontend_src_4d6ff09f._.js.map