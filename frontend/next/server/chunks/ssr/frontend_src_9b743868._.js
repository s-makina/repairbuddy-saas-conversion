module.exports=[648,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({title:a,description:d,actions:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",f),children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:a}),d?(0,b.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:d}):null]}),e?(0,b.jsx)("div",{className:"flex items-center gap-2",children:e}):null]})}a.s(["PageHeader",()=>d])},10402,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(34075),f=a.i(91601),g=a.i(648),h=a.i(4600),i=a.i(97867);function j(){let a=(0,d.useRouter)(),j=(0,d.useParams)(),k=j.business??j.tenant,l=j.branch,m="string"==typeof l&&l.length>0?Number(l):null,[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(!0);async function P(b){if((b.preventDefault(),"string"==typeof k&&0!==k.length)&&m&&Number.isFinite(m)&&!(m<=0)){q(!0),s(null);try{let b={name:t,code:v,phone:""!==x.trim()?x.trim():null,email:""!==z.trim()?z.trim():null,address_line1:""!==B.trim()?B.trim():null,address_line2:""!==D.trim()?D.trim():null,address_city:""!==F.trim()?F.trim():null,address_state:""!==H.trim()?H.trim():null,address_postal_code:""!==J.trim()?J.trim():null,address_country:""!==L.trim()?L.trim().toUpperCase():null,is_active:N};await (0,e.apiFetch)(`/api/${k}/app/branches/${m}`,{method:"PUT",body:b}),a.replace(`/app/${k}/branches`)}catch(a){a instanceof e.ApiError?s(a.message):s("Failed to save branch.")}finally{q(!1)}}}(0,c.useEffect)(()=>{let a=!0;return async function(){if("string"==typeof k&&0!==k.length&&m&&Number.isFinite(m)&&!(m<=0)){o(!0),s(null);try{let b=await (0,e.apiFetch)(`/api/${k}/app/branches/${m}`);if(!a)return;let c=b.branch;u(c?.name??""),w(c?.code??""),y(c?.phone??""),A(c?.email??""),C(c?.address_line1??""),E(c?.address_line2??""),G(c?.address_city??""),I(c?.address_state??""),K(c?.address_postal_code??""),M(c?.address_country??""),O(!!c?.is_active)}catch(b){if(!a)return;s(b instanceof Error?b.message:"Failed to load branch.")}finally{if(!a)return;o(!1)}}}(),()=>{a=!1}},[m,k]);let Q=!m||!Number.isFinite(m)||m<=0;return(0,b.jsx)(f.RequireAuth,{requiredPermission:"branches.manage",children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(g.PageHeader,{title:"Edit branch",description:"Update this location's details."}),Q?(0,b.jsx)("div",{className:"text-sm text-red-600",children:"Branch is invalid."}):null,r?(0,b.jsx)("div",{className:"text-sm text-red-600",children:r}):null,(0,b.jsx)(h.Card,{className:"shadow-none",children:(0,b.jsxs)(h.CardContent,{className:"pt-5",children:[n?(0,b.jsx)("div",{className:"text-sm text-zinc-600",children:"Loading..."}):null,n||Q?null:(0,b.jsxs)("form",{className:"grid gap-3",onSubmit:P,children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_name",children:"Name"}),(0,b.jsx)("input",{id:"branch_name",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:t,onChange:a=>u(a.target.value),required:!0,disabled:p})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_code",children:"Code"}),(0,b.jsx)("input",{id:"branch_code",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:v,onChange:a=>w(a.target.value),required:!0,maxLength:16,disabled:p})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_phone",children:"Phone"}),(0,b.jsx)("input",{id:"branch_phone",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:x,onChange:a=>y(a.target.value),disabled:p,maxLength:64})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_email",children:"Email"}),(0,b.jsx)("input",{id:"branch_email",type:"email",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:z,onChange:a=>A(a.target.value),disabled:p,maxLength:255})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_line1",children:"Address line 1"}),(0,b.jsx)("input",{id:"branch_address_line1",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:B,onChange:a=>C(a.target.value),disabled:p,maxLength:255})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_line2",children:"Address line 2"}),(0,b.jsx)("input",{id:"branch_address_line2",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:D,onChange:a=>E(a.target.value),disabled:p,maxLength:255})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_city",children:"City"}),(0,b.jsx)("input",{id:"branch_address_city",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:F,onChange:a=>G(a.target.value),disabled:p,maxLength:255})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_state",children:"State"}),(0,b.jsx)("input",{id:"branch_address_state",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:H,onChange:a=>I(a.target.value),disabled:p,maxLength:255})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_postal_code",children:"Postal code"}),(0,b.jsx)("input",{id:"branch_address_postal_code",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:J,onChange:a=>K(a.target.value),disabled:p,maxLength:64})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_country",children:"Country (2-letter)"}),(0,b.jsx)("input",{id:"branch_address_country",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm uppercase",value:L,onChange:a=>M(a.target.value),disabled:p,maxLength:2})]})]}),(0,b.jsxs)("label",{className:"flex items-center gap-2 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",children:[(0,b.jsx)("input",{type:"checkbox",checked:N,onChange:a=>O(a.target.checked),disabled:p}),(0,b.jsx)("span",{children:"Active"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,b.jsx)(i.Button,{variant:"outline",onClick:()=>{"string"==typeof k&&k.length>0&&a.push(`/app/${k}/branches`)},disabled:p,children:"Cancel"}),(0,b.jsx)(i.Button,{type:"submit",disabled:p,children:p?"Saving...":"Save"})]})]})]})})]})})}a.s(["default",()=>j])}];

//# sourceMappingURL=frontend_src_9b743868._.js.map