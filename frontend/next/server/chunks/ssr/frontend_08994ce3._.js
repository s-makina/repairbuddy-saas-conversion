module.exports=[46036,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(97134),e=a.i(7160);function f({trigger:a,children:f,align:g="right",className:h}){let[i,j]=(0,c.useState)(!1),k=(0,c.useRef)(null),l=(0,c.useRef)(null),[m,n]=(0,c.useState)(null),o=(0,c.useMemo)(()=>{if(m)return{position:"fixed",top:m.top,left:m.left}},[m]),p=(0,c.useCallback)(()=>{let a=k.current;if(!a)return;let b=a.getBoundingClientRect();n({top:b.bottom+8,left:"right"===g?b.right:b.left})},[g]);return(0,c.useEffect)(()=>{i&&p()},[i,p]),(0,c.useEffect)(()=>{function a(a){if(!i||!(a.target instanceof Node))return;let b=k.current,c=l.current;b&&b.contains(a.target)||c&&c.contains(a.target)||j(!1)}function b(a){i&&"Escape"===a.key&&j(!1)}function c(){i&&p()}return document.addEventListener("mousedown",a),document.addEventListener("keydown",b),window.addEventListener("scroll",c,!0),window.addEventListener("resize",c),()=>{document.removeEventListener("mousedown",a),document.removeEventListener("keydown",b),window.removeEventListener("scroll",c,!0),window.removeEventListener("resize",c)}},[i,p]),(0,b.jsxs)("div",{className:(0,e.cn)("inline-block",h),children:[(0,b.jsx)("span",{ref:k,className:"inline-block",children:a({open:i,toggle:function(){j(a=>!a)}})}),i&&"u">typeof document?(0,d.createPortal)((0,b.jsx)("div",{ref:l,role:"menu",style:o,className:(0,e.cn)("z-50 w-56 overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]","right"===g?"-translate-x-full":"translate-x-0"),children:(0,b.jsx)("div",{className:"py-1",children:f({close:function(){j(!1)}})})}),document.body):null]})}function g({children:a,onSelect:c,destructive:d=!1,disabled:f=!1}){return(0,b.jsx)("button",{role:"menuitem",type:"button",className:(0,e.cn)("block w-full px-3 py-2 text-left text-sm",d?"text-red-700":"text-zinc-700",f?"opacity-50":"hover:bg-[var(--rb-surface-muted)]"),onClick:a=>{a.stopPropagation(),c()},disabled:f,children:a})}function h(){return(0,b.jsx)("div",{className:"my-1 border-t border-[var(--rb-border)]"})}a.s(["DropdownMenu",()=>f,"DropdownMenuItem",()=>g,"DropdownMenuSeparator",()=>h])},4600,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 py-4",a),...d})}function f({className:a,...d}){return(0,b.jsx)("h3",{className:(0,c.cn)("text-sm font-semibold text-[var(--rb-text)]",a),...d})}function g({className:a,...d}){return(0,b.jsx)("p",{className:(0,c.cn)("mt-1 text-sm text-zinc-600",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 pb-5",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},7160,a=>{"use strict";function b(...a){return a.filter(Boolean).join(" ")}a.s(["cn",()=>b])},87973,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},97867,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);function e({className:a,variant:e="primary",size:f="md",asChild:g=!1,type:h="button",disabled:i,onClick:j,children:k,...l}){let m=(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-[var(--rb-radius-sm)] text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",{sm:"h-8 px-3",md:"h-10 px-4",lg:"h-11 px-5"}[f],{primary:"bg-[var(--rb-blue)] text-white hover:opacity-90",secondary:"bg-[var(--rb-orange)] text-white hover:opacity-90",outline:"border border-[var(--rb-border)] bg-white text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]",ghost:"bg-transparent text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]"}[e],i?"pointer-events-none opacity-50":"",a);if(g){let a=c.default.Children.only(k);return c.default.isValidElement(a)?c.default.cloneElement(a,{className:(0,d.cn)(m,a.props?.className),"aria-disabled":!!i||void 0,tabIndex:i?-1:a.props?.tabIndex,onClick:b=>{if(i){b.preventDefault(),b.stopPropagation();return}j?.(b),a.props?.onClick?.(b)}}):null}return(0,b.jsx)("button",{className:m,type:h,disabled:i,onClick:j,...l,children:k})}a.s(["Button",()=>e])},77038,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},74601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},39693,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(45056);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},54260,a=>{"use strict";var b=a.i(57850),c=a.i(70579);function d({label:a="Loading",fullscreen:d=!0}){return(0,b.jsx)("div",{className:d?"min-h-screen flex items-center justify-center bg-[var(--rb-surface-muted)]":"flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(c.default,{alt:"99smartx",src:"/brand/repair-buddy-logo.png",width:160,height:42,priority:!0}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-6 w-6 rounded-full border-2 border-[var(--rb-border)] border-t-[var(--rb-orange)] animate-spin","aria-hidden":"true"}),(0,b.jsxs)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:[a,"..."]})]})]})})}a.s(["Preloader",()=>d])},67233,a=>{"use strict";var b=a.i(34075);let c={};async function d(a){let d=c[a];if(d)return d;let e=(0,b.apiFetch)(`/api/${a}/app/gate`).finally(()=>{delete c[a]});return c[a]=e,e}function e(a,b){let c=!!b.setup_completed_at;return"suspended"===b.tenant_status||"suspended"===b.subscription_status?`/${a}/suspended`:"none"===b.subscription_status?`/${a}/plans`:"pending_checkout"===b.subscription_status?`/${a}/checkout`:["trialing","active","past_due"].includes(b.subscription_status)&&!c?`/${a}/setup`:`/app/${a}`}a.s(["computeGateRedirect",()=>e,"getGate",()=>d])},91601,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(93609),e=a.i(75458),f=a.i(54260),g=a.i(67233),h=a.i(34075);function i({children:a,adminOnly:i=!1,requiredPermission:j}){let k=(0,e.useAuth)(),l=(0,d.useRouter)(),m=(0,d.usePathname)(),n="/set-password",o=m===n||m.startsWith(`${n}/`),p=k.tenant?.slug??null,q=p?`/${p}/setup`:null,r=!!q&&(m===q||m.startsWith(`${q}/`)),s=p?`/app/${p}/branches/select`:null,t=!!s&&(m===s||m.startsWith(`${s}/`));return((0,c.useEffect)(()=>{if(!k.loading){if(!k.isAuthenticated)return void l.replace(`/login?next=${encodeURIComponent(m)}`);if(k.user?.must_change_password&&!o)return void l.replace(`${n}?next=${encodeURIComponent(m)}`);if(k.user&&!k.user.email_verified_at)return void l.replace(`/verify-email?email=${encodeURIComponent(k.user.email)}`);if(i&&!k.isAdmin||j&&!k.can(j))return void l.replace("/app");!k.isAdmin&&p&&(0,h.apiFetch)(`/api/${p}/app/security-status`).then(({mfa:a})=>{let b=m===`/app/${p}/security`||m.startsWith(`/app/${p}/security/`);return!a.enforced||a.compliant||b?(0,g.getGate)(p).then(({gate:a})=>{let b=(0,g.computeGateRedirect)(p,a),c=m===`/${p}/plans`||m.startsWith(`/${p}/plans/`),d=m===`/${p}/checkout`||m.startsWith(`/${p}/checkout/`),e=m===`/${p}/suspended`||m.startsWith(`/${p}/suspended/`),f=m===`/app/${p}`||m.startsWith(`/app/${p}/`),h=b===`/${p}/checkout`&&c;b===`/${p}/plans`&&c||b===`/${p}/checkout`&&d||b===`/${p}/suspended`&&e||b===`/${p}/setup`&&r||b===`/app/${p}`&&f||h||l.replace(b)}):void l.replace(`/app/${p}/security`)}).catch(a=>{if(a instanceof h.ApiError&&428===a.status){if("password_change_required"===(a.data&&"object"==typeof a.data&&"code"in a.data?String(a.data.code):null)){o||l.replace(`${n}?next=${encodeURIComponent(m)}`);return}!t&&s&&l.replace(`${s}?next=${encodeURIComponent(m)}`);return}a instanceof h.ApiError&&403===a.status||k.tenant?.setup_completed_at||r||l.replace(q??"/app")})}},[i,k,s,t,r,m,j,l,q,p]),k.loading)?(0,b.jsx)(f.Preloader,{}):k.isAuthenticated&&(!k.user||k.user.email_verified_at)&&(!i||k.isAdmin)&&(!j||k.can(j))?(0,b.jsx)(b.Fragment,{children:a}):null}a.s(["RequireAuth",()=>i])},31261,a=>{"use strict";var b=a.i(45056);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),d=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:d=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:d,height:d,stroke:a,strokeWidth:g?24*Number(f)/Number(d):f,className:c("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:c(`lucide-${d(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=d(a),g};a.s(["default",()=>g],31261)}];

//# sourceMappingURL=frontend_08994ce3._.js.map