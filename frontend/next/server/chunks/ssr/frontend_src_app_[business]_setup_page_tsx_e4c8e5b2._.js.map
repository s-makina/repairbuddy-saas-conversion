{"version":3,"sources":["../../../../../frontend/src/app/%5Bbusiness%5D/setup/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useParams, useRouter } from \"next/navigation\";\r\nimport Link from \"next/link\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { Preloader } from \"@/components/Preloader\";\r\nimport { Alert } from \"@/components/ui/Alert\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Badge } from \"@/components/ui/Badge\";\r\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/Card\";\r\nimport { Input } from \"@/components/ui/Input\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Modal } from \"@/components/ui/Modal\";\r\nimport { ConfirmDialog } from \"@/components/ui/ConfirmDialog\";\r\nimport { useAuth } from \"@/lib/auth\";\r\nimport { DataTable, type DataTableColumn } from \"@/components/ui/DataTable\";\r\nimport { Select } from \"@/components/ui/Select\";\r\nimport { apiFetch, ApiError } from \"@/lib/api\";\r\nimport { notify } from \"@/lib/notify\";\r\nimport type { Branch, Tenant } from \"@/lib/types\";\r\nimport { completeSetup, getSetup, updateSetup } from \"@/lib/setup\";\r\nimport { getRepairBuddySettings, updateRepairBuddySettings } from \"@/lib/repairbuddy-settings\";\r\nimport {\r\n  createRepairBuddyTax,\r\n  deleteRepairBuddyTax,\r\n  getRepairBuddyTaxes,\r\n  setRepairBuddyTaxActive,\r\n  setRepairBuddyTaxDefault,\r\n  updateRepairBuddyTax,\r\n  type ApiRepairBuddyTax,\r\n} from \"@/lib/repairbuddy-taxes\";\r\n\r\ntype StepId = \"welcome\" | \"business\" | \"address\" | \"branches\" | \"branding\" | \"preferences\" | \"tax\" | \"team\" | \"finish\";\r\n\r\ntype WizardState = {\r\n  name: string;\r\n  display_name: string;\r\n  primary_contact_name: string;\r\n  contact_email: string;\r\n  contact_phone: string;\r\n\r\n  registration_number: string;\r\n\r\n  billing_country: string;\r\n  billing_vat_number: string;\r\n  currency: string;\r\n\r\n  address_line1: string;\r\n  address_line2: string;\r\n  address_city: string;\r\n  address_state: string;\r\n  address_postal_code: string;\r\n\r\n  brand_color: string;\r\n\r\n  support_email: string;\r\n  support_phone: string;\r\n  website: string;\r\n  document_footer: string;\r\n\r\n  timezone: string;\r\n  language: string;\r\n\r\n  working_hours: string;\r\n  default_labor_rate: string;\r\n  warranty_terms: string;\r\n  notify_status_change: boolean;\r\n  notify_invoice_created: boolean;\r\n\r\n  tax_registered: boolean;\r\n  invoice_prefix: string;\r\n\r\n  enable_taxes: boolean;\r\n  default_tax_id: string;\r\n  invoice_amounts: \"exclusive\" | \"inclusive\";\r\n\r\n  team_invites: string;\r\n  team_default_role: string;\r\n};\r\n\r\nconst stepOrder: StepId[] = [\"welcome\", \"business\", \"address\", \"branches\", \"branding\", \"preferences\", \"tax\", \"team\", \"finish\"];\r\n\r\nconst skippableSteps: StepId[] = [\"branding\", \"preferences\", \"tax\", \"team\"];\r\n\r\nconst fallbackTimezones = [\r\n  \"UTC\",\r\n  \"Europe/London\",\r\n  \"Europe/Berlin\",\r\n  \"Europe/Paris\",\r\n  \"Africa/Cairo\",\r\n  \"Asia/Dubai\",\r\n  \"Asia/Riyadh\",\r\n  \"Asia/Kolkata\",\r\n  \"Asia/Singapore\",\r\n  \"Asia/Tokyo\",\r\n  \"Australia/Sydney\",\r\n  \"America/New_York\",\r\n  \"America/Chicago\",\r\n  \"America/Denver\",\r\n  \"America/Los_Angeles\",\r\n];\r\n\r\nfunction stepLabel(step: StepId): string {\r\n  if (step === \"welcome\") return \"Welcome\";\r\n  if (step === \"business\") return \"Business\";\r\n  if (step === \"address\") return \"Address\";\r\n  if (step === \"branches\") return \"Branches\";\r\n  if (step === \"branding\") return \"Brand\";\r\n  if (step === \"preferences\") return \"Operations\";\r\n  if (step === \"tax\") return \"Tax\";\r\n  if (step === \"team\") return \"Team\";\r\n  return \"Finish\";\r\n}\r\n\r\nfunction stepDescription(step: StepId): string {\r\n  if (step === \"welcome\") return \"Set expectations and start setup.\";\r\n  if (step === \"business\") return \"Confirm your business details.\";\r\n  if (step === \"address\") return \"Add your address and locale details.\";\r\n  if (step === \"branches\") return \"Add and manage your shop locations.\";\r\n  if (step === \"branding\") return \"Upload a logo and configure customer-facing info.\";\r\n  if (step === \"preferences\") return \"Set default operations and notification preferences.\";\r\n  if (step === \"tax\") return \"Configure VAT and invoice numbering (optional).\";\r\n  if (step === \"team\") return \"Invite your team (optional).\";\r\n  return \"Review and complete setup.\";\r\n}\r\n\r\nfunction clampStepId(step: unknown): StepId {\r\n  if (typeof step === \"string\" && (stepOrder as string[]).includes(step)) {\r\n    return step as StepId;\r\n  }\r\n  return \"welcome\";\r\n}\r\n\r\nexport default function BusinessSetupPage() {\r\n  const auth = useAuth();\r\n  const router = useRouter();\r\n  const params = useParams() as { business?: string; tenant?: string };\r\n  const business = params.business ?? params.tenant;\r\n\r\n  const [loading, setLoading] = useState(true);\r\n  const [tenant, setTenant] = useState<Tenant | null>(null);\r\n\r\n  const [step, setStep] = useState<StepId>(\"welcome\");\r\n  const [form, setForm] = useState<WizardState>({\r\n    name: \"\",\r\n    display_name: \"\",\r\n    primary_contact_name: \"\",\r\n    contact_email: \"\",\r\n    contact_phone: \"\",\r\n    registration_number: \"\",\r\n    billing_country: \"\",\r\n    billing_vat_number: \"\",\r\n    currency: \"USD\",\r\n    address_line1: \"\",\r\n    address_line2: \"\",\r\n    address_city: \"\",\r\n    address_state: \"\",\r\n    address_postal_code: \"\",\r\n    brand_color: \"#2563eb\",\r\n    support_email: \"\",\r\n    support_phone: \"\",\r\n    website: \"\",\r\n    document_footer: \"\",\r\n    timezone: \"UTC\",\r\n    language: \"en\",\r\n    working_hours: \"Mon–Fri 09:00–17:00\",\r\n    default_labor_rate: \"\",\r\n    warranty_terms: \"\",\r\n    notify_status_change: true,\r\n    notify_invoice_created: false,\r\n\r\n    tax_registered: false,\r\n    invoice_prefix: \"RB\",\r\n\r\n    enable_taxes: false,\r\n    default_tax_id: \"\",\r\n    invoice_amounts: \"exclusive\",\r\n\r\n    team_invites: \"\",\r\n    team_default_role: \"member\",\r\n  });\r\n\r\n  const [setupState, setSetupState] = useState<Record<string, unknown> | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [saving, setSaving] = useState(false);\r\n  const [uploadingLogo, setUploadingLogo] = useState(false);\r\n  const [completing, setCompleting] = useState(false);\r\n\r\n  const [branchesLoading, setBranchesLoading] = useState(false);\r\n  const [branches, setBranches] = useState<Branch[]>([]);\r\n  const [branchesError, setBranchesError] = useState<string | null>(null);\r\n  const [branchSaving, setBranchSaving] = useState(false);\r\n  const [branchModalOpen, setBranchModalOpen] = useState(false);\r\n  const [branchEditId, setBranchEditId] = useState<number | null>(null);\r\n  const [branchName, setBranchName] = useState(\"\");\r\n  const [branchCode, setBranchCode] = useState(\"\");\r\n  const [branchIsActive, setBranchIsActive] = useState(true);\r\n\r\n  const [confirmOpen, setConfirmOpen] = useState(false);\r\n  const [confirmMessage, setConfirmMessage] = useState<React.ReactNode>(\"\");\r\n  const [confirmAction, setConfirmAction] = useState<(() => Promise<void>) | null>(null);\r\n\r\n  const [loadingTaxes, setLoadingTaxes] = useState(false);\r\n  const [taxes, setTaxes] = useState<ApiRepairBuddyTax[]>([]);\r\n  const [taxBusy, setTaxBusy] = useState(false);\r\n  const [addTaxOpen, setAddTaxOpen] = useState(false);\r\n  const [editTaxOpen, setEditTaxOpen] = useState(false);\r\n\r\n  const [addTaxName, setAddTaxName] = useState(\"\");\r\n  const [addTaxRate, setAddTaxRate] = useState(\"0\");\r\n  const [addTaxActive, setAddTaxActive] = useState(true);\r\n  const [addTaxDefault, setAddTaxDefault] = useState(false);\r\n\r\n  const [editTaxId, setEditTaxId] = useState<string | null>(null);\r\n  const [editTaxName, setEditTaxName] = useState(\"\");\r\n  const [editTaxRate, setEditTaxRate] = useState(\"0\");\r\n  const [editTaxActive, setEditTaxActive] = useState(true);\r\n  const [editTaxDefault, setEditTaxDefault] = useState(false);\r\n\r\n  const [taxQuery, setTaxQuery] = useState(\"\");\r\n  const [taxPageIndex, setTaxPageIndex] = useState(0);\r\n  const [taxPageSize, setTaxPageSize] = useState(10);\r\n\r\n  const initializedRef = useRef(false);\r\n  const dirtyRef = useRef(false);\r\n  const saveTimerRef = useRef<number | null>(null);\r\n\r\n  const stepIndex = stepOrder.indexOf(step);\r\n  const progress = Math.max(0, stepIndex) / (stepOrder.length - 1);\r\n\r\n  const timezoneOptions = useMemo(() => {\r\n    try {\r\n      const anyIntl = Intl as unknown as { supportedValuesOf?: (key: string) => string[] };\r\n      const values = typeof anyIntl.supportedValuesOf === \"function\" ? anyIntl.supportedValuesOf(\"timeZone\") : null;\r\n      return Array.isArray(values) && values.length > 0 ? values : fallbackTimezones;\r\n    } catch {\r\n      return fallbackTimezones;\r\n    }\r\n  }, []);\r\n\r\n  function openCreateBranch() {\r\n    setBranchEditId(null);\r\n    setBranchName(\"\");\r\n    setBranchCode(\"\");\r\n    setBranchIsActive(true);\r\n    setBranchModalOpen(true);\r\n  }\r\n\r\n  function openEditBranch(b: Branch) {\r\n    setBranchEditId(b.id);\r\n    setBranchName(b.name ?? \"\");\r\n    setBranchCode(b.code ?? \"\");\r\n    setBranchIsActive(Boolean(b.is_active));\r\n    setBranchModalOpen(true);\r\n  }\r\n\r\n  const loadBranches = useCallback(async () => {\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n    setBranchesLoading(true);\r\n    setBranchesError(null);\r\n    try {\r\n      const payload = await apiFetch<{ branches: Branch[] }>(`/api/${business}/app/branches`);\r\n      setBranches(Array.isArray(payload.branches) ? payload.branches : []);\r\n    } catch (e) {\r\n      if (e instanceof ApiError) {\r\n        setBranchesError(e.message);\r\n      } else {\r\n        setBranchesError(e instanceof Error ? e.message : \"Failed to load branches.\");\r\n      }\r\n    } finally {\r\n      setBranchesLoading(false);\r\n    }\r\n  }, [business]);\r\n\r\n  const saveBranch = useCallback(async () => {\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n\r\n    setBranchSaving(true);\r\n    setBranchesError(null);\r\n\r\n    try {\r\n      const payload = {\r\n        name: branchName,\r\n        code: branchCode,\r\n        is_active: branchIsActive,\r\n      };\r\n\r\n      if (branchEditId) {\r\n        await apiFetch(`/api/${business}/app/branches/${branchEditId}`, {\r\n          method: \"PUT\",\r\n          body: payload,\r\n        });\r\n      } else {\r\n        await apiFetch(`/api/${business}/app/branches`, {\r\n          method: \"POST\",\r\n          body: payload,\r\n        });\r\n      }\r\n\r\n      setBranchModalOpen(false);\r\n      notify.success(\"Saved branch.\");\r\n      await loadBranches();\r\n    } catch (e) {\r\n      if (e instanceof ApiError) {\r\n        setBranchesError(e.message);\r\n      } else {\r\n        setBranchesError(e instanceof Error ? e.message : \"Failed to save branch.\");\r\n      }\r\n    } finally {\r\n      setBranchSaving(false);\r\n    }\r\n  }, [branchCode, branchEditId, branchIsActive, branchName, business, loadBranches]);\r\n\r\n  const setDefaultBranch = useCallback(\r\n    async (branchId: number) => {\r\n      if (typeof business !== \"string\" || business.length === 0) return;\r\n      setBranchSaving(true);\r\n      setBranchesError(null);\r\n\r\n      try {\r\n        const payload = await apiFetch<{ status: \"ok\"; tenant: Tenant }>(`/api/${business}/app/branches/${branchId}/default`, {\r\n          method: \"POST\",\r\n          body: {},\r\n        });\r\n        setTenant(payload.tenant);\r\n        notify.success(\"Default branch updated.\");\r\n      } catch (e) {\r\n        if (e instanceof ApiError) {\r\n          setBranchesError(e.message);\r\n        } else {\r\n          setBranchesError(e instanceof Error ? e.message : \"Failed to set default branch.\");\r\n        }\r\n      } finally {\r\n        setBranchSaving(false);\r\n      }\r\n    },\r\n    [business],\r\n  );\r\n\r\n  function confirmDefault(b: Branch) {\r\n    setConfirmMessage(\r\n      <div>\r\n        Set <span className=\"font-semibold\">{b.code} - {b.name}</span> as the default branch?\r\n      </div>,\r\n    );\r\n    setConfirmAction(() => async () => setDefaultBranch(b.id));\r\n    setConfirmOpen(true);\r\n  }\r\n\r\n  const loadTaxes = useCallback(async () => {\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n    setLoadingTaxes(true);\r\n    try {\r\n      const res = await getRepairBuddyTaxes(business);\r\n      setTaxes(Array.isArray(res.taxes) ? res.taxes : []);\r\n    } catch (e) {\r\n      console.error(\"Failed to load taxes\", e);\r\n    } finally {\r\n      setLoadingTaxes(false);\r\n    }\r\n  }, [business]);\r\n\r\n  const onAddTax = useCallback(async () => {\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n    setTaxBusy(true);\r\n    setError(null);\r\n    try {\r\n      const name = addTaxName.trim();\r\n      const rate = Number(addTaxRate);\r\n      if (!name) throw new Error(\"Name is required.\");\r\n      if (!Number.isFinite(rate)) throw new Error(\"Rate is invalid.\");\r\n\r\n      await createRepairBuddyTax(business, {\r\n        name,\r\n        rate,\r\n        is_active: addTaxActive,\r\n        is_default: addTaxDefault,\r\n      });\r\n      await loadTaxes();\r\n      setAddTaxOpen(false);\r\n      setAddTaxName(\"\");\r\n      setAddTaxRate(\"0\");\r\n      setAddTaxActive(true);\r\n      setAddTaxDefault(false);\r\n      notify.success(\"Tax created.\");\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : \"Failed to create tax.\");\r\n    } finally {\r\n      setTaxBusy(false);\r\n    }\r\n  }, [addTaxActive, addTaxDefault, addTaxName, addTaxRate, business, loadTaxes]);\r\n\r\n  const onEditTaxSave = useCallback(async () => {\r\n    if (!editTaxId || typeof business !== \"string\" || business.length === 0) return;\r\n    setTaxBusy(true);\r\n    setError(null);\r\n    try {\r\n      const id = Number(editTaxId);\r\n      const name = editTaxName.trim();\r\n      const rate = Number(editTaxRate);\r\n      if (!name) throw new Error(\"Name is required.\");\r\n      if (!Number.isFinite(rate)) throw new Error(\"Rate is invalid.\");\r\n\r\n      await updateRepairBuddyTax(business, id, { name, rate });\r\n      await setRepairBuddyTaxActive(business, id, editTaxActive);\r\n      if (editTaxDefault) {\r\n        await setRepairBuddyTaxDefault(business, id);\r\n      }\r\n\r\n      await loadTaxes();\r\n      setEditTaxOpen(false);\r\n      notify.success(\"Tax updated.\");\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : \"Failed to update tax.\");\r\n    } finally {\r\n      setTaxBusy(false);\r\n    }\r\n  }, [business, editTaxActive, editTaxDefault, editTaxId, editTaxName, editTaxRate, loadTaxes]);\r\n\r\n  const onDeleteTax = useCallback(async (row: ApiRepairBuddyTax) => {\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n    if (!globalThis.confirm(`Delete tax \"${row.name}\"?`)) return;\r\n    setTaxBusy(true);\r\n    setError(null);\r\n    try {\r\n      await deleteRepairBuddyTax(business, Number(row.id));\r\n      await loadTaxes();\r\n      notify.success(\"Tax deleted.\");\r\n    } catch (e) {\r\n      setError(e instanceof Error ? e.message : \"Failed to delete tax.\");\r\n    } finally {\r\n      setTaxBusy(false);\r\n    }\r\n  }, [business, loadTaxes]);\r\n\r\n  const billingAddressJson = useMemo(() => {\r\n    const out: Record<string, string> = {};\r\n    if (form.address_line1.trim()) out.line1 = form.address_line1.trim();\r\n    if (form.address_line2.trim()) out.line2 = form.address_line2.trim();\r\n    if (form.address_city.trim()) out.city = form.address_city.trim();\r\n    if (form.address_state.trim()) out.state = form.address_state.trim();\r\n    if (form.address_postal_code.trim()) out.postal_code = form.address_postal_code.trim();\r\n    return Object.keys(out).length > 0 ? out : null;\r\n  }, [\r\n    form.address_city,\r\n    form.address_line1,\r\n    form.address_line2,\r\n    form.address_postal_code,\r\n    form.address_state,\r\n  ]);\r\n\r\n  const canGoBack = stepIndex > 0;\r\n  const canGoNext = stepIndex < stepOrder.length - 1;\r\n  const canSkip = skippableSteps.includes(step) && canGoNext;\r\n\r\n  const validateStep = useCallback(\r\n    (target: StepId): string | null => {\r\n      if (target === \"welcome\") {\r\n        return null;\r\n      }\r\n      if (target === \"business\") {\r\n        if (!form.name.trim()) return \"Business name is required.\";\r\n        if (!form.primary_contact_name.trim()) return \"Primary contact person name is required.\";\r\n        if (!form.contact_email.trim()) return \"Primary contact email is required.\";\r\n        if (!form.contact_phone.trim()) return \"Primary contact phone is required.\";\r\n      }\r\n      if (target === \"address\") {\r\n        if (!form.billing_country.trim()) return \"Billing country is required.\";\r\n        if (form.billing_country.trim().length !== 2) return \"Billing country must be a 2-letter code (e.g. US).\";\r\n        if (!form.currency.trim()) return \"Currency is required.\";\r\n        if (form.currency.trim().length !== 3) return \"Currency must be a 3-letter code (e.g. USD).\";\r\n        if (!form.address_line1.trim()) return \"Address line 1 is required.\";\r\n        if (!form.address_city.trim()) return \"City is required.\";\r\n        if (!form.address_postal_code.trim()) return \"Postal code is required.\";\r\n      }\r\n      if (target === \"preferences\") {\r\n        if (!form.timezone.trim()) return \"Timezone is required.\";\r\n      }\r\n      if (target === \"tax\") {\r\n        if (form.tax_registered && !form.billing_vat_number.trim()) {\r\n          return \"VAT number is required when tax/VAT registered is enabled.\";\r\n        }\r\n      }\r\n      if (target === \"finish\") {\r\n        if (!form.name.trim()) return \"Business name is required.\";\r\n        if (!form.primary_contact_name.trim()) return \"Primary contact person name is required.\";\r\n        if (!form.contact_email.trim()) return \"Primary contact email is required.\";\r\n        if (!form.contact_phone.trim()) return \"Primary contact phone is required.\";\r\n        if (!form.billing_country.trim() || form.billing_country.trim().length !== 2) return \"Billing country is required.\";\r\n        if (!form.currency.trim() || form.currency.trim().length !== 3) return \"Currency is required.\";\r\n        if (!form.address_line1.trim()) return \"Address line 1 is required.\";\r\n        if (!form.address_city.trim()) return \"City is required.\";\r\n        if (!form.address_postal_code.trim()) return \"Postal code is required.\";\r\n        if (!form.timezone.trim()) return \"Timezone is required.\";\r\n        if (form.tax_registered && !form.billing_vat_number.trim()) {\r\n          return \"VAT number is required when tax/VAT registered is enabled.\";\r\n        }\r\n        if (!tenant?.default_branch_id) {\r\n          return \"Default branch is required.\";\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n    [form, tenant?.default_branch_id],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (step === \"branches\") {\r\n      void loadBranches();\r\n    } else if (step === \"tax\") {\r\n      void loadTaxes();\r\n    }\r\n  }, [loadBranches, loadTaxes, step]);\r\n\r\n  const persist = useCallback(\r\n    async (nextStep: StepId, showStatus: boolean) => {\r\n      if (typeof business !== \"string\" || business.length === 0) return;\r\n\r\n      const nextSetupState: Record<string, unknown> = {\r\n        ...(setupState ?? {}),\r\n        wizard: {\r\n          step: nextStep,\r\n          saved_at: new Date().toISOString(),\r\n        },\r\n        identity: {\r\n          display_name: form.display_name.trim() || null,\r\n          primary_contact_name: form.primary_contact_name.trim() || null,\r\n          registration_number: form.registration_number.trim() || null,\r\n        },\r\n        branding: {\r\n          support_email: form.support_email.trim() || null,\r\n          support_phone: form.support_phone.trim() || null,\r\n          website: form.website.trim() || null,\r\n          document_footer: form.document_footer.trim() || null,\r\n        },\r\n        operations: {\r\n          working_hours: form.working_hours.trim() || null,\r\n          default_labor_rate: form.default_labor_rate.trim() || null,\r\n          warranty_terms: form.warranty_terms.trim() || null,\r\n          notify_status_change: Boolean(form.notify_status_change),\r\n          notify_invoice_created: Boolean(form.notify_invoice_created),\r\n        },\r\n        tax: {\r\n          tax_registered: Boolean(form.tax_registered),\r\n          invoice_prefix: form.invoice_prefix.trim() || null,\r\n        },\r\n        team: {\r\n          invites: form.team_invites.trim() || null,\r\n          default_role: form.team_default_role.trim() || null,\r\n        },\r\n      };\r\n\r\n      setSaving(true);\r\n      setError(null);\r\n      try {\r\n        const payload = await updateSetup(business, {\r\n          name: form.name.trim() || undefined,\r\n          contact_email: form.contact_email.trim() || null,\r\n          contact_phone: form.contact_phone.trim() || null,\r\n          billing_country: form.billing_country.trim() ? form.billing_country.trim().toUpperCase() : null,\r\n          billing_vat_number: form.billing_vat_number.trim() || null,\r\n          billing_address_json: billingAddressJson,\r\n          currency: form.currency.trim() ? form.currency.trim().toUpperCase() : null,\r\n          timezone: form.timezone.trim() || null,\r\n          language: \"en\",\r\n          brand_color: form.brand_color.trim() || null,\r\n          setup_step: nextStep,\r\n          setup_state: nextSetupState,\r\n        });\r\n\r\n        // Also update RepairBuddy settings for taxes\r\n        const rbSettingsRes = await getRepairBuddySettings(business);\r\n        const rbSettings = rbSettingsRes.settings;\r\n        if (rbSettings) {\r\n          await updateRepairBuddySettings(business, {\r\n            ...rbSettings,\r\n            taxes: {\r\n              ...rbSettings.taxes,\r\n              enableTaxes: form.enable_taxes,\r\n              defaultTaxId: form.default_tax_id,\r\n              invoiceAmounts: form.invoice_amounts,\r\n            },\r\n          });\r\n        }\r\n\r\n        setTenant(payload.tenant);\r\n        setSetupState(nextSetupState);\r\n\r\n        if (showStatus) {\r\n          notify.success(\"Saved.\");\r\n        }\r\n\r\n        dirtyRef.current = false;\r\n      } catch (e) {\r\n        if (e instanceof ApiError) {\r\n          setError(e.message);\r\n        } else {\r\n          setError(e instanceof Error ? e.message : \"Failed to save setup.\");\r\n        }\r\n      } finally {\r\n        setSaving(false);\r\n      }\r\n    },\r\n    [billingAddressJson, business, form, setupState],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (auth.loading) return;\r\n    if (auth.isAuthenticated && auth.isAdmin) {\r\n      router.replace(\"/admin\");\r\n      return;\r\n    }\r\n  }, [auth.isAdmin, auth.isAuthenticated, auth.loading, router]);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function load() {\r\n      if (typeof business !== \"string\" || business.length === 0) return;\r\n\r\n      setLoading(true);\r\n      setError(null);\r\n\r\n      try {\r\n        const payload = await getSetup(business);\r\n        if (!alive) return;\r\n\r\n        setTenant(payload.tenant);\r\n        setSetupState(payload.setup.state ?? null);\r\n\r\n        const t = payload.tenant;\r\n        const addr = (t.billing_address_json ?? {}) as Record<string, unknown>;\r\n        const state = (payload.setup.state ?? {}) as Record<string, unknown>;\r\n        const identity = (state.identity ?? {}) as Record<string, unknown>;\r\n        const branding = (state.branding ?? {}) as Record<string, unknown>;\r\n        const operations = (state.operations ?? {}) as Record<string, unknown>;\r\n        const tax = (state.tax ?? {}) as Record<string, unknown>;\r\n        const team = (state.team ?? {}) as Record<string, unknown>;\r\n\r\n        setForm({\r\n          name: t.name ?? \"\",\r\n          display_name: typeof identity.display_name === \"string\" ? identity.display_name : \"\",\r\n          primary_contact_name: typeof identity.primary_contact_name === \"string\" ? identity.primary_contact_name : \"\",\r\n          contact_email: t.contact_email ?? \"\",\r\n          contact_phone: t.contact_phone ?? \"\",\r\n          registration_number: typeof identity.registration_number === \"string\" ? identity.registration_number : \"\",\r\n          billing_country: (t.billing_country ?? \"\").toUpperCase(),\r\n          billing_vat_number: t.billing_vat_number ?? \"\",\r\n          currency: (t.currency ?? \"USD\").toUpperCase(),\r\n          address_line1: typeof addr.line1 === \"string\" ? addr.line1 : \"\",\r\n          address_line2: typeof addr.line2 === \"string\" ? addr.line2 : \"\",\r\n          address_city: typeof addr.city === \"string\" ? addr.city : \"\",\r\n          address_state: typeof addr.state === \"string\" ? addr.state : \"\",\r\n          address_postal_code: typeof addr.postal_code === \"string\" ? addr.postal_code : \"\",\r\n          brand_color: t.brand_color ?? \"#2563eb\",\r\n          support_email: typeof branding.support_email === \"string\" ? branding.support_email : \"\",\r\n          support_phone: typeof branding.support_phone === \"string\" ? branding.support_phone : \"\",\r\n          website: typeof branding.website === \"string\" ? branding.website : \"\",\r\n          document_footer: typeof branding.document_footer === \"string\" ? branding.document_footer : \"\",\r\n          timezone: t.timezone ?? \"UTC\",\r\n          language: \"en\",\r\n          working_hours: typeof operations.working_hours === \"string\" ? operations.working_hours : \"Mon–Fri 09:00–17:00\",\r\n          default_labor_rate: typeof operations.default_labor_rate === \"string\" ? operations.default_labor_rate : \"\",\r\n          warranty_terms: typeof operations.warranty_terms === \"string\" ? operations.warranty_terms : \"\",\r\n          notify_status_change: typeof operations.notify_status_change === \"boolean\" ? operations.notify_status_change : true,\r\n          notify_invoice_created: typeof operations.notify_invoice_created === \"boolean\" ? operations.notify_invoice_created : false,\r\n\r\n          tax_registered: typeof tax.tax_registered === \"boolean\" ? tax.tax_registered : false,\r\n          invoice_prefix: typeof tax.invoice_prefix === \"string\" ? tax.invoice_prefix : \"RB\",\r\n\r\n          enable_taxes: false,\r\n          default_tax_id: \"\",\r\n          invoice_amounts: \"exclusive\",\r\n\r\n          team_invites: typeof team.invites === \"string\" ? team.invites : \"\",\r\n          team_default_role: typeof team.default_role === \"string\" ? team.default_role : \"member\",\r\n        });\r\n\r\n        // Load RepairBuddy settings to fill tax fields\r\n        try {\r\n          const rbSettingsRes = await getRepairBuddySettings(business);\r\n          if (rbSettingsRes.settings?.taxes) {\r\n            const rx = rbSettingsRes.settings.taxes;\r\n            setForm((prev) => ({\r\n              ...prev,\r\n              enable_taxes: Boolean(rx.enableTaxes),\r\n              default_tax_id: String(rx.defaultTaxId || \"\"),\r\n              invoice_amounts: rx.invoiceAmounts || \"exclusive\",\r\n            }));\r\n          }\r\n        } catch (e) {\r\n          console.error(\"Failed to load RepairBuddy settings\", e);\r\n        }\r\n\r\n        const wizardStep =\r\n          payload.setup.state && typeof payload.setup.state === \"object\"\r\n            ? (((payload.setup.state as Record<string, unknown>).wizard as Record<string, unknown> | undefined)?.step ?? null)\r\n            : null;\r\n\r\n        const initialStep = clampStepId(payload.setup.step ?? wizardStep);\r\n        setStep(initialStep);\r\n        initializedRef.current = true;\r\n        dirtyRef.current = false;\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setError(e instanceof Error ? e.message : \"Failed to load setup.\");\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    void load();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [business]);\r\n\r\n  useEffect(() => {\r\n    if (!tenant?.default_branch_id) return;\r\n    if (branches.length === 0) return;\r\n    const hasDefault = branches.some((b) => b.id === tenant.default_branch_id);\r\n    if (hasDefault) return;\r\n    void loadBranches();\r\n  }, [branches, loadBranches, tenant?.default_branch_id]);\r\n\r\n  useEffect(() => {\r\n    if (!initializedRef.current) return;\r\n    if (!dirtyRef.current) return;\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n\r\n    if (saveTimerRef.current) {\r\n      window.clearTimeout(saveTimerRef.current);\r\n    }\r\n\r\n    saveTimerRef.current = window.setTimeout(() => {\r\n      void persist(step, false);\r\n    }, 800);\r\n\r\n    return () => {\r\n      if (saveTimerRef.current) {\r\n        window.clearTimeout(saveTimerRef.current);\r\n      }\r\n    };\r\n  }, [business, form, persist, step]);\r\n\r\n  const setField = useCallback(<K extends keyof WizardState>(key: K, value: WizardState[K]) => {\r\n    setForm((prev) => ({\r\n      ...prev,\r\n      [key]: value,\r\n    }));\r\n    dirtyRef.current = true;\r\n  }, []);\r\n\r\n  const onNext = useCallback(async () => {\r\n    if (!canGoNext) return;\r\n    const nextStep = stepOrder[stepIndex + 1] ?? step;\r\n\r\n    const err = validateStep(step);\r\n    if (err) {\r\n      setError(err);\r\n      return;\r\n    }\r\n\r\n    setError(null);\r\n    setStep(nextStep);\r\n    await persist(nextStep, true);\r\n  }, [canGoNext, persist, step, stepIndex, validateStep]);\r\n\r\n  const onSkip = useCallback(async () => {\r\n    if (!canSkip) return;\r\n    const nextStep = stepOrder[stepIndex + 1] ?? step;\r\n    setError(null);\r\n    setStep(nextStep);\r\n    await persist(nextStep, true);\r\n  }, [canSkip, persist, step, stepIndex]);\r\n\r\n  const onBack = useCallback(async () => {\r\n    if (!canGoBack) return;\r\n    const prevStep = stepOrder[stepIndex - 1] ?? step;\r\n    setError(null);\r\n    setStep(prevStep);\r\n    await persist(prevStep, true);\r\n  }, [canGoBack, persist, step, stepIndex]);\r\n\r\n  const onUploadLogo = useCallback(\r\n    async (file: File) => {\r\n      if (typeof business !== \"string\" || business.length === 0) return;\r\n\r\n      setUploadingLogo(true);\r\n      setError(null);\r\n      try {\r\n        const payload = await updateSetup(business, { logo: file });\r\n        setTenant(payload.tenant);\r\n        notify.success(\"Logo uploaded.\");\r\n      } catch (e) {\r\n        if (e instanceof ApiError) {\r\n          setError(e.message);\r\n        } else {\r\n          setError(e instanceof Error ? e.message : \"Failed to upload logo.\");\r\n        }\r\n      } finally {\r\n        setUploadingLogo(false);\r\n      }\r\n    },\r\n    [business],\r\n  );\r\n\r\n  const onComplete = useCallback(async () => {\r\n    if (typeof business !== \"string\" || business.length === 0) return;\r\n\r\n    const err = validateStep(\"finish\");\r\n    if (err) {\r\n      setError(err);\r\n      return;\r\n    }\r\n\r\n    setCompleting(true);\r\n    setError(null);\r\n\r\n    try {\r\n      await persist(\"finish\", false);\r\n\r\n      if (!billingAddressJson) {\r\n        throw new Error(\"Billing address is required.\");\r\n      }\r\n\r\n      await completeSetup(business, {\r\n        name: form.name.trim(),\r\n        contact_email: form.contact_email.trim(),\r\n        contact_phone: form.contact_phone.trim(),\r\n        billing_country: form.billing_country.trim().toUpperCase(),\r\n        billing_address_json: billingAddressJson,\r\n        currency: form.currency.trim().toUpperCase(),\r\n        timezone: form.timezone.trim(),\r\n        language: \"en\",\r\n      });\r\n\r\n      await auth.refresh();\r\n      router.replace(`/app/${business}`);\r\n    } catch (e) {\r\n      if (e instanceof ApiError) {\r\n        setError(e.message);\r\n      } else {\r\n        setError(e instanceof Error ? e.message : \"Failed to complete setup.\");\r\n      }\r\n    } finally {\r\n      setCompleting(false);\r\n    }\r\n  }, [auth, billingAddressJson, business, form.billing_country, form.contact_email, form.contact_phone, form.currency, form.language, form.name, form.timezone, persist, router, validateStep]);\r\n\r\n  const tenantName = tenant?.name ?? business;\r\n\r\n  const branchesSorted = useMemo(() => {\r\n    return branches.slice().sort((a, b) => (a.name ?? \"\").localeCompare(b.name ?? \"\"));\r\n  }, [branches]);\r\n\r\n  if (auth.loading || loading) {\r\n    return <Preloader label=\"Loading setup\" />;\r\n  }\r\n\r\n  if (typeof business !== \"string\" || business.length === 0) {\r\n    return (\r\n      <div className=\"flex min-h-screen items-center justify-center bg-[var(--rb-surface)] px-6\">\r\n        <Card className=\"w-full max-w-lg shadow-none\">\r\n          <CardHeader>\r\n            <CardTitle className=\"text-base\">Setup wizard</CardTitle>\r\n            <CardDescription>Business is missing.</CardDescription>\r\n          </CardHeader>\r\n        </Card>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <RequireAuth>\r\n      <div className=\"min-h-screen text-[var(--rb-text)] [background:radial-gradient(1200px_circle_at_20%_0%,color-mix(in_srgb,var(--rb-blue),white_88%)_0%,transparent_55%),radial-gradient(900px_circle_at_80%_15%,color-mix(in_srgb,var(--rb-orange),white_86%)_0%,transparent_60%),var(--rb-surface)]\">\r\n        <header className=\"sticky top-0 z-20 border-b border-[var(--rb-border)] bg-white/70 backdrop-blur\">\r\n          <div className=\"mx-auto flex max-w-6xl items-center justify-between px-4 py-3\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <Link href=\"/\" className=\"font-semibold tracking-tight text-[var(--rb-text)]\">\r\n                99smartx\r\n              </Link>\r\n              <Badge variant=\"info\" className=\"hidden sm:inline-flex\">\r\n                Setup\r\n              </Badge>\r\n            </div>\r\n\r\n            <nav className=\"hidden items-center gap-6 text-sm text-zinc-600 md:flex\">\r\n              <Link href=\"/#features\" className=\"hover:text-[var(--rb-text)]\">\r\n                Features\r\n              </Link>\r\n              <Link href=\"/#pricing\" className=\"hover:text-[var(--rb-text)]\">\r\n                Pricing\r\n              </Link>\r\n              <Link href=\"/#faq\" className=\"hover:text-[var(--rb-text)]\">\r\n                FAQ\r\n              </Link>\r\n            </nav>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              <Button variant=\"outline\" onClick={() => router.replace(`/${business}/plans`)}>\r\n                Back\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n        </header>\r\n\r\n        <main>\r\n          <section className=\"mx-auto w-full max-w-6xl px-4 py-10\">\r\n            <div className=\"mx-auto w-full max-w-5xl space-y-6\">\r\n              <PageHeader\r\n                title=\"Business setup\"\r\n                description={`Finish setting up ${tenantName} to start using the app.`}\r\n                actions={\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"hidden sm:block text-xs text-zinc-500\">{saving ? \"Saving...\" : \"Autosave on\"}</div>\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      disabled={saving}\r\n                      onClick={() => {\r\n                        void persist(step, true);\r\n                      }}\r\n                    >\r\n                      Save\r\n                    </Button>\r\n                  </div>\r\n                }\r\n              />\r\n\r\n              {error ? <Alert variant=\"danger\" title=\"Setup error\">{error}</Alert> : null}\r\n\r\n              <Modal\r\n                open={branchModalOpen}\r\n                onClose={() => {\r\n                  if (branchSaving) return;\r\n                  setBranchModalOpen(false);\r\n                }}\r\n                title={branchEditId ? \"Edit branch\" : \"Create branch\"}\r\n                footer={\r\n                  <div className=\"flex items-center justify-end gap-2\">\r\n                    <Button variant=\"outline\" onClick={() => setBranchModalOpen(false)} disabled={branchSaving}>\r\n                      Cancel\r\n                    </Button>\r\n                    <Button onClick={() => void saveBranch()} disabled={branchSaving}>\r\n                      {branchSaving ? \"Saving...\" : \"Save\"}\r\n                    </Button>\r\n                  </div>\r\n                }\r\n              >\r\n                <div className=\"grid gap-3\">\r\n                  <div className=\"space-y-1\">\r\n                    <label className=\"text-sm font-medium text-[var(--rb-text)]\" htmlFor=\"setup_branch_name\">Name</label>\r\n                    <Input\r\n                      id=\"setup_branch_name\"\r\n                      value={branchName}\r\n                      onChange={(e) => setBranchName(e.target.value)}\r\n                      placeholder=\"e.g. Main Shop\"\r\n                      disabled={branchSaving}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"space-y-1\">\r\n                    <label className=\"text-sm font-medium text-[var(--rb-text)]\" htmlFor=\"setup_branch_code\">Code</label>\r\n                    <Input\r\n                      id=\"setup_branch_code\"\r\n                      value={branchCode}\r\n                      onChange={(e) => setBranchCode(e.target.value)}\r\n                      placeholder=\"e.g. MAIN\"\r\n                      disabled={branchSaving}\r\n                      maxLength={16}\r\n                    />\r\n                  </div>\r\n\r\n                  <label className=\"flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                    <input type=\"checkbox\" checked={branchIsActive} onChange={(e) => setBranchIsActive(e.target.checked)} disabled={branchSaving} />\r\n                    Active\r\n                  </label>\r\n                </div>\r\n              </Modal>\r\n\r\n              <ConfirmDialog\r\n                open={confirmOpen}\r\n                title=\"Set default branch\"\r\n                message={confirmMessage}\r\n                busy={branchSaving}\r\n                onCancel={() => {\r\n                  if (branchSaving) return;\r\n                  setConfirmOpen(false);\r\n                  setConfirmAction(null);\r\n                }}\r\n                onConfirm={() => {\r\n                  if (!confirmAction) return;\r\n                  void (async () => {\r\n                    await confirmAction();\r\n                    setConfirmOpen(false);\r\n                    setConfirmAction(null);\r\n                  })();\r\n                }}\r\n              />\r\n\r\n              <div className=\"grid gap-6 lg:grid-cols-[260px_1fr]\">\r\n                <Card className=\"shadow-none lg:sticky lg:top-6 lg:self-start\">\r\n                  <CardHeader className=\"pb-3\">\r\n                    <CardTitle className=\"text-base\">Setup steps</CardTitle>\r\n                    <CardDescription>Complete the steps to start using the app.</CardDescription>\r\n                  </CardHeader>\r\n                  <CardContent className=\"space-y-4\">\r\n                    <div className=\"h-2 w-full rounded-full bg-[var(--rb-border)] overflow-hidden\">\r\n                      <div\r\n                        className=\"h-full bg-[linear-gradient(90deg,var(--rb-blue),var(--rb-orange))]\"\r\n                        style={{ width: `${Math.round(progress * 100)}%` }}\r\n                      />\r\n                    </div>\r\n\r\n                    <nav aria-label=\"Setup steps\" className=\"space-y-1\">\r\n                      {stepOrder.map((s, idx) => {\r\n                        const isCurrent = idx === stepIndex;\r\n                        const isCompleted = idx < stepIndex;\r\n                        const isAvailable = idx <= stepIndex;\r\n\r\n                        return (\r\n                          <button\r\n                            key={s}\r\n                            type=\"button\"\r\n                            disabled={!isAvailable || saving || completing}\r\n                            onClick={() => {\r\n                              if (!isAvailable) return;\r\n                              setError(null);\r\n                              setStep(s);\r\n                              void persist(s, true);\r\n                            }}\r\n                            className={\r\n                              \"w-full rounded-[var(--rb-radius-md)] border px-3 py-2 text-left transition \" +\r\n                              (isCurrent\r\n                                ? \"border-[color:color-mix(in_srgb,var(--rb-blue),white_65%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)]\"\r\n                                : isCompleted\r\n                                  ? \"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-white hover:bg-[var(--rb-surface-muted)]\"\r\n                                  : \"border-[var(--rb-border)] bg-white opacity-60\")\r\n                            }\r\n                          >\r\n                            <div className=\"flex items-center gap-3\">\r\n                              <div\r\n                                className={\r\n                                  \"flex h-7 w-7 shrink-0 items-center justify-center rounded-full border text-xs font-semibold \" +\r\n                                  (isCurrent\r\n                                    ? \"border-[var(--rb-blue)] bg-[var(--rb-blue)] text-white\"\r\n                                    : isCompleted\r\n                                      ? \"border-[var(--rb-blue)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_90%)] text-[var(--rb-blue)]\"\r\n                                      : \"border-[var(--rb-border)] bg-white text-zinc-600\")\r\n                                }\r\n                              >\r\n                                {isCompleted ? (\r\n                                  <svg viewBox=\"0 0 24 24\" className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n                                    <path d=\"M20 6L9 17l-5-5\" />\r\n                                  </svg>\r\n                                ) : (\r\n                                  idx + 1\r\n                                )}\r\n                              </div>\r\n                              <div className=\"min-w-0\">\r\n                                <div className=\"text-sm font-semibold text-[var(--rb-text)]\">{stepLabel(s)}</div>\r\n                                <div className=\"mt-0.5 text-xs text-zinc-600 line-clamp-2\">{stepDescription(s)}</div>\r\n                              </div>\r\n                            </div>\r\n                          </button>\r\n                        );\r\n                      })}\r\n                    </nav>\r\n                  </CardContent>\r\n                </Card>\r\n\r\n                <Card className=\"shadow-none flex min-h-[calc(100vh-220px)] flex-col\">\r\n                  <CardHeader>\r\n                    <div className=\"flex items-start justify-between gap-4\">\r\n                      <div>\r\n                        <CardTitle className=\"text-base\">{stepLabel(step)}</CardTitle>\r\n                        <CardDescription>{stepDescription(step)}</CardDescription>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <div className=\"text-xs text-zinc-500\">Step {stepIndex + 1} of {stepOrder.length}</div>\r\n                        <div className=\"mt-2 flex items-center justify-end gap-2\">\r\n                          <div className=\"flex items-center gap-1\" aria-label=\"Progress\">\r\n                            {stepOrder.map((_, idx) => {\r\n                              const isDone = idx < stepIndex;\r\n                              const isNow = idx === stepIndex;\r\n                              return (\r\n                                <span\r\n                                  key={idx}\r\n                                  className={\r\n                                    \"h-1.5 w-5 rounded-full transition \" +\r\n                                    (isNow\r\n                                      ? \"bg-[var(--rb-blue)]\"\r\n                                      : isDone\r\n                                        ? \"bg-[color:color-mix(in_srgb,var(--rb-blue),white_55%)]\"\r\n                                        : \"bg-[var(--rb-border)]\")\r\n                                  }\r\n                                />\r\n                              );\r\n                            })}\r\n                          </div>\r\n                          <div className=\"rounded-full border border-[var(--rb-border)] bg-white px-2 py-1 text-[11px] font-medium text-zinc-600\">\r\n                            {Math.round(progress * 100)}%\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </CardHeader>\r\n\r\n                  <CardContent className=\"flex-1 space-y-6\">\r\n                    {step === \"welcome\" ? (\r\n                      <div className=\"space-y-6\">\r\n                        <div className=\"relative overflow-hidden rounded-[var(--rb-radius-lg)] border border-[color:color-mix(in_srgb,var(--rb-blue),white_80%)] bg-[linear-gradient(135deg,color-mix(in_srgb,var(--rb-blue),white_90%),white_70%)] p-6\">\r\n                          <div className=\"absolute -right-16 -top-16 h-56 w-56 rounded-full bg-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] blur-2xl\" aria-hidden=\"true\" />\r\n                          <div className=\"relative flex items-start gap-4\">\r\n                            <div className=\"flex h-11 w-11 shrink-0 items-center justify-center rounded-full border border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)] bg-white/70 text-[var(--rb-blue)]\">\r\n                              <svg viewBox=\"0 0 24 24\" className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n                                <path d=\"M12 2l1.7 5.3L19 9l-5.3 1.7L12 16l-1.7-5.3L5 9l5.3-1.7L12 2z\" />\r\n                                <path d=\"M5 14l.9 2.8L9 18l-3.1 1.2L5 22l-.9-2.8L1 18l3.1-1.2L5 14z\" />\r\n                              </svg>\r\n                            </div>\r\n                            <div className=\"min-w-0\">\r\n                              <div className=\"text-xl font-semibold text-[var(--rb-text)]\">Welcome — let’s get your business ready</div>\r\n                              <div className=\"mt-1 text-sm text-zinc-700\">\r\n                                This wizard saves as you go and takes about 3–5 minutes. You can skip optional steps and come back later.\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"relative mt-5 grid gap-3 sm:grid-cols-3\">\r\n                            <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3\">\r\n                              <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Time</div>\r\n                              <div className=\"mt-1 text-sm font-medium text-[var(--rb-text)]\">3–5 minutes</div>\r\n                            </div>\r\n                            <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3\">\r\n                              <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Saving</div>\r\n                              <div className=\"mt-1 text-sm font-medium text-[var(--rb-text)]\">Auto-saved</div>\r\n                            </div>\r\n                            <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3\">\r\n                              <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Flexibility</div>\r\n                              <div className=\"mt-1 text-sm font-medium text-[var(--rb-text)]\">Optional steps</div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <div className=\"text-sm font-medium text-[var(--rb-text)]\">What you’ll configure</div>\r\n                          <div className=\"mt-2 grid gap-2 sm:grid-cols-2\">\r\n                            {stepOrder\r\n                              .filter((s) => s !== \"welcome\")\r\n                              .map((s) => {\r\n                                const isOptional = skippableSteps.includes(s);\r\n                                return (\r\n                                  <div\r\n                                    key={s}\r\n                                    className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3\"\r\n                                  >\r\n                                    <div className=\"flex items-center justify-between gap-3\">\r\n                                      <div className=\"text-sm font-semibold text-[var(--rb-text)]\">{stepLabel(s)}</div>\r\n                                      {isOptional ? (\r\n                                        <span className=\"rounded-full border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-2 py-0.5 text-[11px] font-medium text-zinc-600\">\r\n                                          Optional\r\n                                        </span>\r\n                                      ) : null}\r\n                                    </div>\r\n                                    <div className=\"mt-1 text-xs text-zinc-600\">{stepDescription(s)}</div>\r\n                                  </div>\r\n                                );\r\n                              })}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center\">\r\n                          <Button\r\n                            variant=\"primary\"\r\n                            size=\"lg\"\r\n                            disabled={saving || completing}\r\n                            onClick={() => {\r\n                              void onNext();\r\n                            }}\r\n                          >\r\n                            Start setup\r\n                          </Button>\r\n                          <div className=\"text-xs text-zinc-500\">You can adjust everything later from Settings.</div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"business\" ? (\r\n                      <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                        <div className=\"sm:col-span-2\">\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Business name</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.name}\r\n                              onChange={(e) => setField(\"name\", e.target.value)}\r\n                              placeholder=\"e.g. RepairBuddy Electronics\"\r\n                              autoComplete=\"organization\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Display name (optional)</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.display_name}\r\n                              onChange={(e) => setField(\"display_name\", e.target.value)}\r\n                              placeholder=\"Defaults to business name\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Primary contact person name</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.primary_contact_name}\r\n                              onChange={(e) => setField(\"primary_contact_name\", e.target.value)}\r\n                              placeholder=\"e.g. Alex Johnson\"\r\n                              autoComplete=\"name\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Contact email</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              type=\"email\"\r\n                              value={form.contact_email}\r\n                              onChange={(e) => setField(\"contact_email\", e.target.value)}\r\n                              placeholder=\"billing@company.com\"\r\n                              autoComplete=\"email\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Contact phone</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.contact_phone}\r\n                              onChange={(e) => setField(\"contact_phone\", e.target.value)}\r\n                              placeholder=\"+1 555 123 4567\"\r\n                              autoComplete=\"tel\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Business registration number (optional)</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.registration_number}\r\n                              onChange={(e) => setField(\"registration_number\", e.target.value)}\r\n                              placeholder=\"e.g. CRN-123456\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"branches\" ? (\r\n                      <div className=\"space-y-4\">\r\n                        <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3\">\r\n                          <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                            <div>\r\n                              <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Your shops / branches</div>\r\n                              <div className=\"mt-1 text-xs text-zinc-600\">Branches are used for staff access and branch-specific invoice numbering.</div>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Button variant=\"outline\" size=\"sm\" onClick={() => void loadBranches()} disabled={branchesLoading || branchSaving}>\r\n                                Refresh\r\n                              </Button>\r\n                              <Button size=\"sm\" onClick={openCreateBranch} disabled={branchSaving}>\r\n                                New branch\r\n                              </Button>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {branchesError ? <Alert variant=\"danger\" title=\"Branches error\">{branchesError}</Alert> : null}\r\n\r\n                        <div className=\"space-y-2\">\r\n                          {branchesLoading ? <div className=\"text-sm text-zinc-600\">Loading branches...</div> : null}\r\n\r\n                          {!branchesLoading && branchesSorted.length === 0 ? (\r\n                            <div className=\"text-sm text-zinc-600\">No branches found.</div>\r\n                          ) : null}\r\n\r\n                          {branchesSorted.map((b) => {\r\n                            const isDefault = tenant?.default_branch_id === b.id;\r\n                            return (\r\n                              <div\r\n                                key={b.id}\r\n                                className=\"flex flex-col gap-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between\"\r\n                              >\r\n                                <div className=\"min-w-0\">\r\n                                  <div className=\"truncate text-sm font-semibold text-[var(--rb-text)]\">\r\n                                    {b.code} - {b.name}\r\n                                  </div>\r\n                                  <div className=\"mt-1 flex items-center gap-2 text-xs text-zinc-600\">\r\n                                    <span>{b.is_active ? \"Active\" : \"Inactive\"}</span>\r\n                                    {isDefault ? (\r\n                                      <span className=\"rounded-full border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-2 py-0.5 text-[11px] font-medium text-zinc-600\">\r\n                                        Default\r\n                                      </span>\r\n                                    ) : null}\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"flex items-center gap-2\">\r\n                                  <Button variant=\"outline\" size=\"sm\" onClick={() => openEditBranch(b)} disabled={branchSaving}>\r\n                                    Edit\r\n                                  </Button>\r\n                                  <Button\r\n                                    variant=\"outline\"\r\n                                    size=\"sm\"\r\n                                    onClick={() => confirmDefault(b)}\r\n                                    disabled={branchSaving || isDefault}\r\n                                  >\r\n                                    Set default\r\n                                  </Button>\r\n                                </div>\r\n                              </div>\r\n                            );\r\n                          })}\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"tax\" ? (\r\n                      <div className=\"space-y-6\">\r\n                        <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                          <div className=\"sm:col-span-2\">\r\n                            <label className=\"flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={form.tax_registered}\r\n                                onChange={(e) => setField(\"tax_registered\", e.target.checked)}\r\n                              />\r\n                              Tax/VAT registered?\r\n                            </label>\r\n                          </div>\r\n                          <div>\r\n                            <label className=\"text-sm font-medium text-[var(--rb-text)]\">VAT number</label>\r\n                            <div className=\"mt-1\">\r\n                              <Input\r\n                                value={form.billing_vat_number}\r\n                                onChange={(e) => setField(\"billing_vat_number\", e.target.value)}\r\n                                placeholder=\"EU123456789\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div>\r\n                            <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invoice prefix (optional)</label>\r\n                            <div className=\"mt-1\">\r\n                              <Input\r\n                                value={form.invoice_prefix}\r\n                                onChange={(e) => setField(\"invoice_prefix\", e.target.value)}\r\n                                placeholder=\"RB\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"sm:col-span-2\">\r\n                            <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invoice format preview</label>\r\n                            <div className=\"mt-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-zinc-700\">\r\n                              {(form.invoice_prefix.trim() || \"RB\") + \"-\" + business + \"-YYYY-000001\"}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"border-t border-[var(--rb-border)] pt-6\">\r\n                          <label className=\"flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                            <input\r\n                              type=\"checkbox\"\r\n                              checked={form.enable_taxes}\r\n                              onChange={(e) => setField(\"enable_taxes\", e.target.checked)}\r\n                            />\r\n                            Enable taxes\r\n                          </label>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-4\">\r\n                          <div className=\"flex items-center justify-between gap-3\">\r\n                            <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Tax rates</div>\r\n                            <Button variant=\"outline\" size=\"sm\" onClick={() => setAddTaxOpen(true)}>\r\n                              Add tax\r\n                            </Button>\r\n                          </div>\r\n\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-1\">\r\n                            <DataTable\r\n                              data={taxes}\r\n                              columns={[\r\n                                { id: \"name\", header: \"Name\", cell: (x) => <div className=\"text-sm\">{x.name}</div> },\r\n                                { id: \"rate\", header: \"Rate (%)\", cell: (x) => <div className=\"text-sm\">{Number(x.rate)}</div> },\r\n                                { id: \"active\", header: \"Active\", cell: (x) => <div className=\"text-sm\">{x.is_active ? \"Yes\" : \"No\"}</div> },\r\n                                { id: \"default\", header: \"Default\", cell: (x) => <div className=\"text-sm\">{x.is_default ? \"Yes\" : \"No\"}</div> },\r\n                                {\r\n                                  id: \"actions\",\r\n                                  header: \"\",\r\n                                  cell: (row) => (\r\n                                    <div className=\"flex items-center justify-end gap-2\">\r\n                                      <Button\r\n                                        size=\"sm\"\r\n                                        variant=\"outline\"\r\n                                        onClick={() => {\r\n                                          setEditTaxId(String(row.id));\r\n                                          setEditTaxName(row.name);\r\n                                          setEditTaxRate(String(row.rate));\r\n                                          setEditTaxActive(row.is_active);\r\n                                          setEditTaxDefault(row.is_default);\r\n                                          setEditTaxOpen(true);\r\n                                        }}\r\n                                      >\r\n                                        Edit\r\n                                      </Button>\r\n                                      <Button size=\"sm\" variant=\"outline\" onClick={() => void onDeleteTax(row)}>\r\n                                        Delete\r\n                                      </Button>\r\n                                    </div>\r\n                                  ),\r\n                                },\r\n                              ]}\r\n                              getRowId={(row) => String(row.id)}\r\n                              loading={loadingTaxes}\r\n                              emptyMessage=\"No tax rates defined.\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                          <div className=\"space-y-1\">\r\n                            <label className=\"text-sm font-medium text-[var(--rb-text)]\">Default tax</label>\r\n                            <Select\r\n                              value={form.default_tax_id}\r\n                              disabled={taxes.filter(x => x.is_active).length === 0}\r\n                              onChange={(e) => setField(\"default_tax_id\", e.target.value)}\r\n                            >\r\n                              <option value=\"\">None</option>\r\n                              {taxes.filter(x => x.is_active).map((x) => (\r\n                                <option key={x.id} value={String(x.id)}>\r\n                                  {x.name} ({Number(x.rate)}%)\r\n                                </option>\r\n                              ))}\r\n                            </Select>\r\n                          </div>\r\n                          <div className=\"space-y-1\">\r\n                            <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invoice amounts</label>\r\n                            <Select\r\n                              value={form.invoice_amounts}\r\n                              onChange={(e) => setField(\"invoice_amounts\", e.target.value as \"exclusive\" | \"inclusive\")}\r\n                            >\r\n                              <option value=\"exclusive\">Exclusive</option>\r\n                              <option value=\"inclusive\">Inclusive</option>\r\n                            </Select>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"team\" ? (\r\n                      <div className=\"space-y-4\">\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Invite team members (optional)</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.team_invites}\r\n                              onChange={(e) => setField(\"team_invites\", e.target.value)}\r\n                              placeholder=\"Emails separated by commas\"\r\n                            />\r\n                          </div>\r\n                          <div className=\"mt-2 text-xs text-zinc-500\">Invites are stored for later processing (email sending not implemented yet).</div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Default role for invites (optional)</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.team_default_role}\r\n                              onChange={(e) => setField(\"team_default_role\", e.target.value)}\r\n                              placeholder=\"member\"\r\n                            />\r\n                          </div>\r\n                          <div className=\"mt-2 text-xs text-zinc-500\">Example values: owner, member, technician, front_desk.</div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"address\" ? (\r\n                      <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Billing country (2-letter)</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.billing_country}\r\n                              onChange={(e) => setField(\"billing_country\", e.target.value.toUpperCase())}\r\n                              placeholder=\"US\"\r\n                              maxLength={2}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Currency</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.currency}\r\n                              onChange={(e) => setField(\"currency\", e.target.value.toUpperCase())}\r\n                              placeholder=\"USD\"\r\n                              maxLength={3}\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">VAT number (optional)</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.billing_vat_number}\r\n                              onChange={(e) => setField(\"billing_vat_number\", e.target.value)}\r\n                              placeholder=\"EU123456789\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Address</div>\r\n                          <div className=\"mt-1 grid gap-3 sm:grid-cols-2\">\r\n                            <div className=\"sm:col-span-2\">\r\n                              <Input\r\n                                value={form.address_line1}\r\n                                onChange={(e) => setField(\"address_line1\", e.target.value)}\r\n                                placeholder=\"Address line 1\"\r\n                                autoComplete=\"address-line1\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"sm:col-span-2\">\r\n                              <Input\r\n                                value={form.address_line2}\r\n                                onChange={(e) => setField(\"address_line2\", e.target.value)}\r\n                                placeholder=\"Address line 2\"\r\n                                autoComplete=\"address-line2\"\r\n                              />\r\n                            </div>\r\n                            <Input\r\n                              value={form.address_city}\r\n                              onChange={(e) => setField(\"address_city\", e.target.value)}\r\n                              placeholder=\"City\"\r\n                              autoComplete=\"address-level2\"\r\n                            />\r\n                            <Input\r\n                              value={form.address_state}\r\n                              onChange={(e) => setField(\"address_state\", e.target.value)}\r\n                              placeholder=\"State / Region\"\r\n                              autoComplete=\"address-level1\"\r\n                            />\r\n                            <Input\r\n                              value={form.address_postal_code}\r\n                              onChange={(e) => setField(\"address_postal_code\", e.target.value)}\r\n                              placeholder=\"Postal code\"\r\n                              autoComplete=\"postal-code\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"branding\" ? (\r\n                      <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Brand color</label>\r\n                          <div className=\"mt-2 flex items-center gap-3\">\r\n                            <input\r\n                              type=\"color\"\r\n                              value={form.brand_color}\r\n                              onChange={(e) => setField(\"brand_color\", e.target.value)}\r\n                              className=\"h-10 w-14 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white shadow-sm\"\r\n                              aria-label=\"Brand color\"\r\n                            />\r\n                            <Input\r\n                              value={form.brand_color}\r\n                              onChange={(e) => setField(\"brand_color\", e.target.value)}\r\n                              placeholder=\"#2563eb\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Logo</label>\r\n                          <div className=\"mt-2 flex items-center gap-3\">\r\n                            {tenant?.logo_url ? (\r\n                              // eslint-disable-next-line @next/next/no-img-element\r\n                              <img\r\n                                src={tenant.logo_url}\r\n                                alt=\"Logo\"\r\n                                className=\"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white object-contain\"\r\n                              />\r\n                            ) : (\r\n                              <div className=\"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white\" />\r\n                            )}\r\n\r\n                            <div className=\"flex-1\">\r\n                              <input\r\n                                type=\"file\"\r\n                                accept=\"image/png,image/jpeg,image/webp\"\r\n                                disabled={uploadingLogo}\r\n                                onChange={(e) => {\r\n                                  const file = e.target.files && e.target.files[0] ? e.target.files[0] : null;\r\n                                  if (file) {\r\n                                    void onUploadLogo(file);\r\n                                  }\r\n                                }}\r\n                                className=\"block w-full text-sm text-zinc-700 file:mr-3 file:rounded-[var(--rb-radius-sm)] file:border-0 file:bg-[var(--rb-surface-muted)] file:px-3 file:py-2 file:text-sm file:font-medium file:text-[var(--rb-text)] hover:file:bg-[color:color-mix(in_srgb,var(--rb-surface-muted),black_4%)]\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"mt-2 text-xs text-zinc-500\">\r\n                            {uploadingLogo ? \"Uploading...\" : \"PNG/JPG/WEBP up to 5MB\"}\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Customer-facing contact (optional)</div>\r\n                          <div className=\"mt-2 grid gap-3 sm:grid-cols-2\">\r\n                            <Input\r\n                              value={form.support_email}\r\n                              onChange={(e) => setField(\"support_email\", e.target.value)}\r\n                              placeholder=\"Public support email\"\r\n                              autoComplete=\"email\"\r\n                            />\r\n                            <Input\r\n                              value={form.support_phone}\r\n                              onChange={(e) => setField(\"support_phone\", e.target.value)}\r\n                              placeholder=\"Public support phone\"\r\n                              autoComplete=\"tel\"\r\n                            />\r\n                            <div className=\"sm:col-span-2\">\r\n                              <Input\r\n                                value={form.website}\r\n                                onChange={(e) => setField(\"website\", e.target.value)}\r\n                                placeholder=\"Website (optional)\"\r\n                              />\r\n                            </div>\r\n                            <div className=\"sm:col-span-2\">\r\n                              <Input\r\n                                value={form.document_footer}\r\n                                onChange={(e) => setField(\"document_footer\", e.target.value)}\r\n                                placeholder=\"Document footer text (optional)\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"preferences\" ? (\r\n                      <div className=\"grid gap-4 sm:grid-cols-2\">\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Timezone</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input\r\n                              value={form.timezone}\r\n                              onChange={(e) => setField(\"timezone\", e.target.value)}\r\n                              placeholder=\"UTC\"\r\n                              list=\"rb-timezones\"\r\n                            />\r\n                            <datalist id=\"rb-timezones\">\r\n                              {timezoneOptions.map((tz) => (\r\n                                <option key={tz} value={tz} />\r\n                              ))}\r\n                            </datalist>\r\n                          </div>\r\n                          <div className=\"mt-2 text-xs text-zinc-500\">Example: UTC, Europe/Berlin, America/New_York</div>\r\n                        </div>\r\n\r\n                        <div>\r\n                          <label className=\"text-sm font-medium text-[var(--rb-text)]\">Language</label>\r\n                          <div className=\"mt-1\">\r\n                            <Input value=\"English (en)\" disabled />\r\n                          </div>\r\n                          <div className=\"mt-2 text-xs text-zinc-500\">Currently supported language: English</div>\r\n                        </div>\r\n\r\n                        <div className=\"sm:col-span-2\">\r\n                          <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Operations defaults (optional)</div>\r\n                          <div className=\"mt-2 grid gap-3 sm:grid-cols-2\">\r\n                            <div className=\"sm:col-span-2\">\r\n                              <Input\r\n                                value={form.working_hours}\r\n                                onChange={(e) => setField(\"working_hours\", e.target.value)}\r\n                                placeholder=\"Working hours (e.g. Mon–Fri 09:00–17:00)\"\r\n                              />\r\n                            </div>\r\n                            <Input\r\n                              value={form.default_labor_rate}\r\n                              onChange={(e) => setField(\"default_labor_rate\", e.target.value)}\r\n                              placeholder=\"Default labor rate (optional)\"\r\n                            />\r\n                            <Input\r\n                              value={form.warranty_terms}\r\n                              onChange={(e) => setField(\"warranty_terms\", e.target.value)}\r\n                              placeholder=\"Default warranty terms (optional)\"\r\n                            />\r\n                            <label className=\"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={form.notify_status_change}\r\n                                onChange={(e) => setField(\"notify_status_change\", e.target.checked)}\r\n                              />\r\n                              Email on status change\r\n                            </label>\r\n                            <label className=\"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]\">\r\n                              <input\r\n                                type=\"checkbox\"\r\n                                checked={form.notify_invoice_created}\r\n                                onChange={(e) => setField(\"notify_invoice_created\", e.target.checked)}\r\n                              />\r\n                              Email on invoice created\r\n                            </label>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                    {step === \"finish\" ? (\r\n                      <div className=\"space-y-4\">\r\n                        <Alert variant=\"info\" title=\"Review\">\r\n                          Please confirm the required fields. Clicking complete will finish setup and take you to the dashboard.\r\n                        </Alert>\r\n\r\n                        <div className=\"grid gap-3 sm:grid-cols-2\">\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4\">\r\n                            <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Business</div>\r\n                            <div className=\"mt-1 text-sm font-medium text-[var(--rb-text)]\">{form.name.trim() || \"—\"}</div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">Contact: {form.contact_email.trim() || \"—\"}</div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">Primary contact: {form.primary_contact_name.trim() || \"—\"}</div>\r\n                          </div>\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4\">\r\n                            <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Defaults</div>\r\n                            <div className=\"mt-1 text-sm text-[var(--rb-text)]\">Timezone: {form.timezone.trim() || \"—\"}</div>\r\n                            <div className=\"mt-1 text-sm text-[var(--rb-text)]\">Language: {form.language.trim() || \"—\"}</div>\r\n                          </div>\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4\">\r\n                            <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Billing</div>\r\n                            <div className=\"mt-1 text-sm text-[var(--rb-text)]\">\r\n                              Country: {form.billing_country.trim() || \"—\"} | Currency: {form.currency.trim() || \"—\"}\r\n                            </div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">VAT: {form.billing_vat_number.trim() || \"—\"}</div>\r\n                          </div>\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4\">\r\n                            <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Tax & invoicing</div>\r\n                            <div className=\"mt-1 text-sm text-[var(--rb-text)]\">\r\n                              Registered: {form.tax_registered ? \"Yes\" : \"No\"}\r\n                            </div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">Prefix: {form.invoice_prefix.trim() || \"—\"}</div>\r\n                          </div>\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4\">\r\n                            <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Branding</div>\r\n                            <div className=\"mt-1 text-sm text-[var(--rb-text)]\">Color: {form.brand_color}</div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">Logo: {tenant?.logo_url ? \"Uploaded\" : \"—\"}</div>\r\n                          </div>\r\n                          <div className=\"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4\">\r\n                            <div className=\"text-xs font-semibold text-zinc-500 uppercase tracking-wider\">Team</div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">Invites: {form.team_invites.trim() ? \"Drafted\" : \"—\"}</div>\r\n                            <div className=\"mt-1 text-xs text-zinc-500\">Role: {form.team_default_role.trim() || \"—\"}</div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <Button\r\n                          variant=\"primary\"\r\n                          disabled={completing || saving}\r\n                          onClick={() => {\r\n                            void onComplete();\r\n                          }}\r\n                        >\r\n                          {completing ? \"Completing...\" : \"Complete setup\"}\r\n                        </Button>\r\n                      </div>\r\n                    ) : null}\r\n\r\n                  </CardContent>\r\n\r\n                  <div className=\"sticky bottom-0 border-t border-[var(--rb-border)] bg-white/90 px-5 py-4 backdrop-blur\">\r\n                    <div className=\"flex items-center justify-between gap-4\">\r\n                      <Button variant=\"ghost\" disabled={!canGoBack || saving || completing} onClick={() => void onBack()}>\r\n                        <span className=\"inline-flex items-center gap-2\">\r\n                          <svg viewBox=\"0 0 24 24\" className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n                            <path d=\"M15 18l-6-6 6-6\" />\r\n                          </svg>\r\n                          Back\r\n                        </span>\r\n                      </Button>\r\n\r\n                      <div className=\"flex items-center gap-3\">\r\n                        <div className=\"hidden sm:block text-xs text-zinc-500\">\r\n                          {stepLabel(step)}\r\n                          <span className=\"mx-2\">•</span>\r\n                          {Math.round(progress * 100)}%\r\n                        </div>\r\n\r\n                        {canSkip ? (\r\n                          <Button variant=\"outline\" disabled={saving || completing} onClick={() => void onSkip()}>\r\n                            Skip for now\r\n                          </Button>\r\n                        ) : null}\r\n\r\n                        {step !== \"finish\" ? (\r\n                          <Button variant=\"primary\" disabled={!canGoNext || saving || completing} onClick={() => void onNext()}>\r\n                            <span className=\"inline-flex items-center gap-2\">\r\n                              {step === \"welcome\" ? \"Start\" : \"Next\"}\r\n                              <svg viewBox=\"0 0 24 24\" className=\"h-4 w-4\" fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n                                <path d=\"M9 18l6-6-6-6\" />\r\n                              </svg>\r\n                            </span>\r\n                          </Button>\r\n                        ) : null}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n\r\n              <footer className=\"mt-12 border-t border-[var(--rb-border)] pt-8 text-xs text-zinc-600\">\r\n                <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n                  <div>© {new Date().getFullYear()} 99smartx</div>\r\n                  <div className=\"flex items-center gap-4\">\r\n                    <Link href=\"/login\" className=\"hover:text-[var(--rb-text)]\">\r\n                      Login\r\n                    </Link>\r\n                    <Link href=\"/register\" className=\"hover:text-[var(--rb-text)]\">\r\n                      Register\r\n                    </Link>\r\n                  </div>\r\n                </div>\r\n              </footer>\r\n\r\n            </div>\r\n          </section>\r\n\r\n          <Modal\r\n            open={addTaxOpen}\r\n            onClose={() => setAddTaxOpen(false)}\r\n            title=\"Add tax\"\r\n            footer={\r\n              <div className=\"flex items-center justify-end gap-2\">\r\n                <Button variant=\"outline\" onClick={() => setAddTaxOpen(false)} disabled={taxBusy}>\r\n                  Cancel\r\n                </Button>\r\n                <Button onClick={() => void onAddTax()} disabled={taxBusy}>\r\n                  {taxBusy ? \"Saving...\" : \"Save\"}\r\n                </Button>\r\n              </div>\r\n            }\r\n          >\r\n            <div className=\"space-y-3\">\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium text-[var(--rb-text)]\">Name</label>\r\n                <Input value={addTaxName} onChange={(e) => setAddTaxName(e.target.value)} placeholder=\"e.g. VAT\" disabled={taxBusy} />\r\n              </div>\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium text-[var(--rb-text)]\">Rate (%)</label>\r\n                <Input type=\"number\" min={0} value={addTaxRate} onChange={(e) => setAddTaxRate(e.target.value)} disabled={taxBusy} />\r\n              </div>\r\n              <div className=\"grid gap-3 sm:grid-cols-2\">\r\n                <div className=\"space-y-1\">\r\n                  <label className=\"text-sm font-medium text-[var(--rb-text)]\">Active</label>\r\n                  <Select value={addTaxActive ? \"yes\" : \"no\"} onChange={(e) => setAddTaxActive(e.target.value === \"yes\")} disabled={taxBusy}>\r\n                    <option value=\"yes\">Yes</option>\r\n                    <option value=\"no\">No</option>\r\n                  </Select>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <label className=\"text-sm font-medium text-[var(--rb-text)]\">Default</label>\r\n                  <Select value={addTaxDefault ? \"yes\" : \"no\"} onChange={(e) => setAddTaxDefault(e.target.value === \"yes\")} disabled={taxBusy}>\r\n                    <option value=\"no\">No</option>\r\n                    <option value=\"yes\">Yes</option>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Modal>\r\n\r\n          <Modal\r\n            open={editTaxOpen}\r\n            onClose={() => setEditTaxOpen(false)}\r\n            title=\"Edit tax\"\r\n            footer={\r\n              <div className=\"flex items-center justify-end gap-2\">\r\n                <Button variant=\"outline\" onClick={() => setEditTaxOpen(false)} disabled={taxBusy}>\r\n                  Cancel\r\n                </Button>\r\n                <Button onClick={() => void onEditTaxSave()} disabled={taxBusy}>\r\n                  {taxBusy ? \"Saving...\" : \"Save\"}\r\n                </Button>\r\n              </div>\r\n            }\r\n          >\r\n            <div className=\"space-y-3\">\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium text-[var(--rb-text)]\">Name</label>\r\n                <Input value={editTaxName} onChange={(e) => setEditTaxName(e.target.value)} disabled={taxBusy} />\r\n              </div>\r\n              <div className=\"space-y-1\">\r\n                <label className=\"text-sm font-medium text-[var(--rb-text)]\">Rate (%)</label>\r\n                <Input type=\"number\" min={0} value={editTaxRate} onChange={(e) => setEditTaxRate(e.target.value)} disabled={taxBusy} />\r\n              </div>\r\n              <div className=\"grid gap-3 sm:grid-cols-2\">\r\n                <div className=\"space-y-1\">\r\n                  <label className=\"text-sm font-medium text-[var(--rb-text)]\">Active</label>\r\n                  <Select value={editTaxActive ? \"yes\" : \"no\"} onChange={(e) => setEditTaxActive(e.target.value === \"yes\")} disabled={taxBusy}>\r\n                    <option value=\"yes\">Yes</option>\r\n                    <option value=\"no\">No</option>\r\n                  </Select>\r\n                </div>\r\n                <div className=\"space-y-1\">\r\n                  <label className=\"text-sm font-medium text-[var(--rb-text)]\">Default</label>\r\n                  <Select value={editTaxDefault ? \"yes\" : \"no\"} onChange={(e) => setEditTaxDefault(e.target.value === \"yes\")} disabled={taxBusy}>\r\n                    <option value=\"no\">No</option>\r\n                    <option value=\"yes\">Yes</option>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </Modal>\r\n        </main>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}