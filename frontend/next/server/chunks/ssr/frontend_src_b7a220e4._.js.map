{"version":3,"sources":["../../../../../frontend/src/components/ui/Alert.tsx","../../../../../frontend/src/components/ui/Badge.tsx","../../../../../frontend/src/components/ui/PageHeader.tsx","../../../../../frontend/src/components/ui/Skeleton.tsx","../../../../../frontend/src/lib/money.ts","../../../../../frontend/src/app/admin/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport type AlertVariant = \"info\" | \"success\" | \"warning\" | \"danger\";\r\n\r\nfunction AlertIcon({ variant, className }: { variant: AlertVariant; className?: string }) {\r\n  const common = \"h-4 w-4 shrink-0\";\r\n\r\n  if (variant === \"success\") {\r\n    return (\r\n      <svg viewBox=\"0 0 24 24\" className={cn(common, className)} fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n        <path d=\"M20 6L9 17l-5-5\" />\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  if (variant === \"warning\") {\r\n    return (\r\n      <svg viewBox=\"0 0 24 24\" className={cn(common, className)} fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n        <path d=\"M12 9v4\" />\r\n        <path d=\"M12 17h.01\" />\r\n        <path d=\"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z\" />\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  if (variant === \"danger\") {\r\n    return (\r\n      <svg viewBox=\"0 0 24 24\" className={cn(common, className)} fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n        <path d=\"M18 6L6 18\" />\r\n        <path d=\"M6 6l12 12\" />\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <svg viewBox=\"0 0 24 24\" className={cn(common, className)} fill=\"none\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" aria-hidden=\"true\">\r\n      <path d=\"M12 16v-4\" />\r\n      <path d=\"M12 8h.01\" />\r\n      <path d=\"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z\" />\r\n    </svg>\r\n  );\r\n}\r\n\r\nexport function Alert({\r\n  className,\r\n  variant = \"info\",\r\n  title,\r\n  children,\r\n  ...props\r\n}: React.HTMLAttributes<HTMLDivElement> & {\r\n  variant?: AlertVariant;\r\n  title?: string;\r\n}) {\r\n  const variants: Record<AlertVariant, { wrapper: string; icon: string; title: string }> = {\r\n    info: {\r\n      wrapper:\r\n        \"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]\",\r\n      icon: \"text-[var(--rb-blue)]\",\r\n      title: \"text-[var(--rb-blue)]\",\r\n    },\r\n    success: {\r\n      wrapper: \"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]\",\r\n      icon: \"text-[#166534]\",\r\n      title: \"text-[#166534]\",\r\n    },\r\n    warning: {\r\n      wrapper:\r\n        \"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]\",\r\n      icon: \"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]\",\r\n      title: \"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]\",\r\n    },\r\n    danger: {\r\n      wrapper: \"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]\",\r\n      icon: \"text-[#991b1b]\",\r\n      title: \"text-[#991b1b]\",\r\n    },\r\n  };\r\n\r\n  const v = variants[variant];\r\n\r\n  return (\r\n    <div\r\n      role=\"alert\"\r\n      className={cn(\"rounded-[var(--rb-radius-md)] border px-4 py-3\", v.wrapper, className)}\r\n      {...props}\r\n    >\r\n      <div className=\"flex gap-3\">\r\n        <AlertIcon variant={variant} className={cn(\"mt-0.5\", v.icon)} />\r\n        <div className=\"min-w-0\">\r\n          {title ? <div className={cn(\"text-sm font-semibold\", v.title)}>{title}</div> : null}\r\n          {children ? <div className={cn(\"text-sm text-zinc-700\", title ? \"mt-1\" : \"\")}>\r\n            {children}\r\n          </div> : null}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport type BadgeVariant = \"default\" | \"info\" | \"success\" | \"warning\" | \"danger\";\r\n\r\nexport function Badge({\r\n  className,\r\n  variant = \"default\",\r\n  ...props\r\n}: React.HTMLAttributes<HTMLSpanElement> & { variant?: BadgeVariant }) {\r\n  const variants: Record<BadgeVariant, string> = {\r\n    default: \"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]\",\r\n    info: \"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]\",\r\n    success: \"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]\",\r\n    warning: \"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]\",\r\n    danger: \"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]\",\r\n  };\r\n\r\n  return (\r\n    <span\r\n      className={cn(\r\n        \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium\",\r\n        variants[variant],\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\n\r\nexport function PageHeader({\r\n  title,\r\n  description,\r\n  actions,\r\n  className,\r\n}: {\r\n  title: string;\r\n  description?: string;\r\n  actions?: React.ReactNode;\r\n  className?: string;\r\n}) {\r\n  return (\r\n    <div className={cn(\"flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between\", className)}>\r\n      <div>\r\n        <h1 className=\"text-xl font-semibold text-[var(--rb-text)]\">{title}</h1>\r\n        {description ? <p className=\"mt-1 text-sm text-zinc-600\">{description}</p> : null}\r\n      </div>\r\n      {actions ? <div className=\"flex items-center gap-2\">{actions}</div> : null}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport React from \"react\";\r\nimport { cn } from \"@/lib/cn\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\n\r\ntype SkeletonProps = React.HTMLAttributes<HTMLDivElement> & {\r\n  \"aria-hidden\"?: boolean;\r\n};\r\n\r\nexport function Skeleton({ className, \"aria-hidden\": ariaHidden = true, ...props }: SkeletonProps) {\r\n  return <div aria-hidden={ariaHidden} className={cn(\"rb-skeleton\", className)} {...props} />;\r\n}\r\n\r\nexport function CardSkeleton({\r\n  lines = 3,\r\n  className,\r\n}: {\r\n  lines?: number;\r\n  className?: string;\r\n}) {\r\n  const safeLines = Math.max(1, Math.min(lines, 12));\r\n\r\n  return (\r\n    <Card className={cn(\"overflow-hidden\", className)}>\r\n      <CardContent className=\"space-y-3 pt-5\">\r\n        <Skeleton className=\"h-4 w-32 rounded-[var(--rb-radius-sm)]\" />\r\n        {Array.from({ length: safeLines }).map((_, idx) => (\r\n          <Skeleton\r\n            key={idx}\r\n            className={cn(\r\n              \"h-3 rounded-[var(--rb-radius-sm)]\",\r\n              idx === safeLines - 1 ? \"w-3/5\" : \"w-full\",\r\n            )}\r\n          />\r\n        ))}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport function TableSkeleton({\r\n  rows = 6,\r\n  columns = 5,\r\n  className,\r\n}: {\r\n  rows?: number;\r\n  columns?: number;\r\n  className?: string;\r\n}) {\r\n  const safeRows = Math.max(1, Math.min(rows, 20));\r\n  const safeCols = Math.max(1, Math.min(columns, 10));\r\n\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]\",\r\n        className,\r\n      )}\r\n    >\r\n      <div className=\"border-b border-[var(--rb-border)] px-5 py-4\">\r\n        <div className=\"grid gap-3\" style={{ gridTemplateColumns: `repeat(${safeCols}, minmax(0, 1fr))` }}>\r\n          {Array.from({ length: safeCols }).map((_, idx) => (\r\n            <Skeleton key={idx} className=\"h-3 w-full rounded-[var(--rb-radius-sm)]\" />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"px-5 pb-5 pt-4\">\r\n        <div className=\"space-y-3\">\r\n          {Array.from({ length: safeRows }).map((_, rowIdx) => (\r\n            <div\r\n              key={rowIdx}\r\n              className=\"grid gap-3\"\r\n              style={{ gridTemplateColumns: `repeat(${safeCols}, minmax(0, 1fr))` }}\r\n            >\r\n              {Array.from({ length: safeCols }).map((_, colIdx) => (\r\n                <Skeleton\r\n                  key={colIdx}\r\n                  className={cn(\r\n                    \"h-3 rounded-[var(--rb-radius-sm)]\",\r\n                    colIdx === 0 ? \"w-3/4\" : \"w-full\",\r\n                  )}\r\n                />\r\n              ))}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","export function formatMoney(args: {\r\n  amountCents: number | null | undefined;\r\n  currency: string | null | undefined;\r\n  fallback?: string;\r\n}): string {\r\n  const amountCents = args.amountCents;\r\n  const currency = args.currency?.toUpperCase() ?? null;\r\n\r\n  if (typeof amountCents !== \"number\" || !Number.isFinite(amountCents)) {\r\n    return args.fallback ?? \"—\";\r\n  }\r\n\r\n  const amount = amountCents / 100;\r\n\r\n  if (!currency || currency.length !== 3) {\r\n    return `${amount.toFixed(2)}`;\r\n  }\r\n\r\n  try {\r\n    return new Intl.NumberFormat(undefined, {\r\n      style: \"currency\",\r\n      currency,\r\n      minimumFractionDigits: 2,\r\n      maximumFractionDigits: 2,\r\n    }).format(amount);\r\n  } catch {\r\n    return `${currency} ${amount.toFixed(2)}`;\r\n  }\r\n}\r\n","\"use client\";\r\n\r\nimport { apiFetch } from \"@/lib/api\";\r\nimport { formatMoney } from \"@/lib/money\";\r\nimport { RequireAuth } from \"@/components/RequireAuth\";\r\nimport { Alert } from \"@/components/ui/Alert\";\r\nimport { Badge } from \"@/components/ui/Badge\";\r\nimport { Button } from \"@/components/ui/Button\";\r\nimport { Card, CardContent } from \"@/components/ui/Card\";\r\nimport { PageHeader } from \"@/components/ui/PageHeader\";\r\nimport { Skeleton } from \"@/components/ui/Skeleton\";\r\nimport React, { useEffect, useMemo, useState } from \"react\";\r\n\r\ntype AdminDashboardKpis = {\r\n  generated_at: string;\r\n  tenants: { total: number; by_status: Record<string, number> };\r\n  users: { total: number; admins: number };\r\n  subscriptions: { active_total: number; by_status: Record<string, number> };\r\n  revenue: {\r\n    paid_last_30d_by_currency: Record<string, number>;\r\n    paid_ytd_by_currency: Record<string, number>;\r\n  };\r\n  mrr_by_currency: Record<string, number>;\r\n};\r\n\r\ntype AdminSalesLast12Months = {\r\n  generated_at: string;\r\n  months: { key: string; label: string }[];\r\n  totals_by_currency: Record<string, number[]>;\r\n};\r\n\r\nexport default function AdminDashboardPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [kpis, setKpis] = useState<AdminDashboardKpis | null>(null);\r\n  const [salesLoading, setSalesLoading] = useState(true);\r\n  const [salesError, setSalesError] = useState<string | null>(null);\r\n  const [sales, setSales] = useState<AdminSalesLast12Months | null>(null);\r\n  const [reloadNonce, setReloadNonce] = useState(0);\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n\r\n    async function load() {\r\n      try {\r\n        setError(null);\r\n        setLoading(true);\r\n        const res = await apiFetch<AdminDashboardKpis>(\"/api/admin/dashboard/kpis\");\r\n        if (!alive) return;\r\n        setKpis(res);\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setError(e instanceof Error ? e.message : \"Failed to load dashboard KPIs.\");\r\n        setKpis(null);\r\n      } finally {\r\n        if (!alive) return;\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    async function loadSales() {\r\n      try {\r\n        setSalesError(null);\r\n        setSalesLoading(true);\r\n        const res = await apiFetch<AdminSalesLast12Months>(\"/api/admin/dashboard/sales-last-12-months\");\r\n        if (!alive) return;\r\n        setSales(res);\r\n      } catch (e) {\r\n        if (!alive) return;\r\n        setSalesError(e instanceof Error ? e.message : \"Failed to load sales history.\");\r\n        setSales(null);\r\n      } finally {\r\n        if (!alive) return;\r\n        setSalesLoading(false);\r\n      }\r\n    }\r\n\r\n    void load();\r\n    void loadSales();\r\n\r\n    return () => {\r\n      alive = false;\r\n    };\r\n  }, [reloadNonce]);\r\n\r\n  function StatCard({\r\n    label,\r\n    value,\r\n    badge,\r\n    badgeVariant,\r\n    glowClassName,\r\n  }: {\r\n    label: string;\r\n    value: string;\r\n    badge: string;\r\n    badgeVariant: Parameters<typeof Badge>[0][\"variant\"];\r\n    glowClassName: string;\r\n  }) {\r\n    return (\r\n      <Card className=\"relative overflow-hidden\">\r\n        <div className={\"pointer-events-none absolute -right-10 -top-10 h-28 w-28 rounded-full blur-2xl opacity-70 \" + glowClassName} />\r\n        <CardContent className=\"pt-5\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-xs font-medium tracking-wide text-zinc-500\">{label}</div>\r\n              <div className=\"mt-1 truncate text-2xl font-semibold text-[var(--rb-text)]\">{value}</div>\r\n            </div>\r\n            <Badge variant={badgeVariant}>{badge}</Badge>\r\n          </div>\r\n          <div className=\"mt-3 h-px w-full bg-[var(--rb-border)]\" />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  function StatCardLoading({ label, glowClassName }: { label: string; glowClassName: string }) {\r\n    return (\r\n      <Card className=\"relative overflow-hidden\">\r\n        <div className={\"pointer-events-none absolute -right-10 -top-10 h-28 w-28 rounded-full blur-2xl opacity-70 \" + glowClassName} />\r\n        <CardContent className=\"pt-5\">\r\n          <div className=\"flex items-start justify-between gap-3\">\r\n            <div className=\"min-w-0\">\r\n              <div className=\"text-xs font-medium tracking-wide text-zinc-500\">{label}</div>\r\n              <div className=\"mt-1\">\r\n                <Skeleton className=\"h-8 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n              </div>\r\n            </div>\r\n            <Skeleton className=\"h-5 w-16 rounded-full\" />\r\n          </div>\r\n          <div className=\"mt-3 h-px w-full bg-[var(--rb-border)]\" />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const currencies = useMemo(() => {\r\n    const set = new Set<string>();\r\n    for (const k of Object.keys(kpis?.mrr_by_currency ?? {})) set.add(k);\r\n    for (const k of Object.keys(kpis?.revenue?.paid_last_30d_by_currency ?? {})) set.add(k);\r\n    for (const k of Object.keys(kpis?.revenue?.paid_ytd_by_currency ?? {})) set.add(k);\r\n    return Array.from(set).filter(Boolean).sort();\r\n  }, [kpis]);\r\n\r\n  const primaryCurrency = currencies[0] ?? null;\r\n\r\n  const mrrPrimary = primaryCurrency ? (kpis?.mrr_by_currency?.[primaryCurrency] ?? 0) : 0;\r\n  const paid30Primary = primaryCurrency ? (kpis?.revenue?.paid_last_30d_by_currency?.[primaryCurrency] ?? 0) : 0;\r\n  const paidYtdPrimary = primaryCurrency ? (kpis?.revenue?.paid_ytd_by_currency?.[primaryCurrency] ?? 0) : 0;\r\n\r\n  const formatMultiCurrency = (m: Record<string, number> | null | undefined) => {\r\n    const entries = Object.entries(m ?? {}).filter(([c]) => Boolean(c));\r\n    if (entries.length === 0) return \"—\";\r\n    return entries\r\n      .sort((a, b) => a[0].localeCompare(b[0]))\r\n      .map(([currency, amountCents]) => formatMoney({ amountCents, currency, fallback: \"—\" }))\r\n      .join(\" · \");\r\n  };\r\n\r\n  const byStatus = kpis?.tenants?.by_status ?? {};\r\n  const tenantStatuses = [\"active\", \"trial\", \"past_due\", \"suspended\", \"closed\"]\r\n    .filter((s) => typeof byStatus?.[s] === \"number\")\r\n    .map((s) => ({ status: s, count: byStatus[s] }));\r\n\r\n  const chartCurrency = useMemo(() => {\r\n    const keys = Object.keys(sales?.totals_by_currency ?? {}).filter(Boolean).sort();\r\n    return primaryCurrency ?? keys[0] ?? null;\r\n  }, [primaryCurrency, sales]);\r\n\r\n  const chartMonths = sales?.months ?? [];\r\n  const chartValues = chartCurrency ? (sales?.totals_by_currency?.[chartCurrency] ?? []) : [];\r\n\r\n  function SalesLineChart({ values }: { values: number[] }) {\r\n    const width = 600;\r\n    const height = 160;\r\n    const padX = 8;\r\n    const padY = 10;\r\n\r\n    const max = values.reduce((m, v) => Math.max(m, v), 0);\r\n    const safeMax = max > 0 ? max : 1;\r\n    const n = Math.max(values.length, 1);\r\n    const innerW = width - padX * 2;\r\n    const innerH = height - padY * 2;\r\n\r\n    const points = values\r\n      .map((v, i) => {\r\n        const x = padX + (n === 1 ? innerW / 2 : (innerW * i) / (n - 1));\r\n        const y = padY + innerH * (1 - v / safeMax);\r\n        return `${x.toFixed(2)},${y.toFixed(2)}`;\r\n      })\r\n      .join(\" \");\r\n\r\n    const area = `${padX},${height - padY} ${points} ${width - padX},${height - padY}`;\r\n\r\n    return (\r\n      <svg viewBox={`0 0 ${width} ${height}`} className=\"h-40 w-full\" role=\"img\" aria-label=\"Sales chart\">\r\n        <defs>\r\n          <linearGradient id=\"rb-sales-fill\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\r\n            <stop offset=\"0%\" stopColor=\"var(--rb-blue)\" stopOpacity=\"0.25\" />\r\n            <stop offset=\"100%\" stopColor=\"var(--rb-blue)\" stopOpacity=\"0\" />\r\n          </linearGradient>\r\n        </defs>\r\n        <rect x=\"0\" y=\"0\" width={width} height={height} fill=\"transparent\" />\r\n        <polyline points={area} fill=\"url(#rb-sales-fill)\" stroke=\"none\" />\r\n        <polyline points={points} fill=\"none\" stroke=\"var(--rb-blue)\" strokeWidth=\"2\" strokeLinejoin=\"round\" strokeLinecap=\"round\" />\r\n      </svg>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <RequireAuth requiredPermission=\"admin.access\">\r\n      <div className=\"space-y-6\">\r\n        <PageHeader\r\n          title=\"Dashboard\"\r\n          description=\"Platform overview (admin).\"\r\n          actions={\r\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setReloadNonce((n) => n + 1)} disabled={loading}>\r\n              Refresh\r\n            </Button>\r\n          }\r\n        />\r\n\r\n        {error ? (\r\n          <Alert variant=\"danger\" title=\"Could not load KPIs\">\r\n            {error}\r\n          </Alert>\r\n        ) : null}\r\n\r\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\r\n          {loading ? (\r\n            <>\r\n              <StatCardLoading label=\"Tenants\" glowClassName=\"bg-[color:color-mix(in_srgb,var(--rb-text),white_88%)]\" />\r\n              <StatCardLoading label=\"Active subscriptions\" glowClassName=\"bg-[color:color-mix(in_srgb,var(--rb-blue),white_80%)]\" />\r\n              <StatCardLoading label=\"MRR\" glowClassName=\"bg-[color:color-mix(in_srgb,#16a34a,white_75%)]\" />\r\n              <StatCardLoading label=\"Users\" glowClassName=\"bg-[color:color-mix(in_srgb,var(--rb-border),white_55%)]\" />\r\n            </>\r\n          ) : (\r\n            <>\r\n              <StatCard\r\n                label=\"Tenants\"\r\n                value={String(kpis?.tenants?.total ?? 0)}\r\n                badge=\"tenants\"\r\n                badgeVariant=\"default\"\r\n                glowClassName=\"bg-[color:color-mix(in_srgb,var(--rb-text),white_88%)]\"\r\n              />\r\n              <StatCard\r\n                label=\"Active subscriptions\"\r\n                value={String(kpis?.subscriptions?.active_total ?? 0)}\r\n                badge=\"subs\"\r\n                badgeVariant=\"info\"\r\n                glowClassName=\"bg-[color:color-mix(in_srgb,var(--rb-blue),white_80%)]\"\r\n              />\r\n              <StatCard\r\n                label=\"MRR\"\r\n                value={primaryCurrency ? formatMoney({ amountCents: mrrPrimary, currency: primaryCurrency }) : \"—\"}\r\n                badge={primaryCurrency ?? \"—\"}\r\n                badgeVariant=\"success\"\r\n                glowClassName=\"bg-[color:color-mix(in_srgb,#16a34a,white_75%)]\"\r\n              />\r\n              <StatCard\r\n                label=\"Users\"\r\n                value={String(kpis?.users?.total ?? 0)}\r\n                badge={`${kpis?.users?.admins ?? 0} admins`}\r\n                badgeVariant=\"default\"\r\n                glowClassName=\"bg-[color:color-mix(in_srgb,var(--rb-border),white_55%)]\"\r\n              />\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 gap-4 lg:grid-cols-3\">\r\n          <Card>\r\n            <CardContent className=\"pt-5\">\r\n              <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Tenant status</div>\r\n              <div className=\"mt-3 flex flex-wrap gap-2\">\r\n                {loading ? (\r\n                  <>\r\n                    <Skeleton className=\"h-5 w-24 rounded-full\" />\r\n                    <Skeleton className=\"h-5 w-20 rounded-full\" />\r\n                    <Skeleton className=\"h-5 w-28 rounded-full\" />\r\n                    <Skeleton className=\"h-5 w-24 rounded-full\" />\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    {tenantStatuses.length === 0 ? <div className=\"text-sm text-zinc-600\">—</div> : null}\r\n                    {tenantStatuses.map((s) => (\r\n                      <Badge key={s.status} variant=\"default\">\r\n                        {s.status}: {String(s.count)}\r\n                      </Badge>\r\n                    ))}\r\n                  </>\r\n                )}\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardContent className=\"pt-5\">\r\n              <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Revenue</div>\r\n              <div className=\"mt-3 space-y-2\">\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-zinc-600\">Paid (last 30d)</div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">\r\n                    {loading ? <Skeleton className=\"h-4 w-44 rounded-[var(--rb-radius-sm)]\" /> : formatMultiCurrency(kpis?.revenue?.paid_last_30d_by_currency)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-zinc-600\">Paid (YTD)</div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">\r\n                    {loading ? <Skeleton className=\"h-4 w-44 rounded-[var(--rb-radius-sm)]\" /> : formatMultiCurrency(kpis?.revenue?.paid_ytd_by_currency)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          <Card>\r\n            <CardContent className=\"pt-5\">\r\n              <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Billing</div>\r\n              <div className=\"mt-3 space-y-2\">\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-zinc-600\">MRR (all currencies)</div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">\r\n                    {loading ? <Skeleton className=\"h-4 w-44 rounded-[var(--rb-radius-sm)]\" /> : formatMultiCurrency(kpis?.mrr_by_currency)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-zinc-600\">Primary currency</div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">\r\n                    {loading ? <Skeleton className=\"h-4 w-16 rounded-[var(--rb-radius-sm)]\" /> : (primaryCurrency ?? \"—\")}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-zinc-600\">Paid (30d, primary)</div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">\r\n                    {loading ? (\r\n                      <Skeleton className=\"h-4 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n                    ) : primaryCurrency ? (\r\n                      formatMoney({ amountCents: paid30Primary, currency: primaryCurrency })\r\n                    ) : (\r\n                      \"—\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div className=\"flex items-center justify-between gap-3\">\r\n                  <div className=\"text-sm text-zinc-600\">Paid (YTD, primary)</div>\r\n                  <div className=\"text-sm font-semibold text-[var(--rb-text)]\">\r\n                    {loading ? (\r\n                      <Skeleton className=\"h-4 w-28 rounded-[var(--rb-radius-sm)]\" />\r\n                    ) : primaryCurrency ? (\r\n                      formatMoney({ amountCents: paidYtdPrimary, currency: primaryCurrency })\r\n                    ) : (\r\n                      \"—\"\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </CardContent>\r\n          </Card>\r\n        </div>\r\n\r\n        <Card>\r\n          <CardContent className=\"pt-5\">\r\n            <div className=\"flex flex-wrap items-baseline justify-between gap-3\">\r\n              <div>\r\n                <div className=\"text-sm font-semibold text-[var(--rb-text)]\">Sales (last 12 months)</div>\r\n                <div className=\"mt-1 text-sm text-zinc-600\">Paid invoices grouped by month.</div>\r\n              </div>\r\n              <div className=\"text-sm font-semibold text-[var(--rb-text)]\">{chartCurrency ?? \"—\"}</div>\r\n            </div>\r\n\r\n            {salesError ? (\r\n              <div className=\"mt-4\">\r\n                <Alert variant=\"danger\" title=\"Could not load sales history\">\r\n                  {salesError}\r\n                </Alert>\r\n              </div>\r\n            ) : null}\r\n\r\n            <div className=\"mt-4\">\r\n              {salesLoading ? (\r\n                <Skeleton className=\"h-40 w-full rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)]\" />\r\n              ) : chartValues.length === 0 ? (\r\n                <div className=\"h-40 w-full rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-4 text-sm text-zinc-600\">\r\n                  —\r\n                </div>\r\n              ) : (\r\n                <div>\r\n                  <SalesLineChart values={chartValues} />\r\n                  <div className=\"mt-2 flex flex-wrap gap-x-4 gap-y-1 text-xs text-zinc-600\">\r\n                    <div>\r\n                      {chartMonths[0]?.label ?? \"\"}\r\n                      {chartMonths.length > 1 ? \" → \" + (chartMonths[chartMonths.length - 1]?.label ?? \"\") : \"\"}\r\n                    </div>\r\n                    <div>\r\n                      Total: {chartCurrency ? formatMoney({ amountCents: chartValues.reduce((a, b) => a + b, 0), currency: chartCurrency }) : \"—\"}\r\n                    </div>\r\n                    <div>\r\n                      Last month: {chartCurrency ? formatMoney({ amountCents: chartValues[chartValues.length - 1] ?? 0, currency: chartCurrency }) : \"—\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </RequireAuth>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}