module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},2057,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.AppRouterContext},3420,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.HooksClientContext},98823,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored.contexts.ServerInsertedHtml},1395,(a,b,c)=>{"use strict";b.exports=a.r(31699).vendored["react-ssr"].ReactServerDOMTurbopackClient},4600,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 py-4",a),...d})}function f({className:a,...d}){return(0,b.jsx)("h3",{className:(0,c.cn)("text-sm font-semibold text-[var(--rb-text)]",a),...d})}function g({className:a,...d}){return(0,b.jsx)("p",{className:(0,c.cn)("mt-1 text-sm text-zinc-600",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{className:(0,c.cn)("px-5 pb-5",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},7160,a=>{"use strict";function b(...a){return a.filter(Boolean).join(" ")}a.s(["cn",()=>b])},87973,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},97867,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(7160);function e({className:a,variant:e="primary",size:f="md",asChild:g=!1,type:h="button",disabled:i,onClick:j,children:k,...l}){let m=(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-[var(--rb-radius-sm)] text-sm font-medium transition-colors disabled:pointer-events-none disabled:opacity-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",{sm:"h-8 px-3",md:"h-10 px-4",lg:"h-11 px-5"}[f],{primary:"bg-[var(--rb-blue)] text-white hover:opacity-90",secondary:"bg-[var(--rb-orange)] text-white hover:opacity-90",outline:"border border-[var(--rb-border)] bg-white text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]",ghost:"bg-transparent text-[var(--rb-text)] hover:bg-[var(--rb-surface-muted)]"}[e],i?"pointer-events-none opacity-50":"",a);if(g){let a=c.default.Children.only(k);return c.default.isValidElement(a)?c.default.cloneElement(a,{className:(0,d.cn)(m,a.props?.className),"aria-disabled":!!i||void 0,tabIndex:i?-1:a.props?.tabIndex,onClick:b=>{if(i){b.preventDefault(),b.stopPropagation();return}j?.(b),a.props?.onClick?.(b)}}):null}return(0,b.jsx)("button",{className:m,type:h,disabled:i,onClick:j,...l,children:k})}a.s(["Button",()=>e])},39693,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"useMergedRef",{enumerable:!0,get:function(){return e}});let d=a.r(45056);function e(a,b){let c=(0,d.useRef)(null),e=(0,d.useRef)(null);return(0,d.useCallback)(d=>{if(null===d){let a=c.current;a&&(c.current=null,a());let b=e.current;b&&(e.current=null,b())}else a&&(c.current=f(a,d)),b&&(e.current=f(b,d))},[a,b])}function f(a,b){if("function"!=typeof a)return a.current=b,()=>{a.current=null};{let c=a(b);return"function"==typeof c?c:()=>a(null)}}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},77038,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"warnOnce",{enumerable:!0,get:function(){return d}});let d=a=>{}},74601,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={getDeploymentId:function(){return f},getDeploymentIdQueryOrEmptyString:function(){return g}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(){return!1}function g(){return""}},75385,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({variant:a,className:d}){let e="h-4 w-4 shrink-0";return"success"===a?(0,b.jsx)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,b.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 9v4"}),(0,b.jsx)("path",{d:"M12 17h.01"}),(0,b.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===a?(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M18 6L6 18"}),(0,b.jsx)("path",{d:"M6 6l12 12"})]}):(0,b.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,c.cn)(e,d),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,b.jsx)("path",{d:"M12 16v-4"}),(0,b.jsx)("path",{d:"M12 8h.01"}),(0,b.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function e({className:a,variant:e="info",title:f,children:g,...h}){let i={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[e];return(0,b.jsx)("div",{role:"alert",className:(0,c.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",i.wrapper,a),...h,children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d,{variant:e,className:(0,c.cn)("mt-0.5",i.icon)}),(0,b.jsxs)("div",{className:"min-w-0",children:[f?(0,b.jsx)("div",{className:(0,c.cn)("text-sm font-semibold",i.title),children:f}):null,g?(0,b.jsx)("div",{className:(0,c.cn)("text-sm text-zinc-700",f?"mt-1":""),children:g}):null]})]})})}a.s(["Alert",()=>e])},17933,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,variant:d="default",...e}){return(0,b.jsx)("span",{className:(0,c.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[d],a),...e})}a.s(["Badge",()=>d])},29054,a=>{"use strict";var b=a.i(57850),c=a.i(7160);function d({className:a,type:d,...e}){return(0,b.jsx)("input",{type:d,className:(0,c.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",a),...e})}a.s(["Input",()=>d])},45004,a=>{"use strict";function b(a){return new Date(a).toISOString()}let c=[{id:"client_001",name:"Alex Johnson",email:"alex@example.com",phone:"+1 555 0101",created_at:b("2026-01-05T10:00:00Z")},{id:"client_002",name:"Sam Rivera",email:"sam@example.com",phone:"+1 555 0102",created_at:b("2026-01-06T09:00:00Z")},{id:"client_003",name:"Taylor Chen",email:"taylor@example.com",phone:"+1 555 0103",created_at:b("2026-01-08T15:30:00Z")},{id:"client_004",name:"Jordan Patel",email:"jordan@example.com",phone:"+1 555 0104",created_at:b("2026-01-10T11:45:00Z")},{id:"client_005",name:"Morgan Lee",email:"morgan@example.com",phone:"+1 555 0105",created_at:b("2026-01-12T08:20:00Z")}],d=[{id:"pay_001",job_id:"job_001",status:"paid",method:"card",amount:{currency:"USD",amount_cents:7500},created_at:b("2026-01-26T14:12:00Z")},{id:"pay_002",job_id:"job_002",status:"pending",method:"cash",amount:{currency:"USD",amount_cents:4500},created_at:b("2026-01-27T10:20:00Z")},{id:"pay_003",job_id:"job_004",status:"paid",method:"bank_transfer",amount:{currency:"USD",amount_cents:12e3},created_at:b("2026-01-22T16:40:00Z")}],e=[{id:"exp_001",job_id:"job_001",category_id:"expcat_001",label:"Replacement battery",amount:{currency:"USD",amount_cents:3200},created_at:b("2026-01-26T09:05:00Z")},{id:"exp_002",job_id:"job_002",category_id:"expcat_002",label:"Courier",amount:{currency:"USD",amount_cents:1500},created_at:b("2026-01-27T11:10:00Z")}],f=[{id:"timelog_001",job_id:"job_001",user_label:"Technician A",minutes:90,rate:{currency:"USD",amount_cents:9e3},created_at:b("2026-01-26T12:10:00Z")},{id:"timelog_002",job_id:"job_002",user_label:"Technician B",minutes:45,rate:{currency:"USD",amount_cents:8e3},created_at:b("2026-01-27T12:30:00Z")}],g=[{id:"att_001",job_id:"job_001",filename:"intake-photo.jpg",mime_type:"image/jpeg",size_bytes:245312,url:"/mock/uploads/intake-photo.jpg",created_at:b("2026-01-26T08:58:00Z")},{id:"att_002",job_id:"job_003",filename:"screen-video.mp4",mime_type:"video/mp4",size_bytes:1245e3,url:"/mock/uploads/screen-video.mp4",created_at:b("2026-01-23T09:15:00Z")}],h=[{id:"msg_001",job_id:"job_001",author:"customer",body:"Hi, I dropped it off today. Please let me know the ETA.",created_at:b("2026-01-26T09:00:00Z"),attachments:[g[0]]},{id:"msg_002",job_id:"job_001",author:"staff",body:"Thanks! We are running diagnostics now.",created_at:b("2026-01-26T09:20:00Z")},{id:"msg_003",job_id:"job_003",author:"customer",body:"The screen flickers randomly. It’s worse at night.",created_at:b("2026-01-23T09:10:00Z"),attachments:[g[1]]}],i=(a,b)=>b.map(b=>({...b,job_id:a})),j=[{id:"estimate_001",job_id:"job_001",client_id:"client_001",status:"approved",lines:[{id:"estline_001",label:"Battery replacement",qty:1,unit_price:{currency:"USD",amount_cents:7500}}],created_at:b("2026-01-26T10:00:00Z"),updated_at:b("2026-01-26T10:30:00Z")},{id:"estimate_002",job_id:"job_003",client_id:"client_003",status:"pending",lines:[{id:"estline_002",label:"Display diagnostics",qty:1,unit_price:{currency:"USD",amount_cents:2500}},{id:"estline_003",label:"Potential screen replacement",qty:1,unit_price:{currency:"USD",amount_cents:19900}}],created_at:b("2026-01-23T10:20:00Z"),updated_at:b("2026-01-23T10:20:00Z")},{id:"estimate_003",job_id:"job_005",client_id:"client_005",status:"rejected",lines:[{id:"estline_004",label:"Thermal paste + cleaning",qty:1,unit_price:{currency:"USD",amount_cents:6900}}],created_at:b("2026-01-19T12:00:00Z"),updated_at:b("2026-01-20T09:00:00Z")}],k=[{id:"job_001",case_number:"RB-10421",title:"Dell XPS 13 battery replacement",status:"in_process",client_id:"client_001",customer_device_ids:["custdev_001"],estimate_id:"estimate_001",payment_ids:["pay_001"],created_at:b("2026-01-26T08:50:00Z"),updated_at:b("2026-01-26T14:15:00Z"),timeline:i("job_001",[{id:"tl_001",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-26T08:50:00Z"),meta:{status:"new_quote"}},{id:"tl_002",type:"estimate",title:"Estimate created",created_at:b("2026-01-26T10:00:00Z"),meta:{estimate_id:"estimate_001"}},{id:"tl_003",type:"status_changed",title:"Status set to In Process",created_at:b("2026-01-26T10:45:00Z"),meta:{status:"in_process"}},{id:"tl_004",type:"payment",title:"Payment received",created_at:b("2026-01-26T14:12:00Z"),meta:{payment_id:"pay_001"}}]),messages:h.filter(a=>"job_001"===a.job_id),attachments:g.filter(a=>"job_001"===a.job_id)},{id:"job_002",case_number:"RB-10418",title:"Lenovo ThinkPad intermittent boot",status:"new_quote",client_id:"client_002",customer_device_ids:["custdev_002"],estimate_id:null,payment_ids:["pay_002"],created_at:b("2026-01-25T11:30:00Z"),updated_at:b("2026-01-27T10:22:00Z"),timeline:i("job_002",[{id:"tl_005",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-25T11:30:00Z"),meta:{status:"new_quote"}}]),messages:[],attachments:[]},{id:"job_003",case_number:"RB-10412",title:"Galaxy S23 screen flicker",status:"new_quote",client_id:"client_003",customer_device_ids:["custdev_003"],estimate_id:"estimate_002",payment_ids:[],created_at:b("2026-01-23T09:00:00Z"),updated_at:b("2026-01-23T10:20:00Z"),timeline:i("job_003",[{id:"tl_006",type:"status_changed",title:"Status set to New/Quote",created_at:b("2026-01-23T09:00:00Z"),meta:{status:"new_quote"}},{id:"tl_007",type:"estimate",title:"Estimate created",created_at:b("2026-01-23T10:20:00Z"),meta:{estimate_id:"estimate_002"}}]),messages:h.filter(a=>"job_003"===a.job_id),attachments:g.filter(a=>"job_003"===a.job_id)},{id:"job_004",case_number:"RB-10399",title:"iPad charging port repair",status:"delivered",client_id:"client_004",customer_device_ids:["custdev_004"],estimate_id:null,payment_ids:["pay_003"],created_at:b("2026-01-18T10:00:00Z"),updated_at:b("2026-01-22T16:45:00Z"),timeline:i("job_004",[{id:"tl_008",type:"status_changed",title:"Status set to Completed",created_at:b("2026-01-21T14:00:00Z"),meta:{status:"completed"}},{id:"tl_009",type:"status_changed",title:"Status set to Delivered",created_at:b("2026-01-22T16:45:00Z"),meta:{status:"delivered"}}]),messages:[],attachments:[]},{id:"job_005",case_number:"RB-10380",title:"HP desktop overheating",status:"cancelled",client_id:"client_005",customer_device_ids:["custdev_005"],estimate_id:"estimate_003",payment_ids:[],created_at:b("2026-01-19T11:40:00Z"),updated_at:b("2026-01-20T09:05:00Z"),timeline:i("job_005",[{id:"tl_010",type:"status_changed",title:"Status set to Cancelled",created_at:b("2026-01-20T09:05:00Z"),meta:{status:"cancelled"}}]),messages:[],attachments:[]}],l=[{id:"review_001",job_id:"job_004",client_id:"client_004",rating:5,comment:"Fast service and great communication.",created_at:b("2026-01-23T08:00:00Z")},{id:"review_002",job_id:"job_001",client_id:"client_001",rating:4,comment:"Good work. Slight delay but handled well.",created_at:b("2026-01-27T18:00:00Z")}],m={statuses:[{key:"new_quote",label:"New/Quote"},{key:"in_process",label:"In Process"},{key:"ready",label:"Ready"},{key:"completed",label:"Completed"},{key:"delivered",label:"Delivered"},{key:"cancelled",label:"Cancelled"}],clients:c,device_brands:[{id:"brand_001",name:"Apple"},{id:"brand_002",name:"Dell"},{id:"brand_003",name:"HP"},{id:"brand_004",name:"Lenovo"},{id:"brand_005",name:"Samsung"}],device_types:[{id:"type_001",name:"Laptop"},{id:"type_002",name:"Desktop"},{id:"type_003",name:"Phone"},{id:"type_004",name:"Tablet"},{id:"type_005",name:"Game Console"}],devices:[{id:"device_001",brand_id:"brand_002",type_id:"type_001",model:"XPS 13"},{id:"device_002",brand_id:"brand_001",type_id:"type_004",model:"iPad Pro"},{id:"device_003",brand_id:"brand_005",type_id:"type_003",model:"Galaxy S23"},{id:"device_004",brand_id:"brand_004",type_id:"type_001",model:"ThinkPad T14"},{id:"device_005",brand_id:"brand_003",type_id:"type_002",model:"Pavilion Desktop"}],customer_devices:[{id:"custdev_001",client_id:"client_001",device_id:"device_001",serial_number:"SN-XPS13-0001",notes:"Battery drains quickly."},{id:"custdev_002",client_id:"client_002",device_id:"device_004",serial_number:"SN-TP-0012",notes:"Intermittent boot issues."},{id:"custdev_003",client_id:"client_003",device_id:"device_003",serial_number:"SN-GS23-031",notes:"Screen flickers at low brightness."},{id:"custdev_004",client_id:"client_004",device_id:"device_002",serial_number:"SN-IPAD-888",notes:"Charging port is loose."},{id:"custdev_005",client_id:"client_005",device_id:"device_005",serial_number:"SN-HPD-555",notes:"Runs very hot under load."}],jobs:k,estimates:j,appointments:[{id:"appt_001",scheduled_at:b("2026-01-29T10:00:00Z"),status:"confirmed",client_name:"Alex Johnson",client_email:"alex@example.com",client_phone:"+1 555 0101",notes:"Drop off in the morning.",created_at:b("2026-01-26T16:00:00Z")},{id:"appt_002",scheduled_at:b("2026-02-01T13:30:00Z"),status:"requested",client_name:"Sam Rivera",client_email:"sam@example.com",client_phone:"+1 555 0102",notes:"Prefer weekend.",created_at:b("2026-01-27T09:45:00Z")}],payments:d,expenses:e,expense_categories:[{id:"expcat_001",name:"Parts"},{id:"expcat_002",name:"Shipping"},{id:"expcat_003",name:"Tools"}],time_logs:f,reviews:l,services:[{id:"service_001",name:"Diagnostics",description:"Hardware and software diagnostics.",base_price:{currency:"USD",amount_cents:2500}},{id:"service_002",name:"Battery replacement",description:"Laptop battery replacement service.",base_price:{currency:"USD",amount_cents:7500}},{id:"service_003",name:"Screen replacement",description:"Phone/tablet screen replacement (parts excluded).",base_price:{currency:"USD",amount_cents:19900}}],parts:[{id:"part_001",name:"Laptop battery (generic)",sku:"BAT-GEN-001",price:{currency:"USD",amount_cents:3200},stock:12},{id:"part_002",name:"USB-C port module",sku:"USB-C-MOD-020",price:{currency:"USD",amount_cents:1800},stock:7},{id:"part_003",name:"Thermal paste",sku:"THERM-PASTE-010",price:{currency:"USD",amount_cents:900},stock:30}]};function n(a){return new Promise(b=>{setTimeout(b,a)})}async function o(a,b=350){return await n(b),await a()}function p(a){}function q(a){let b={msg:0,att:0,appt:0},c={...b,[a]:(b[a]??0)+1},d=String(c[a]).padStart(3,"0");return`${a}_${d}`}function r(){return new Date().toISOString()}function s(){var a;let b,c,d,e,f,g;return b=(a={}).estimatesById??{},c=a.jobsById??{},d=a.jobMessagesByJobId??{},e=a.appointments??null,f=m.estimates.map(a=>{let c=b[a.id]??null;return c?{...a,...c}:a}),g=m.jobs.map(a=>{let b=c[a.id]??null,e=d[a.id]??null;return b||e?{...a,...b??{},messages:e||a.messages}:a}),{...m,estimates:f,jobs:g,appointments:e||m.appointments}}function t(a,b){if(!a||"string"!=typeof a||0===a.trim().length)throw Error(`${b} is required.`)}a.s(["mockApi",0,{sleep:n,withLatency:o,getBundle:async()=>await o(()=>s()),getStatuses:async()=>await o(()=>s().statuses),listJobs:async()=>await o(()=>s().jobs),getJob:async a=>await o(()=>s().jobs.find(b=>b.id===a)??null),getJobByCaseNumber:async a=>await o(()=>{var b;let c;return b=s(),c=a.trim().toUpperCase(),b.jobs.find(a=>a.case_number.toUpperCase()===c)??null}),listClients:async()=>await o(()=>s().clients),getClient:async a=>await o(()=>s().clients.find(b=>b.id===a)??null),listCustomerDevices:async()=>await o(()=>s().customer_devices),getCustomerDevice:async a=>await o(()=>s().customer_devices.find(b=>b.id===a)??null),listDevices:async()=>await o(()=>s().devices),listDeviceBrands:async()=>await o(()=>s().device_brands),listDeviceTypes:async()=>await o(()=>s().device_types),listEstimates:async()=>await o(()=>s().estimates),getEstimate:async a=>await o(()=>s().estimates.find(b=>b.id===a)??null),setEstimateStatus:async a=>await o(()=>{let{estimateId:b,status:c}=a,d=s().estimates.find(a=>a.id===b)??null;if(!d)throw Error("Estimate not found.");let e={},f={...e.estimatesById??{}};return f[b]={...f[b]??{},status:c,updated_at:r()},p({...e,estimatesById:f}),{...d,status:c,updated_at:r()}}),listAppointments:async()=>await o(()=>s().appointments),createAppointment:async a=>await o(()=>{t(a.scheduled_at,"scheduled_at"),t(a.client_name,"client_name");let b={id:q("appt"),scheduled_at:new Date(a.scheduled_at).toISOString(),status:"requested",client_name:a.client_name.trim(),client_email:a.client_email??null,client_phone:a.client_phone??null,notes:a.notes??null,created_at:r()},c={},d=[b,...Array.isArray(c.appointments)?c.appointments:s().appointments];return p({...c,appointments:d}),b}),listPayments:async()=>await o(()=>s().payments),listExpenses:async()=>await o(()=>s().expenses),listExpenseCategories:async()=>await o(()=>s().expense_categories),listTimeLogs:async()=>await o(()=>s().time_logs),listServices:async()=>await o(()=>s().services),listParts:async()=>await o(()=>s().parts),listReviews:async()=>await o(()=>s().reviews),postJobMessage:async a=>await o(()=>{let{jobId:b,author:c}=a,d=a.body.trim();if(!d)throw Error("Message body is required.");let e=s().jobs.find(a=>a.id===b)??null;if(!e)throw Error("Job not found.");let f={id:q("msg"),job_id:b,author:c,body:d,created_at:r(),attachments:a.attachments&&a.attachments.length>0?a.attachments.map((a,c)=>({id:0===c?q("att"):`${q("att")}_${c}`,job_id:b,filename:a.filename,mime_type:a.mime_type,size_bytes:a.size_bytes,url:"/mock/uploads/placeholder",created_at:r()})):void 0},g={},h={...g.jobMessagesByJobId??{}},i=h[b]??e.messages;return h[b]=[...i,f],p({...g,jobMessagesByJobId:h}),f}),computeEstimateTotalCents:function(a){return a.lines.reduce((a,b)=>a+b.qty*b.unit_price.amount_cents,0)}}],45004)},90301,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(59843),e=a.i(93609),f=a.i(7160),g=a.i(97867),h=a.i(29054),i=a.i(4600),j=a.i(75385),k=a.i(34075);let l=[{label:"Dashboard",href:a=>`/t/${a}/portal`},{label:"Tickets/Jobs",href:a=>`/t/${a}/portal/tickets`},{label:"Estimates",href:a=>`/t/${a}/portal/estimates`},{label:"Reviews",href:a=>`/t/${a}/portal/reviews`},{label:"My Devices",href:a=>`/t/${a}/portal/devices`},{label:"Booking",href:a=>`/t/${a}/portal/booking`},{label:"Profile",href:a=>`/t/${a}/portal/profile`}];function m(a){}function n({tenantSlug:a,title:n,subtitle:o,actions:p,children:q}){let r=(0,e.usePathname)(),[s,t]=c.default.useState(!0),[u,v]=c.default.useState(null),[w,x]=c.default.useState(""),[y,z]=c.default.useState(!1),[A,B]=c.default.useState(null);c.default.useEffect(()=>{let b=!0;return async function(){try{if(t(!0),B(null),!a||0===a.trim().length)return void v(null);let c=null;if(!c)return void v(null);let d=await (0,k.apiFetch)(`/api/t/${a}/status/lookup`,{method:"POST",body:{caseNumber:c.case_number},token:null,impersonationSessionId:null}),e=d?.job??null;if(!b)return;if(!e){m(a),v(null);return}v({tenant:a,case_number:e.case_number,job_id:String(e.id),unlocked_at:c.unlocked_at})}catch(a){if(!b)return;v(null)}finally{if(!b)return;t(!1)}}(),()=>{b=!1}},[a]);let C=!!u&&!!u.job_id;async function D(){if(!a||0===a.trim().length)return;let b=w.trim();if(!b)return void B("Case number is required.");z(!0),B(null);try{let c=await (0,k.apiFetch)(`/api/t/${a}/status/lookup`,{method:"POST",body:{caseNumber:b},token:null,impersonationSessionId:null}),d=c?.job??null;if(!d)return void B("Case number not found.");let e={tenant:a,case_number:d.case_number,job_id:String(d.id),unlocked_at:new Date().toISOString()};v(e),x("")}catch(a){a instanceof k.ApiError&&404===a.status?B("Case number not found."):B(a instanceof Error?a.message:"Could not unlock portal.")}finally{z(!1),t(!1)}}let E=c.default.useMemo(()=>{let b=l.map(b=>b.href(a)).map(a=>r===a||r.startsWith(`${a}/`)?{href:a,score:a.length}:{href:a,score:-1}).filter(a=>a.score>=0).sort((a,b)=>b.score-a.score);return b[0]?.href??null},[r,a]);return(0,b.jsxs)("div",{className:"min-h-screen bg-[var(--rb-surface-muted)] text-[var(--rb-text)]",children:[(0,b.jsx)("header",{className:"border-b border-[var(--rb-border)] bg-white",children:(0,b.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-3 px-4 py-4",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:`/t/${a}/status`,className:"text-sm font-semibold text-[var(--rb-text)]",children:"RepairBuddy"}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Business: ",a]}),C?(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Case: ",u.case_number]}):null]}),n?(0,b.jsx)("div",{className:"mt-1 truncate text-lg font-semibold text-[var(--rb-text)]",children:n}):null,o?(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:o}):null]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[p||null,C?(0,b.jsx)(g.Button,{variant:"outline",size:"sm",onClick:()=>{m(a),v(null)},children:"Switch case"}):null]})]})}),(0,b.jsx)("div",{className:"mx-auto w-full max-w-6xl px-4 py-6",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-[260px_1fr]",children:[(0,b.jsxs)("aside",{className:"rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",children:[(0,b.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,b.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"My Account"})}),(0,b.jsx)("nav",{className:"space-y-1 p-2",children:C?l.map(c=>{let e=c.href(a),g=!!E&&e===E;return(0,b.jsx)(d.default,{href:e,className:(0,f.cn)("block rounded-[var(--rb-radius-sm)] px-3 py-2 text-sm transition-colors",g?"bg-[var(--rb-surface-muted)] font-medium text-[var(--rb-text)]":"text-zinc-700 hover:bg-[var(--rb-surface-muted)]"),children:c.label},e)}):null})]}),(0,b.jsx)("main",{className:"min-w-0",children:s?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading portal..."}):C?q:(0,b.jsx)(i.Card,{className:"shadow-none",children:(0,b.jsx)(i.CardContent,{className:"pt-5",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-lg font-semibold text-[var(--rb-text)]",children:"Enter your case number"}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"This portal is protected. Enter a case number to view your tickets and estimates."})]}),A?(0,b.jsx)(j.Alert,{variant:"danger",title:"Could not unlock portal",children:A}):null,(0,b.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,b.jsx)(h.Input,{value:w,onChange:a=>x(a.target.value),placeholder:"e.g. RB-1001",disabled:y,onKeyDown:a=>{"Enter"===a.key&&(a.preventDefault(),D())}}),(0,b.jsx)(g.Button,{onClick:()=>void D(),disabled:y||!a||0===a.trim().length,children:y?"Unlocking...":"Unlock"})]}),(0,b.jsxs)("div",{className:"text-xs text-zinc-500",children:["Tip: You can also use the public status page at"," ",(0,b.jsxs)(d.default,{href:`/t/${a}/status`,className:"text-[var(--rb-blue)] hover:underline",children:["/t/",a,"/status"]}),"."]})]})})})})]})})]})}a.s(["PortalShell",()=>n])},40702,a=>{"use strict";var b=a.i(57850),c=a.i(45056),d=a.i(59843),e=a.i(93609),f=a.i(90301),g=a.i(75385),h=a.i(17933),i=a.i(4600),j=a.i(45004);function k(){let a=(0,e.useParams)(),k="string"==typeof a.tenant?a.tenant:"",[l,m]=c.default.useState(!0),[n,o]=c.default.useState(null),[p,q]=c.default.useState(null),[r,s]=c.default.useState([]);return c.default.useEffect(()=>{let a=!0;return async function(){try{if(m(!0),o(null),!k){q(null),s([]);return}let b=null;if(q(b),!b)return void s([]);let c=await j.mockApi.listAppointments();if(!a)return;let d=(Array.isArray(c)?c:[]).slice().sort((a,b)=>a.created_at<b.created_at?1:-1);s(d.slice(0,10))}catch(b){if(!a)return;o(b instanceof Error?b.message:"Failed to load bookings."),s([])}finally{if(!a)return;m(!1)}}(),()=>{a=!1}},[k]),(0,b.jsx)(f.PortalShell,{tenantSlug:k,title:"Booking",subtitle:"Your appointment requests (mock).",children:(0,b.jsxs)("div",{className:"space-y-4",children:[l?(0,b.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading bookings..."}):null,n?(0,b.jsx)(g.Alert,{variant:"danger",title:"Could not load bookings",children:n}):null,l||n||p?null:(0,b.jsx)(g.Alert,{variant:"warning",title:"Portal locked",children:"Enter your case number to view booking history."}),p?(0,b.jsx)(i.Card,{className:"shadow-none",children:(0,b.jsx)(i.CardContent,{className:"pt-5",children:(0,b.jsxs)("div",{className:"text-sm text-zinc-600",children:["Need a new appointment?"," ",(0,b.jsx)(d.default,{href:`/t/${k}/book`,className:"font-semibold text-[var(--rb-blue)] hover:underline",children:"Book now"}),"."]})})}):null,l||n||!p||0!==r.length?null:(0,b.jsx)(g.Alert,{variant:"info",title:"No bookings yet",children:"You haven’t requested any appointments yet."}),r.length>0?(0,b.jsx)("div",{className:"space-y-3",children:r.map(a=>(0,b.jsx)(i.Card,{className:"shadow-none",children:(0,b.jsxs)(i.CardContent,{className:"pt-5",children:[(0,b.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:a.client_name}),(0,b.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:new Date(a.scheduled_at).toLocaleString()}),(0,b.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:["Requested: ",new Date(a.created_at).toLocaleString()]})]}),(0,b.jsx)(h.Badge,{variant:"requested"===a.status?"warning":"confirmed"===a.status?"success":"danger",children:a.status})]}),a.notes?(0,b.jsx)("div",{className:"mt-2 text-sm text-zinc-700",children:a.notes}):null]})},a.id))}):null]})})}a.s(["default",()=>k])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cef601be._.js.map