(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19463,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function s({title:e,description:s,actions:a,className:i}){return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",i),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),s?(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:s}):null]}),a?(0,t.jsx)("div",{className:"flex items-center gap-2",children:a}):null]})}e.s(["PageHeader",()=>s])},68501,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function s({className:e,variant:s="default",...a}){return(0,t.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[s],e),...a})}e.s(["Badge",()=>s])},43901,e=>{"use strict";var t=e.i(48277),r=e.i(14575),s=e.i(72015);function a({className:e,"aria-hidden":s=!0,...a}){return(0,t.jsx)("div",{"aria-hidden":s,className:(0,r.cn)("rb-skeleton",e),...a})}function i({lines:e=3,className:i}){let d=Math.max(1,Math.min(e,12));return(0,t.jsx)(s.Card,{className:(0,r.cn)("overflow-hidden",i),children:(0,t.jsxs)(s.CardContent,{className:"space-y-3 pt-5",children:[(0,t.jsx)(a,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:d}).map((e,s)=>(0,t.jsx)(a,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",s===d-1?"w-3/5":"w-full")},s))]})})}function d({rows:e=6,columns:s=5,className:i}){let d=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(s,10));return(0,t.jsxs)("div",{className:(0,r.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",i),children:[(0,t.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,r)=>(0,t.jsx)(a,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},r))})}),(0,t.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:d}).map((e,s)=>(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,s)=>(0,t.jsx)(a,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===s?"w-3/4":"w-full")},s))},s))})})]})}e.s(["CardSkeleton",()=>i,"Skeleton",()=>a,"TableSkeleton",()=>d])},40709,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function s({className:e,children:s,...a}){return(0,t.jsx)("select",{className:(0,r.cn)("w-full appearance-none rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70","bg-[right_0.75rem_center] bg-no-repeat pr-10",'[background-image:url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="%236b7280" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m6 9 6 6 6-6"/></svg>\')]',e),...a,children:s})}e.s(["Select",()=>s])},43388,e=>{"use strict";var t=e.i(48277),r=e.i(30668),s=e.i(96086),a=e.i(2585),i=e.i(23187),d=e.i(86099),l=e.i(78030),n=e.i(69503),o=e.i(19463),c=e.i(9693),m=e.i(72015),u=e.i(68501),b=e.i(40709),x=e.i(43901),h=e.i(1314);function v({field:e,label:r,active:s,onSelect:a}){return(0,t.jsx)(c.Button,{size:"sm",variant:s?"primary":"outline",className:"rounded-none border-0",onClick:()=>a(e),children:r})}function p(){let e=(0,h.useAuth)(),p=(0,s.useParams)(),g=p.business??p.tenant,f=e.isAdmin,[j,w]=r.default.useState("pickup_date"),[N,y]=r.default.useState("all"),[_,k]=r.default.useState(!1),C=r.default.useRef(null),S=r.default.useRef(0),B=r.default.useMemo(()=>[{id:"RB-10421",type:"job",customer:"Alex Johnson",status:"In Process",assigned_to_me:!0,pickup_date:"2026-01-28",delivery_date:"2026-01-30",post_date:"2026-01-26"},{id:"RB-10418",type:"job",customer:"Sam Rivera",status:"New/Quote",assigned_to_me:!1,pickup_date:"2026-01-29",delivery_date:"2026-02-02",post_date:"2026-01-25"},{id:"E-883",type:"estimate",customer:"Taylor Chen",status:"New/Quote",assigned_to_me:!0,pickup_date:"2026-01-27",delivery_date:"2026-01-31",post_date:"2026-01-23"},{id:"RB-10412",type:"job",customer:"Jordan Patel",status:"Delivered",assigned_to_me:!1,pickup_date:"2026-01-20",delivery_date:"2026-01-22",post_date:"2026-01-18"},{id:"E-879",type:"estimate",customer:"Morgan Lee",status:"Cancelled",assigned_to_me:!1,pickup_date:"2026-01-21",delivery_date:"2026-01-24",post_date:"2026-01-19"}],[]);r.default.useEffect(()=>{"my_assignments"!==N||f||y("all")},[N,f]);let M=r.default.useMemo(()=>"jobs"===N?B.filter(e=>"job"===e.type):"estimates"===N?B.filter(e=>"estimate"===e.type):"my_assignments"===N?B.filter(e=>e.assigned_to_me):B,[N,B]),T=r.default.useMemo(()=>({jobs:M.filter(e=>"job"===e.type).length,estimates:M.filter(e=>"estimate"===e.type).length}),[M]),A=r.default.useCallback(e=>"pickup_date"===j?e.pickup_date:"delivery_date"===j?e.delivery_date:"next_service_date"===j?e.next_service_date??e.pickup_date:e.post_date,[j]),E=r.default.useCallback((e,t,r)=>{let s=++S.current;k(!0),window.setTimeout(()=>{if(s!==S.current)return;let a=e.startStr.split("T")[0]??e.startStr,i=e.endStr.split("T")[0]??e.endStr,d=M.map(e=>{var t;let r=A(e);return{id:e.id,title:`${"estimate"===e.type?"Estimate":"Job"} ${e.id} - ${e.customer}`,start:r,allDay:!0,classNames:["estimate"===e.type?"estimate-event":"job-event",(t=e.status,`status-${t.toLowerCase().replace(/\s+/g,"").replace(/\//g,"")}`)],extendedProps:{type:e.type,status:e.status,tooltip:`Case: ${e.id} | Customer: ${e.customer} | Status: ${e.status}`}}}).filter(e=>{let t="string"==typeof e.start?e.start:"";return t>=a&&t<i});try{t(d)}catch(e){r(e instanceof Error?e:Error("Failed to load calendar events."))}k(!1)},450)},[A,M]);r.default.useEffect(()=>{C.current?.getApi().refetchEvents()},[j,N]);let P=r.default.useCallback(e=>w(e),[]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(o.PageHeader,{title:"Service Calendar",description:"View and manage all your service appointments and estimates",actions:(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,t.jsxs)("div",{className:"inline-flex overflow-hidden rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white",children:[(0,t.jsx)(v,{field:"pickup_date",label:"Pickup Date",active:"pickup_date"===j,onSelect:P}),(0,t.jsx)("div",{className:"h-8 w-px bg-[var(--rb-border)]"}),(0,t.jsx)(v,{field:"delivery_date",label:"Delivery Date",active:"delivery_date"===j,onSelect:P}),null,(0,t.jsx)("div",{className:"h-8 w-px bg-[var(--rb-border)]"}),(0,t.jsx)(v,{field:"post_date",label:"Creation",active:"post_date"===j,onSelect:P})]})})}),(0,t.jsx)(m.Card,{className:"shadow-none",children:(0,t.jsxs)(m.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"rounded-[var(--rb-radius-md)] bg-[var(--rb-surface-muted)] p-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Filter:"}),(0,t.jsxs)(b.Select,{value:N,onChange:e=>y(e.target.value),className:"w-auto min-w-[180px]",disabled:_,children:[(0,t.jsx)("option",{value:"all",children:"All Items"}),(0,t.jsx)("option",{value:"jobs",children:"Jobs Only"}),(0,t.jsx)("option",{value:"estimates",children:"Estimates Only"}),f?(0,t.jsx)("option",{value:"my_assignments",children:"My Assignments"}):null]}),(0,t.jsx)("input",{type:"hidden",value:j,readOnly:!0})]}),(0,t.jsx)("div",{children:(0,t.jsx)(c.Button,{size:"sm",variant:"primary",onClick:function(){C.current?.getApi().refetchEvents()},disabled:_,children:_?"Loading...":"Refresh"})})]})}),(0,t.jsxs)("div",{className:"relative mt-4",children:[(0,t.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",style:{minHeight:500},children:(0,t.jsx)(a.default,{ref:C,plugins:[i.default,d.default,l.default,n.default],initialView:"dayGridMonth",headerToolbar:{left:"prevYear,prev,next,nextYear today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},buttonText:{today:"Today",month:"Month",week:"Week",day:"Day",list:"List"},height:"auto",expandRows:!0,navLinks:!0,nowIndicator:!0,editable:!1,selectable:!0,dayMaxEvents:10,events:E,eventDidMount:e=>{let t=e.event.extendedProps?.tooltip;"string"==typeof t&&t.length>0&&e.el.setAttribute("title",t)},eventContent:e=>{let r=e.event.extendedProps?.status;return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"text-[0.875rem] font-medium leading-[1.1]",children:e.event.title}),r?(0,t.jsx)("div",{className:"text-[0.8125rem] opacity-80",children:r}):null]})},loading:e=>{k(e)}})}),_?(0,t.jsx)("div",{className:"absolute inset-0 z-10 rounded-[var(--rb-radius-md)] bg-white/70 p-4 backdrop-blur-[1px]",children:(0,t.jsxs)("div",{className:"mx-auto mt-20 w-full max-w-[640px] rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-5 shadow",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)(x.Skeleton,{className:"h-4 w-44 rounded-[var(--rb-radius-sm)]"}),(0,t.jsx)(x.Skeleton,{className:"mt-2 h-4 w-72 rounded-[var(--rb-radius-sm)]"})]}),(0,t.jsx)(x.Skeleton,{className:"h-9 w-24 rounded-[var(--rb-radius-sm)]"})]}),(0,t.jsx)("div",{className:"mt-4 grid gap-3 sm:grid-cols-2",children:Array.from({length:6}).map((e,r)=>(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-3",children:[(0,t.jsx)(x.Skeleton,{className:"h-3 w-24 rounded-[var(--rb-radius-sm)]"}),(0,t.jsx)(x.Skeleton,{className:"mt-2 h-4 w-full rounded-[var(--rb-radius-sm)]"}),(0,t.jsx)(x.Skeleton,{className:"mt-2 h-3 w-20 rounded-[var(--rb-radius-sm)]"})]},r))})]})}):null]}),(0,t.jsx)("div",{className:"mt-5 border-t border-[var(--rb-border)] pt-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm text-zinc-500",children:"Legend:"}),(0,t.jsx)(u.Badge,{className:"bg-[var(--rb-blue)] text-white border-transparent",children:"Job"}),(0,t.jsx)(u.Badge,{className:"bg-[var(--rb-orange)] text-white border-transparent",children:"Estimate"}),(0,t.jsx)(u.Badge,{className:"bg-[#16a34a] text-white border-transparent",children:"New/Quote"}),(0,t.jsx)(u.Badge,{className:"bg-[#0ea5e9] text-white border-transparent",children:"In Process"}),(0,t.jsx)(u.Badge,{className:"bg-[#dc2626] text-white border-transparent",children:"Cancelled"}),(0,t.jsx)(u.Badge,{className:"bg-[#fd7e14] text-white border-transparent",children:"Ready"}),(0,t.jsx)(u.Badge,{className:"bg-[#6f42c1] text-white border-transparent",children:"Completed"}),(0,t.jsx)(u.Badge,{className:"bg-[#e83e8c] text-white border-transparent",children:"Delivered"})]})})]})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsx)(m.Card,{className:"border-0 bg-[var(--rb-blue)] text-white shadow-none",children:(0,t.jsxs)(m.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Total Jobs"}),(0,t.jsx)("div",{className:"mt-2 text-4xl font-bold",children:T.jobs})]})}),(0,t.jsx)(m.Card,{className:"border-0 bg-[#16a34a] text-white shadow-none",children:(0,t.jsxs)(m.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold opacity-90",children:"Total Estimates"}),(0,t.jsx)("div",{className:"mt-2 text-4xl font-bold",children:T.estimates})]})})]}),(0,t.jsxs)("div",{className:"text-xs text-zinc-500",children:["Tenant: ",g]})]})}e.s(["default",()=>p])}]);