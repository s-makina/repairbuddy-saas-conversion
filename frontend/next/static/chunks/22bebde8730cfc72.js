(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var s=e.i(48277),t=e.i(14575);function a({variant:e,className:a}){let r="h-4 w-4 shrink-0";return"success"===e?(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(r,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(r,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M12 9v4"}),(0,s.jsx)("path",{d:"M12 17h.01"}),(0,s.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(r,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M18 6L6 18"}),(0,s.jsx)("path",{d:"M6 6l12 12"})]}):(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(r,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M12 16v-4"}),(0,s.jsx)("path",{d:"M12 8h.01"}),(0,s.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function r({className:e,variant:r="info",title:i,children:n,...l}){let d={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[r];return(0,s.jsx)("div",{role:"alert",className:(0,t.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",d.wrapper,e),...l,children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(a,{variant:r,className:(0,t.cn)("mt-0.5",d.icon)}),(0,s.jsxs)("div",{className:"min-w-0",children:[i?(0,s.jsx)("div",{className:(0,t.cn)("text-sm font-semibold",d.title),children:i}):null,n?(0,s.jsx)("div",{className:(0,t.cn)("text-sm text-zinc-700",i?"mt-1":""),children:n}):null]})]})})}e.s(["Alert",()=>r])},68501,e=>{"use strict";var s=e.i(48277),t=e.i(14575);function a({className:e,variant:a="default",...r}){return(0,s.jsx)("span",{className:(0,t.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[a],e),...r})}e.s(["Badge",()=>a])},26550,e=>{"use strict";var s=e.i(48277),t=e.i(14575);function a({className:e,type:a,...r}){return(0,s.jsx)("input",{type:a,className:(0,t.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",e),...r})}e.s(["Input",()=>a])},43901,e=>{"use strict";var s=e.i(48277),t=e.i(14575),a=e.i(72015);function r({className:e,"aria-hidden":a=!0,...r}){return(0,s.jsx)("div",{"aria-hidden":a,className:(0,t.cn)("rb-skeleton",e),...r})}function i({lines:e=3,className:i}){let n=Math.max(1,Math.min(e,12));return(0,s.jsx)(a.Card,{className:(0,t.cn)("overflow-hidden",i),children:(0,s.jsxs)(a.CardContent,{className:"space-y-3 pt-5",children:[(0,s.jsx)(r,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:n}).map((e,a)=>(0,s.jsx)(r,{className:(0,t.cn)("h-3 rounded-[var(--rb-radius-sm)]",a===n-1?"w-3/5":"w-full")},a))]})})}function n({rows:e=6,columns:a=5,className:i}){let n=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(a,10));return(0,s.jsxs)("div",{className:(0,t.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",i),children:[(0,s.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,s.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,t)=>(0,s.jsx)(r,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},t))})}),(0,s.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:n}).map((e,a)=>(0,s.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,a)=>(0,s.jsx)(r,{className:(0,t.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===a?"w-3/4":"w-full")},a))},a))})})]})}e.s(["CardSkeleton",()=>i,"Skeleton",()=>r,"TableSkeleton",()=>n])},37574,e=>{"use strict";var s=e.i(48277),t=e.i(30668),a=e.i(14575),r=e.i(9693),i=e.i(33441),n=e.i(43901),l=e.i(1831);function d({title:e,data:d,columns:c,getRowId:o,loading:m=!1,emptyMessage:x="No data.",search:u,filters:h=[],pageSizeOptions:v=[10,25,50],initialPageSize:p=10,server:b,exportConfig:j,columnVisibilityKey:g,onRowClick:f,className:N}){let[w,y]=(0,t.useState)(""),[C,_]=(0,t.useState)(0),[S,z]=(0,t.useState)(p),[k,T]=(0,t.useState)(null),[D,A]=(0,t.useState)(null),[I,$]=(0,t.useState)(0),B=(0,t.useId)(),M=!!b,F=M?b.query:w,R=M?b.onQueryChange:y,L=M?b.pageIndex:C,P=M?b.onPageIndexChange:_,E=M?b.pageSize:S,O=M?b.onPageSizeChange:z,H=M?b.sort??null:null,U=M?b.onSortChange:void 0,J=(0,t.useMemo)(()=>{let e=Array.isArray(c)?c:[];if(!g){let s=e.filter(e=>!e.hiddenByDefault);return s.length>0?s:e.slice(0,1)}try{let s=window.localStorage.getItem(g);if(!s){let s=e.filter(e=>!e.hiddenByDefault);return s.length>0?s:e.slice(0,1)}let t=JSON.parse(s),a=e.filter(e=>{let s=t[e.id];return"boolean"==typeof s?s:!e.hiddenByDefault});return a.length>0?a:e.slice(0,1)}catch{let s=e.filter(e=>!e.hiddenByDefault);return s.length>0?s:e.slice(0,1)}},[g,c,I]),W=(0,t.useMemo)(()=>{if(M)return Array.isArray(d)?d:[];let e=F.trim().toLowerCase();return(Array.isArray(d)?d:[]).filter(s=>{if(u&&u.getSearchText&&e.length>0&&!u.getSearchText(s).toLowerCase().includes(e))return!1;for(let e of h)if(e.predicate&&!e.predicate(s,e.value))return!1;return!0})},[d,h,M,F,u]),q=M?b.totalRows:W.length,Q=Math.max(1,Math.ceil(q/E)),V=Math.min(L,Q-1),K=Math.max(1,Math.min(8,E||10)),G=(0,t.useMemo)(()=>{if(M)return W;let e=V*E,s=e+E;return W.slice(e,s)},[V,W,M,E]),X=V>0,Y=V<Q-1,Z=!!u||h.length>0||!!j||!!g;function ee(e,s){if(g&&(s||!(J.length<=1)))try{let t=window.localStorage.getItem(g),a=(t?JSON.parse(t):{})??{};a[e]=s,window.localStorage.setItem(g,JSON.stringify(a)),$(e=>e+1)}catch{}}async function es(e){if(j&&!k){A(null),T(e);try{let s=new URLSearchParams;for(let e of(F.trim().length>0&&s.set("q",F.trim()),h)){let t=e.value;null!=t&&0!==String(t).length&&s.set(e.id,String(t))}if(M&&H?.id&&H?.dir&&(s.set("sort",H.id),s.set("dir",H.dir)),s.set("format",e),j.extraQuery)for(let[e,t]of Object.entries(j.extraQuery))null!=t&&s.set(e,String(t));let t=`${j.url}${j.url.includes("?")?"&":"?"}${s.toString()}`,a=j.filename?.({format:e});await (0,l.apiDownload)(t,{filename:a})}catch(e){A(e instanceof Error?e.message:"Export failed.")}finally{T(null)}}}return(0,s.jsxs)("div",{className:(0,a.cn)("space-y-3",N),children:[e?(0,s.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Z?(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[u?(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:`${B}_datatable_search`,children:"Search"}),(0,s.jsx)("input",{id:`${B}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:F,onChange:e=>{R(e.target.value),P(0)},placeholder:u.placeholder??"Search..."})]}):null,h.map(e=>(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:`${B}_datatable_filter_${e.id}`,children:e.label}),(0,s.jsx)("select",{id:`${B}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:s=>{let t=e.options.find(e=>String(e.value)===s.target.value),a=t?t.value:s.target.value;e.onChange(a),P(0)},children:e.options.map(e=>(0,s.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,s.jsxs)("div",{className:"text-sm text-zinc-600",children:[q," result(s)"]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[j?(0,s.jsx)(i.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,s.jsx)(r.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!k,children:k?"Exporting...":"Export"}),children:({close:e})=>{let t=j.formats??["csv","xlsx","pdf"];return(0,s.jsx)(s.Fragment,{children:t.map(t=>(0,s.jsxs)(i.DropdownMenuItem,{onSelect:()=>{e(),es(t)},disabled:!!k,children:["Export ",t.toUpperCase()]},t))})}}):null,g?(0,s.jsx)(i.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,s.jsx)(r.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.DropdownMenuItem,{onSelect:()=>{for(let s of(e(),c))ee(s.id,!0)},children:"Show all"}),(0,s.jsx)(i.DropdownMenuItem,{onSelect:()=>{for(let s of(e(),c))ee(s.id,!s.hiddenByDefault)},children:"Reset defaults"}),(0,s.jsx)(i.DropdownMenuSeparator,{}),c.map(e=>{let t=J.some(s=>s.id===e.id);return(0,s.jsxs)(i.DropdownMenuItem,{onSelect:()=>{ee(e.id,!t)},children:[(0,s.jsx)("span",{className:"mr-2 inline-block w-4",children:t?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,D?(0,s.jsx)("div",{className:"text-sm text-red-600",children:D}):null,(0,s.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,s.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,s.jsx)("tr",{children:J.map(e=>(0,s.jsx)("th",{className:(0,a.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:M&&e.sortId&&U?(0,s.jsxs)("button",{type:"button",onClick:()=>(function(e){if(M&&e.sortId&&U){if(!H||H.id!==e.sortId){U({id:e.sortId,dir:"asc"}),P(0);return}if("asc"===H.dir){U({id:e.sortId,dir:"desc"}),P(0);return}U(null),P(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,s.jsx)("span",{children:e.header}),M&&e.sortId?H&&H.id===e.sortId?"asc"===H.dir?(0,s.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,s.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,s.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,s.jsx)("tbody",{children:m?Array.from({length:K}).map((e,t)=>(0,s.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:J.map((e,t)=>(0,s.jsx)("td",{className:(0,a.cn)("px-3 py-2 align-middle",e.className),children:(0,s.jsx)(n.Skeleton,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===t?"w-3/4":t===J.length-1?"w-16":"w-full")})},e.id))},`loading_${t}`)):0===G.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,J.length),children:x})}):G.map(e=>(0,s.jsx)("tr",{className:(0,a.cn)("border-t border-[var(--rb-border)]",f?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:f?0:void 0,role:f?"button":void 0,onClick:f?()=>{f(e)}:void 0,onKeyDown:f?s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),f(e))}:void 0,children:J.map(t=>(0,s.jsx)("td",{className:(0,a.cn)("px-3 py-2 align-middle",t.className),children:t.cell(e)},t.id))},String(o(e))))})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.Button,{variant:"outline",size:"sm",onClick:function(){P(Math.max(0,V-1))},disabled:!X,children:"Prev"}),(0,s.jsx)(r.Button,{variant:"outline",size:"sm",onClick:function(){P(Math.min(Q-1,V+1))},disabled:!Y,children:"Next"}),(0,s.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",V+1," / ",Q]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,s.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(E),onChange:e=>{O(Number(e.target.value)),P(0)},children:v.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>d])},66474,e=>{"use strict";var s=e.i(48277),t=e.i(30668),a=e.i(14575);function r({open:e,onClose:r,title:i,children:n,footer:l,position:d="center",variant:c="glass",className:o}){if((0,t.useEffect)(()=>{function s(s){e&&"Escape"===s.key&&r()}return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[r,e]),!e)return null;let m="solid"===c?(0,a.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[var(--rb-border)]","bg-white","shadow-[var(--rb-shadow)]"):(0,a.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]","bg-white/75 backdrop-blur-xl","shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]","ring-1 ring-white/25");return(0,s.jsxs)("div",{className:"top-center"===d?"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8":"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,s.jsx)("button",{type:"button",className:(0,a.cn)("absolute inset-0","bg-black/35 backdrop-blur-md","bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]"),"aria-label":"Close",onClick:r}),(0,s.jsxs)("div",{role:"dialog","aria-modal":"true",className:(0,a.cn)(m,o),children:["glass"===c?(0,s.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]"}):null,i?(0,s.jsx)("div",{className:(0,a.cn)("relative px-5 py-4","solid"===c?"border-b border-[var(--rb-border)]":"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:(0,s.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:i})}):null,(0,s.jsx)("div",{className:"relative px-5 py-4",children:n}),l?(0,s.jsx)("div",{className:(0,a.cn)("relative px-5 py-4","solid"===c?"border-t border-[var(--rb-border)]":"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:l}):null]})]})}e.s(["Modal",()=>r])},64998,e=>{"use strict";var s=e.i(48277),t=e.i(66474),a=e.i(9693);function r({open:e,title:r,message:i,confirmText:n="Confirm",confirmVariant:l="primary",cancelText:d="Cancel",busy:c=!1,onCancel:o,onConfirm:m}){return(0,s.jsx)(t.Modal,{open:e,onClose:()=>{c||o()},title:r,footer:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(a.Button,{variant:"outline",onClick:o,disabled:c,children:d}),(0,s.jsx)(a.Button,{variant:l,onClick:m,disabled:c,children:c?"Working...":n})]}),children:(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:i})})}e.s(["ConfirmDialog",()=>r])},69965,e=>{"use strict";let s={locale:"en-GB",dateStyle:"medium",timeStyle:"short",hour12:!1};function t(e){if(!e)return null;if(e instanceof Date)return Number.isFinite(e.getTime())?e:null;let s=new Date(e);return Number.isFinite(s.getTime())?s:null}function a(e,a){let r=t(e);if(!r)return"—";let i={...s,...a??{}};return new Intl.DateTimeFormat(i.locale,{dateStyle:i.dateStyle}).format(r)}function r(e,a){let r=t(e);if(!r)return"—";let i={...s,...a??{}};return new Intl.DateTimeFormat(i.locale,{dateStyle:i.dateStyle,timeStyle:i.timeStyle,hour12:i.hour12}).format(r)}e.s(["formatDate",()=>a,"formatDateTime",()=>r])},57373,e=>{"use strict";var s=e.i(48277),t=e.i(30668),a=e.i(14575);let r=(0,t.createContext)(null);function i(){let e=(0,t.useContext)(r);if(!e)throw Error("Tabs components must be used within <Tabs />");return e}function n({value:e,defaultValue:i,onValueChange:n,className:l,children:d}){let c=(0,t.useId)(),[o,m]=(0,t.useState)(i??""),x="string"==typeof e?e:o,u=(0,t.useCallback)(s=>{s&&(n&&n(s),"string"!=typeof e&&m(s))},[n,e]),h=(0,t.useMemo)(()=>({value:x,setValue:u,baseId:c}),[c,x,u]);return(0,s.jsx)(r.Provider,{value:h,children:(0,s.jsx)("div",{className:(0,a.cn)("space-y-4",l),children:d})})}function l({className:e,...t}){return(0,s.jsx)("div",{className:(0,a.cn)("inline-flex items-center gap-1 rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-1 shadow-[var(--rb-shadow)]",e),role:"tablist",...t})}function d({value:e,className:t,...r}){let n=i(),l=n.value===e,{onClick:d,...c}=r;return(0,s.jsx)("button",{type:"button",role:"tab","aria-selected":l,"aria-controls":`${n.baseId}-panel-${e}`,id:`${n.baseId}-tab-${e}`,onClick:s=>{n.setValue(e),d?.(s)},className:(0,a.cn)("h-9 rounded-[var(--rb-radius-sm)] px-3 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",l?"bg-[var(--rb-surface-muted)] text-[var(--rb-text)]":"text-zinc-600 hover:bg-[var(--rb-surface-muted)]",t),...c})}function c({value:e,className:t,children:r,...n}){let l=i();return l.value!==e?null:(0,s.jsx)("div",{role:"tabpanel",id:`${l.baseId}-panel-${e}`,"aria-labelledby":`${l.baseId}-tab-${e}`,className:(0,a.cn)(t),...n,children:r})}e.s(["Tabs",()=>n,"TabsContent",()=>c,"TabsList",()=>l,"TabsTrigger",()=>d])},17095,e=>{"use strict";var s=e.i(48277),t=e.i(30668),a=e.i(96086),r=e.i(16506),i=e.i(1831),n=e.i(77252),l=e.i(24273),d=e.i(1314),c=e.i(69965),o=e.i(72015),m=e.i(68501),x=e.i(9693),u=e.i(26550),h=e.i(63571),v=e.i(37574),p=e.i(57373),b=e.i(64998);function j(){let e=(0,a.useParams)(),j=(0,a.useRouter)(),g=(0,d.useAuth)(),f=(0,l.useDashboardHeader)(),N=Number(e.business),[w,y]=(0,t.useState)(!0),[C,_]=(0,t.useState)(null),[S,z]=(0,t.useState)(null),[k,T]=(0,t.useState)(null),[D,A]=(0,t.useState)([]),[I,$]=(0,t.useState)(!1),[B,M]=(0,t.useState)(null),F=(0,t.useRef)(!1),[R,L]=(0,t.useState)(!1),[P,E]=(0,t.useState)(null),[O,H]=(0,t.useState)(null),[U,J]=(0,t.useState)(""),[W,q]=(0,t.useState)(null),[Q,V]=(0,t.useState)(""),[K,G]=(0,t.useState)(!1),[X,Y]=(0,t.useState)(null),[Z,ee]=(0,t.useState)([]),[es,et]=(0,t.useState)(!1),[ea,er]=(0,t.useState)(null),[ei,en]=(0,t.useState)(null),[el,ed]=(0,t.useState)(null),[ec,eo]=(0,t.useState)(""),[em,ex]=(0,t.useState)(""),[eu,eh]=(0,t.useState)(""),[ev,ep]=(0,t.useState)(!1),[eb,ej]=(0,t.useState)(!1),[eg,ef]=(0,t.useState)(""),[eN,ew]=(0,t.useState)(null),[ey,eC]=(0,t.useState)(!1),e_=!!S&&!!k&&"closed"!==S.status,eS=!!S&&"closed"!==S.status&&"suspended"!==S.status,ez=!!S&&"suspended"===S.status,ek=!!S&&"closed"!==S.status,eT=!!S&&!!k&&"closed"!==S.status,eD=(0,t.useMemo)(()=>e=>"active"===e?"success":"trial"===e?"info":"past_due"===e?"warning":"suspended"===e?"danger":"default",[]),eA=(0,t.useCallback)(async()=>{if(!Number.isFinite(N)||N<=0){_("Invalid business id."),y(!1);return}try{y(!0),_(null);let e=await (0,i.apiFetch)(`/api/admin/businesses/${N}`);z(e.tenant),T(e.owner),V("number"==typeof e.tenant.plan_id?String(e.tenant.plan_id):"")}catch(e){_(e instanceof Error?e.message:"Failed to load business.")}finally{y(!1)}},[N]),eI=(0,t.useCallback)(async()=>{if(!F.current){F.current=!0,M(null),$(!0);try{let e=await (0,i.apiFetch)("/api/admin/plans");A(Array.isArray(e.plans)?e.plans:[])}catch(e){M(e instanceof Error?e.message:"Failed to load plans."),A([])}finally{F.current=!1,$(!1)}}},[]),e$=(0,t.useCallback)(async()=>{if(Number.isFinite(N)&&!(N<=0)&&!R){E(null),L(!0);try{let e=await (0,i.apiFetch)(`/api/admin/businesses/${N}/entitlements`);H(e),J(JSON.stringify(e.entitlement_overrides??{},null,2)),q(null)}catch(e){E(e instanceof Error?e.message:"Failed to load entitlements."),H(null)}finally{L(!1)}}},[R,N]),eB=(0,t.useCallback)(async()=>{if(Number.isFinite(N)&&!(N<=0)&&!K){Y(null),G(!0);try{let e=await (0,i.apiFetch)(`/api/admin/businesses/${N}/audit?limit=100`);ee(Array.isArray(e.audit)?e.audit:[])}catch(e){Y(e instanceof Error?e.message:"Failed to load audit log."),ee([])}finally{G(!1)}}},[K,N]),eM=(0,t.useCallback)(async()=>{if(Number.isFinite(N)&&!(N<=0)&&!es){er(null),et(!0);try{let e=await (0,i.apiFetch)(`/api/admin/businesses/${N}/diagnostics`);en(e)}catch(e){er(e instanceof Error?e.message:"Failed to load diagnostics."),en(null)}finally{et(!1)}}},[es,N]);(0,t.useEffect)(()=>{eA()},[eA]),(0,t.useEffect)(()=>(f.setHeader({breadcrumb:"Admin / Businesses",title:S?S.name:`Business ${N}`,subtitle:S?`Business ID ${S.id} • ${S.slug}`:`Business ID ${N}`,actions:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.default,{href:`/admin/businesses/${N}/billing`,children:(0,s.jsx)(x.Button,{variant:"outline",size:"sm",children:"Billing"})}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>j.back(),children:"Back"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eA,disabled:w||!!el,children:"Refresh"})]})}),()=>{f.setHeader(null)}),[el,f,eA,w,j,S,N]);let eF=(0,t.useCallback)(async(e,s)=>{if(!el){ed(e),eC(!1);try{await s(),await eA()}finally{ed(null)}}},[el,eA]);async function eR(){S&&k&&await eF("impersonate",async()=>{let e=await (0,i.apiFetch)("/api/admin/impersonation",{method:"POST",body:{tenant_id:S.id,target_user_id:k.id,reason:ec.trim()||"support",reference_id:em.trim()||`tenant-${S.id}`,duration_minutes:60}});e.session?.id&&(await g.refresh(),j.push(`/app/${S.slug}`))})}async function eL(){ep(!0)}async function eP(){await eF("unsuspend",async()=>{await (0,i.apiFetch)(`/api/admin/businesses/${N}/unsuspend`,{method:"PATCH",body:{reason:ec.trim()||void 0}})})}async function eE(){ej(!0)}async function eO(){ep(!1),await eF("suspend",async()=>{await (0,i.apiFetch)(`/api/admin/businesses/${N}/suspend`,{method:"PATCH",body:{reason:ec.trim()||void 0}})})}async function eH(){ej(!1),await eF("close",async()=>{let e=eu.trim().length>0?Number(eu.trim()):null;await (0,i.apiFetch)(`/api/admin/businesses/${N}/close`,{method:"PATCH",body:{reason:ec.trim()||void 0,data_retention_days:e&&Number.isFinite(e)?e:void 0}})})}async function eU(){if(!Number.isFinite(N)||N<=0||el)return;let e=Q.trim().length>0?Number(Q):null;await eF("set-plan",async()=>{await (0,i.apiFetch)(`/api/admin/businesses/${N}/plan`,{method:"PUT",body:{plan_id:e&&Number.isFinite(e)?e:null,reason:ec.trim()||void 0}}),await e$()})}async function eJ(){let e;if(Number.isFinite(N)&&!(N<=0)&&!el){q(null);try{e=U.trim().length>0?JSON.parse(U):{}}catch{q("Invalid JSON.");return}if(null!==e&&"object"!=typeof e)return void q("Overrides must be a JSON object.");await eF("set-entitlements",async()=>{await (0,i.apiFetch)(`/api/admin/businesses/${N}/entitlements`,{method:"PUT",body:{entitlement_overrides:e,reason:ec.trim()||void 0}}),await e$()})}}async function eW(){await eF("reset-owner-password",async()=>{ew(await (0,i.apiFetch)(`/api/admin/businesses/${N}/owner/reset-password`,{method:"POST",body:{reason:ec.trim()||void 0,password:eg.trim()||void 0}})),eC(!1),ef("")})}async function eq(){if(eN?.password)try{await navigator.clipboard.writeText(eN.password),eC(!0)}catch{eC(!1)}}return(0,t.useEffect)(()=>{eI()},[eI]),(0,s.jsx)(n.RequireAuth,{requiredPermission:"admin.tenants.read",children:(0,s.jsxs)("div",{className:"space-y-6",children:[w?(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading business…"}):null,C?(0,s.jsx)(h.Alert,{variant:"danger",title:"Could not load business",children:C}):null,S?(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,s.jsx)("div",{className:"space-y-6 lg:col-span-2",children:(0,s.jsxs)(p.Tabs,{defaultValue:"overview",children:[(0,s.jsxs)(p.TabsList,{children:[(0,s.jsx)(p.TabsTrigger,{value:"overview",children:"Overview"}),(0,s.jsx)(p.TabsTrigger,{value:"plan",onClick:()=>{e$()},children:"Plan & Entitlements"}),(0,s.jsx)(p.TabsTrigger,{value:"diagnostics",onClick:()=>void eM(),children:"Diagnostics"}),(0,s.jsx)(p.TabsTrigger,{value:"audit",onClick:()=>void eB(),children:"Audit Log"}),(0,s.jsx)(p.TabsTrigger,{value:"actions",children:"Actions"})]}),(0,s.jsx)(p.TabsContent,{value:"overview",children:(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsxs)(o.Card,{children:[(0,s.jsxs)(o.CardHeader,{className:"flex flex-row items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)(o.CardTitle,{className:"truncate",children:"Overview"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Status, plan, and key account details"})]}),(0,s.jsx)(m.Badge,{className:"shrink-0",variant:eD(S.status),children:S.status})]}),(0,s.jsx)(o.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Contact email"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:S.contact_email??"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Plan"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:S.plan?.name??"—"}),S.plan?.code?(0,s.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Code: ",S.plan.code]}):null]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Created"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,c.formatDateTime)(S.created_at??null)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Activated"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,c.formatDateTime)(S.activated_at??null)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Suspended"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,c.formatDateTime)(S.suspended_at??null)}),S.suspension_reason?(0,s.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Reason: ",S.suspension_reason]}):null]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Closed"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:(0,c.formatDateTime)(S.closed_at??null)}),S.closed_reason?(0,s.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Reason: ",S.closed_reason]}):null]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Data retention"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:"number"==typeof S.data_retention_days?`${S.data_retention_days} days`:"—"})]})]})})]})})}),(0,s.jsx)(p.TabsContent,{value:"plan",children:(0,s.jsxs)("div",{className:"space-y-6",children:[B?(0,s.jsx)(h.Alert,{variant:"danger",title:"Could not load plans",children:B}):null,(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)(o.CardTitle,{children:"Plan"}),(0,s.jsx)(o.CardDescription,{children:"Assign a plan to control default entitlements."})]})}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Current plan"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:S.plan?.name??"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Assign plan"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsxs)("select",{className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:Q,onChange:e=>V(e.target.value),disabled:I||!!el,children:[(0,s.jsx)("option",{value:"",children:"— No plan —"}),D.map(e=>(0,s.jsxs)("option",{value:String(e.id),children:[e.name," (",e.code,")"]},e.id))]})})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.Button,{variant:"primary",size:"sm",onClick:eU,disabled:!!el,children:"set-plan"===el?"Saving…":"Save plan"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>void e$(),disabled:R||!!el,children:"Refresh entitlements"})]})]})]}),P?(0,s.jsx)(h.Alert,{variant:"danger",title:"Could not load entitlements",children:P}):null,(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)(o.CardTitle,{children:"Entitlements"}),(0,s.jsx)(o.CardDescription,{children:"Plan defaults, overrides, and effective entitlements for this tenant."})]})}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[R?(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading entitlements…"}):null,O||R?null:(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"No entitlements loaded yet."}),O?(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,s.jsx)(o.Card,{className:"bg-[var(--rb-surface-muted)]",children:(0,s.jsxs)(o.CardContent,{className:"pt-5",children:[(0,s.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:"Plan entitlements"}),(0,s.jsx)("pre",{className:"mt-3 max-h-[240px] overflow-auto rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-3 text-xs text-zinc-700",children:JSON.stringify(O.plan_entitlements??{},null,2)})]})}),(0,s.jsx)(o.Card,{className:"bg-[var(--rb-surface-muted)]",children:(0,s.jsxs)(o.CardContent,{className:"pt-5",children:[(0,s.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:"Effective entitlements"}),(0,s.jsx)("pre",{className:"mt-3 max-h-[240px] overflow-auto rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-3 text-xs text-zinc-700",children:JSON.stringify(O.effective_entitlements??{},null,2)})]})}),(0,s.jsx)(o.Card,{className:"bg-[var(--rb-surface-muted)]",children:(0,s.jsxs)(o.CardContent,{className:"pt-5",children:[(0,s.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:"Overrides"}),(0,s.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,s.jsx)("textarea",{className:"min-h-[240px] w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white p-3 font-mono text-xs text-zinc-800",value:U,onChange:e=>{J(e.target.value),q(null)},spellCheck:!1}),W?(0,s.jsx)("div",{className:"text-sm text-red-600",children:W}):null,(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(x.Button,{variant:"primary",size:"sm",onClick:eJ,disabled:!!el,children:"set-entitlements"===el?"Saving…":"Save overrides"})})]})]})})]}):null]})]})]})}),(0,s.jsx)(p.TabsContent,{value:"diagnostics",children:(0,s.jsxs)("div",{className:"space-y-6",children:[ea?(0,s.jsx)(h.Alert,{variant:"danger",title:"Could not load diagnostics",children:ea}):null,(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Diagnostics"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Recent auth activity and platform actions for this tenant."})]}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>void eM(),disabled:es||!!el,children:"Refresh"})]}),es?(0,s.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading diagnostics…"}):null,ei?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Recent auth events"})}),(0,s.jsx)(o.CardContent,{children:(0,s.jsx)(v.DataTable,{data:Array.isArray(ei.recent_auth_events)?ei.recent_auth_events:[],loading:!1,emptyMessage:"No auth events found.",getRowId:e=>e.id,search:{placeholder:"Search event type or email…",getSearchText:e=>`${e.event_type} ${e.email??""} ${e.ip??""}`},columns:[{id:"time",header:"Time",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:(0,c.formatDateTime)(e.created_at??null)}),className:"whitespace-nowrap"},{id:"type",header:"Type",cell:e=>(0,s.jsx)("div",{className:"text-sm font-medium text-zinc-700",children:e.event_type}),className:"whitespace-nowrap"},{id:"email",header:"Email",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.email??"—"}),className:"whitespace-nowrap"},{id:"ip",header:"IP",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.ip??"—"}),className:"whitespace-nowrap"}]})})]}),(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Recent platform actions"})}),(0,s.jsx)(o.CardContent,{children:(0,s.jsx)(v.DataTable,{data:Array.isArray(ei.recent_platform_audit)?ei.recent_platform_audit:[],loading:!1,emptyMessage:"No platform audit events found.",getRowId:e=>e.id,search:{placeholder:"Search action or actor…",getSearchText:e=>`${e.action} ${e.actor?.email??""} ${e.reason??""}`},columns:[{id:"time",header:"Time",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:(0,c.formatDateTime)(e.created_at??null)}),className:"whitespace-nowrap"},{id:"action",header:"Action",cell:e=>(0,s.jsx)("div",{className:"text-sm font-medium text-zinc-700",children:e.action}),className:"whitespace-nowrap"},{id:"actor",header:"Actor",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.actor?.email??e.actor_user_id??"—"}),className:"whitespace-nowrap"},{id:"reason",header:"Reason",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.reason??"—"}),className:"max-w-[360px] truncate"}]})})]})]}):(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"No diagnostics loaded yet."})]})}),(0,s.jsx)(p.TabsContent,{value:"audit",children:(0,s.jsxs)("div",{className:"space-y-6",children:[X?(0,s.jsx)(h.Alert,{variant:"danger",title:"Could not load audit log",children:X}):null,(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)(o.CardTitle,{children:"Audit Log"}),(0,s.jsx)(o.CardDescription,{children:"Tenant-scoped platform audit events."})]}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>void eB(),disabled:K||!!el,children:"Refresh"})]})}),(0,s.jsx)(o.CardContent,{children:(0,s.jsx)(v.DataTable,{data:Z,loading:K,emptyMessage:"No audit events.",getRowId:e=>e.id,search:{placeholder:"Search action, reason, or actor…",getSearchText:e=>`${e.action} ${e.reason??""} ${e.actor?.email??""}`},columns:[{id:"time",header:"Time",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:(0,c.formatDateTime)(e.created_at??null)}),className:"whitespace-nowrap"},{id:"action",header:"Action",cell:e=>(0,s.jsx)("div",{className:"text-sm font-medium text-zinc-700",children:e.action}),className:"whitespace-nowrap"},{id:"actor",header:"Actor",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.actor?.email??e.actor_user_id??"—"}),className:"whitespace-nowrap"},{id:"reason",header:"Reason",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.reason??"—"}),className:"max-w-[420px] truncate"},{id:"ip",header:"IP",cell:e=>(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:e.ip??"—"}),className:"whitespace-nowrap",headerClassName:"whitespace-nowrap"}]})})]})]})}),(0,s.jsx)(p.TabsContent,{value:"actions",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Support context"})}),(0,s.jsx)(o.CardContent,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Reason"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(u.Input,{value:ec,onChange:e=>eo(e.target.value),placeholder:"Ticket ID / reason (optional)"})}),(0,s.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Used for audit trails when performing admin actions."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Reference ID"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(u.Input,{value:em,onChange:e=>ex(e.target.value),placeholder:"e.g. ticket-1234"})}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Optional. If empty, defaults to tenant-",S.id,"."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Close retention days"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(u.Input,{value:eu,onChange:e=>eh(e.target.value),placeholder:"e.g. 30",inputMode:"numeric"})}),(0,s.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Optional: overrides retention when closing the tenant."})]})]})})]}),(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)(o.CardTitle,{children:"Tenant actions"}),(0,s.jsx)(o.CardDescription,{children:"Operational actions that affect tenant access and security."})]}),(0,s.jsx)(m.Badge,{className:"shrink-0",variant:eD(S.status),children:S.status})]})}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Impersonation"}),(0,s.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:(0,s.jsx)(x.Button,{variant:"primary",size:"sm",onClick:eR,disabled:!!el||!e_,children:"impersonate"===el?"Starting…":"Impersonate owner"})}),(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Starts a temporary session as the tenant owner for support."})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Access / lifecycle"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(x.Button,{variant:"secondary",size:"sm",onClick:eL,disabled:!!el||!eS,children:"suspend"===el?"Suspending…":"Suspend"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eP,disabled:!!el||!ez,children:"unsuspend"===el?"Unsuspending…":"Unsuspend"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eE,disabled:!!el||!ek,children:"close"===el?"Closing…":"Close tenant"})]}),(0,s.jsx)("div",{className:"text-xs text-zinc-500",children:"Suspend blocks access. Close is destructive and final."})]})]})]}),(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Security"})}),(0,s.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,s.jsx)(h.Alert,{variant:"warning",title:"Force-reset owner password",children:"This will immediately change the owner password. The new password is shown once below. Treat it as a secret."}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Set a specific password"}),(0,s.jsx)("div",{className:"mt-1",children:(0,s.jsx)(u.Input,{value:eg,onChange:e=>ef(e.target.value),placeholder:"Leave blank to generate",type:"password"})}),(0,s.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Optional. If empty, a secure password is generated."})]}),(0,s.jsx)("div",{className:"flex items-end",children:(0,s.jsx)(x.Button,{variant:"primary",size:"sm",onClick:eW,disabled:!!el||!eT,children:"reset-owner-password"===el?"Resetting…":"Reset owner password"})})]}),eN?(0,s.jsx)(h.Alert,{variant:"warning",title:"New password generated",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"break-all font-mono text-sm text-[var(--rb-text)]",children:eN.password}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eq,children:ey?"Copied":"Copy"}),(0,s.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>{ew(null),eC(!1)},children:"Hide"})]})]})}):null]})]})]})})]})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Owner"})}),(0,s.jsx)(o.CardContent,{children:k?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:k.name}),(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:k.email}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500",children:["User ID: ",k.id]})]}):(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"No owner found."})})]}),(0,s.jsxs)(o.Card,{children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsx)(o.CardTitle,{children:"Quick actions"})}),(0,s.jsxs)(o.CardContent,{className:"space-y-2",children:[(0,s.jsx)(x.Button,{variant:"primary",size:"sm",onClick:eR,disabled:!!el||!e_,className:"w-full",children:"impersonate"===el?"Starting…":"Impersonate owner"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eL,disabled:!!el||!eS,className:"w-full",children:"suspend"===el?"Suspending…":"Suspend"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eP,disabled:!!el||!ez,className:"w-full",children:"unsuspend"===el?"Unsuspending…":"Unsuspend"}),(0,s.jsx)(x.Button,{variant:"outline",size:"sm",onClick:eE,disabled:!!el||!ek,className:"w-full",children:"close"===el?"Closing…":"Close tenant"})]})]})]})]}):null,(0,s.jsx)(b.ConfirmDialog,{open:ev,title:"Suspend tenant",message:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{children:"This will suspend the tenant and prevent normal access."}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500",children:["Reason (optional): ",ec.trim().length>0?ec.trim():"—"]})]}),confirmText:"Suspend",confirmVariant:"secondary",busy:"suspend"===el,onCancel:()=>ep(!1),onConfirm:()=>void eO()}),(0,s.jsx)(b.ConfirmDialog,{open:eb,title:"Close tenant",message:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{children:"This is a destructive action. The tenant will be closed."}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500",children:["Reason (optional): ",ec.trim().length>0?ec.trim():"—"]}),(0,s.jsxs)("div",{className:"text-xs text-zinc-500",children:["Retention override (optional): ",eu.trim().length>0?eu.trim():"—"]})]}),confirmText:"Close tenant",confirmVariant:"secondary",busy:"close"===el,onCancel:()=>ej(!1),onConfirm:()=>void eH()})]})})}e.s(["default",()=>j])}]);