(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function s({variant:e,className:s}){let a="h-4 w-4 shrink-0";return"success"===e?(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 9v4"}),(0,t.jsx)("path",{d:"M12 17h.01"}),(0,t.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M18 6L6 18"}),(0,t.jsx)("path",{d:"M6 6l12 12"})]}):(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 16v-4"}),(0,t.jsx)("path",{d:"M12 8h.01"}),(0,t.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function a({className:e,variant:a="info",title:n,children:i,...l}){let d={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[a];return(0,t.jsx)("div",{role:"alert",className:(0,r.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",d.wrapper,e),...l,children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(s,{variant:a,className:(0,r.cn)("mt-0.5",d.icon)}),(0,t.jsxs)("div",{className:"min-w-0",children:[n?(0,t.jsx)("div",{className:(0,r.cn)("text-sm font-semibold",d.title),children:n}):null,i?(0,t.jsx)("div",{className:(0,r.cn)("text-sm text-zinc-700",n?"mt-1":""),children:i}):null]})]})})}e.s(["Alert",()=>a])},68501,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function s({className:e,variant:s="default",...a}){return(0,t.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[s],e),...a})}e.s(["Badge",()=>s])},43901,e=>{"use strict";var t=e.i(48277),r=e.i(14575),s=e.i(72015);function a({className:e,"aria-hidden":s=!0,...a}){return(0,t.jsx)("div",{"aria-hidden":s,className:(0,r.cn)("rb-skeleton",e),...a})}function n({lines:e=3,className:n}){let i=Math.max(1,Math.min(e,12));return(0,t.jsx)(s.Card,{className:(0,r.cn)("overflow-hidden",n),children:(0,t.jsxs)(s.CardContent,{className:"space-y-3 pt-5",children:[(0,t.jsx)(a,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:i}).map((e,s)=>(0,t.jsx)(a,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",s===i-1?"w-3/5":"w-full")},s))]})})}function i({rows:e=6,columns:s=5,className:n}){let i=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(s,10));return(0,t.jsxs)("div",{className:(0,r.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",n),children:[(0,t.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,r)=>(0,t.jsx)(a,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},r))})}),(0,t.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:i}).map((e,s)=>(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,s)=>(0,t.jsx)(a,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===s?"w-3/4":"w-full")},s))},s))})})]})}e.s(["CardSkeleton",()=>n,"Skeleton",()=>a,"TableSkeleton",()=>i])},37574,e=>{"use strict";var t=e.i(48277),r=e.i(30668),s=e.i(14575),a=e.i(9693),n=e.i(33441),i=e.i(43901),l=e.i(1831);function d({title:e,data:d,columns:o,getRowId:c,loading:u=!1,emptyMessage:m="No data.",search:x,filters:h=[],pageSizeOptions:b=[10,25,50],initialPageSize:g=10,server:p,exportConfig:f,columnVisibilityKey:v,onRowClick:j,className:w}){let[y,N]=(0,r.useState)(""),[_,S]=(0,r.useState)(0),[C,M]=(0,r.useState)(g),[k,z]=(0,r.useState)(null),[I,B]=(0,r.useState)(null),[D,$]=(0,r.useState)(0),A=(0,r.useId)(),T=!!p,L=T?p.query:y,F=T?p.onQueryChange:N,P=T?p.pageIndex:_,R=T?p.onPageIndexChange:S,E=T?p.pageSize:C,q=T?p.onPageSizeChange:M,O=T?p.sort??null:null,U=T?p.onSortChange:void 0,Q=(0,r.useMemo)(()=>{let e=Array.isArray(o)?o:[];if(!v){let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}try{let t=window.localStorage.getItem(v);if(!t){let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}let r=JSON.parse(t),s=e.filter(e=>{let t=r[e.id];return"boolean"==typeof t?t:!e.hiddenByDefault});return s.length>0?s:e.slice(0,1)}catch{let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}},[v,o,D]),W=(0,r.useMemo)(()=>{if(T)return Array.isArray(d)?d:[];let e=L.trim().toLowerCase();return(Array.isArray(d)?d:[]).filter(t=>{if(x&&x.getSearchText&&e.length>0&&!x.getSearchText(t).toLowerCase().includes(e))return!1;for(let e of h)if(e.predicate&&!e.predicate(t,e.value))return!1;return!0})},[d,h,T,L,x]),H=T?p.totalRows:W.length,J=Math.max(1,Math.ceil(H/E)),K=Math.min(P,J-1),G=Math.max(1,Math.min(8,E||10)),V=(0,r.useMemo)(()=>{if(T)return W;let e=K*E,t=e+E;return W.slice(e,t)},[K,W,T,E]),X=K>0,Y=K<J-1,Z=!!x||h.length>0||!!f||!!v;function ee(e,t){if(v&&(t||!(Q.length<=1)))try{let r=window.localStorage.getItem(v),s=(r?JSON.parse(r):{})??{};s[e]=t,window.localStorage.setItem(v,JSON.stringify(s)),$(e=>e+1)}catch{}}async function et(e){if(f&&!k){B(null),z(e);try{let t=new URLSearchParams;for(let e of(L.trim().length>0&&t.set("q",L.trim()),h)){let r=e.value;null!=r&&0!==String(r).length&&t.set(e.id,String(r))}if(T&&O?.id&&O?.dir&&(t.set("sort",O.id),t.set("dir",O.dir)),t.set("format",e),f.extraQuery)for(let[e,r]of Object.entries(f.extraQuery))null!=r&&t.set(e,String(r));let r=`${f.url}${f.url.includes("?")?"&":"?"}${t.toString()}`,s=f.filename?.({format:e});await (0,l.apiDownload)(r,{filename:s})}catch(e){B(e instanceof Error?e.message:"Export failed.")}finally{z(null)}}}return(0,t.jsxs)("div",{className:(0,s.cn)("space-y-3",w),children:[e?(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Z?(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[x?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium",htmlFor:`${A}_datatable_search`,children:"Search"}),(0,t.jsx)("input",{id:`${A}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:L,onChange:e=>{F(e.target.value),R(0)},placeholder:x.placeholder??"Search..."})]}):null,h.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium",htmlFor:`${A}_datatable_filter_${e.id}`,children:e.label}),(0,t.jsx)("select",{id:`${A}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:t=>{let r=e.options.find(e=>String(e.value)===t.target.value),s=r?r.value:t.target.value;e.onChange(s),R(0)},children:e.options.map(e=>(0,t.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,t.jsxs)("div",{className:"text-sm text-zinc-600",children:[H," result(s)"]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[f?(0,t.jsx)(n.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!k,children:k?"Exporting...":"Export"}),children:({close:e})=>{let r=f.formats??["csv","xlsx","pdf"];return(0,t.jsx)(t.Fragment,{children:r.map(r=>(0,t.jsxs)(n.DropdownMenuItem,{onSelect:()=>{e(),et(r)},disabled:!!k,children:["Export ",r.toUpperCase()]},r))})}}):null,v?(0,t.jsx)(n.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.DropdownMenuItem,{onSelect:()=>{for(let t of(e(),o))ee(t.id,!0)},children:"Show all"}),(0,t.jsx)(n.DropdownMenuItem,{onSelect:()=>{for(let t of(e(),o))ee(t.id,!t.hiddenByDefault)},children:"Reset defaults"}),(0,t.jsx)(n.DropdownMenuSeparator,{}),o.map(e=>{let r=Q.some(t=>t.id===e.id);return(0,t.jsxs)(n.DropdownMenuItem,{onSelect:()=>{ee(e.id,!r)},children:[(0,t.jsx)("span",{className:"mr-2 inline-block w-4",children:r?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,I?(0,t.jsx)("div",{className:"text-sm text-red-600",children:I}):null,(0,t.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,t.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,t.jsx)("tr",{children:Q.map(e=>(0,t.jsx)("th",{className:(0,s.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:T&&e.sortId&&U?(0,t.jsxs)("button",{type:"button",onClick:()=>(function(e){if(T&&e.sortId&&U){if(!O||O.id!==e.sortId){U({id:e.sortId,dir:"asc"}),R(0);return}if("asc"===O.dir){U({id:e.sortId,dir:"desc"}),R(0);return}U(null),R(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,t.jsx)("span",{children:e.header}),T&&e.sortId?O&&O.id===e.sortId?"asc"===O.dir?(0,t.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,t.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,t.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,t.jsx)("tbody",{children:u?Array.from({length:G}).map((e,r)=>(0,t.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:Q.map((e,r)=>(0,t.jsx)("td",{className:(0,s.cn)("px-3 py-2 align-middle",e.className),children:(0,t.jsx)(i.Skeleton,{className:(0,s.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===r?"w-3/4":r===Q.length-1?"w-16":"w-full")})},e.id))},`loading_${r}`)):0===V.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,Q.length),children:m})}):V.map(e=>(0,t.jsx)("tr",{className:(0,s.cn)("border-t border-[var(--rb-border)]",j?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:j?0:void 0,role:j?"button":void 0,onClick:j?()=>{j(e)}:void 0,onKeyDown:j?t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),j(e))}:void 0,children:Q.map(r=>(0,t.jsx)("td",{className:(0,s.cn)("px-3 py-2 align-middle",r.className),children:r.cell(e)},r.id))},String(c(e))))})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:function(){R(Math.max(0,K-1))},disabled:!X,children:"Prev"}),(0,t.jsx)(a.Button,{variant:"outline",size:"sm",onClick:function(){R(Math.min(J-1,K+1))},disabled:!Y,children:"Next"}),(0,t.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",K+1," / ",J]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,t.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(E),onChange:e=>{q(Number(e.target.value)),R(0)},children:b.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>d])},30765,e=>{"use strict";function t(e){let t=e.amountCents,r=e.currency?.toUpperCase()??null;if("number"!=typeof t||!Number.isFinite(t))return e.fallback??"—";let s=t/100;if(!r||3!==r.length)return`${s.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:r,minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}catch{return`${r} ${s.toFixed(2)}`}}e.s(["formatMoney",()=>t])},69965,e=>{"use strict";let t={locale:"en-GB",dateStyle:"medium",timeStyle:"short",hour12:!1};function r(e){if(!e)return null;if(e instanceof Date)return Number.isFinite(e.getTime())?e:null;let t=new Date(e);return Number.isFinite(t.getTime())?t:null}function s(e,s){let a=r(e);if(!a)return"—";let n={...t,...s??{}};return new Intl.DateTimeFormat(n.locale,{dateStyle:n.dateStyle}).format(a)}function a(e,s){let a=r(e);if(!a)return"—";let n={...t,...s??{}};return new Intl.DateTimeFormat(n.locale,{dateStyle:n.dateStyle,timeStyle:n.timeStyle,hour12:n.hour12}).format(a)}e.s(["formatDate",()=>s,"formatDateTime",()=>a])},33842,e=>{"use strict";var t=e.i(48277),r=e.i(30668),s=e.i(16506),a=e.i(77252),n=e.i(24273),i=e.i(63571),l=e.i(68501),d=e.i(9693),o=e.i(72015),c=e.i(37574),u=e.i(1831),m=e.i(69965),x=e.i(30765);function h(){let e=(0,n.useDashboardHeader)(),[h,b]=(0,r.useState)(!0),[g,p]=(0,r.useState)(null),[f,v]=(0,r.useState)([]),[j,w]=(0,r.useState)(""),[y,N]=(0,r.useState)("all"),[_,S]=(0,r.useState)(0),[C,M]=(0,r.useState)(10),[k,z]=(0,r.useState)(0),[I,B]=(0,r.useState)({id:"id",dir:"desc"}),[D,$]=(0,r.useState)(0);(0,r.useEffect)(()=>(e.setHeader({breadcrumb:"Admin / Billing",title:"Business billing",subtitle:"Manage subscriptions and invoices per business",actions:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.default,{href:"/admin/billing/plans",children:(0,t.jsx)(d.Button,{variant:"outline",size:"sm",children:"Catalog"})}),(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>$(e=>e+1),disabled:h,children:"Refresh"})]})}),()=>e.setHeader(null)),[e,h]),(0,r.useEffect)(()=>{let e=!0;return async function(){try{b(!0),p(null);let t=new URLSearchParams;j.trim().length>0&&t.set("q",j.trim()),y&&"all"!==y&&t.set("status",y),I?.id&&I?.dir&&(t.set("sort",I.id),t.set("dir",I.dir)),t.set("page",String(_+1)),t.set("per_page",String(C));let r=await (0,u.apiFetch)(`/api/admin/businesses?${t.toString()}`);if(!e)return;v(Array.isArray(r.tenants)?r.tenants:[]),z("number"==typeof r.meta?.total?r.meta.total:0),M("number"==typeof r.meta?.per_page?r.meta.per_page:C)}catch(t){if(!e)return;p(t instanceof Error?t.message:"Failed to load businesses."),v([]),z(0)}finally{if(!e)return;b(!1)}}(),()=>{e=!1}},[j,y,_,C,I?.id,I?.dir,D]);let A=(0,r.useMemo)(()=>f,[f]);return(0,t.jsx)(a.RequireAuth,{requiredPermission:"admin.billing.read",children:(0,t.jsx)(a.RequireAuth,{requiredPermission:"admin.tenants.read",children:(0,t.jsxs)("div",{className:"space-y-6",children:[g?(0,t.jsx)(i.Alert,{variant:"danger",title:"Could not load businesses",children:g}):null,(0,t.jsx)(o.Card,{children:(0,t.jsx)(o.CardContent,{className:"pt-5",children:(0,t.jsx)(c.DataTable,{title:"Businesses",data:A,loading:h,emptyMessage:"No businesses found.",getRowId:e=>e.id,server:{query:j,onQueryChange:e=>{w(e),S(0)},pageIndex:_,onPageIndexChange:S,pageSize:C,onPageSizeChange:M,totalRows:k,sort:I,onSortChange:B},filters:[{id:"status",label:"Status",value:y,options:[{label:"All statuses",value:"all"},{label:"Trial",value:"trial"},{label:"Active",value:"active"},{label:"Past due",value:"past_due"},{label:"Suspended",value:"suspended"},{label:"Closed",value:"closed"}],onChange:e=>{N(String(e)),S(0)}}],columns:[{id:"tenant",header:"Business",sortId:"name",cell:e=>(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium text-zinc-800",children:e.name}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-500",children:e.slug})]}),className:"min-w-[240px]"},{id:"status",header:"Status",sortId:"status",cell:e=>{var r;return(0,t.jsx)(l.Badge,{variant:"active"===(r=e.status)?"success":"trial"===r?"info":"past_due"===r?"warning":"suspended"===r?"danger":"default",children:e.status})},className:"whitespace-nowrap"},{id:"country",header:"Billing country",sortId:"id",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:e.billing_country??"—"}),className:"whitespace-nowrap"},{id:"currency",header:"Currency",sortId:"id",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:e.currency??"—"}),className:"whitespace-nowrap"},{id:"subscription",header:"Subscription",sortId:"id",cell:e=>{let r=e.billing_snapshot??null,s=r?.plan_name??null,a=r?.subscription_status??null,n=r?.price_interval?String(r.price_interval).toLowerCase():null,i="number"==typeof r?.price_amount_cents?r?.price_amount_cents:null,l=r?.subscription_currency??e.currency??null,d="number"==typeof i?`${(0,x.formatMoney)({amountCents:i,currency:l})}${n?`/${"month"===n?"mo":"year"===n?"yr":n}`:""}`:"—";return(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm text-zinc-800",children:s??"—"}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-500",children:a?`${a} • ${d}`:d})]})},className:"min-w-[240px]"},{id:"mrr",header:"MRR",sortId:"id",cell:e=>{let r=e.billing_snapshot??null,s=r?.subscription_currency??e.currency??null;return(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:(0,x.formatMoney)({amountCents:r?.mrr_cents??null,currency:s})})},className:"whitespace-nowrap"},{id:"outstanding",header:"Outstanding",sortId:"id",cell:e=>{let r=e.billing_snapshot??null,s=e.currency??r?.subscription_currency??null,a="number"==typeof r?.outstanding_invoices_count?r.outstanding_invoices_count:0,n="number"==typeof r?.outstanding_balance_cents?r.outstanding_balance_cents:null;return(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-800",children:(0,x.formatMoney)({amountCents:n,currency:s})}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:a>0?`${a} invoice${1===a?"":"s"}`:"—"})]})},className:"min-w-[160px]"},{id:"last_invoice",header:"Last invoice",sortId:"id",cell:e=>{let r=e.billing_snapshot?.last_invoice??null;return r?(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm text-zinc-800",children:r.invoice_number??`#${r.id}`}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-500",children:(r.status??"—")+" • "+(0,x.formatMoney)({amountCents:r.total_cents??null,currency:r.currency??e.currency??null})}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-500",children:(0,m.formatDateTime)(r.issued_at??null)})]}):(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:"—"})},className:"min-w-[220px]"},{id:"actions",header:"",cell:e=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(s.default,{href:`/admin/businesses/${e.id}/billing`,children:(0,t.jsx)(d.Button,{variant:"outline",size:"sm",children:"Billing"})}),(0,t.jsx)(s.default,{href:`/admin/businesses/${e.id}/billing/invoices`,children:(0,t.jsx)(d.Button,{variant:"outline",size:"sm",children:"Invoices"})})]}),className:"whitespace-nowrap"}]})})})]})})})}e.s(["default",()=>h])}]);