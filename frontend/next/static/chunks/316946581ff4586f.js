(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function a({variant:e,className:a}){let s="h-4 w-4 shrink-0";return"success"===e?(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 9v4"}),(0,t.jsx)("path",{d:"M12 17h.01"}),(0,t.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M18 6L6 18"}),(0,t.jsx)("path",{d:"M6 6l12 12"})]}):(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 16v-4"}),(0,t.jsx)("path",{d:"M12 8h.01"}),(0,t.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function s({className:e,variant:s="info",title:i,children:n,...l}){let d={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[s];return(0,t.jsx)("div",{role:"alert",className:(0,r.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",d.wrapper,e),...l,children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(a,{variant:s,className:(0,r.cn)("mt-0.5",d.icon)}),(0,t.jsxs)("div",{className:"min-w-0",children:[i?(0,t.jsx)("div",{className:(0,r.cn)("text-sm font-semibold",d.title),children:i}):null,n?(0,t.jsx)("div",{className:(0,r.cn)("text-sm text-zinc-700",i?"mt-1":""),children:n}):null]})]})})}e.s(["Alert",()=>s])},68501,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function a({className:e,variant:a="default",...s}){return(0,t.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[a],e),...s})}e.s(["Badge",()=>a])},30765,e=>{"use strict";function t(e){let t=e.amountCents,r=e.currency?.toUpperCase()??null;if("number"!=typeof t||!Number.isFinite(t))return e.fallback??"—";let a=t/100;if(!r||3!==r.length)return`${a.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:r,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch{return`${r} ${a.toFixed(2)}`}}e.s(["formatMoney",()=>t])},19463,e=>{"use strict";var t=e.i(48277),r=e.i(14575);function a({title:e,description:a,actions:s,className:i}){return(0,t.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",i),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),a?(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:a}):null]}),s?(0,t.jsx)("div",{className:"flex items-center gap-2",children:s}):null]})}e.s(["PageHeader",()=>a])},43901,e=>{"use strict";var t=e.i(48277),r=e.i(14575),a=e.i(72015);function s({className:e,"aria-hidden":a=!0,...s}){return(0,t.jsx)("div",{"aria-hidden":a,className:(0,r.cn)("rb-skeleton",e),...s})}function i({lines:e=3,className:i}){let n=Math.max(1,Math.min(e,12));return(0,t.jsx)(a.Card,{className:(0,r.cn)("overflow-hidden",i),children:(0,t.jsxs)(a.CardContent,{className:"space-y-3 pt-5",children:[(0,t.jsx)(s,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:n}).map((e,a)=>(0,t.jsx)(s,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",a===n-1?"w-3/5":"w-full")},a))]})})}function n({rows:e=6,columns:a=5,className:i}){let n=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(a,10));return(0,t.jsxs)("div",{className:(0,r.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",i),children:[(0,t.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,r)=>(0,t.jsx)(s,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},r))})}),(0,t.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:n}).map((e,a)=>(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,a)=>(0,t.jsx)(s,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===a?"w-3/4":"w-full")},a))},a))})})]})}e.s(["CardSkeleton",()=>i,"Skeleton",()=>s,"TableSkeleton",()=>n])},37574,e=>{"use strict";var t=e.i(48277),r=e.i(30668),a=e.i(14575),s=e.i(9693),i=e.i(33441),n=e.i(43901),l=e.i(1831);function d({title:e,data:d,columns:o,getRowId:c,loading:m=!1,emptyMessage:u="No data.",search:x,filters:h=[],pageSizeOptions:p=[10,25,50],initialPageSize:g=10,server:b,exportConfig:f,columnVisibilityKey:v,onRowClick:j,className:w}){let[y,N]=(0,r.useState)(""),[S,k]=(0,r.useState)(0),[_,C]=(0,r.useState)(g),[M,z]=(0,r.useState)(null),[I,$]=(0,r.useState)(null),[D,A]=(0,r.useState)(0),E=(0,r.useId)(),T=!!b,L=T?b.query:y,B=T?b.onQueryChange:N,P=T?b.pageIndex:S,F=T?b.onPageIndexChange:k,R=T?b.pageSize:_,U=T?b.onPageSizeChange:C,q=T?b.sort??null:null,O=T?b.onSortChange:void 0,H=(0,r.useMemo)(()=>{let e=Array.isArray(o)?o:[];if(!v){let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}try{let t=window.localStorage.getItem(v);if(!t){let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}let r=JSON.parse(t),a=e.filter(e=>{let t=r[e.id];return"boolean"==typeof t?t:!e.hiddenByDefault});return a.length>0?a:e.slice(0,1)}catch{let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}},[v,o,D]),K=(0,r.useMemo)(()=>{if(T)return Array.isArray(d)?d:[];let e=L.trim().toLowerCase();return(Array.isArray(d)?d:[]).filter(t=>{if(x&&x.getSearchText&&e.length>0&&!x.getSearchText(t).toLowerCase().includes(e))return!1;for(let e of h)if(e.predicate&&!e.predicate(t,e.value))return!1;return!0})},[d,h,T,L,x]),Q=T?b.totalRows:K.length,V=Math.max(1,Math.ceil(Q/R)),W=Math.min(P,V-1),J=Math.max(1,Math.min(8,R||10)),G=(0,r.useMemo)(()=>{if(T)return K;let e=W*R,t=e+R;return K.slice(e,t)},[W,K,T,R]),X=W>0,Y=W<V-1,Z=!!x||h.length>0||!!f||!!v;function ee(e,t){if(v&&(t||!(H.length<=1)))try{let r=window.localStorage.getItem(v),a=(r?JSON.parse(r):{})??{};a[e]=t,window.localStorage.setItem(v,JSON.stringify(a)),A(e=>e+1)}catch{}}async function et(e){if(f&&!M){$(null),z(e);try{let t=new URLSearchParams;for(let e of(L.trim().length>0&&t.set("q",L.trim()),h)){let r=e.value;null!=r&&0!==String(r).length&&t.set(e.id,String(r))}if(T&&q?.id&&q?.dir&&(t.set("sort",q.id),t.set("dir",q.dir)),t.set("format",e),f.extraQuery)for(let[e,r]of Object.entries(f.extraQuery))null!=r&&t.set(e,String(r));let r=`${f.url}${f.url.includes("?")?"&":"?"}${t.toString()}`,a=f.filename?.({format:e});await (0,l.apiDownload)(r,{filename:a})}catch(e){$(e instanceof Error?e.message:"Export failed.")}finally{z(null)}}}return(0,t.jsxs)("div",{className:(0,a.cn)("space-y-3",w),children:[e?(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Z?(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[x?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium",htmlFor:`${E}_datatable_search`,children:"Search"}),(0,t.jsx)("input",{id:`${E}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:L,onChange:e=>{B(e.target.value),F(0)},placeholder:x.placeholder??"Search..."})]}):null,h.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium",htmlFor:`${E}_datatable_filter_${e.id}`,children:e.label}),(0,t.jsx)("select",{id:`${E}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:t=>{let r=e.options.find(e=>String(e.value)===t.target.value),a=r?r.value:t.target.value;e.onChange(a),F(0)},children:e.options.map(e=>(0,t.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,t.jsxs)("div",{className:"text-sm text-zinc-600",children:[Q," result(s)"]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[f?(0,t.jsx)(i.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!M,children:M?"Exporting...":"Export"}),children:({close:e})=>{let r=f.formats??["csv","xlsx","pdf"];return(0,t.jsx)(t.Fragment,{children:r.map(r=>(0,t.jsxs)(i.DropdownMenuItem,{onSelect:()=>{e(),et(r)},disabled:!!M,children:["Export ",r.toUpperCase()]},r))})}}):null,v?(0,t.jsx)(i.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.DropdownMenuItem,{onSelect:()=>{for(let t of(e(),o))ee(t.id,!0)},children:"Show all"}),(0,t.jsx)(i.DropdownMenuItem,{onSelect:()=>{for(let t of(e(),o))ee(t.id,!t.hiddenByDefault)},children:"Reset defaults"}),(0,t.jsx)(i.DropdownMenuSeparator,{}),o.map(e=>{let r=H.some(t=>t.id===e.id);return(0,t.jsxs)(i.DropdownMenuItem,{onSelect:()=>{ee(e.id,!r)},children:[(0,t.jsx)("span",{className:"mr-2 inline-block w-4",children:r?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,I?(0,t.jsx)("div",{className:"text-sm text-red-600",children:I}):null,(0,t.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,t.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,t.jsx)("tr",{children:H.map(e=>(0,t.jsx)("th",{className:(0,a.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:T&&e.sortId&&O?(0,t.jsxs)("button",{type:"button",onClick:()=>(function(e){if(T&&e.sortId&&O){if(!q||q.id!==e.sortId){O({id:e.sortId,dir:"asc"}),F(0);return}if("asc"===q.dir){O({id:e.sortId,dir:"desc"}),F(0);return}O(null),F(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,t.jsx)("span",{children:e.header}),T&&e.sortId?q&&q.id===e.sortId?"asc"===q.dir?(0,t.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,t.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,t.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,t.jsx)("tbody",{children:m?Array.from({length:J}).map((e,r)=>(0,t.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:H.map((e,r)=>(0,t.jsx)("td",{className:(0,a.cn)("px-3 py-2 align-middle",e.className),children:(0,t.jsx)(n.Skeleton,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===r?"w-3/4":r===H.length-1?"w-16":"w-full")})},e.id))},`loading_${r}`)):0===G.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,H.length),children:u})}):G.map(e=>(0,t.jsx)("tr",{className:(0,a.cn)("border-t border-[var(--rb-border)]",j?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:j?0:void 0,role:j?"button":void 0,onClick:j?()=>{j(e)}:void 0,onKeyDown:j?t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),j(e))}:void 0,children:H.map(r=>(0,t.jsx)("td",{className:(0,a.cn)("px-3 py-2 align-middle",r.className),children:r.cell(e)},r.id))},String(c(e))))})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:function(){F(Math.max(0,W-1))},disabled:!X,children:"Prev"}),(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:function(){F(Math.min(V-1,W+1))},disabled:!Y,children:"Next"}),(0,t.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",W+1," / ",V]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,t.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(R),onChange:e=>{U(Number(e.target.value)),F(0)},children:p.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>d])},48650,e=>{"use strict";var t=e.i(48277),r=e.i(19463),a=e.i(63571),s=e.i(72015);function i({title:e,description:i,actions:n,filters:l,loading:d,loadingFallback:o,error:c,empty:m,emptyTitle:u="Nothing here yet",emptyDescription:x="No items to display.",children:h}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(r.PageHeader,{title:e,description:i,actions:n}),l?(0,t.jsx)(s.Card,{className:"shadow-none",children:(0,t.jsx)(s.CardContent,{className:"pt-5",children:l})}):null,c?(0,t.jsx)(a.Alert,{variant:"danger",title:"Something went wrong",children:c}):null,d?o??(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading..."}):null,d||c||!m?null:(0,t.jsx)(s.Card,{className:"shadow-none",children:(0,t.jsxs)(s.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:u}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:x})]})}),d||c||m?null:h]})}e.s(["ListPageShell",()=>i])},44919,e=>{"use strict";var t=e.i(54976);e.s(["notify",0,{success:(e,r={})=>t.toast.success(e,r),error:(e,r={})=>t.toast.error(e,r),info:(e,r={})=>t.toast.info(e,r),warning:(e,r={})=>t.toast.warning(e,r),loading:(e,r={})=>t.toast.loading(e,r),dismiss(e){t.toast.dismiss(e)},message:(e,r,a={})=>"success"===e?t.toast.success(r,a):"error"===e?t.toast.error(r,a):"warning"===e?t.toast.warning(r,a):"loading"===e?t.toast.loading(r,a):t.toast.info(r,a)}])},34606,e=>{"use strict";let t=(0,e.i(35884).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>t],34606)},49449,e=>{"use strict";let t=(0,e.i(35884).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],49449)},63753,82087,e=>{"use strict";var t=e.i(35884);let r=(0,t.default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>r],63753);let a=(0,t.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);e.s(["Mail",()=>a],82087)},30276,e=>{"use strict";var t=e.i(48277),r=e.i(30668),a=e.i(96086),s=e.i(1314),i=e.i(35884);let n=(0,i.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),l=(0,i.default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var d=e.i(63753),o=e.i(82087),c=e.i(34606);let m=(0,i.default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var u=e.i(49449);let x=(0,i.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var h=e.i(9693),p=e.i(68501),g=e.i(72015),b=e.i(37574),f=e.i(33441),v=e.i(48650),j=e.i(1831),w=e.i(30765),y=e.i(44919);function N(){let e=(0,s.useAuth)(),i=(0,a.useRouter)(),N=(0,a.useParams)(),S=N.business??N.tenant,[k,_]=r.default.useState(!0),[C,M]=r.default.useState(null),[z,I]=r.default.useState([]),[$,D]=r.default.useState(""),[A,E]=r.default.useState(null),[T,L]=r.default.useState(null),[B,P]=r.default.useState(0),[F,R]=r.default.useState(0),[U,q]=r.default.useState(10);r.default.useEffect(()=>{let e=!0;return async function(){try{if(_(!0),M(null),"string"!=typeof S||0===S.trim().length)return void I([]);let t=await (0,j.apiFetch)(`/api/${S}/app/repairbuddy/estimates?limit=200&q=${encodeURIComponent($.trim())}`,{method:"GET"});if(!e)return;I(Array.isArray(t?.estimates)?t.estimates:[])}catch(t){if(!e)return;if(t instanceof j.ApiError&&428===t.status&&"string"==typeof S&&S.trim().length>0){let e=`/app/${S}/estimates`;i.replace(`/app/${S}/branches/select?next=${encodeURIComponent(e)}`);return}M(t instanceof Error?t.message:"Failed to load estimates.")}finally{if(!e)return;_(!1)}}(),()=>{e=!1}},[$,B,S]);let O=r.default.useMemo(()=>{let e={pending:0,approved:0,rejected:0};for(let t of z){let r="string"==typeof t?.status?t.status:"";r in e&&(e[r]+=1)}return{total:z.length,pending:e.pending,approved:e.approved,rejected:e.rejected}},[z]),H=r.default.useMemo(()=>{let e=[...z];if(!A?.id||!A?.dir)return e;let t="asc"===A.dir?1:-1;return e.sort((e,r)=>"id"===A.id?(e.id-r.id)*t:"case_number"===A.id?e.case_number.localeCompare(r.case_number)*t:"status"===A.id?String(e.status).localeCompare(String(r.status))*t:"updated_at"===A.id?(new Date(e.updated_at).getTime()-new Date(r.updated_at).getTime())*t:"total"===A.id?(("number"==typeof e.totals?.total_cents?e.totals.total_cents:0)-("number"==typeof r.totals?.total_cents?r.totals.total_cents:0))*t:0),e},[z,A]);async function K(t){if("string"==typeof S&&0!==S.trim().length&&e.can("estimates.manage")){L(t);try{await (0,j.apiFetch)(`/api/${S}/app/repairbuddy/estimates/${t}/send`,{method:"POST"}),y.notify.success("Estimate sent."),P(e=>e+1)}catch(e){if(e instanceof j.ApiError&&428===e.status){let e=`/app/${S}/estimates`;i.replace(`/app/${S}/branches/select?next=${encodeURIComponent(e)}`);return}y.notify.error(e instanceof Error?e.message:"Failed to send estimate.")}finally{L(null)}}}async function Q(t,r){if("string"==typeof S&&0!==S.trim().length&&e.can("estimates.manage")){L(t);try{await (0,j.apiFetch)(`/api/${S}/app/repairbuddy/estimates/${t}`,{method:"PATCH",body:{status:r}}),P(e=>e+1)}catch(e){if(e instanceof j.ApiError&&428===e.status){let e=`/app/${S}/estimates`;i.replace(`/app/${S}/branches/select?next=${encodeURIComponent(e)}`);return}y.notify.error(e instanceof Error?e.message:"Failed to update estimate.")}finally{L(null)}}}let V=H.length,W=r.default.useMemo(()=>{let e=F*U,t=e+U;return H.slice(e,t)},[F,U,H]),J=r.default.useMemo(()=>[{id:"id",header:"ID",sortId:"id",cell:e=>(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e.id}),className:"whitespace-nowrap"},{id:"case",header:"Estimate",sortId:"case_number",cell:e=>(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:e.case_number}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-600",children:e.title})]}),className:"min-w-[220px] max-w-[280px]"},{id:"customer",header:"Customer",cell:e=>(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:e.customer?.name??"—"}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-600",children:e.customer?.email??""})]}),className:"min-w-[220px] max-w-[320px]"},{id:"status",header:"Status",sortId:"status",cell:e=>{var r;return(0,t.jsx)(p.Badge,{variant:"approved"===(r=e.status)?"success":"rejected"===r?"danger":"warning",children:"string"==typeof e.status?e.status.replace(/_/g," "):"—"})},className:"whitespace-nowrap"},{id:"total",header:"Total",sortId:"total",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:(0,w.formatMoney)({amountCents:e.totals?.total_cents,currency:e.totals?.currency})}),className:"whitespace-nowrap"},{id:"updated",header:"Updated",sortId:"updated_at",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:new Date(e.updated_at).toLocaleString()}),className:"whitespace-nowrap"},{id:"actions",header:(0,t.jsx)("div",{className:"text-right",children:"Actions"}),cell:r=>(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(f.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(h.Button,{variant:"outline",size:"sm",className:"px-2","aria-label":"Actions",disabled:T===r.id,onClick:t=>{t.preventDefault(),t.stopPropagation(),e()},children:(0,t.jsx)(c.MoreHorizontal,{className:"h-4 w-4"})}),children:({close:a})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f.DropdownMenuItem,{onSelect:()=>{"string"==typeof S&&0!==S.length&&(a(),i.push(`/app/${S}/estimates/${r.id}`))},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Eye,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"View"})]})}),(0,t.jsx)(f.DropdownMenuItem,{disabled:T===r.id||!e.can("estimates.manage")||!r.customer||!r.customer.email||0===r.customer.email.trim().length,onSelect:()=>{a(),K(r.id)},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(o.Mail,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Send"})]})}),(0,t.jsx)(f.DropdownMenuItem,{disabled:T===r.id||!e.can("estimates.manage")||"pending"!==r.status,onSelect:()=>{a(),window.confirm("Approve this estimate?")&&Q(r.id,"approved")},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(l,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Approve"})]})}),(0,t.jsx)(f.DropdownMenuItem,{disabled:T===r.id||!e.can("estimates.manage")||"pending"!==r.status,onSelect:()=>{a(),window.confirm("Reject this estimate?")&&Q(r.id,"rejected")},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(x,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Reject"})]})}),(0,t.jsx)(f.DropdownMenuItem,{disabled:!0,onSelect:()=>{},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(m,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Edit"})]})}),(0,t.jsx)(f.DropdownMenuItem,{disabled:!0,onSelect:()=>{},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(n,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Cancel"})]})}),(0,t.jsx)(f.DropdownMenuItem,{disabled:!0,onSelect:()=>{},children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Trash2,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:"Delete"})]})})]})})}),className:"whitespace-nowrap"}],[T,e,i,S]);return(0,t.jsxs)(v.ListPageShell,{title:"Estimates",description:"Create, send, and track customer approvals.",actions:(0,t.jsx)(h.Button,{variant:"outline",size:"sm",onClick:()=>{"string"!=typeof S||0===S.length||e.can("estimates.manage")&&i.push(`/app/${S}/estimates/new`)},disabled:"string"!=typeof S||0===S.length||!e.can("estimates.manage"),children:"New estimate"}),loading:k,error:C,empty:!k&&!C&&0===z.length,emptyTitle:"No estimates found",emptyDescription:"Try adjusting your search.",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[{id:"pending",label:"Pending",value:O.pending,dot:"bg-amber-500"},{id:"approved",label:"Approved",value:O.approved,dot:"bg-emerald-500"},{id:"rejected",label:"Rejected",value:O.rejected,dot:"bg-rose-500"},{id:"total",label:"Total",value:O.total,dot:"bg-sky-500"}].map(e=>(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4 text-left shadow-none",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsx)("div",{className:"min-w-0",children:(0,t.jsx)("div",{className:"text-xs font-medium text-zinc-600",children:e.label})}),(0,t.jsx)("div",{className:`mt-1 h-2.5 w-2.5 shrink-0 rounded-full ${e.dot}`,"aria-hidden":"true"})]}),(0,t.jsx)("div",{className:"mt-1 text-2xl font-semibold text-[var(--rb-text)]",children:k?"—":String(e.value)})]},e.id))}),(0,t.jsx)(g.Card,{className:"shadow-none",children:(0,t.jsx)(g.CardContent,{className:"pt-5",children:(0,t.jsx)(b.DataTable,{title:"string"==typeof S?`Estimates \xb7 ${S}`:"Estimates",data:W,loading:k,emptyMessage:"No estimates.",columns:J,getRowId:e=>e.id,search:{placeholder:"Search by case number, title, customer, or ID..."},columnVisibilityKey:"string"==typeof S?`rb:datatable:${S}:estimates`:"rb:datatable:estimates",server:{query:$,onQueryChange:e=>{D(e),R(0)},pageIndex:F,onPageIndexChange:R,pageSize:U,onPageSizeChange:e=>{q(e),R(0)},totalRows:V,sort:A,onSortChange:e=>{E(e),R(0)}},onRowClick:e=>{"string"==typeof S&&0!==S.length&&i.push(`/app/${S}/estimates/${e.id}`)}})})})]})}e.s(["default",()=>N],30276)}]);