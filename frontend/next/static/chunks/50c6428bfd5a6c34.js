(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var t=e.i(48277),s=e.i(14575);function i({variant:e,className:i}){let r="h-4 w-4 shrink-0";return"success"===e?(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:(0,s.cn)(r,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,s.cn)(r,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 9v4"}),(0,t.jsx)("path",{d:"M12 17h.01"}),(0,t.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,s.cn)(r,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M18 6L6 18"}),(0,t.jsx)("path",{d:"M6 6l12 12"})]}):(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,s.cn)(r,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 16v-4"}),(0,t.jsx)("path",{d:"M12 8h.01"}),(0,t.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function r({className:e,variant:r="info",title:a,children:n,...l}){let c={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[r];return(0,t.jsx)("div",{role:"alert",className:(0,s.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",c.wrapper,e),...l,children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(i,{variant:r,className:(0,s.cn)("mt-0.5",c.icon)}),(0,t.jsxs)("div",{className:"min-w-0",children:[a?(0,t.jsx)("div",{className:(0,s.cn)("text-sm font-semibold",c.title),children:a}):null,n?(0,t.jsx)("div",{className:(0,s.cn)("text-sm text-zinc-700",a?"mt-1":""),children:n}):null]})]})})}e.s(["Alert",()=>r])},68501,e=>{"use strict";var t=e.i(48277),s=e.i(14575);function i({className:e,variant:i="default",...r}){return(0,t.jsx)("span",{className:(0,s.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[i],e),...r})}e.s(["Badge",()=>i])},19463,e=>{"use strict";var t=e.i(48277),s=e.i(14575);function i({title:e,description:i,actions:r,className:a}){return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",a),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),i?(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:i}):null]}),r?(0,t.jsx)("div",{className:"flex items-center gap-2",children:r}):null]})}e.s(["PageHeader",()=>i])},30765,e=>{"use strict";function t(e){let t=e.amountCents,s=e.currency?.toUpperCase()??null;if("number"!=typeof t||!Number.isFinite(t))return e.fallback??"—";let i=t/100;if(!s||3!==s.length)return`${i.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(i)}catch{return`${s} ${i.toFixed(2)}`}}e.s(["formatMoney",()=>t])},44919,e=>{"use strict";var t=e.i(54976);e.s(["notify",0,{success:(e,s={})=>t.toast.success(e,s),error:(e,s={})=>t.toast.error(e,s),info:(e,s={})=>t.toast.info(e,s),warning:(e,s={})=>t.toast.warning(e,s),loading:(e,s={})=>t.toast.loading(e,s),dismiss(e){t.toast.dismiss(e)},message:(e,s,i={})=>"success"===e?t.toast.success(s,i):"error"===e?t.toast.error(s,i):"warning"===e?t.toast.warning(s,i):"loading"===e?t.toast.loading(s,i):t.toast.info(s,i)}])},57373,e=>{"use strict";var t=e.i(48277),s=e.i(30668),i=e.i(14575);let r=(0,s.createContext)(null);function a(){let e=(0,s.useContext)(r);if(!e)throw Error("Tabs components must be used within <Tabs />");return e}function n({value:e,defaultValue:a,onValueChange:n,className:l,children:c}){let d=(0,s.useId)(),[o,m]=(0,s.useState)(a??""),u="string"==typeof e?e:o,x=(0,s.useCallback)(t=>{t&&(n&&n(t),"string"!=typeof e&&m(t))},[n,e]),v=(0,s.useMemo)(()=>({value:u,setValue:x,baseId:d}),[d,u,x]);return(0,t.jsx)(r.Provider,{value:v,children:(0,t.jsx)("div",{className:(0,i.cn)("space-y-4",l),children:c})})}function l({className:e,...s}){return(0,t.jsx)("div",{className:(0,i.cn)("inline-flex items-center gap-1 rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-1 shadow-[var(--rb-shadow)]",e),role:"tablist",...s})}function c({value:e,className:s,...r}){let n=a(),l=n.value===e,{onClick:c,...d}=r;return(0,t.jsx)("button",{type:"button",role:"tab","aria-selected":l,"aria-controls":`${n.baseId}-panel-${e}`,id:`${n.baseId}-tab-${e}`,onClick:t=>{n.setValue(e),c?.(t)},className:(0,i.cn)("h-9 rounded-[var(--rb-radius-sm)] px-3 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",l?"bg-[var(--rb-surface-muted)] text-[var(--rb-text)]":"text-zinc-600 hover:bg-[var(--rb-surface-muted)]",s),...d})}function d({value:e,className:s,children:r,...n}){let l=a();return l.value!==e?null:(0,t.jsx)("div",{role:"tabpanel",id:`${l.baseId}-panel-${e}`,"aria-labelledby":`${l.baseId}-tab-${e}`,className:(0,i.cn)(s),...n,children:r})}e.s(["Tabs",()=>n,"TabsContent",()=>d,"TabsList",()=>l,"TabsTrigger",()=>c])},83847,e=>{"use strict";var t=e.i(48277),s=e.i(16506),i=e.i(14575),r=e.i(19463),a=e.i(57373);function n({breadcrumb:e,backHref:n,backLabel:l="Back",title:c,description:d,actions:o,defaultTab:m="overview",tabs:u,className:x}){return(0,t.jsxs)("div",{className:(0,i.cn)("space-y-0 space-x-2",x),children:[(0,t.jsx)("div",{className:"space-y-2",children:n?(0,t.jsx)("div",{children:(0,t.jsx)(s.default,{href:n,className:"text-sm text-zinc-600 hover:text-[var(--rb-text)]",children:l})}):null}),(0,t.jsx)(r.PageHeader,{title:c,description:d,actions:o}),(0,t.jsxs)(a.Tabs,{defaultValue:m,children:[(0,t.jsxs)(a.TabsList,{children:[void 0!==u.overview?(0,t.jsx)(a.TabsTrigger,{value:"overview",children:"Overview"}):null,void 0!==u.devices?(0,t.jsx)(a.TabsTrigger,{value:"devices",children:"Devices"}):null,void 0!==u.timeline?(0,t.jsx)(a.TabsTrigger,{value:"timeline",children:"Timeline"}):null,void 0!==u.messages?(0,t.jsx)(a.TabsTrigger,{value:"messages",children:"Messages"}):null,void 0!==u.financial?(0,t.jsx)(a.TabsTrigger,{value:"financial",children:"Financial"}):null,void 0!==u.print?(0,t.jsx)(a.TabsTrigger,{value:"print",children:"Print"}):null]}),void 0!==u.overview?(0,t.jsx)(a.TabsContent,{value:"overview",children:u.overview}):null,void 0!==u.devices?(0,t.jsx)(a.TabsContent,{value:"devices",children:u.devices}):null,void 0!==u.timeline?(0,t.jsx)(a.TabsContent,{value:"timeline",children:u.timeline}):null,void 0!==u.messages?(0,t.jsx)(a.TabsContent,{value:"messages",children:u.messages}):null,void 0!==u.financial?(0,t.jsx)(a.TabsContent,{value:"financial",children:u.financial}):null,void 0!==u.print?(0,t.jsx)(a.TabsContent,{value:"print",children:u.print}):null]})]})}e.s(["DetailPageShell",()=>n])},42414,56785,897,e=>{"use strict";let t=(0,e.i(35884).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>t],42414);var s=e.i(96086);function i(e="overview"){let t=(0,s.useSearchParams)(),r=t?.get("tab")??null;return"overview"===r||"devices"===r||"timeline"===r||"messages"===r||"financial"===r||"print"===r?r:e}e.s(["useDetailTab",()=>i],56785);var r=e.i(48277),a=e.i(63571),n=e.i(68501),l=e.i(9693),c=e.i(72015);function d({devicesError:e,attachError:t,devicesLoading:s,customerDevices:i,attachedDevices:d,attachId:o,setAttachId:m,attachBusy:u,onAttach:x,onDetach:v}){return(0,r.jsxs)("div",{className:"space-y-4",children:[e?(0,r.jsx)(a.Alert,{variant:"danger",title:"Could not load devices",children:e}):null,t?(0,r.jsx)(a.Alert,{variant:"danger",title:"Could not update devices",children:t}):null,s?(0,r.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading devices..."}):null,(0,r.jsx)(c.Card,{className:"shadow-none",children:(0,r.jsxs)(c.CardContent,{className:"pt-5",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Attach customer device"}),(0,r.jsxs)("div",{className:"mt-3 flex flex-col gap-3 sm:flex-row sm:items-center",children:[(0,r.jsxs)("select",{value:o,onChange:e=>m(e.target.value),disabled:u||0===i.length,className:"h-10 w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 text-sm",children:[(0,r.jsx)("option",{value:"",children:"Select a customer device..."}),i.map(e=>(0,r.jsxs)("option",{value:String(e.id),children:[e.label,e.serial?` (Serial: ${e.serial})`:""]},e.id))]}),(0,r.jsx)(l.Button,{onClick:x,disabled:u||0===o.trim().length,children:u?"Saving...":"Attach"})]}),0===i.length?(0,r.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"No customer devices available."}):null]})}),(0,r.jsx)(c.Card,{className:"shadow-none",children:(0,r.jsxs)(c.CardContent,{className:"pt-5",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Attached devices"}),(0,r.jsxs)("div",{className:"mt-4 space-y-3",children:[0===d.length?(0,r.jsx)("div",{className:"text-sm text-zinc-600",children:"No devices attached."}):null,d.map(e=>(0,r.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3",children:(0,r.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:e.label}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Serial: ",e.serial??"—"]}),e.notes?(0,r.jsx)("div",{className:"mt-2 whitespace-pre-wrap text-sm text-zinc-700",children:e.notes}):null,Array.isArray(e.extra_fields)&&e.extra_fields.length>0?(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Extra fields"}),(0,r.jsx)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:e.extra_fields.map(e=>(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate text-xs text-zinc-500",children:e.label}),(0,r.jsx)("div",{className:"truncate text-sm text-zinc-700",children:e.value_text})]},e.key))})]}):null]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.Badge,{variant:"default",children:e.customer_device_id}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>v(e.id),disabled:u,children:"Remove"})]})]})},e.id))]})]})})]})}e.s(["AttachedDevicesManager",()=>d],897)},56746,e=>{"use strict";var t=e.i(48277),s=e.i(30668),i=e.i(16506),r=e.i(96086),a=e.i(42414),n=e.i(63571),l=e.i(68501),c=e.i(9693),d=e.i(72015),o=e.i(83847),m=e.i(56785),u=e.i(897),x=e.i(1831),v=e.i(1314),h=e.i(30765),b=e.i(44919);function p(){var e;let p=(0,r.useRouter)(),f=(0,v.useAuth)(),g=(0,r.useParams)(),j=g.business??g.tenant,w=g.estimateId,N=(0,m.useDetailTab)("overview"),[y,C]=s.default.useState(!0),[_,T]=s.default.useState(null),[k,$]=s.default.useState(null),[z,E]=s.default.useState(!1),[A,S]=s.default.useState(null),[L,M]=s.default.useState(0),[F,D]=s.default.useState(!1),[B,P]=s.default.useState(null),[I,R]=s.default.useState([]),[U,H]=s.default.useState([]),[O,W]=s.default.useState(""),[q,V]=s.default.useState(!1),[J,K]=s.default.useState(null);s.default.useEffect(()=>{let e=!0;return async function(){try{if(C(!0),T(null),!w){T("Estimate ID is missing."),$(null);return}if("string"!=typeof j||0===j.trim().length){T("Tenant is missing."),$(null);return}let t=await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/estimates/${w}`,{method:"GET"});if(!e)return;let s=t?.estimate??null;if(!s){T("Estimate not found."),$(null);return}$(s)}catch(t){if(!e)return;if(t instanceof x.ApiError&&428===t.status&&"string"==typeof j&&j.trim().length>0){let e=`/app/${j}/estimates/${w}`;p.replace(`/app/${j}/branches/select?next=${encodeURIComponent(e)}`);return}t instanceof x.ApiError?T(t.message):T(t instanceof Error?t.message:"Failed to load estimate."),$(null)}finally{if(!e)return;C(!1)}}(),()=>{e=!1}},[w,L,p,j]),s.default.useEffect(()=>{let e=!0;return async function(){try{if(D(!0),P(null),!w||"string"!=typeof j||0===j.trim().length||!k){R([]),H([]);return}let t=await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/estimates/${w}/devices`);if(!e)return;R(Array.isArray(t?.estimate_devices)?t.estimate_devices:[]);let s=k.customer?.id;if("number"!=typeof s)return void H([]);let i=await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/customer-devices?customer_id=${encodeURIComponent(String(s))}`);if(!e)return;H(Array.isArray(i?.customer_devices)?i.customer_devices:[])}catch(t){if(!e)return;if(t instanceof x.ApiError&&428===t.status&&"string"==typeof j&&j.trim().length>0){let e=`/app/${j}/estimates/${w}`;p.replace(`/app/${j}/branches/select?next=${encodeURIComponent(e)}`);return}P(t instanceof Error?t.message:"Failed to load devices."),R([]),H([])}finally{if(!e)return;D(!1)}}(),()=>{e=!1}},[k,w,L,p,j]);let G=k?.totals?.total_cents??0,Q=k?.totals?.currency??"USD",X=k?.converted_job_id??null,Y="number"==typeof X&&X>0;async function Z(e){if(k){E(!0),S(null);try{if("string"!=typeof j||0===j.trim().length)throw Error("Tenant is missing.");await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/estimates/${k.id}`,{method:"PATCH",body:{status:e}}),M(e=>e+1)}catch(e){e instanceof x.ApiError?S(e.message):S(e instanceof Error?e.message:"Failed to update estimate.")}finally{E(!1)}}}async function ee(){if(k&&!z&&f.can("estimates.manage")){E(!0),S(null);try{if("string"!=typeof j||0===j.trim().length)throw Error("Tenant is missing.");await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/estimates/${k.id}/send`,{method:"POST"}),b.notify.success("Estimate sent."),M(e=>e+1)}catch(e){e instanceof x.ApiError?S(e.message):S(e instanceof Error?e.message:"Failed to send estimate.")}finally{E(!1)}}}async function et(){if(K(null),!O||0===O.trim().length)return void K("Select a customer device.");if("string"!=typeof j||0===j.trim().length)return void K("Tenant is missing.");if(!w)return void K("Estimate ID is missing.");V(!0);try{await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/estimates/${w}/devices`,{method:"POST",body:{customer_device_id:Number(O)}}),W(""),M(e=>e+1)}catch(e){e instanceof x.ApiError?K(e.message):K(e instanceof Error?e.message:"Failed to attach device.")}finally{V(!1)}}async function es(e){if(K(null),"string"!=typeof j||0===j.trim().length)return void K("Tenant is missing.");if(!w)return void K("Estimate ID is missing.");V(!0);try{await (0,x.apiFetch)(`/api/${j}/app/repairbuddy/estimates/${w}/devices/${e}`,{method:"DELETE"}),M(e=>e+1)}catch(e){e instanceof x.ApiError?K(e.message):K(e instanceof Error?e.message:"Failed to detach device.")}finally{V(!1)}}return(0,t.jsxs)("div",{className:"space-y-6",children:[_?(0,t.jsx)(n.Alert,{variant:"danger",title:"Could not load estimate",children:_}):null,y?(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading estimate..."}):null,k?(0,t.jsx)(o.DetailPageShell,{breadcrumb:(0,t.jsxs)("span",{children:[(0,t.jsx)(i.default,{href:"string"==typeof j?`/app/${j}/estimates`:"/app",className:"hover:text-[var(--rb-text)]",children:"Estimates"}),(0,t.jsx)("span",{className:"px-2",children:"/"}),(0,t.jsx)("span",{children:k.case_number})]}),backHref:"string"==typeof j?`/app/${j}/estimates`:"/app",title:k.case_number,description:k.title,actions:(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)(l.Badge,{variant:"approved"===(e=k.status)?"success":"rejected"===e?"danger":"warning",children:k.status}),Y&&"string"==typeof j?(0,t.jsx)(i.default,{href:`/app/${j}/jobs/${X}`,className:"text-sm text-[var(--rb-text)] underline",children:"View Job"}):null,(0,t.jsxs)(c.Button,{variant:"outline",size:"sm",onClick:()=>{M(e=>e+1)},children:[(0,t.jsx)(a.RefreshCw,{className:"mr-2 h-4 w-4"}),"Refresh"]}),(0,t.jsx)(c.Button,{variant:"outline",size:"sm",disabled:z||!f.can("estimates.manage")||!k.customer||!k.customer.email||0===k.customer.email.trim().length,onClick:()=>void ee(),children:"Send"}),(0,t.jsx)(c.Button,{variant:"outline",size:"sm",disabled:z||"pending"!==k.status||Y,onClick:()=>void Z("rejected"),children:"Reject"}),(0,t.jsx)(c.Button,{disabled:z||"pending"!==k.status||Y,size:"sm",onClick:()=>void Z("approved"),children:"Approve"})]}),defaultTab:N,tabs:{overview:(0,t.jsx)(d.Card,{className:"shadow-none",children:(0,t.jsxs)(d.CardContent,{className:"pt-5",children:[A?(0,t.jsx)(n.Alert,{variant:"danger",title:"Could not update estimate",children:A}):null,(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Client"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:k.customer?.name??"—"}),(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:k.customer?.email??""})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Total"}),(0,t.jsx)("div",{className:"mt-1 text-sm font-semibold text-[var(--rb-text)]",children:(0,h.formatMoney)({amountCents:G,currency:Q})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Created"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:new Date(k.created_at).toLocaleString()})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Updated"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:new Date(k.updated_at).toLocaleString()})]})]})]})}),devices:(0,t.jsx)(u.AttachedDevicesManager,{devicesError:B,attachError:J,devicesLoading:F,customerDevices:U,attachedDevices:I,attachId:O,setAttachId:W,attachBusy:q,onAttach:()=>void et(),onDetach:e=>void es(e)}),timeline:(0,t.jsx)(d.Card,{className:"shadow-none",children:(0,t.jsxs)(d.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Line items"}),(0,t.jsxs)("div",{className:"mt-4 space-y-2",children:[(k.items??[]).map(e=>(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:e.name}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Qty: ",e.qty]})]}),(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap",children:(0,h.formatMoney)({amountCents:e.qty*e.unit_price.amount_cents,currency:e.unit_price.currency})})]},e.id)),(0,t.jsxs)("div",{className:"flex items-center justify-between border-t border-[var(--rb-border)] pt-3",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:"Total"}),(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:(0,h.formatMoney)({amountCents:G,currency:Q})})]})]})]})}),messages:(0,t.jsx)(d.Card,{className:"shadow-none",children:(0,t.jsxs)(d.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Messages"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Estimate-specific messages are shown on the Job detail timeline in later phases."})]})}),financial:(0,t.jsx)(d.Card,{className:"shadow-none",children:(0,t.jsxs)(d.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Financial"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Payments and invoices are implemented in later phases."})]})}),print:(0,t.jsx)(d.Card,{className:"shadow-none",children:(0,t.jsxs)(d.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Print"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Printable estimate views are implemented in later phases."})]})})}},`${k.id}:${N}`):null]})}e.s(["default",()=>p])}]);