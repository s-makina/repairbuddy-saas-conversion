(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19463,e=>{"use strict";var t=e.i(48277),s=e.i(14575);function a({title:e,description:a,actions:i,className:n}){return(0,t.jsxs)("div",{className:(0,s.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",n),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),a?(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:a}):null]}),i?(0,t.jsx)("div",{className:"flex items-center gap-2",children:i}):null]})}e.s(["PageHeader",()=>a])},81640,e=>{"use strict";var t=e.i(48277),s=e.i(30668),a=e.i(96086),i=e.i(1831),n=e.i(9693),l=e.i(72015),r=e.i(19463);function c(){let e=(0,a.useRouter)(),c=(0,a.useParams)(),d=c.business??c.tenant,o=(0,a.useSearchParams)(),m=(0,s.useMemo)(()=>{let e=o.get("next");return e&&e.startsWith("/")?e:null},[o]),[h,u]=(0,s.useState)(!0),[x,p]=(0,s.useState)([]),[f,b]=(0,s.useState)(null),[j,v]=(0,s.useState)(null);async function g(t){v(t),b(null);try{await (0,i.apiFetch)(`/api/${d}/app/branches/active`,{method:"POST",body:{branch_id:t}}),e.replace(m??`/app/${d}`)}catch(e){e instanceof i.ApiError?b(e.message):b("Failed to select branch.")}finally{v(null)}}(0,s.useEffect)(()=>{let e=!0;async function t(){try{b(null),u(!0);let t=await (0,i.apiFetch)(`/api/${d}/app/branches`);if(!e)return;p(Array.isArray(t.branches)?t.branches:[])}catch(t){if(!e)return;b(t instanceof Error?t.message:"Failed to load branches.")}finally{if(!e)return;u(!1)}}return"string"==typeof d&&d.length>0?t():(u(!1),b("Tenant is missing.")),()=>{e=!1}},[d]);let N=(0,s.useMemo)(()=>x.filter(e=>e.is_active),[x]);return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(r.PageHeader,{title:"Choose branch",description:"Select the shop you want to work in."}),h?(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading branches..."}):null,f?(0,t.jsx)("div",{className:"text-sm text-red-600",children:f}):null,h||f||0!==N.length?null:(0,t.jsx)(l.Card,{className:"shadow-none",children:(0,t.jsxs)(l.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"No branches available"}),(0,t.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Please contact your administrator."})]})}),(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:N.map(e=>{let s=j===e.id;return(0,t.jsx)(l.Card,{className:"shadow-none",children:(0,t.jsxs)(l.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:e.code}),(0,t.jsx)("div",{className:"mt-2 text-sm font-semibold text-[var(--rb-text)]",children:e.name}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(n.Button,{variant:"primary",disabled:s,onClick:()=>{g(e.id)},children:s?"Selecting...":"Select"})})]})},e.id)})})]})}e.s(["default",()=>c])}]);