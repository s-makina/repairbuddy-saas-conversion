(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19463,e=>{"use strict";var r=e.i(48277),i=e.i(14575);function t({title:e,description:t,actions:s,className:a}){return(0,r.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",a),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),t?(0,r.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:t}):null]}),s?(0,r.jsx)("div",{className:"flex items-center gap-2",children:s}):null]})}e.s(["PageHeader",()=>t])},63571,e=>{"use strict";var r=e.i(48277),i=e.i(14575);function t({variant:e,className:t}){let s="h-4 w-4 shrink-0";return"success"===e?(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:(0,i.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,i.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 9v4"}),(0,r.jsx)("path",{d:"M12 17h.01"}),(0,r.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,i.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M18 6L6 18"}),(0,r.jsx)("path",{d:"M6 6l12 12"})]}):(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,i.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"}),(0,r.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function s({className:e,variant:s="info",title:a,children:n,...l}){let o={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[s];return(0,r.jsx)("div",{role:"alert",className:(0,i.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",o.wrapper,e),...l,children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(t,{variant:s,className:(0,i.cn)("mt-0.5",o.icon)}),(0,r.jsxs)("div",{className:"min-w-0",children:[a?(0,r.jsx)("div",{className:(0,i.cn)("text-sm font-semibold",o.title),children:a}):null,n?(0,r.jsx)("div",{className:(0,i.cn)("text-sm text-zinc-700",a?"mt-1":""),children:n}):null]})]})})}e.s(["Alert",()=>s])},68501,e=>{"use strict";var r=e.i(48277),i=e.i(14575);function t({className:e,variant:t="default",...s}){return(0,r.jsx)("span",{className:(0,i.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[t],e),...s})}e.s(["Badge",()=>t])},26550,e=>{"use strict";var r=e.i(48277),i=e.i(14575);function t({className:e,type:t,...s}){return(0,r.jsx)("input",{type:t,className:(0,i.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",e),...s})}e.s(["Input",()=>t])},12124,e=>{"use strict";var r=e.i(48277),i=e.i(30668),t=e.i(1831),s=e.i(1314),a=e.i(63571),n=e.i(63451),l=e.i(68501),o=e.i(9693),d=e.i(72015),c=e.i(26550),m=e.i(19463);function u(){let e=(0,s.useAuth)(),u=e.user,x=e.isImpersonating,h=u?.name??"",b=u?.email??"",[v,g]=(0,i.useState)(h),[f,p]=(0,i.useState)(!1),[j,w]=(0,i.useState)(!1),[N,y]=(0,i.useState)(!1),_=(0,i.useRef)(null),[C,k]=(0,i.useState)(null),[S,B]=(0,i.useState)(null),[z,A]=(0,i.useState)(!1),[E,U]=(0,i.useState)(!1),[L,P]=(0,i.useState)(null),[T,M]=(0,i.useState)(null);(0,i.useEffect)(()=>{g(u?.name??"")},[u?.name]);let F=!!u?.email_verified_at,R=(0,i.useMemo)(()=>u?u.is_admin?"Admin":u.role??"User":"—",[u]),D=(0,i.useMemo)(()=>{let e=(u?.name??"").trim();if(e){let r=e.split(/\s+/).filter(Boolean),i=r[0]?.[0]??"",t=r.length>1?r[r.length-1]?.[0]??"":"";return`${i}${t}`.toUpperCase().slice(0,2)||"U"}let r=(u?.email??"").trim();return r?r.slice(0,2).toUpperCase():"U"},[u?.email,u?.name]),I=u?.avatar_url??null,O=S??I,H=!!v.trim()&&!f&&!x,W=v.trim()!==(h??"").trim();async function V(r){if(r.preventDefault(),P(null),M(null),!u)return void P("Not signed in.");if(x)return void P("Profile updates are disabled during impersonation.");if(!v.trim())return void P("Name is required.");p(!0);try{await (0,t.apiFetch)("/api/auth/me",{method:"PATCH",body:{name:v.trim()}}),await e.refresh(),M("Profile updated.")}catch(e){e instanceof t.ApiError?P(e.message):P("Failed to update profile.")}finally{p(!1)}}async function q(){if(P(null),M(null),!u)return void P("Not signed in.");if(x)return void P("This action is disabled during impersonation.");if(!C)return void P("Please choose a photo first.");A(!0);try{let r=new FormData;r.append("avatar",C),await (0,t.apiFetch)("/api/auth/me/avatar",{method:"POST",body:r}),await e.refresh(),M("Profile photo updated."),k(null),B(null),_.current&&(_.current.value="")}catch(e){e instanceof t.ApiError?P(e.message):P("Failed to update profile photo.")}finally{A(!1)}}async function K(){if(P(null),M(null),!u)return void P("Not signed in.");if(x)return void P("This action is disabled during impersonation.");U(!0);try{await (0,t.apiFetch)("/api/auth/me/avatar",{method:"DELETE"}),await e.refresh(),M("Profile photo removed."),k(null),B(null),_.current&&(_.current.value="")}catch(e){e instanceof t.ApiError?P(e.message):P("Failed to remove profile photo.")}finally{U(!1)}}async function $(){if(P(null),M(null),!b)return void P("Email is missing.");if(x)return void P("This action is disabled during impersonation.");w(!0);try{await (0,t.apiFetch)("/api/auth/password/email",{method:"POST",body:{email:b}}),M("If that email exists, we sent a reset link.")}catch(e){e instanceof t.ApiError?P(e.message):P("Failed to send reset link.")}finally{w(!1)}}async function Y(){if(P(null),M(null),!b)return void P("Email is missing.");if(x)return void P("This action is disabled during impersonation.");y(!0);try{await e.resendVerificationEmail(b),M("Verification email sent. Check your inbox.")}catch(e){e instanceof t.ApiError?P(e.message):P("Failed to resend verification email.")}finally{y(!1)}}return(0,i.useEffect)(()=>()=>{S&&URL.revokeObjectURL(S)},[S]),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(m.PageHeader,{title:"Profile",description:"Manage your admin account."}),x?(0,r.jsx)(a.Alert,{variant:"warning",title:"Impersonation active",children:"Editing profile details is disabled while impersonating another user."}):null,L?(0,r.jsx)(a.Alert,{variant:"danger",title:"Could not update profile",children:L}):null,T?(0,r.jsx)(a.Alert,{variant:"success",title:"Success",children:T}):null,(0,r.jsxs)(d.Card,{className:"overflow-hidden",children:[(0,r.jsx)("div",{className:"h-20 w-full bg-[var(--rb-surface-muted)]"}),(0,r.jsx)(d.CardContent,{className:"-mt-10",children:(0,r.jsxs)("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(0,r.jsx)(n.Avatar,{alt:u?.name||b||"User",fallback:D,src:O,size:72,className:"ring-2 ring-white shadow-sm"}),(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate text-lg font-semibold text-[var(--rb-text)]",children:u?.name||"—"}),(0,r.jsx)("div",{className:"truncate text-sm text-zinc-600",children:b||"—"}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,r.jsx)(l.Badge,{variant:F?"success":"warning",children:F?"Email verified":"Email unverified"}),(0,r.jsx)(l.Badge,{children:R}),"number"==typeof u?.id?(0,r.jsxs)(l.Badge,{children:["ID #",u.id]}):null]}),(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,r.jsx)("input",{ref:_,type:"file",accept:"image/png,image/jpeg,image/webp",className:"hidden",onChange:function(e){let r=e.target.files?.[0]??null;r&&((P(null),M(null),r.type.startsWith("image/"))?r.size>5242880?P("Image must be 5MB or smaller."):(k(r),B(URL.createObjectURL(r))):P("Please select an image file."))},disabled:x||z||E}),(0,r.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>_.current?.click(),disabled:x||z||E,children:C?"Change selected photo":"Change photo"}),C?(0,r.jsx)(o.Button,{size:"sm",onClick:()=>void q(),disabled:x||z||E,children:z?"Uploading...":"Upload"}):null,I?(0,r.jsx)(o.Button,{variant:"ghost",size:"sm",onClick:()=>void K(),disabled:x||z||E,className:"text-zinc-600",children:E?"Removing...":"Remove"}):null]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-1 text-xs text-zinc-600 sm:items-end",children:[(0,r.jsxs)("div",{children:["Signed in as ",b||"—"]}),(0,r.jsx)("div",{className:"text-[var(--rb-text)]",children:"Changes apply to your current session after saving."})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,r.jsxs)(d.Card,{children:[(0,r.jsx)(d.CardHeader,{children:(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.CardTitle,{children:"Profile details"}),(0,r.jsx)(d.CardDescription,{children:"Update how your name appears across the admin dashboard."})]}),W?(0,r.jsx)(l.Badge,{variant:"info",children:"Unsaved changes"}):null]})}),(0,r.jsx)(d.CardContent,{children:(0,r.jsxs)("form",{className:"space-y-4",onSubmit:V,children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"name",children:"Display name"}),(0,r.jsx)(c.Input,{id:"name",value:v,onChange:e=>g(e.target.value),disabled:f||x,autoComplete:"name",placeholder:"Your name",required:!0})]}),(0,r.jsx)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-end",children:(0,r.jsx)(o.Button,{type:"submit",disabled:!H||!W,children:f?"Saving...":"Save changes"})})]})})]}),(0,r.jsxs)(d.Card,{children:[(0,r.jsxs)(d.CardHeader,{children:[(0,r.jsx)(d.CardTitle,{children:"Account"}),(0,r.jsx)(d.CardDescription,{children:"Security and login-related actions."})]}),(0,r.jsxs)(d.CardContent,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-4 py-3",children:[(0,r.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Email"}),(0,r.jsx)("div",{className:"mt-1 truncate text-sm font-semibold text-[var(--rb-text)]",children:b||"—"}),(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(l.Badge,{variant:F?"success":"warning",children:F?"Verified":"Not verified"})})]}),(0,r.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-4 py-3",children:[(0,r.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Role"}),(0,r.jsx)("div",{className:"mt-1 text-sm font-semibold text-[var(--rb-text)]",children:R}),(0,r.jsxs)("div",{className:"mt-1 text-xs text-zinc-600",children:["User ID: ",u?.id??"—"]})]})]}),(0,r.jsx)("div",{className:"mt-4 border-t border-[var(--rb-border)] pt-4",children:(0,r.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[F?null:(0,r.jsx)(o.Button,{variant:"outline",onClick:()=>void Y(),disabled:N||x||!b,children:N?"Sending...":"Resend verification email"}),(0,r.jsx)(o.Button,{variant:"outline",onClick:()=>void $(),disabled:j||x||!b,children:j?"Sending...":"Send password reset email"})]})})]})]})]})]})}e.s(["default",()=>u])}]);