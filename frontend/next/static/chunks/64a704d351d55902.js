(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19463,e=>{"use strict";var s=e.i(48277),a=e.i(14575);function r({title:e,description:r,actions:t,className:l}){return(0,s.jsxs)("div",{className:(0,a.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",l),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),r?(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:r}):null]}),t?(0,s.jsx)("div",{className:"flex items-center gap-2",children:t}):null]})}e.s(["PageHeader",()=>r])},53674,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(96086),t=e.i(1831),l=e.i(77252),d=e.i(19463),i=e.i(72015),n=e.i(9693);function c(){let e=(0,r.useRouter)(),c=(0,r.useParams)(),m=c.business??c.tenant,u=c.branch,o="string"==typeof u&&u.length>0?Number(u):null,[h,b]=(0,a.useState)(!0),[x,p]=(0,a.useState)(!1),[v,g]=(0,a.useState)(null),[j,f]=(0,a.useState)(""),[N,_]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[C,S]=(0,a.useState)(""),[F,L]=(0,a.useState)(""),[P,A]=(0,a.useState)(""),[$,B]=(0,a.useState)(""),[E,T]=(0,a.useState)(""),[U,k]=(0,a.useState)(""),[q,R]=(0,a.useState)(""),[z,H]=(0,a.useState)(!0);async function K(s){if((s.preventDefault(),"string"==typeof m&&0!==m.length)&&o&&Number.isFinite(o)&&!(o<=0)){p(!0),g(null);try{let s={name:j,code:N,phone:""!==y.trim()?y.trim():null,email:""!==C.trim()?C.trim():null,address_line1:""!==F.trim()?F.trim():null,address_line2:""!==P.trim()?P.trim():null,address_city:""!==$.trim()?$.trim():null,address_state:""!==E.trim()?E.trim():null,address_postal_code:""!==U.trim()?U.trim():null,address_country:""!==q.trim()?q.trim().toUpperCase():null,is_active:z};await (0,t.apiFetch)(`/api/${m}/app/branches/${o}`,{method:"PUT",body:s}),e.replace(`/app/${m}/branches`)}catch(e){e instanceof t.ApiError?g(e.message):g("Failed to save branch.")}finally{p(!1)}}}(0,a.useEffect)(()=>{let e=!0;return async function(){if("string"==typeof m&&0!==m.length&&o&&Number.isFinite(o)&&!(o<=0)){b(!0),g(null);try{let s=await (0,t.apiFetch)(`/api/${m}/app/branches/${o}`);if(!e)return;let a=s.branch;f(a?.name??""),_(a?.code??""),w(a?.phone??""),S(a?.email??""),L(a?.address_line1??""),A(a?.address_line2??""),B(a?.address_city??""),T(a?.address_state??""),k(a?.address_postal_code??""),R(a?.address_country??""),H(!!a?.is_active)}catch(s){if(!e)return;g(s instanceof Error?s.message:"Failed to load branch.")}finally{if(!e)return;b(!1)}}}(),()=>{e=!1}},[o,m]);let O=!o||!Number.isFinite(o)||o<=0;return(0,s.jsx)(l.RequireAuth,{requiredPermission:"branches.manage",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.PageHeader,{title:"Edit branch",description:"Update this location's details."}),O?(0,s.jsx)("div",{className:"text-sm text-red-600",children:"Branch is invalid."}):null,v?(0,s.jsx)("div",{className:"text-sm text-red-600",children:v}):null,(0,s.jsx)(i.Card,{className:"shadow-none",children:(0,s.jsxs)(i.CardContent,{className:"pt-5",children:[h?(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"Loading..."}):null,h||O?null:(0,s.jsxs)("form",{className:"grid gap-3",onSubmit:K,children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_name",children:"Name"}),(0,s.jsx)("input",{id:"branch_name",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:j,onChange:e=>f(e.target.value),required:!0,disabled:x})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_code",children:"Code"}),(0,s.jsx)("input",{id:"branch_code",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:N,onChange:e=>_(e.target.value),required:!0,maxLength:16,disabled:x})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_phone",children:"Phone"}),(0,s.jsx)("input",{id:"branch_phone",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:y,onChange:e=>w(e.target.value),disabled:x,maxLength:64})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_email",children:"Email"}),(0,s.jsx)("input",{id:"branch_email",type:"email",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:C,onChange:e=>S(e.target.value),disabled:x,maxLength:255})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_line1",children:"Address line 1"}),(0,s.jsx)("input",{id:"branch_address_line1",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:F,onChange:e=>L(e.target.value),disabled:x,maxLength:255})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_line2",children:"Address line 2"}),(0,s.jsx)("input",{id:"branch_address_line2",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:P,onChange:e=>A(e.target.value),disabled:x,maxLength:255})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_city",children:"City"}),(0,s.jsx)("input",{id:"branch_address_city",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:$,onChange:e=>B(e.target.value),disabled:x,maxLength:255})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_state",children:"State"}),(0,s.jsx)("input",{id:"branch_address_state",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:E,onChange:e=>T(e.target.value),disabled:x,maxLength:255})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_postal_code",children:"Postal code"}),(0,s.jsx)("input",{id:"branch_address_postal_code",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:U,onChange:e=>k(e.target.value),disabled:x,maxLength:64})]}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:"branch_address_country",children:"Country (2-letter)"}),(0,s.jsx)("input",{id:"branch_address_country",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm uppercase",value:q,onChange:e=>R(e.target.value),disabled:x,maxLength:2})]})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",children:[(0,s.jsx)("input",{type:"checkbox",checked:z,onChange:e=>H(e.target.checked),disabled:x}),(0,s.jsx)("span",{children:"Active"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2 pt-2",children:[(0,s.jsx)(n.Button,{variant:"outline",onClick:()=>{"string"==typeof m&&m.length>0&&e.push(`/app/${m}/branches`)},disabled:x,children:"Cancel"}),(0,s.jsx)(n.Button,{type:"submit",disabled:x,children:x?"Saving...":"Save"})]})]})]})})]})})}e.s(["default",()=>c])}]);