(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function a({variant:e,className:a}){let s="h-4 w-4 shrink-0";return"success"===e?(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 9v4"}),(0,r.jsx)("path",{d:"M12 17h.01"}),(0,r.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M18 6L6 18"}),(0,r.jsx)("path",{d:"M6 6l12 12"})]}):(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(s,a),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"}),(0,r.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function s({className:e,variant:s="info",title:l,children:i,...n}){let d={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[s];return(0,r.jsx)("div",{role:"alert",className:(0,t.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",d.wrapper,e),...n,children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(a,{variant:s,className:(0,t.cn)("mt-0.5",d.icon)}),(0,r.jsxs)("div",{className:"min-w-0",children:[l?(0,r.jsx)("div",{className:(0,t.cn)("text-sm font-semibold",d.title),children:l}):null,i?(0,r.jsx)("div",{className:(0,t.cn)("text-sm text-zinc-700",l?"mt-1":""),children:i}):null]})]})})}e.s(["Alert",()=>s])},68501,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function a({className:e,variant:a="default",...s}){return(0,r.jsx)("span",{className:(0,t.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[a],e),...s})}e.s(["Badge",()=>a])},66474,e=>{"use strict";var r=e.i(48277),t=e.i(30668),a=e.i(14575);function s({open:e,onClose:s,title:l,children:i,footer:n,position:d="center",variant:o="glass",className:c}){if((0,t.useEffect)(()=>{function r(r){e&&"Escape"===r.key&&s()}return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[s,e]),!e)return null;let u="solid"===o?(0,a.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[var(--rb-border)]","bg-white","shadow-[var(--rb-shadow)]"):(0,a.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]","bg-white/75 backdrop-blur-xl","shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]","ring-1 ring-white/25");return(0,r.jsxs)("div",{className:"top-center"===d?"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8":"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,r.jsx)("button",{type:"button",className:(0,a.cn)("absolute inset-0","bg-black/35 backdrop-blur-md","bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]"),"aria-label":"Close",onClick:s}),(0,r.jsxs)("div",{role:"dialog","aria-modal":"true",className:(0,a.cn)(u,c),children:["glass"===o?(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]"}):null,l?(0,r.jsx)("div",{className:(0,a.cn)("relative px-5 py-4","solid"===o?"border-b border-[var(--rb-border)]":"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:l})}):null,(0,r.jsx)("div",{className:"relative px-5 py-4",children:i}),n?(0,r.jsx)("div",{className:(0,a.cn)("relative px-5 py-4","solid"===o?"border-t border-[var(--rb-border)]":"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:n}):null]})]})}e.s(["Modal",()=>s])},30765,e=>{"use strict";function r(e){let r=e.amountCents,t=e.currency?.toUpperCase()??null;if("number"!=typeof r||!Number.isFinite(r))return e.fallback??"—";let a=r/100;if(!t||3!==t.length)return`${a.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch{return`${t} ${a.toFixed(2)}`}}e.s(["formatMoney",()=>r])},19463,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function a({title:e,description:a,actions:s,className:l}){return(0,r.jsxs)("div",{className:(0,t.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",l),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),a?(0,r.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:a}):null]}),s?(0,r.jsx)("div",{className:"flex items-center gap-2",children:s}):null]})}e.s(["PageHeader",()=>a])},43901,e=>{"use strict";var r=e.i(48277),t=e.i(14575),a=e.i(72015);function s({className:e,"aria-hidden":a=!0,...s}){return(0,r.jsx)("div",{"aria-hidden":a,className:(0,t.cn)("rb-skeleton",e),...s})}function l({lines:e=3,className:l}){let i=Math.max(1,Math.min(e,12));return(0,r.jsx)(a.Card,{className:(0,t.cn)("overflow-hidden",l),children:(0,r.jsxs)(a.CardContent,{className:"space-y-3 pt-5",children:[(0,r.jsx)(s,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:i}).map((e,a)=>(0,r.jsx)(s,{className:(0,t.cn)("h-3 rounded-[var(--rb-radius-sm)]",a===i-1?"w-3/5":"w-full")},a))]})})}function i({rows:e=6,columns:a=5,className:l}){let i=Math.max(1,Math.min(e,20)),n=Math.max(1,Math.min(a,10));return(0,r.jsxs)("div",{className:(0,t.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",l),children:[(0,r.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,r.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`},children:Array.from({length:n}).map((e,t)=>(0,r.jsx)(s,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},t))})}),(0,r.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,r.jsx)("div",{className:"space-y-3",children:Array.from({length:i}).map((e,a)=>(0,r.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`},children:Array.from({length:n}).map((e,a)=>(0,r.jsx)(s,{className:(0,t.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===a?"w-3/4":"w-full")},a))},a))})})]})}e.s(["CardSkeleton",()=>l,"Skeleton",()=>s,"TableSkeleton",()=>i])},37574,e=>{"use strict";var r=e.i(48277),t=e.i(30668),a=e.i(14575),s=e.i(9693),l=e.i(33441),i=e.i(43901),n=e.i(1831);function d({title:e,data:d,columns:o,getRowId:c,loading:u=!1,emptyMessage:m="No data.",search:h,filters:x=[],pageSizeOptions:b=[10,25,50],initialPageSize:p=10,server:f,exportConfig:g,columnVisibilityKey:v,onRowClick:j,className:y}){let[_,w]=(0,t.useState)(""),[N,S]=(0,t.useState)(0),[C,k]=(0,t.useState)(p),[M,z]=(0,t.useState)(null),[A,F]=(0,t.useState)(null),[$,I]=(0,t.useState)(0),B=(0,t.useId)(),D=!!f,E=D?f.query:_,L=D?f.onQueryChange:w,P=D?f.pageIndex:N,T=D?f.onPageIndexChange:S,O=D?f.pageSize:C,q=D?f.onPageSizeChange:k,R=D?f.sort??null:null,U=D?f.onSortChange:void 0,H=(0,t.useMemo)(()=>{let e=Array.isArray(o)?o:[];if(!v){let r=e.filter(e=>!e.hiddenByDefault);return r.length>0?r:e.slice(0,1)}try{let r=window.localStorage.getItem(v);if(!r){let r=e.filter(e=>!e.hiddenByDefault);return r.length>0?r:e.slice(0,1)}let t=JSON.parse(r),a=e.filter(e=>{let r=t[e.id];return"boolean"==typeof r?r:!e.hiddenByDefault});return a.length>0?a:e.slice(0,1)}catch{let r=e.filter(e=>!e.hiddenByDefault);return r.length>0?r:e.slice(0,1)}},[v,o,$]),Q=(0,t.useMemo)(()=>{if(D)return Array.isArray(d)?d:[];let e=E.trim().toLowerCase();return(Array.isArray(d)?d:[]).filter(r=>{if(h&&h.getSearchText&&e.length>0&&!h.getSearchText(r).toLowerCase().includes(e))return!1;for(let e of x)if(e.predicate&&!e.predicate(r,e.value))return!1;return!0})},[d,x,D,E,h]),W=D?f.totalRows:Q.length,J=Math.max(1,Math.ceil(W/O)),K=Math.min(P,J-1),G=Math.max(1,Math.min(8,O||10)),V=(0,t.useMemo)(()=>{if(D)return Q;let e=K*O,r=e+O;return Q.slice(e,r)},[K,Q,D,O]),X=K>0,Y=K<J-1,Z=!!h||x.length>0||!!g||!!v;function ee(e,r){if(v&&(r||!(H.length<=1)))try{let t=window.localStorage.getItem(v),a=(t?JSON.parse(t):{})??{};a[e]=r,window.localStorage.setItem(v,JSON.stringify(a)),I(e=>e+1)}catch{}}async function er(e){if(g&&!M){F(null),z(e);try{let r=new URLSearchParams;for(let e of(E.trim().length>0&&r.set("q",E.trim()),x)){let t=e.value;null!=t&&0!==String(t).length&&r.set(e.id,String(t))}if(D&&R?.id&&R?.dir&&(r.set("sort",R.id),r.set("dir",R.dir)),r.set("format",e),g.extraQuery)for(let[e,t]of Object.entries(g.extraQuery))null!=t&&r.set(e,String(t));let t=`${g.url}${g.url.includes("?")?"&":"?"}${r.toString()}`,a=g.filename?.({format:e});await (0,n.apiDownload)(t,{filename:a})}catch(e){F(e instanceof Error?e.message:"Export failed.")}finally{z(null)}}}return(0,r.jsxs)("div",{className:(0,a.cn)("space-y-3",y),children:[e?(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Z?(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[h?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:`${B}_datatable_search`,children:"Search"}),(0,r.jsx)("input",{id:`${B}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:E,onChange:e=>{L(e.target.value),T(0)},placeholder:h.placeholder??"Search..."})]}):null,x.map(e=>(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:`${B}_datatable_filter_${e.id}`,children:e.label}),(0,r.jsx)("select",{id:`${B}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:r=>{let t=e.options.find(e=>String(e.value)===r.target.value),a=t?t.value:r.target.value;e.onChange(a),T(0)},children:e.options.map(e=>(0,r.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,r.jsxs)("div",{className:"text-sm text-zinc-600",children:[W," result(s)"]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[g?(0,r.jsx)(l.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,r.jsx)(s.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!M,children:M?"Exporting...":"Export"}),children:({close:e})=>{let t=g.formats??["csv","xlsx","pdf"];return(0,r.jsx)(r.Fragment,{children:t.map(t=>(0,r.jsxs)(l.DropdownMenuItem,{onSelect:()=>{e(),er(t)},disabled:!!M,children:["Export ",t.toUpperCase()]},t))})}}):null,v?(0,r.jsx)(l.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,r.jsx)(s.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.DropdownMenuItem,{onSelect:()=>{for(let r of(e(),o))ee(r.id,!0)},children:"Show all"}),(0,r.jsx)(l.DropdownMenuItem,{onSelect:()=>{for(let r of(e(),o))ee(r.id,!r.hiddenByDefault)},children:"Reset defaults"}),(0,r.jsx)(l.DropdownMenuSeparator,{}),o.map(e=>{let t=H.some(r=>r.id===e.id);return(0,r.jsxs)(l.DropdownMenuItem,{onSelect:()=>{ee(e.id,!t)},children:[(0,r.jsx)("span",{className:"mr-2 inline-block w-4",children:t?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,A?(0,r.jsx)("div",{className:"text-sm text-red-600",children:A}):null,(0,r.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,r.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,r.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,r.jsx)("tr",{children:H.map(e=>(0,r.jsx)("th",{className:(0,a.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:D&&e.sortId&&U?(0,r.jsxs)("button",{type:"button",onClick:()=>(function(e){if(D&&e.sortId&&U){if(!R||R.id!==e.sortId){U({id:e.sortId,dir:"asc"}),T(0);return}if("asc"===R.dir){U({id:e.sortId,dir:"desc"}),T(0);return}U(null),T(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,r.jsx)("span",{children:e.header}),D&&e.sortId?R&&R.id===e.sortId?"asc"===R.dir?(0,r.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,r.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,r.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,r.jsx)("tbody",{children:u?Array.from({length:G}).map((e,t)=>(0,r.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:H.map((e,t)=>(0,r.jsx)("td",{className:(0,a.cn)("px-3 py-2 align-middle",e.className),children:(0,r.jsx)(i.Skeleton,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===t?"w-3/4":t===H.length-1?"w-16":"w-full")})},e.id))},`loading_${t}`)):0===V.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,H.length),children:m})}):V.map(e=>(0,r.jsx)("tr",{className:(0,a.cn)("border-t border-[var(--rb-border)]",j?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:j?0:void 0,role:j?"button":void 0,onClick:j?()=>{j(e)}:void 0,onKeyDown:j?r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),j(e))}:void 0,children:H.map(t=>(0,r.jsx)("td",{className:(0,a.cn)("px-3 py-2 align-middle",t.className),children:t.cell(e)},t.id))},String(c(e))))})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(s.Button,{variant:"outline",size:"sm",onClick:function(){T(Math.max(0,K-1))},disabled:!X,children:"Prev"}),(0,r.jsx)(s.Button,{variant:"outline",size:"sm",onClick:function(){T(Math.min(J-1,K+1))},disabled:!Y,children:"Next"}),(0,r.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",K+1," / ",J]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,r.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(O),onChange:e=>{q(Number(e.target.value)),T(0)},children:b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>d])},48650,e=>{"use strict";var r=e.i(48277),t=e.i(19463),a=e.i(63571),s=e.i(72015);function l({title:e,description:l,actions:i,filters:n,loading:d,loadingFallback:o,error:c,empty:u,emptyTitle:m="Nothing here yet",emptyDescription:h="No items to display.",children:x}){return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(t.PageHeader,{title:e,description:l,actions:i}),n?(0,r.jsx)(s.Card,{className:"shadow-none",children:(0,r.jsx)(s.CardContent,{className:"pt-5",children:n})}):null,c?(0,r.jsx)(a.Alert,{variant:"danger",title:"Something went wrong",children:c}):null,d?o??(0,r.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading..."}):null,d||c||!u?null:(0,r.jsx)(s.Card,{className:"shadow-none",children:(0,r.jsxs)(s.CardContent,{className:"pt-5",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:m}),(0,r.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:h})]})}),d||c||u?null:x]})}e.s(["ListPageShell",()=>l])},44919,e=>{"use strict";var r=e.i(54976);e.s(["notify",0,{success:(e,t={})=>r.toast.success(e,t),error:(e,t={})=>r.toast.error(e,t),info:(e,t={})=>r.toast.info(e,t),warning:(e,t={})=>r.toast.warning(e,t),loading:(e,t={})=>r.toast.loading(e,t),dismiss(e){r.toast.dismiss(e)},message:(e,t,a={})=>"success"===e?r.toast.success(t,a):"error"===e?r.toast.error(t,a):"warning"===e?r.toast.warning(t,a):"loading"===e?r.toast.loading(t,a):r.toast.info(t,a)}])},34606,e=>{"use strict";let r=(0,e.i(35884).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>r],34606)},55470,e=>{"use strict";var r=e.i(48277),t=e.i(30668),a=e.i(96086),s=e.i(68501),l=e.i(9693),i=e.i(72015),n=e.i(37574),d=e.i(48650),o=e.i(77252),c=e.i(1831),u=e.i(66474),m=e.i(33441),h=e.i(1314),x=e.i(44919),b=e.i(30765);let p=(0,e.i(35884).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var f=e.i(34606);function g(){let e=(0,h.useAuth)(),g=(0,a.useParams)(),v=g.business??g.tenant,j=e.can("users.manage"),[y,_]=t.default.useState(""),[w,N]=t.default.useState(0),[S,C]=t.default.useState(10),[k,M]=t.default.useState(null),[z,A]=t.default.useState("all"),[F,$]=t.default.useState(!0),[I,B]=t.default.useState(null),[D,E]=t.default.useState([]),[L,P]=t.default.useState(0),[T,O]=t.default.useState(0),[q,R]=t.default.useState(!1),[U,H]=t.default.useState(!1),[Q,W]=t.default.useState(""),[J,K]=t.default.useState(""),[G,V]=t.default.useState([]),[X,Y]=t.default.useState(""),[Z,ee]=t.default.useState({}),[er,et]=t.default.useState(!1),[ea,es]=t.default.useState(!1),[el,ei]=t.default.useState(null),[en,ed]=t.default.useState(""),[eo,ec]=t.default.useState(""),eu=t.default.useMemo(()=>G.slice().sort((e,r)=>`${e.code} ${e.name}`.localeCompare(`${r.code} ${r.name}`)).map(e=>({id:e.id,label:`${e.code} - ${e.name}${e.is_active?"":" (inactive)"}`,isActive:e.is_active})),[G]),em=t.default.useMemo(()=>eu.filter(e=>e.isActive),[eu]),eh=t.default.useMemo(()=>{let e=X.trim().toLowerCase();return e?em.filter(r=>r.label.toLowerCase().includes(e)):em},[em,X]),ex=t.default.useMemo(()=>0!==eh.length&&eh.every(e=>!!Z[e.id]),[eh,Z]),eb=t.default.useMemo(()=>eh.some(e=>!!Z[e.id]),[eh,Z]),ep=t.default.useRef(null);t.default.useEffect(()=>{ep.current&&(ep.current.indeterminate=eb&&!ex)},[ex,eb]);let ef=t.default.useMemo(()=>[{label:"All statuses",value:"all"},{label:"Pending",value:"pending"},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"Suspended",value:"suspended"}],[]),eg=t.default.useMemo(()=>new Map([["pending","warning"],["active","success"],["inactive","default"],["suspended","danger"]]),[]);t.default.useEffect(()=>{let r=!0;return async function(){if(j&&q&&"string"==typeof v&&0!==v.length&&!(G.length>0))try{let t=await (0,c.apiFetch)(`/api/${v}/app/branches`);if(!r)return;let a=Array.isArray(t.branches)?t.branches:[];V(a);let s=e.tenant?.default_branch_id??null,l=a.filter(e=>e.is_active).map(e=>e.id),i=(s&&l.includes(s)?[s]:[]).concat(l.length>0?[l[0]]:[]).filter((e,r,t)=>t.indexOf(e)===r);ee(e=>{if(Object.keys(e).length>0)return e;let r={};for(let e of i)r[e]=!0;return r})}catch(e){if(!r)return;x.notify.error(e instanceof Error?e.message:"Failed to load shops.")}}(),()=>{r=!1}},[e.tenant?.default_branch_id,G.length,j,q,v]);let ev=e.tenant?.currency??"USD",ej=t.default.useCallback(e=>{j&&(ei(e),ed("number"==typeof e.tech_hourly_rate_cents&&Number.isFinite(e.tech_hourly_rate_cents)?(e.tech_hourly_rate_cents/100).toFixed(2):""),ec("number"==typeof e.client_hourly_rate_cents&&Number.isFinite(e.client_hourly_rate_cents)?(e.client_hourly_rate_cents/100).toFixed(2):""),et(!0))},[j]),ey=t.default.useCallback(async()=>{if(!j||!el||"string"!=typeof v||0===v.length||ea)return;let e=e=>{let r=e.trim();if(0===r.length)return{cents:null,valid:!0};let t=Number(r);return Number.isFinite(t)?{cents:Math.round(100*t),valid:!0}:{cents:null,valid:!1}},r=e(en),t=e(eo);if(!r.valid||!t.valid)return void x.notify.error("Enter valid numbers for hourly rates.");let a=r.cents,s=t.cents;if("number"==typeof a&&a<0)return void x.notify.error("Tech hourly rate must be 0 or greater.");if("number"==typeof s&&s<0)return void x.notify.error("Client hourly rate must be 0 or greater.");es(!0);try{await (0,c.apiFetch)(`/api/${v}/app/technicians/${el.id}/rates`,{method:"PATCH",body:{tech_hourly_rate_cents:a,client_hourly_rate_cents:s}}),x.notify.success("Hourly rates updated."),et(!1),ei(null),O(e=>e+1)}catch(e){e instanceof c.ApiError?x.notify.error(e.message):x.notify.error(e instanceof Error?e.message:"Failed to update hourly rates.")}finally{es(!1)}},[j,ea,eo,en,el,v]);async function e_(e){if(e.preventDefault(),!j||"string"!=typeof v||0===v.length||0===em.length)return;let r=Object.entries(Z).filter(([,e])=>e).map(([e])=>Number(e)).filter(e=>Number.isFinite(e)&&e>0);if(0===r.length)return void x.notify.error("Select at least one shop.");H(!0);try{await (0,c.apiFetch)(`/api/${v}/app/technicians`,{method:"POST",body:{name:Q,email:J,branch_ids:r}}),x.notify.success("Technician created."),R(!1),W(""),K(""),Y(""),ee({}),N(0),O(e=>e+1)}catch(e){e instanceof c.ApiError?x.notify.error(e.message):x.notify.error(e instanceof Error?e.message:"Failed to create technician.")}finally{H(!1)}}t.default.useEffect(()=>{let e=!0;return async function(){if("string"==typeof v&&0!==v.length){$(!0),B(null);try{let r=new URLSearchParams;y.trim().length>0&&r.set("q",y.trim()),z&&"all"!==z&&r.set("status",z),k?.id&&k?.dir&&(r.set("sort",k.id),r.set("dir",k.dir)),r.set("page",String(w+1)),r.set("per_page",String(S));let t=await (0,c.apiFetch)(`/api/${v}/app/technicians?${r.toString()}`);if(!e)return;let a=Array.isArray(t.users)?t.users:[];E(a.map(e=>({id:e.id,name:e.name,email:e.email,phone:e.phone??void 0,status:e.status??"active",tech_hourly_rate_cents:e.tech_hourly_rate_cents??null,client_hourly_rate_cents:e.client_hourly_rate_cents??null}))),P("number"==typeof t.meta?.total?t.meta.total:a.length),C("number"==typeof t.meta?.per_page?t.meta.per_page:S)}catch(r){if(!e)return;B(r instanceof Error?r.message:"Failed to load technicians.")}finally{if(!e)return;$(!1)}}}(),()=>{e=!1}},[w,S,y,T,k?.dir,k?.id,z,v]);let ew=t.default.useMemo(()=>[{id:"name",header:"Technician",sortId:"name",cell:e=>(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:e.name}),(0,r.jsxs)("div",{className:"truncate text-xs text-zinc-600",children:["#",e.id]})]}),className:"min-w-[260px]"},{id:"email",header:"Email",sortId:"email",cell:e=>(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:e.email}),className:"min-w-[260px]"},{id:"phone",header:"Phone",cell:e=>(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:e.phone??"—"}),className:"min-w-[160px]"},{id:"status",header:"Status",sortId:"status",cell:e=>(0,r.jsx)(s.Badge,{variant:eg.get(e.status)??"default",children:e.status}),className:"whitespace-nowrap"},{id:"tech_hourly_rate",header:"Tech hourly",cell:e=>(0,r.jsxs)("div",{className:"whitespace-nowrap text-sm font-semibold text-[var(--rb-text)]",children:[(0,b.formatMoney)({amountCents:e.tech_hourly_rate_cents??null,currency:ev,fallback:"—"})," / hr"]}),className:"whitespace-nowrap"},{id:"client_hourly_rate",header:"Client hourly",cell:e=>(0,r.jsxs)("div",{className:"whitespace-nowrap text-sm font-semibold text-[var(--rb-text)]",children:[(0,b.formatMoney)({amountCents:e.client_hourly_rate_cents??null,currency:ev,fallback:"—"})," / hr"]}),className:"whitespace-nowrap"},{id:"actions",header:"",cell:e=>(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(m.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,r.jsx)(l.Button,{variant:"ghost",size:"sm",disabled:!j,onClick:r=>{r.stopPropagation(),e()},"aria-label":"Actions",children:(0,r.jsx)(f.MoreHorizontal,{className:"h-4 w-4"})}),children:({close:t})=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.DropdownMenuItem,{onSelect:()=>{t(),ej(e)},disabled:!j,children:(0,r.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)(p,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Update hourly rates"})]})})})})}),className:"w-[1%] whitespace-nowrap text-right",headerClassName:"w-[1%]"}],[j,ev,ej,eg]);return(0,r.jsx)(o.RequireAuth,{requiredPermission:"technicians.view",children:(0,r.jsxs)(d.ListPageShell,{title:"Technicians",description:"Technician roster.",actions:(0,r.jsx)(l.Button,{variant:"outline",size:"sm",disabled:!j,onClick:()=>{j&&R(!0)},children:"Add technician"}),loading:!1,error:I,empty:!1,children:[(0,r.jsx)(u.Modal,{open:er,title:el?`Update rates \xb7 ${el.name}`:"Update rates",onClose:()=>{ea||(et(!1),ei(null))},footer:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(l.Button,{variant:"outline",disabled:ea,onClick:()=>{ea||(et(!1),ei(null))},children:"Cancel"}),(0,r.jsx)(l.Button,{disabled:ea||!j||!el,onClick:()=>{ey()},children:ea?"Saving...":"Save"})]}),children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("label",{className:"text-sm font-medium",htmlFor:"tech_hourly_rate",children:["Tech hourly rate (",ev,")"]}),(0,r.jsx)("input",{id:"tech_hourly_rate",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:en,onChange:e=>ed(e.target.value),placeholder:"e.g. 45.00",disabled:ea,inputMode:"decimal"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("label",{className:"text-sm font-medium",htmlFor:"client_hourly_rate",children:["Client hourly rate (",ev,")"]}),(0,r.jsx)("input",{id:"client_hourly_rate",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:eo,onChange:e=>ec(e.target.value),placeholder:"e.g. 60.00",disabled:ea,inputMode:"decimal"})]}),(0,r.jsx)("div",{className:"text-xs text-zinc-600",children:"Leave blank to clear a rate."})]})}),(0,r.jsx)(u.Modal,{open:q,title:"Add technician",onClose:()=>{U||R(!1)},className:"max-w-3xl",footer:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(l.Button,{variant:"outline",disabled:U,onClick:()=>{U||R(!1)},children:"Cancel"}),(0,r.jsx)(l.Button,{disabled:U||!j||0===em.length||0===Object.values(Z).filter(Boolean).length,onClick:()=>{let e=document.getElementById("create_technician_form");e?.requestSubmit()},children:U?"Saving...":"Create"})]}),children:(0,r.jsxs)("form",{id:"create_technician_form",onSubmit:e_,className:"max-h-[70vh] space-y-4 overflow-y-auto pr-1",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"tech_name",children:"Name"}),(0,r.jsx)("input",{id:"tech_name",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:Q,onChange:e=>W(e.target.value),required:!0,disabled:U})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"tech_email",children:"Email"}),(0,r.jsx)("input",{id:"tech_email",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:J,onChange:e=>K(e.target.value),type:"email",required:!0,disabled:U})]}),(0,r.jsx)("div",{className:"space-y-1",children:(0,r.jsx)("div",{className:"text-sm text-zinc-600",children:"A one-time password will be generated and emailed to the technician."})}),(0,r.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Shops"}),(0,r.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:"Select one or more shops this technician can access."})]}),(0,r.jsxs)("div",{className:"text-xs text-zinc-600",children:["Selected: ",Object.values(Z).filter(Boolean).length]})]}),(0,r.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:"new_tech_shop_search",children:"Search"}),(0,r.jsx)("input",{id:"new_tech_shop_search",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:X,onChange:e=>Y(e.target.value),placeholder:"Search shops...",disabled:U})]}),(0,r.jsx)("div",{className:"mt-3 max-h-[260px] overflow-y-auto pr-1",children:(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2",children:[(0,r.jsx)("div",{className:"min-w-0",children:(0,r.jsx)("div",{className:"truncate text-sm font-medium text-[var(--rb-text)]",children:"Check all"})}),(0,r.jsx)("input",{ref:ep,type:"checkbox",checked:ex,onChange:e=>{let r=e.target.checked;ee(e=>{let t={...e};for(let e of eh)t[e.id]=r;return t})},disabled:U})]}),eh.map(e=>{let t=!!Z[e.id];return(0,r.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2",children:[(0,r.jsx)("div",{className:"min-w-0",children:(0,r.jsx)("div",{className:"truncate text-sm font-medium text-[var(--rb-text)]",children:e.label})}),(0,r.jsx)("input",{type:"checkbox",checked:t,onChange:r=>ee(t=>({...t,[e.id]:r.target.checked})),disabled:U})]},e.id)})]})}),0===em.length?(0,r.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Create a shop first before adding technicians."}):null]})]})}),(0,r.jsx)(i.Card,{className:"shadow-none",children:(0,r.jsx)(i.CardContent,{className:"pt-5",children:(0,r.jsx)(n.DataTable,{data:D,loading:F,columns:ew,getRowId:e=>String(e.id),emptyMessage:"No technicians.",search:{placeholder:"Search technicians..."},server:{query:y,onQueryChange:e=>{_(e),N(0)},pageIndex:w,onPageIndexChange:N,pageSize:S,onPageSizeChange:e=>{C(e),N(0)},totalRows:L,sort:k,onSortChange:e=>{M(e),N(0)}},filters:[{id:"status",label:"Status",value:z,options:ef,onChange:e=>{A(String(e)),N(0)}}]})})})]})})}e.s(["default",()=>g],55470)}]);