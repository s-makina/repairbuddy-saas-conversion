(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30765,e=>{"use strict";function t(e){let t=e.amountCents,a=e.currency?.toUpperCase()??null;if("number"!=typeof t||!Number.isFinite(t))return e.fallback??"—";let i=t/100;if(!a||3!==a.length)return`${i.toFixed(2)}`;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:a,minimumFractionDigits:2,maximumFractionDigits:2}).format(i)}catch{return`${a} ${i.toFixed(2)}`}}e.s(["formatMoney",()=>t])},19463,e=>{"use strict";var t=e.i(48277),a=e.i(14575);function i({title:e,description:i,actions:s,className:r}){return(0,t.jsxs)("div",{className:(0,a.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",r),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),i?(0,t.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:i}):null]}),s?(0,t.jsx)("div",{className:"flex items-center gap-2",children:s}):null]})}e.s(["PageHeader",()=>i])},63571,e=>{"use strict";var t=e.i(48277),a=e.i(14575);function i({variant:e,className:i}){let s="h-4 w-4 shrink-0";return"success"===e?(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:(0,a.cn)(s,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,a.cn)(s,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 9v4"}),(0,t.jsx)("path",{d:"M12 17h.01"}),(0,t.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,a.cn)(s,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M18 6L6 18"}),(0,t.jsx)("path",{d:"M6 6l12 12"})]}):(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,a.cn)(s,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 16v-4"}),(0,t.jsx)("path",{d:"M12 8h.01"}),(0,t.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function s({className:e,variant:s="info",title:r,children:n,...l}){let d={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[s];return(0,t.jsx)("div",{role:"alert",className:(0,a.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",d.wrapper,e),...l,children:(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(i,{variant:s,className:(0,a.cn)("mt-0.5",d.icon)}),(0,t.jsxs)("div",{className:"min-w-0",children:[r?(0,t.jsx)("div",{className:(0,a.cn)("text-sm font-semibold",d.title),children:r}):null,n?(0,t.jsx)("div",{className:(0,a.cn)("text-sm text-zinc-700",r?"mt-1":""),children:n}):null]})]})})}e.s(["Alert",()=>s])},43901,e=>{"use strict";var t=e.i(48277),a=e.i(14575),i=e.i(72015);function s({className:e,"aria-hidden":i=!0,...s}){return(0,t.jsx)("div",{"aria-hidden":i,className:(0,a.cn)("rb-skeleton",e),...s})}function r({lines:e=3,className:r}){let n=Math.max(1,Math.min(e,12));return(0,t.jsx)(i.Card,{className:(0,a.cn)("overflow-hidden",r),children:(0,t.jsxs)(i.CardContent,{className:"space-y-3 pt-5",children:[(0,t.jsx)(s,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:n}).map((e,i)=>(0,t.jsx)(s,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",i===n-1?"w-3/5":"w-full")},i))]})})}function n({rows:e=6,columns:i=5,className:r}){let n=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(i,10));return(0,t.jsxs)("div",{className:(0,a.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",r),children:[(0,t.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,a)=>(0,t.jsx)(s,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},a))})}),(0,t.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,t.jsx)("div",{className:"space-y-3",children:Array.from({length:n}).map((e,i)=>(0,t.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,i)=>(0,t.jsx)(s,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===i?"w-3/4":"w-full")},i))},i))})})]})}e.s(["CardSkeleton",()=>r,"Skeleton",()=>s,"TableSkeleton",()=>n])},37574,e=>{"use strict";var t=e.i(48277),a=e.i(30668),i=e.i(14575),s=e.i(9693),r=e.i(33441),n=e.i(43901),l=e.i(1831);function d({title:e,data:d,columns:c,getRowId:o,loading:m=!1,emptyMessage:u="No data.",search:_,filters:p=[],pageSizeOptions:h=[10,25,50],initialPageSize:b=10,server:x,exportConfig:g,columnVisibilityKey:y,onRowClick:v,className:f}){let[j,w]=(0,a.useState)(""),[N,S]=(0,a.useState)(0),[T,k]=(0,a.useState)(b),[C,D]=(0,a.useState)(null),[M,Z]=(0,a.useState)(null),[L,P]=(0,a.useState)(0),I=(0,a.useId)(),A=!!x,B=A?x.query:j,z=A?x.onQueryChange:w,U=A?x.pageIndex:N,E=A?x.onPageIndexChange:S,$=A?x.pageSize:T,R=A?x.onPageSizeChange:k,q=A?x.sort??null:null,J=A?x.onSortChange:void 0,F=(0,a.useMemo)(()=>{let e=Array.isArray(c)?c:[];if(!y){let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}try{let t=window.localStorage.getItem(y);if(!t){let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}let a=JSON.parse(t),i=e.filter(e=>{let t=a[e.id];return"boolean"==typeof t?t:!e.hiddenByDefault});return i.length>0?i:e.slice(0,1)}catch{let t=e.filter(e=>!e.hiddenByDefault);return t.length>0?t:e.slice(0,1)}},[y,c,L]),O=(0,a.useMemo)(()=>{if(A)return Array.isArray(d)?d:[];let e=B.trim().toLowerCase();return(Array.isArray(d)?d:[]).filter(t=>{if(_&&_.getSearchText&&e.length>0&&!_.getSearchText(t).toLowerCase().includes(e))return!1;for(let e of p)if(e.predicate&&!e.predicate(t,e.value))return!1;return!0})},[d,p,A,B,_]),H=A?x.totalRows:O.length,Q=Math.max(1,Math.ceil(H/$)),G=Math.min(U,Q-1),W=Math.max(1,Math.min(8,$||10)),K=(0,a.useMemo)(()=>{if(A)return O;let e=G*$,t=e+$;return O.slice(e,t)},[G,O,A,$]),X=G>0,V=G<Q-1,Y=!!_||p.length>0||!!g||!!y;function ee(e,t){if(y&&(t||!(F.length<=1)))try{let a=window.localStorage.getItem(y),i=(a?JSON.parse(a):{})??{};i[e]=t,window.localStorage.setItem(y,JSON.stringify(i)),P(e=>e+1)}catch{}}async function et(e){if(g&&!C){Z(null),D(e);try{let t=new URLSearchParams;for(let e of(B.trim().length>0&&t.set("q",B.trim()),p)){let a=e.value;null!=a&&0!==String(a).length&&t.set(e.id,String(a))}if(A&&q?.id&&q?.dir&&(t.set("sort",q.id),t.set("dir",q.dir)),t.set("format",e),g.extraQuery)for(let[e,a]of Object.entries(g.extraQuery))null!=a&&t.set(e,String(a));let a=`${g.url}${g.url.includes("?")?"&":"?"}${t.toString()}`,i=g.filename?.({format:e});await (0,l.apiDownload)(a,{filename:i})}catch(e){Z(e instanceof Error?e.message:"Export failed.")}finally{D(null)}}}return(0,t.jsxs)("div",{className:(0,i.cn)("space-y-3",f),children:[e?(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Y?(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[_?(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_search`,children:"Search"}),(0,t.jsx)("input",{id:`${I}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:B,onChange:e=>{z(e.target.value),E(0)},placeholder:_.placeholder??"Search..."})]}):null,p.map(e=>(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_filter_${e.id}`,children:e.label}),(0,t.jsx)("select",{id:`${I}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:t=>{let a=e.options.find(e=>String(e.value)===t.target.value),i=a?a.value:t.target.value;e.onChange(i),E(0)},children:e.options.map(e=>(0,t.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,t.jsxs)("div",{className:"text-sm text-zinc-600",children:[H," result(s)"]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[g?(0,t.jsx)(r.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!C,children:C?"Exporting...":"Export"}),children:({close:e})=>{let a=g.formats??["csv","xlsx","pdf"];return(0,t.jsx)(t.Fragment,{children:a.map(a=>(0,t.jsxs)(r.DropdownMenuItem,{onSelect:()=>{e(),et(a)},disabled:!!C,children:["Export ",a.toUpperCase()]},a))})}}):null,y?(0,t.jsx)(r.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.DropdownMenuItem,{onSelect:()=>{for(let t of(e(),c))ee(t.id,!0)},children:"Show all"}),(0,t.jsx)(r.DropdownMenuItem,{onSelect:()=>{for(let t of(e(),c))ee(t.id,!t.hiddenByDefault)},children:"Reset defaults"}),(0,t.jsx)(r.DropdownMenuSeparator,{}),c.map(e=>{let a=F.some(t=>t.id===e.id);return(0,t.jsxs)(r.DropdownMenuItem,{onSelect:()=>{ee(e.id,!a)},children:[(0,t.jsx)("span",{className:"mr-2 inline-block w-4",children:a?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,M?(0,t.jsx)("div",{className:"text-sm text-red-600",children:M}):null,(0,t.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,t.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,t.jsx)("tr",{children:F.map(e=>(0,t.jsx)("th",{className:(0,i.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:A&&e.sortId&&J?(0,t.jsxs)("button",{type:"button",onClick:()=>(function(e){if(A&&e.sortId&&J){if(!q||q.id!==e.sortId){J({id:e.sortId,dir:"asc"}),E(0);return}if("asc"===q.dir){J({id:e.sortId,dir:"desc"}),E(0);return}J(null),E(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,t.jsx)("span",{children:e.header}),A&&e.sortId?q&&q.id===e.sortId?"asc"===q.dir?(0,t.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,t.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,t.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,t.jsx)("tbody",{children:m?Array.from({length:W}).map((e,a)=>(0,t.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:F.map((e,a)=>(0,t.jsx)("td",{className:(0,i.cn)("px-3 py-2 align-middle",e.className),children:(0,t.jsx)(n.Skeleton,{className:(0,i.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===a?"w-3/4":a===F.length-1?"w-16":"w-full")})},e.id))},`loading_${a}`)):0===K.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,F.length),children:u})}):K.map(e=>(0,t.jsx)("tr",{className:(0,i.cn)("border-t border-[var(--rb-border)]",v?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:v?0:void 0,role:v?"button":void 0,onClick:v?()=>{v(e)}:void 0,onKeyDown:v?t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),v(e))}:void 0,children:F.map(a=>(0,t.jsx)("td",{className:(0,i.cn)("px-3 py-2 align-middle",a.className),children:a.cell(e)},a.id))},String(o(e))))})]})}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:function(){E(Math.max(0,G-1))},disabled:!X,children:"Prev"}),(0,t.jsx)(s.Button,{variant:"outline",size:"sm",onClick:function(){E(Math.min(Q-1,G+1))},disabled:!V,children:"Next"}),(0,t.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",G+1," / ",Q]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,t.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String($),onChange:e=>{R(Number(e.target.value)),E(0)},children:h.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>d])},48650,e=>{"use strict";var t=e.i(48277),a=e.i(19463),i=e.i(63571),s=e.i(72015);function r({title:e,description:r,actions:n,filters:l,loading:d,loadingFallback:c,error:o,empty:m,emptyTitle:u="Nothing here yet",emptyDescription:_="No items to display.",children:p}){return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(a.PageHeader,{title:e,description:r,actions:n}),l?(0,t.jsx)(s.Card,{className:"shadow-none",children:(0,t.jsx)(s.CardContent,{className:"pt-5",children:l})}):null,o?(0,t.jsx)(i.Alert,{variant:"danger",title:"Something went wrong",children:o}):null,d?c??(0,t.jsx)("div",{className:"text-sm text-zinc-500",children:"Loading..."}):null,d||o||!m?null:(0,t.jsx)(s.Card,{className:"shadow-none",children:(0,t.jsxs)(s.CardContent,{className:"pt-5",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:u}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:_})]})}),d||o||m?null:p]})}e.s(["ListPageShell",()=>r])},60153,e=>{"use strict";function t(e){return new Date(e).toISOString()}let a=[{id:"client_001",name:"Alex Johnson",email:"alex@example.com",phone:"+1 555 0101",created_at:t("2026-01-05T10:00:00Z")},{id:"client_002",name:"Sam Rivera",email:"sam@example.com",phone:"+1 555 0102",created_at:t("2026-01-06T09:00:00Z")},{id:"client_003",name:"Taylor Chen",email:"taylor@example.com",phone:"+1 555 0103",created_at:t("2026-01-08T15:30:00Z")},{id:"client_004",name:"Jordan Patel",email:"jordan@example.com",phone:"+1 555 0104",created_at:t("2026-01-10T11:45:00Z")},{id:"client_005",name:"Morgan Lee",email:"morgan@example.com",phone:"+1 555 0105",created_at:t("2026-01-12T08:20:00Z")}],i=[{id:"pay_001",job_id:"job_001",status:"paid",method:"card",amount:{currency:"USD",amount_cents:7500},created_at:t("2026-01-26T14:12:00Z")},{id:"pay_002",job_id:"job_002",status:"pending",method:"cash",amount:{currency:"USD",amount_cents:4500},created_at:t("2026-01-27T10:20:00Z")},{id:"pay_003",job_id:"job_004",status:"paid",method:"bank_transfer",amount:{currency:"USD",amount_cents:12e3},created_at:t("2026-01-22T16:40:00Z")}],s=[{id:"exp_001",job_id:"job_001",category_id:"expcat_001",label:"Replacement battery",amount:{currency:"USD",amount_cents:3200},created_at:t("2026-01-26T09:05:00Z")},{id:"exp_002",job_id:"job_002",category_id:"expcat_002",label:"Courier",amount:{currency:"USD",amount_cents:1500},created_at:t("2026-01-27T11:10:00Z")}],r=[{id:"timelog_001",job_id:"job_001",user_label:"Technician A",minutes:90,rate:{currency:"USD",amount_cents:9e3},created_at:t("2026-01-26T12:10:00Z")},{id:"timelog_002",job_id:"job_002",user_label:"Technician B",minutes:45,rate:{currency:"USD",amount_cents:8e3},created_at:t("2026-01-27T12:30:00Z")}],n=[{id:"att_001",job_id:"job_001",filename:"intake-photo.jpg",mime_type:"image/jpeg",size_bytes:245312,url:"/mock/uploads/intake-photo.jpg",created_at:t("2026-01-26T08:58:00Z")},{id:"att_002",job_id:"job_003",filename:"screen-video.mp4",mime_type:"video/mp4",size_bytes:1245e3,url:"/mock/uploads/screen-video.mp4",created_at:t("2026-01-23T09:15:00Z")}],l=[{id:"msg_001",job_id:"job_001",author:"customer",body:"Hi, I dropped it off today. Please let me know the ETA.",created_at:t("2026-01-26T09:00:00Z"),attachments:[n[0]]},{id:"msg_002",job_id:"job_001",author:"staff",body:"Thanks! We are running diagnostics now.",created_at:t("2026-01-26T09:20:00Z")},{id:"msg_003",job_id:"job_003",author:"customer",body:"The screen flickers randomly. It’s worse at night.",created_at:t("2026-01-23T09:10:00Z"),attachments:[n[1]]}],d=(e,t)=>t.map(t=>({...t,job_id:e})),c=[{id:"estimate_001",job_id:"job_001",client_id:"client_001",status:"approved",lines:[{id:"estline_001",label:"Battery replacement",qty:1,unit_price:{currency:"USD",amount_cents:7500}}],created_at:t("2026-01-26T10:00:00Z"),updated_at:t("2026-01-26T10:30:00Z")},{id:"estimate_002",job_id:"job_003",client_id:"client_003",status:"pending",lines:[{id:"estline_002",label:"Display diagnostics",qty:1,unit_price:{currency:"USD",amount_cents:2500}},{id:"estline_003",label:"Potential screen replacement",qty:1,unit_price:{currency:"USD",amount_cents:19900}}],created_at:t("2026-01-23T10:20:00Z"),updated_at:t("2026-01-23T10:20:00Z")},{id:"estimate_003",job_id:"job_005",client_id:"client_005",status:"rejected",lines:[{id:"estline_004",label:"Thermal paste + cleaning",qty:1,unit_price:{currency:"USD",amount_cents:6900}}],created_at:t("2026-01-19T12:00:00Z"),updated_at:t("2026-01-20T09:00:00Z")}],o=[{id:"job_001",case_number:"RB-10421",title:"Dell XPS 13 battery replacement",status:"in_process",client_id:"client_001",customer_device_ids:["custdev_001"],estimate_id:"estimate_001",payment_ids:["pay_001"],created_at:t("2026-01-26T08:50:00Z"),updated_at:t("2026-01-26T14:15:00Z"),timeline:d("job_001",[{id:"tl_001",type:"status_changed",title:"Status set to New/Quote",created_at:t("2026-01-26T08:50:00Z"),meta:{status:"new_quote"}},{id:"tl_002",type:"estimate",title:"Estimate created",created_at:t("2026-01-26T10:00:00Z"),meta:{estimate_id:"estimate_001"}},{id:"tl_003",type:"status_changed",title:"Status set to In Process",created_at:t("2026-01-26T10:45:00Z"),meta:{status:"in_process"}},{id:"tl_004",type:"payment",title:"Payment received",created_at:t("2026-01-26T14:12:00Z"),meta:{payment_id:"pay_001"}}]),messages:l.filter(e=>"job_001"===e.job_id),attachments:n.filter(e=>"job_001"===e.job_id)},{id:"job_002",case_number:"RB-10418",title:"Lenovo ThinkPad intermittent boot",status:"new_quote",client_id:"client_002",customer_device_ids:["custdev_002"],estimate_id:null,payment_ids:["pay_002"],created_at:t("2026-01-25T11:30:00Z"),updated_at:t("2026-01-27T10:22:00Z"),timeline:d("job_002",[{id:"tl_005",type:"status_changed",title:"Status set to New/Quote",created_at:t("2026-01-25T11:30:00Z"),meta:{status:"new_quote"}}]),messages:[],attachments:[]},{id:"job_003",case_number:"RB-10412",title:"Galaxy S23 screen flicker",status:"new_quote",client_id:"client_003",customer_device_ids:["custdev_003"],estimate_id:"estimate_002",payment_ids:[],created_at:t("2026-01-23T09:00:00Z"),updated_at:t("2026-01-23T10:20:00Z"),timeline:d("job_003",[{id:"tl_006",type:"status_changed",title:"Status set to New/Quote",created_at:t("2026-01-23T09:00:00Z"),meta:{status:"new_quote"}},{id:"tl_007",type:"estimate",title:"Estimate created",created_at:t("2026-01-23T10:20:00Z"),meta:{estimate_id:"estimate_002"}}]),messages:l.filter(e=>"job_003"===e.job_id),attachments:n.filter(e=>"job_003"===e.job_id)},{id:"job_004",case_number:"RB-10399",title:"iPad charging port repair",status:"delivered",client_id:"client_004",customer_device_ids:["custdev_004"],estimate_id:null,payment_ids:["pay_003"],created_at:t("2026-01-18T10:00:00Z"),updated_at:t("2026-01-22T16:45:00Z"),timeline:d("job_004",[{id:"tl_008",type:"status_changed",title:"Status set to Completed",created_at:t("2026-01-21T14:00:00Z"),meta:{status:"completed"}},{id:"tl_009",type:"status_changed",title:"Status set to Delivered",created_at:t("2026-01-22T16:45:00Z"),meta:{status:"delivered"}}]),messages:[],attachments:[]},{id:"job_005",case_number:"RB-10380",title:"HP desktop overheating",status:"cancelled",client_id:"client_005",customer_device_ids:["custdev_005"],estimate_id:"estimate_003",payment_ids:[],created_at:t("2026-01-19T11:40:00Z"),updated_at:t("2026-01-20T09:05:00Z"),timeline:d("job_005",[{id:"tl_010",type:"status_changed",title:"Status set to Cancelled",created_at:t("2026-01-20T09:05:00Z"),meta:{status:"cancelled"}}]),messages:[],attachments:[]}],m=[{id:"review_001",job_id:"job_004",client_id:"client_004",rating:5,comment:"Fast service and great communication.",created_at:t("2026-01-23T08:00:00Z")},{id:"review_002",job_id:"job_001",client_id:"client_001",rating:4,comment:"Good work. Slight delay but handled well.",created_at:t("2026-01-27T18:00:00Z")}],u={statuses:[{key:"new_quote",label:"New/Quote"},{key:"in_process",label:"In Process"},{key:"ready",label:"Ready"},{key:"completed",label:"Completed"},{key:"delivered",label:"Delivered"},{key:"cancelled",label:"Cancelled"}],clients:a,device_brands:[{id:"brand_001",name:"Apple"},{id:"brand_002",name:"Dell"},{id:"brand_003",name:"HP"},{id:"brand_004",name:"Lenovo"},{id:"brand_005",name:"Samsung"}],device_types:[{id:"type_001",name:"Laptop"},{id:"type_002",name:"Desktop"},{id:"type_003",name:"Phone"},{id:"type_004",name:"Tablet"},{id:"type_005",name:"Game Console"}],devices:[{id:"device_001",brand_id:"brand_002",type_id:"type_001",model:"XPS 13"},{id:"device_002",brand_id:"brand_001",type_id:"type_004",model:"iPad Pro"},{id:"device_003",brand_id:"brand_005",type_id:"type_003",model:"Galaxy S23"},{id:"device_004",brand_id:"brand_004",type_id:"type_001",model:"ThinkPad T14"},{id:"device_005",brand_id:"brand_003",type_id:"type_002",model:"Pavilion Desktop"}],customer_devices:[{id:"custdev_001",client_id:"client_001",device_id:"device_001",serial_number:"SN-XPS13-0001",notes:"Battery drains quickly."},{id:"custdev_002",client_id:"client_002",device_id:"device_004",serial_number:"SN-TP-0012",notes:"Intermittent boot issues."},{id:"custdev_003",client_id:"client_003",device_id:"device_003",serial_number:"SN-GS23-031",notes:"Screen flickers at low brightness."},{id:"custdev_004",client_id:"client_004",device_id:"device_002",serial_number:"SN-IPAD-888",notes:"Charging port is loose."},{id:"custdev_005",client_id:"client_005",device_id:"device_005",serial_number:"SN-HPD-555",notes:"Runs very hot under load."}],jobs:o,estimates:c,appointments:[{id:"appt_001",scheduled_at:t("2026-01-29T10:00:00Z"),status:"confirmed",client_name:"Alex Johnson",client_email:"alex@example.com",client_phone:"+1 555 0101",notes:"Drop off in the morning.",created_at:t("2026-01-26T16:00:00Z")},{id:"appt_002",scheduled_at:t("2026-02-01T13:30:00Z"),status:"requested",client_name:"Sam Rivera",client_email:"sam@example.com",client_phone:"+1 555 0102",notes:"Prefer weekend.",created_at:t("2026-01-27T09:45:00Z")}],payments:i,expenses:s,expense_categories:[{id:"expcat_001",name:"Parts"},{id:"expcat_002",name:"Shipping"},{id:"expcat_003",name:"Tools"}],time_logs:r,reviews:m,services:[{id:"service_001",name:"Diagnostics",description:"Hardware and software diagnostics.",base_price:{currency:"USD",amount_cents:2500}},{id:"service_002",name:"Battery replacement",description:"Laptop battery replacement service.",base_price:{currency:"USD",amount_cents:7500}},{id:"service_003",name:"Screen replacement",description:"Phone/tablet screen replacement (parts excluded).",base_price:{currency:"USD",amount_cents:19900}}],parts:[{id:"part_001",name:"Laptop battery (generic)",sku:"BAT-GEN-001",price:{currency:"USD",amount_cents:3200},stock:12},{id:"part_002",name:"USB-C port module",sku:"USB-C-MOD-020",price:{currency:"USD",amount_cents:1800},stock:7},{id:"part_003",name:"Thermal paste",sku:"THERM-PASTE-010",price:{currency:"USD",amount_cents:900},stock:30}]},_="rb.mockData.overrides:v1",p="rb.mockData.counters:v1";function h(e){return new Promise(t=>{setTimeout(t,e)})}async function b(e,t=350){return await h(t),await e()}function x(e){if(!e)return null;try{return JSON.parse(e)}catch{return null}}function g(){let e=x(window.localStorage.getItem(_));return e&&"object"==typeof e?e:{}}function y(e){try{window.localStorage.setItem(_,JSON.stringify(e))}catch{}}function v(e){let t,a=(t=x(window.localStorage.getItem(p)))&&"object"==typeof t?{msg:"number"==typeof t.msg&&Number.isFinite(t.msg)?t.msg:0,att:"number"==typeof t.att&&Number.isFinite(t.att)?t.att:0,appt:"number"==typeof t.appt&&Number.isFinite(t.appt)?t.appt:0}:{msg:0,att:0,appt:0},i={...a,[e]:(a[e]??0)+1};try{window.localStorage.setItem(p,JSON.stringify(i))}catch{}let s=String(i[e]).padStart(3,"0");return`${e}_${s}`}function f(){return new Date().toISOString()}function j(){let e,t,a,i,s,r,n=g();return e=n.estimatesById??{},t=n.jobsById??{},a=n.jobMessagesByJobId??{},i=n.appointments??null,s=u.estimates.map(t=>{let a=e[t.id]??null;return a?{...t,...a}:t}),r=u.jobs.map(e=>{let i=t[e.id]??null,s=a[e.id]??null;return i||s?{...e,...i??{},messages:s||e.messages}:e}),{...u,estimates:s,jobs:r,appointments:i||u.appointments}}function w(e,t){if(!e||"string"!=typeof e||0===e.trim().length)throw Error(`${t} is required.`)}e.s(["mockApi",0,{sleep:h,withLatency:b,getBundle:async()=>await b(()=>j()),getStatuses:async()=>await b(()=>j().statuses),listJobs:async()=>await b(()=>j().jobs),getJob:async e=>await b(()=>j().jobs.find(t=>t.id===e)??null),getJobByCaseNumber:async e=>await b(()=>{var t;let a;return t=j(),a=e.trim().toUpperCase(),t.jobs.find(e=>e.case_number.toUpperCase()===a)??null}),listClients:async()=>await b(()=>j().clients),getClient:async e=>await b(()=>j().clients.find(t=>t.id===e)??null),listCustomerDevices:async()=>await b(()=>j().customer_devices),getCustomerDevice:async e=>await b(()=>j().customer_devices.find(t=>t.id===e)??null),listDevices:async()=>await b(()=>j().devices),listDeviceBrands:async()=>await b(()=>j().device_brands),listDeviceTypes:async()=>await b(()=>j().device_types),listEstimates:async()=>await b(()=>j().estimates),getEstimate:async e=>await b(()=>j().estimates.find(t=>t.id===e)??null),setEstimateStatus:async e=>await b(()=>{let{estimateId:t,status:a}=e,i=j().estimates.find(e=>e.id===t)??null;if(!i)throw Error("Estimate not found.");let s=g(),r={...s.estimatesById??{}};return r[t]={...r[t]??{},status:a,updated_at:f()},y({...s,estimatesById:r}),{...i,status:a,updated_at:f()}}),listAppointments:async()=>await b(()=>j().appointments),createAppointment:async e=>await b(()=>{w(e.scheduled_at,"scheduled_at"),w(e.client_name,"client_name");let t={id:v("appt"),scheduled_at:new Date(e.scheduled_at).toISOString(),status:"requested",client_name:e.client_name.trim(),client_email:e.client_email??null,client_phone:e.client_phone??null,notes:e.notes??null,created_at:f()},a=g(),i=[t,...Array.isArray(a.appointments)?a.appointments:j().appointments];return y({...a,appointments:i}),t}),listPayments:async()=>await b(()=>j().payments),listExpenses:async()=>await b(()=>j().expenses),listExpenseCategories:async()=>await b(()=>j().expense_categories),listTimeLogs:async()=>await b(()=>j().time_logs),listServices:async()=>await b(()=>j().services),listParts:async()=>await b(()=>j().parts),listReviews:async()=>await b(()=>j().reviews),postJobMessage:async e=>await b(()=>{let{jobId:t,author:a}=e,i=e.body.trim();if(!i)throw Error("Message body is required.");let s=j().jobs.find(e=>e.id===t)??null;if(!s)throw Error("Job not found.");let r={id:v("msg"),job_id:t,author:a,body:i,created_at:f(),attachments:e.attachments&&e.attachments.length>0?e.attachments.map((e,a)=>({id:0===a?v("att"):`${v("att")}_${a}`,job_id:t,filename:e.filename,mime_type:e.mime_type,size_bytes:e.size_bytes,url:"/mock/uploads/placeholder",created_at:f()})):void 0},n=g(),l={...n.jobMessagesByJobId??{}},d=l[t]??s.messages;return l[t]=[...d,r],y({...n,jobMessagesByJobId:l}),r}),computeEstimateTotalCents:function(e){return e.lines.reduce((e,t)=>e+t.qty*t.unit_price.amount_cents,0)}}],60153)},69668,e=>{"use strict";var t=e.i(48277),a=e.i(30668),i=e.i(96086),s=e.i(9693),r=e.i(72015),n=e.i(37574),l=e.i(48650),d=e.i(60153),c=e.i(30765);function o(){let e=(0,i.useParams)(),o=e.business??e.tenant,[m,u]=a.default.useState(!0),[_,p]=a.default.useState(null),[h,b]=a.default.useState([]),[x,g]=a.default.useState([]),[y,v]=a.default.useState(""),[f,j]=a.default.useState(0),[w,N]=a.default.useState(10);a.default.useEffect(()=>{let e=!0;return async function(){try{u(!0),p(null);let[t,a]=await Promise.all([d.mockApi.listTimeLogs(),d.mockApi.listJobs()]);if(!e)return;b(Array.isArray(t)?t:[]),g(Array.isArray(a)?a:[])}catch(t){if(!e)return;p(t instanceof Error?t.message:"Failed to load time logs.")}finally{if(!e)return;u(!1)}}(),()=>{e=!1}},[]);let S=a.default.useMemo(()=>new Map(x.map(e=>[e.id,e])),[x]),T=a.default.useMemo(()=>h.map(e=>{let t=S.get(e.job_id)??null,a=Math.round(e.minutes/60*e.rate.amount_cents);return{timeLog:e,job:t,totalCents:a,currency:e.rate.currency}}),[S,h]),k=a.default.useMemo(()=>{let e=y.trim().toLowerCase();return e?T.filter(t=>{let a=t.job?.case_number??t.timeLog.job_id;return`${t.timeLog.id} ${a} ${t.timeLog.user_label}`.toLowerCase().includes(e)}):T},[y,T]),C=k.length,D=a.default.useMemo(()=>{let e=f*w,t=e+w;return k.slice(e,t)},[k,f,w]),M=a.default.useMemo(()=>[{id:"job",header:"Job",cell:e=>(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:e.job?.case_number??e.timeLog.job_id}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-600",children:e.timeLog.id})]}),className:"min-w-[240px]"},{id:"user",header:"User",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:e.timeLog.user_label}),className:"min-w-[200px]"},{id:"minutes",header:"Minutes",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-700",children:e.timeLog.minutes}),className:"whitespace-nowrap"},{id:"rate",header:"Rate",cell:e=>(0,t.jsxs)("div",{className:"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap",children:[(0,c.formatMoney)({amountCents:e.timeLog.rate.amount_cents,currency:e.timeLog.rate.currency})," / hr"]}),className:"whitespace-nowrap"},{id:"total",header:"Total",cell:e=>(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)] whitespace-nowrap",children:(0,c.formatMoney)({amountCents:e.totalCents,currency:e.currency})}),className:"whitespace-nowrap"},{id:"created",header:"Created",cell:e=>(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:new Date(e.timeLog.created_at).toLocaleString()}),className:"whitespace-nowrap"}],[]);return(0,t.jsx)(l.ListPageShell,{title:"Time Logs",description:"Logged time entries for jobs.",actions:(0,t.jsx)(s.Button,{disabled:!0,variant:"outline",size:"sm",children:"Add time log"}),loading:m,error:_,empty:!m&&!_&&0===T.length,emptyTitle:"No time logs",emptyDescription:"Time entries created by technicians will show here.",children:(0,t.jsx)(r.Card,{className:"shadow-none",children:(0,t.jsx)(r.CardContent,{className:"pt-5",children:(0,t.jsx)(n.DataTable,{title:"string"==typeof o?`Time Logs \xb7 ${o}`:"Time Logs",data:D,loading:m,emptyMessage:"No time logs.",columns:M,getRowId:e=>e.timeLog.id,search:{placeholder:"Search case, user, ID..."},server:{query:y,onQueryChange:e=>{v(e),j(0)},pageIndex:f,onPageIndexChange:j,pageSize:w,onPageSizeChange:e=>{N(e),j(0)},totalRows:C}})})})})}e.s(["default",()=>o])}]);