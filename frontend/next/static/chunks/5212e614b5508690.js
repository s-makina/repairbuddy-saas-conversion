(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30543,e=>{"use strict";var t=e.i(48277),a=e.i(30668),s=e.i(96086),r=e.i(16506),i=e.i(77252),n=e.i(21134),l=e.i(63571),d=e.i(9693),c=e.i(68501),o=e.i(72015),m=e.i(26550),u=e.i(19463),x=e.i(66474),h=e.i(64998),p=e.i(1314),b=e.i(37574),v=e.i(40709),g=e.i(1831),f=e.i(44919),_=e.i(33044),j=e.i(62498),y=e.i(69241);let N=["welcome","business","address","branches","branding","preferences","tax","team","finish"],w=["branding","preferences","tax","team"],C=["UTC","Europe/London","Europe/Berlin","Europe/Paris","Africa/Cairo","Asia/Dubai","Asia/Riyadh","Asia/Kolkata","Asia/Singapore","Asia/Tokyo","Australia/Sydney","America/New_York","America/Chicago","America/Denver","America/Los_Angeles"];function k(e){return"welcome"===e?"Welcome":"business"===e?"Business":"address"===e?"Address":"branches"===e?"Branches":"branding"===e?"Brand":"preferences"===e?"Operations":"tax"===e?"Tax":"team"===e?"Team":"Finish"}function S(e){return"welcome"===e?"Set expectations and start setup.":"business"===e?"Confirm your business details.":"address"===e?"Add your address and locale details.":"branches"===e?"Add and manage your shop locations.":"branding"===e?"Upload a logo and configure customer-facing info.":"preferences"===e?"Set default operations and notification preferences.":"tax"===e?"Configure VAT and invoice numbering (optional).":"team"===e?"Invite your team (optional).":"Review and complete setup."}function z(){let e=(0,p.useAuth)(),z=(0,s.useRouter)(),A=(0,s.useParams)(),B=A.business??A.tenant,[T,I]=(0,a.useState)(!0),[E,R]=(0,a.useState)(null),[D,L]=(0,a.useState)("welcome"),[q,F]=(0,a.useState)({name:"",display_name:"",primary_contact_name:"",contact_email:"",contact_phone:"",registration_number:"",billing_country:"",billing_vat_number:"",currency:"USD",address_line1:"",address_line2:"",address_city:"",address_state:"",address_postal_code:"",brand_color:"#2563eb",support_email:"",support_phone:"",website:"",document_footer:"",timezone:"UTC",language:"en",working_hours:"Mon–Fri 09:00–17:00",default_labor_rate:"",warranty_terms:"",notify_status_change:!0,notify_invoice_created:!1,tax_registered:!1,invoice_prefix:"RB",enable_taxes:!1,default_tax_id:"",invoice_amounts:"exclusive",team_invites:"",team_default_role:"member"}),[P,U]=(0,a.useState)(null),[M,Y]=(0,a.useState)(null),[O,V]=(0,a.useState)(!1),[$,W]=(0,a.useState)(!1),[H,K]=(0,a.useState)(!1),[G,J]=(0,a.useState)(!1),[Q,Z]=(0,a.useState)([]),[X,ee]=(0,a.useState)(null),[et,ea]=(0,a.useState)(!1),[es,er]=(0,a.useState)(!1),[ei,en]=(0,a.useState)(null),[el,ed]=(0,a.useState)(""),[ec,eo]=(0,a.useState)(""),[em,eu]=(0,a.useState)(!0),[ex,eh]=(0,a.useState)(!1),[ep,eb]=(0,a.useState)(""),[ev,eg]=(0,a.useState)(null),[ef,e_]=(0,a.useState)(!1),[ej,ey]=(0,a.useState)([]),[eN,ew]=(0,a.useState)(!1),[eC,ek]=(0,a.useState)(!1),[eS,ez]=(0,a.useState)(!1),[eA,eB]=(0,a.useState)(""),[eT,eI]=(0,a.useState)("0"),[eE,eR]=(0,a.useState)(!0),[eD,eL]=(0,a.useState)(!1),[eq,eF]=(0,a.useState)(null),[eP,eU]=(0,a.useState)(""),[eM,eY]=(0,a.useState)("0"),[eO,eV]=(0,a.useState)(!0),[e$,eW]=(0,a.useState)(!1),[eH,eK]=(0,a.useState)(""),[eG,eJ]=(0,a.useState)(0),[eQ,eZ]=(0,a.useState)(10),eX=(0,a.useRef)(!1),e0=(0,a.useRef)(!1),e1=(0,a.useRef)(null),e2=N.indexOf(D),e5=Math.max(0,e2)/(N.length-1),e4=(0,a.useMemo)(()=>{try{let e=Intl,t="function"==typeof e.supportedValuesOf?e.supportedValuesOf("timeZone"):null;return Array.isArray(t)&&t.length>0?t:C}catch{return C}},[]),e6=(0,a.useCallback)(async()=>{if("string"==typeof B&&0!==B.length){J(!0),ee(null);try{let e=await (0,g.apiFetch)(`/api/${B}/app/branches`);Z(Array.isArray(e.branches)?e.branches:[])}catch(e){e instanceof g.ApiError?ee(e.message):ee(e instanceof Error?e.message:"Failed to load branches.")}finally{J(!1)}}},[B]),e3=(0,a.useCallback)(async()=>{if("string"==typeof B&&0!==B.length){ea(!0),ee(null);try{let e={name:el,code:ec,is_active:em};ei?await (0,g.apiFetch)(`/api/${B}/app/branches/${ei}`,{method:"PUT",body:e}):await (0,g.apiFetch)(`/api/${B}/app/branches`,{method:"POST",body:e}),er(!1),f.notify.success("Saved branch."),await e6()}catch(e){e instanceof g.ApiError?ee(e.message):ee(e instanceof Error?e.message:"Failed to save branch.")}finally{ea(!1)}}},[ec,ei,em,el,B,e6]),e7=(0,a.useCallback)(async e=>{if("string"==typeof B&&0!==B.length){ea(!0),ee(null);try{let t=await (0,g.apiFetch)(`/api/${B}/app/branches/${e}/default`,{method:"POST",body:{}});R(t.tenant),f.notify.success("Default branch updated.")}catch(e){e instanceof g.ApiError?ee(e.message):ee(e instanceof Error?e.message:"Failed to set default branch.")}finally{ea(!1)}}},[B]),e9=(0,a.useCallback)(async()=>{if("string"==typeof B&&0!==B.length){e_(!0);try{let e=await (0,y.getRepairBuddyTaxes)(B);ey(Array.isArray(e.taxes)?e.taxes:[])}catch(e){console.error("Failed to load taxes",e)}finally{e_(!1)}}},[B]),e8=(0,a.useCallback)(async()=>{if("string"==typeof B&&0!==B.length){ew(!0),Y(null);try{let e=eA.trim(),t=Number(eT);if(!e)throw Error("Name is required.");if(!Number.isFinite(t))throw Error("Rate is invalid.");await (0,y.createRepairBuddyTax)(B,{name:e,rate:t,is_active:eE,is_default:eD}),await e9(),ek(!1),eB(""),eI("0"),eR(!0),eL(!1),f.notify.success("Tax created.")}catch(e){Y(e instanceof Error?e.message:"Failed to create tax.")}finally{ew(!1)}}},[eE,eD,eA,eT,B,e9]),te=(0,a.useCallback)(async()=>{if(eq&&"string"==typeof B&&0!==B.length){ew(!0),Y(null);try{let e=Number(eq),t=eP.trim(),a=Number(eM);if(!t)throw Error("Name is required.");if(!Number.isFinite(a))throw Error("Rate is invalid.");await (0,y.updateRepairBuddyTax)(B,e,{name:t,rate:a}),await (0,y.setRepairBuddyTaxActive)(B,e,eO),e$&&await (0,y.setRepairBuddyTaxDefault)(B,e),await e9(),ez(!1),f.notify.success("Tax updated.")}catch(e){Y(e instanceof Error?e.message:"Failed to update tax.")}finally{ew(!1)}}},[B,eO,e$,eq,eP,eM,e9]),tt=(0,a.useCallback)(async e=>{if("string"==typeof B&&0!==B.length&&globalThis.confirm(`Delete tax "${e.name}"?`)){ew(!0),Y(null);try{await (0,y.deleteRepairBuddyTax)(B,Number(e.id)),await e9(),f.notify.success("Tax deleted.")}catch(e){Y(e instanceof Error?e.message:"Failed to delete tax.")}finally{ew(!1)}}},[B,e9]),ta=(0,a.useMemo)(()=>{let e={};return q.address_line1.trim()&&(e.line1=q.address_line1.trim()),q.address_line2.trim()&&(e.line2=q.address_line2.trim()),q.address_city.trim()&&(e.city=q.address_city.trim()),q.address_state.trim()&&(e.state=q.address_state.trim()),q.address_postal_code.trim()&&(e.postal_code=q.address_postal_code.trim()),Object.keys(e).length>0?e:null},[q.address_city,q.address_line1,q.address_line2,q.address_postal_code,q.address_state]),ts=e2>0,tr=e2<N.length-1,ti=w.includes(D)&&tr,tn=(0,a.useCallback)(e=>{if("welcome"===e)return null;if("business"===e){if(!q.name.trim())return"Business name is required.";if(!q.primary_contact_name.trim())return"Primary contact person name is required.";if(!q.contact_email.trim())return"Primary contact email is required.";if(!q.contact_phone.trim())return"Primary contact phone is required."}if("address"===e){if(!q.billing_country.trim())return"Billing country is required.";if(2!==q.billing_country.trim().length)return"Billing country must be a 2-letter code (e.g. US).";if(!q.currency.trim())return"Currency is required.";if(3!==q.currency.trim().length)return"Currency must be a 3-letter code (e.g. USD).";if(!q.address_line1.trim())return"Address line 1 is required.";if(!q.address_city.trim())return"City is required.";if(!q.address_postal_code.trim())return"Postal code is required."}if("preferences"===e&&!q.timezone.trim())return"Timezone is required.";if("tax"===e&&q.tax_registered&&!q.billing_vat_number.trim())return"VAT number is required when tax/VAT registered is enabled.";if("finish"===e){if(!q.name.trim())return"Business name is required.";if(!q.primary_contact_name.trim())return"Primary contact person name is required.";if(!q.contact_email.trim())return"Primary contact email is required.";if(!q.contact_phone.trim())return"Primary contact phone is required.";if(!q.billing_country.trim()||2!==q.billing_country.trim().length)return"Billing country is required.";if(!q.currency.trim()||3!==q.currency.trim().length)return"Currency is required.";if(!q.address_line1.trim())return"Address line 1 is required.";if(!q.address_city.trim())return"City is required.";if(!q.address_postal_code.trim())return"Postal code is required.";if(!q.timezone.trim())return"Timezone is required.";if(q.tax_registered&&!q.billing_vat_number.trim())return"VAT number is required when tax/VAT registered is enabled.";if(!E?.default_branch_id)return"Default branch is required."}return null},[q,E?.default_branch_id]);(0,a.useEffect)(()=>{"branches"===D?e6():"tax"===D&&e9()},[e6,e9,D]);let tl=(0,a.useCallback)(async(e,t)=>{if("string"!=typeof B||0===B.length)return;let a={...P??{},wizard:{step:e,saved_at:new Date().toISOString()},identity:{display_name:q.display_name.trim()||null,primary_contact_name:q.primary_contact_name.trim()||null,registration_number:q.registration_number.trim()||null},branding:{support_email:q.support_email.trim()||null,support_phone:q.support_phone.trim()||null,website:q.website.trim()||null,document_footer:q.document_footer.trim()||null},operations:{working_hours:q.working_hours.trim()||null,default_labor_rate:q.default_labor_rate.trim()||null,warranty_terms:q.warranty_terms.trim()||null,notify_status_change:!!q.notify_status_change,notify_invoice_created:!!q.notify_invoice_created},tax:{tax_registered:!!q.tax_registered,invoice_prefix:q.invoice_prefix.trim()||null},team:{invites:q.team_invites.trim()||null,default_role:q.team_default_role.trim()||null}};V(!0),Y(null);try{let s=await (0,_.updateSetup)(B,{name:q.name.trim()||void 0,contact_email:q.contact_email.trim()||null,contact_phone:q.contact_phone.trim()||null,billing_country:q.billing_country.trim()?q.billing_country.trim().toUpperCase():null,billing_vat_number:q.billing_vat_number.trim()||null,billing_address_json:ta,currency:q.currency.trim()?q.currency.trim().toUpperCase():null,timezone:q.timezone.trim()||null,language:"en",brand_color:q.brand_color.trim()||null,setup_step:e,setup_state:a}),r=(await (0,j.getRepairBuddySettings)(B)).settings;r&&await (0,j.updateRepairBuddySettings)(B,{...r,taxes:{...r.taxes,enableTaxes:q.enable_taxes,defaultTaxId:q.default_tax_id,invoiceAmounts:q.invoice_amounts}}),R(s.tenant),U(a),t&&f.notify.success("Saved."),e0.current=!1}catch(e){e instanceof g.ApiError?Y(e.message):Y(e instanceof Error?e.message:"Failed to save setup.")}finally{V(!1)}},[ta,B,q,P]);(0,a.useEffect)(()=>{if(!e.loading&&e.isAuthenticated&&e.isAdmin)return void z.replace("/admin")},[e.isAdmin,e.isAuthenticated,e.loading,z]),(0,a.useEffect)(()=>{let e=!0;return async function(){if("string"==typeof B&&0!==B.length){I(!0),Y(null);try{var t;let a=await (0,_.getSetup)(B);if(!e)return;R(a.tenant),U(a.setup.state??null);let s=a.tenant,r=s.billing_address_json??{},i=a.setup.state??{},n=i.identity??{},l=i.branding??{},d=i.operations??{},c=i.tax??{},o=i.team??{};F({name:s.name??"",display_name:"string"==typeof n.display_name?n.display_name:"",primary_contact_name:"string"==typeof n.primary_contact_name?n.primary_contact_name:"",contact_email:s.contact_email??"",contact_phone:s.contact_phone??"",registration_number:"string"==typeof n.registration_number?n.registration_number:"",billing_country:(s.billing_country??"").toUpperCase(),billing_vat_number:s.billing_vat_number??"",currency:(s.currency??"USD").toUpperCase(),address_line1:"string"==typeof r.line1?r.line1:"",address_line2:"string"==typeof r.line2?r.line2:"",address_city:"string"==typeof r.city?r.city:"",address_state:"string"==typeof r.state?r.state:"",address_postal_code:"string"==typeof r.postal_code?r.postal_code:"",brand_color:s.brand_color??"#2563eb",support_email:"string"==typeof l.support_email?l.support_email:"",support_phone:"string"==typeof l.support_phone?l.support_phone:"",website:"string"==typeof l.website?l.website:"",document_footer:"string"==typeof l.document_footer?l.document_footer:"",timezone:s.timezone??"UTC",language:"en",working_hours:"string"==typeof d.working_hours?d.working_hours:"Mon–Fri 09:00–17:00",default_labor_rate:"string"==typeof d.default_labor_rate?d.default_labor_rate:"",warranty_terms:"string"==typeof d.warranty_terms?d.warranty_terms:"",notify_status_change:"boolean"!=typeof d.notify_status_change||d.notify_status_change,notify_invoice_created:"boolean"==typeof d.notify_invoice_created&&d.notify_invoice_created,tax_registered:"boolean"==typeof c.tax_registered&&c.tax_registered,invoice_prefix:"string"==typeof c.invoice_prefix?c.invoice_prefix:"RB",enable_taxes:!1,default_tax_id:"",invoice_amounts:"exclusive",team_invites:"string"==typeof o.invites?o.invites:"",team_default_role:"string"==typeof o.default_role?o.default_role:"member"});try{let e=await (0,j.getRepairBuddySettings)(B);if(e.settings?.taxes){let t=e.settings.taxes;F(e=>({...e,enable_taxes:!!t.enableTaxes,default_tax_id:String(t.defaultTaxId||""),invoice_amounts:t.invoiceAmounts||"exclusive"}))}}catch(e){console.error("Failed to load RepairBuddy settings",e)}let m=a.setup.state&&"object"==typeof a.setup.state?a.setup.state.wizard?.step??null:null,u=(t=a.setup.step??m,"string"==typeof t&&N.includes(t)?t:"welcome");L(u),eX.current=!0,e0.current=!1}catch(t){if(!e)return;Y(t instanceof Error?t.message:"Failed to load setup.")}finally{if(!e)return;I(!1)}}}(),()=>{e=!1}},[B]),(0,a.useEffect)(()=>{!E?.default_branch_id||0===Q.length||Q.some(e=>e.id===E.default_branch_id)||e6()},[Q,e6,E?.default_branch_id]),(0,a.useEffect)(()=>{if(eX.current&&e0.current&&"string"==typeof B&&0!==B.length)return e1.current&&window.clearTimeout(e1.current),e1.current=window.setTimeout(()=>{tl(D,!1)},800),()=>{e1.current&&window.clearTimeout(e1.current)}},[B,q,tl,D]);let td=(0,a.useCallback)((e,t)=>{F(a=>({...a,[e]:t})),e0.current=!0},[]),tc=(0,a.useCallback)(async()=>{if(!tr)return;let e=N[e2+1]??D,t=tn(D);t?Y(t):(Y(null),L(e),await tl(e,!0))},[tr,tl,D,e2,tn]),to=(0,a.useCallback)(async()=>{if(!ti)return;let e=N[e2+1]??D;Y(null),L(e),await tl(e,!0)},[ti,tl,D,e2]),tm=(0,a.useCallback)(async()=>{if(!ts)return;let e=N[e2-1]??D;Y(null),L(e),await tl(e,!0)},[ts,tl,D,e2]),tu=(0,a.useCallback)(async e=>{if("string"==typeof B&&0!==B.length){W(!0),Y(null);try{let t=await (0,_.updateSetup)(B,{logo:e});R(t.tenant),f.notify.success("Logo uploaded.")}catch(e){e instanceof g.ApiError?Y(e.message):Y(e instanceof Error?e.message:"Failed to upload logo.")}finally{W(!1)}}},[B]),tx=(0,a.useCallback)(async()=>{if("string"!=typeof B||0===B.length)return;let t=tn("finish");if(t)return void Y(t);K(!0),Y(null);try{if(await tl("finish",!1),!ta)throw Error("Billing address is required.");await (0,_.completeSetup)(B,{name:q.name.trim(),contact_email:q.contact_email.trim(),contact_phone:q.contact_phone.trim(),billing_country:q.billing_country.trim().toUpperCase(),billing_address_json:ta,currency:q.currency.trim().toUpperCase(),timezone:q.timezone.trim(),language:"en"}),await e.refresh(),z.replace(`/app/${B}`)}catch(e){e instanceof g.ApiError?Y(e.message):Y(e instanceof Error?e.message:"Failed to complete setup.")}finally{K(!1)}},[e,ta,B,q.billing_country,q.contact_email,q.contact_phone,q.currency,q.language,q.name,q.timezone,tl,z,tn]),th=E?.name??B,tp=(0,a.useMemo)(()=>Q.slice().sort((e,t)=>(e.name??"").localeCompare(t.name??"")),[Q]);return e.loading||T?(0,t.jsx)(n.Preloader,{label:"Loading setup"}):"string"!=typeof B||0===B.length?(0,t.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-[var(--rb-surface)] px-6",children:(0,t.jsx)(o.Card,{className:"w-full max-w-lg shadow-none",children:(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)(o.CardTitle,{className:"text-base",children:"Setup wizard"}),(0,t.jsx)(o.CardDescription,{children:"Business is missing."})]})})}):(0,t.jsx)(i.RequireAuth,{children:(0,t.jsxs)("div",{className:"min-h-screen text-[var(--rb-text)] [background:radial-gradient(1200px_circle_at_20%_0%,color-mix(in_srgb,var(--rb-blue),white_88%)_0%,transparent_55%),radial-gradient(900px_circle_at_80%_15%,color-mix(in_srgb,var(--rb-orange),white_86%)_0%,transparent_60%),var(--rb-surface)]",children:[(0,t.jsx)("header",{className:"sticky top-0 z-20 border-b border-[var(--rb-border)] bg-white/70 backdrop-blur",children:(0,t.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.default,{href:"/",className:"font-semibold tracking-tight text-[var(--rb-text)]",children:"99smartx"}),(0,t.jsx)(c.Badge,{variant:"info",className:"hidden sm:inline-flex",children:"Setup"})]}),(0,t.jsxs)("nav",{className:"hidden items-center gap-6 text-sm text-zinc-600 md:flex",children:[(0,t.jsx)(r.default,{href:"/#features",className:"hover:text-[var(--rb-text)]",children:"Features"}),(0,t.jsx)(r.default,{href:"/#pricing",className:"hover:text-[var(--rb-text)]",children:"Pricing"}),(0,t.jsx)(r.default,{href:"/#faq",className:"hover:text-[var(--rb-text)]",children:"FAQ"})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(d.Button,{variant:"outline",onClick:()=>z.replace(`/${B}/plans`),children:"Back"})})]})}),(0,t.jsxs)("main",{children:[(0,t.jsx)("section",{className:"mx-auto w-full max-w-6xl px-4 py-10",children:(0,t.jsxs)("div",{className:"mx-auto w-full max-w-5xl space-y-6",children:[(0,t.jsx)(u.PageHeader,{title:"Business setup",description:`Finish setting up ${th} to start using the app.`,actions:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"hidden sm:block text-xs text-zinc-500",children:O?"Saving...":"Autosave on"}),(0,t.jsx)(d.Button,{variant:"outline",size:"sm",disabled:O,onClick:()=>{tl(D,!0)},children:"Save"})]})}),M?(0,t.jsx)(l.Alert,{variant:"danger",title:"Setup error",children:M}):null,(0,t.jsx)(x.Modal,{open:es,onClose:()=>{et||er(!1)},title:ei?"Edit branch":"Create branch",footer:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",onClick:()=>er(!1),disabled:et,children:"Cancel"}),(0,t.jsx)(d.Button,{onClick:()=>void e3(),disabled:et,children:et?"Saving...":"Save"})]}),children:(0,t.jsxs)("div",{className:"grid gap-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",htmlFor:"setup_branch_name",children:"Name"}),(0,t.jsx)(m.Input,{id:"setup_branch_name",value:el,onChange:e=>ed(e.target.value),placeholder:"e.g. Main Shop",disabled:et})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",htmlFor:"setup_branch_code",children:"Code"}),(0,t.jsx)(m.Input,{id:"setup_branch_code",value:ec,onChange:e=>eo(e.target.value),placeholder:"e.g. MAIN",disabled:et,maxLength:16})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,t.jsx)("input",{type:"checkbox",checked:em,onChange:e=>eu(e.target.checked),disabled:et}),"Active"]})]})}),(0,t.jsx)(h.ConfirmDialog,{open:ex,title:"Set default branch",message:ep,busy:et,onCancel:()=>{et||(eh(!1),eg(null))},onConfirm:()=>{ev&&(async()=>{await ev(),eh(!1),eg(null)})()}}),(0,t.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[260px_1fr]",children:[(0,t.jsxs)(o.Card,{className:"shadow-none lg:sticky lg:top-6 lg:self-start",children:[(0,t.jsxs)(o.CardHeader,{className:"pb-3",children:[(0,t.jsx)(o.CardTitle,{className:"text-base",children:"Setup steps"}),(0,t.jsx)(o.CardDescription,{children:"Complete the steps to start using the app."})]}),(0,t.jsxs)(o.CardContent,{className:"space-y-4",children:[(0,t.jsx)("div",{className:"h-2 w-full rounded-full bg-[var(--rb-border)] overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-[linear-gradient(90deg,var(--rb-blue),var(--rb-orange))]",style:{width:`${Math.round(100*e5)}%`}})}),(0,t.jsx)("nav",{"aria-label":"Setup steps",className:"space-y-1",children:N.map((e,a)=>{let s=a===e2,r=a<e2,i=a<=e2;return(0,t.jsx)("button",{type:"button",disabled:!i||O||H,onClick:()=>{i&&(Y(null),L(e),tl(e,!0))},className:"w-full rounded-[var(--rb-radius-md)] border px-3 py-2 text-left transition "+(s?"border-[color:color-mix(in_srgb,var(--rb-blue),white_65%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)]":r?"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-white hover:bg-[var(--rb-surface-muted)]":"border-[var(--rb-border)] bg-white opacity-60"),children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-7 w-7 shrink-0 items-center justify-center rounded-full border text-xs font-semibold "+(s?"border-[var(--rb-blue)] bg-[var(--rb-blue)] text-white":r?"border-[var(--rb-blue)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_90%)] text-[var(--rb-blue)]":"border-[var(--rb-border)] bg-white text-zinc-600"),children:r?(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})}):a+1}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:k(e)}),(0,t.jsx)("div",{className:"mt-0.5 text-xs text-zinc-600 line-clamp-2",children:S(e)})]})]})},e)})})]})]}),(0,t.jsxs)(o.Card,{className:"shadow-none flex min-h-[calc(100vh-220px)] flex-col",children:[(0,t.jsx)(o.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(o.CardTitle,{className:"text-base",children:k(D)}),(0,t.jsx)(o.CardDescription,{children:S(D)})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("div",{className:"text-xs text-zinc-500",children:["Step ",e2+1," of ",N.length]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-end gap-2",children:[(0,t.jsx)("div",{className:"flex items-center gap-1","aria-label":"Progress",children:N.map((e,a)=>{let s=a<e2,r=a===e2;return(0,t.jsx)("span",{className:"h-1.5 w-5 rounded-full transition "+(r?"bg-[var(--rb-blue)]":s?"bg-[color:color-mix(in_srgb,var(--rb-blue),white_55%)]":"bg-[var(--rb-border)]")},a)})}),(0,t.jsxs)("div",{className:"rounded-full border border-[var(--rb-border)] bg-white px-2 py-1 text-[11px] font-medium text-zinc-600",children:[Math.round(100*e5),"%"]})]})]})]})}),(0,t.jsxs)(o.CardContent,{className:"flex-1 space-y-6",children:["welcome"===D?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-[var(--rb-radius-lg)] border border-[color:color-mix(in_srgb,var(--rb-blue),white_80%)] bg-[linear-gradient(135deg,color-mix(in_srgb,var(--rb-blue),white_90%),white_70%)] p-6",children:[(0,t.jsx)("div",{className:"absolute -right-16 -top-16 h-56 w-56 rounded-full bg-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] blur-2xl","aria-hidden":"true"}),(0,t.jsxs)("div",{className:"relative flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex h-11 w-11 shrink-0 items-center justify-center rounded-full border border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)] bg-white/70 text-[var(--rb-blue)]",children:(0,t.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-5 w-5",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,t.jsx)("path",{d:"M12 2l1.7 5.3L19 9l-5.3 1.7L12 16l-1.7-5.3L5 9l5.3-1.7L12 2z"}),(0,t.jsx)("path",{d:"M5 14l.9 2.8L9 18l-3.1 1.2L5 22l-.9-2.8L1 18l3.1-1.2L5 14z"})]})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-xl font-semibold text-[var(--rb-text)]",children:"Welcome — let’s get your business ready"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:"This wizard saves as you go and takes about 3–5 minutes. You can skip optional steps and come back later."})]})]}),(0,t.jsxs)("div",{className:"relative mt-5 grid gap-3 sm:grid-cols-3",children:[(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Time"}),(0,t.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:"3–5 minutes"})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Saving"}),(0,t.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:"Auto-saved"})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white/70 px-4 py-3",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Flexibility"}),(0,t.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:"Optional steps"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-[var(--rb-text)]",children:"What you’ll configure"}),(0,t.jsx)("div",{className:"mt-2 grid gap-2 sm:grid-cols-2",children:N.filter(e=>"welcome"!==e).map(e=>{let a=w.includes(e);return(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:k(e)}),a?(0,t.jsx)("span",{className:"rounded-full border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-2 py-0.5 text-[11px] font-medium text-zinc-600",children:"Optional"}):null]}),(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:S(e)})]},e)})})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:[(0,t.jsx)(d.Button,{variant:"primary",size:"lg",disabled:O||H,onClick:()=>{tc()},children:"Start setup"}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"You can adjust everything later from Settings."})]})]}):null,"business"===D?(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Business name"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.name,onChange:e=>td("name",e.target.value),placeholder:"e.g. RepairBuddy Electronics",autoComplete:"organization"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Display name (optional)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.display_name,onChange:e=>td("display_name",e.target.value),placeholder:"Defaults to business name"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Primary contact person name"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.primary_contact_name,onChange:e=>td("primary_contact_name",e.target.value),placeholder:"e.g. Alex Johnson",autoComplete:"name"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Contact email"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{type:"email",value:q.contact_email,onChange:e=>td("contact_email",e.target.value),placeholder:"billing@company.com",autoComplete:"email"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Contact phone"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.contact_phone,onChange:e=>td("contact_phone",e.target.value),placeholder:"+1 555 123 4567",autoComplete:"tel"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Business registration number (optional)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.registration_number,onChange:e=>td("registration_number",e.target.value),placeholder:"e.g. CRN-123456"})})]})]}):null,"branches"===D?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Your shops / branches"}),(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:"Branches are used for staff access and branch-specific invoice numbering."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>void e6(),disabled:G||et,children:"Refresh"}),(0,t.jsx)(d.Button,{size:"sm",onClick:function(){en(null),ed(""),eo(""),eu(!0),er(!0)},disabled:et,children:"New branch"})]})]})}),X?(0,t.jsx)(l.Alert,{variant:"danger",title:"Branches error",children:X}):null,(0,t.jsxs)("div",{className:"space-y-2",children:[G?(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:"Loading branches..."}):null,G||0!==tp.length?null:(0,t.jsx)("div",{className:"text-sm text-zinc-600",children:"No branches found."}),tp.map(e=>{let a=E?.default_branch_id===e.id;return(0,t.jsxs)("div",{className:"flex flex-col gap-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-4 py-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsxs)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:[e.code," - ",e.name]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center gap-2 text-xs text-zinc-600",children:[(0,t.jsx)("span",{children:e.is_active?"Active":"Inactive"}),a?(0,t.jsx)("span",{className:"rounded-full border border-[var(--rb-border)] bg-[var(--rb-surface-muted)] px-2 py-0.5 text-[11px] font-medium text-zinc-600",children:"Default"}):null]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{en(e.id),ed(e.name??""),eo(e.code??""),eu(!!e.is_active),er(!0)},disabled:et,children:"Edit"}),(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>{eb((0,t.jsxs)("div",{children:["Set ",(0,t.jsxs)("span",{className:"font-semibold",children:[e.code," - ",e.name]})," as the default branch?"]})),eg(()=>async()=>e7(e.id)),eh(!0)},disabled:et||a,children:"Set default"})]})]},e.id)})]})]}):null,"tax"===D?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsx)("div",{className:"sm:col-span-2",children:(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,t.jsx)("input",{type:"checkbox",checked:q.tax_registered,onChange:e=>td("tax_registered",e.target.checked)}),"Tax/VAT registered?"]})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"VAT number"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.billing_vat_number,onChange:e=>td("billing_vat_number",e.target.value),placeholder:"EU123456789"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invoice prefix (optional)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.invoice_prefix,onChange:e=>td("invoice_prefix",e.target.value),placeholder:"RB"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invoice format preview"}),(0,t.jsx)("div",{className:"mt-2 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-zinc-700",children:(q.invoice_prefix.trim()||"RB")+"-"+B+"-YYYY-000001"})]})]}),(0,t.jsx)("div",{className:"border-t border-[var(--rb-border)] pt-6",children:(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,t.jsx)("input",{type:"checkbox",checked:q.enable_taxes,onChange:e=>td("enable_taxes",e.target.checked)}),"Enable taxes"]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Tax rates"}),(0,t.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>ek(!0),children:"Add tax"})]}),(0,t.jsx)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-1",children:(0,t.jsx)(b.DataTable,{data:ej,columns:[{id:"name",header:"Name",cell:e=>(0,t.jsx)("div",{className:"text-sm",children:e.name})},{id:"rate",header:"Rate (%)",cell:e=>(0,t.jsx)("div",{className:"text-sm",children:Number(e.rate)})},{id:"active",header:"Active",cell:e=>(0,t.jsx)("div",{className:"text-sm",children:e.is_active?"Yes":"No"})},{id:"default",header:"Default",cell:e=>(0,t.jsx)("div",{className:"text-sm",children:e.is_default?"Yes":"No"})},{id:"actions",header:"",cell:e=>(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>{eF(String(e.id)),eU(e.name),eY(String(e.rate)),eV(e.is_active),eW(e.is_default),ez(!0)},children:"Edit"}),(0,t.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>void tt(e),children:"Delete"})]})}],getRowId:e=>String(e.id),loading:ef,emptyMessage:"No tax rates defined."})})]}),(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default tax"}),(0,t.jsxs)(v.Select,{value:q.default_tax_id,disabled:0===ej.filter(e=>e.is_active).length,onChange:e=>td("default_tax_id",e.target.value),children:[(0,t.jsx)("option",{value:"",children:"None"}),ej.filter(e=>e.is_active).map(e=>(0,t.jsxs)("option",{value:String(e.id),children:[e.name," (",Number(e.rate),"%)"]},e.id))]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invoice amounts"}),(0,t.jsxs)(v.Select,{value:q.invoice_amounts,onChange:e=>td("invoice_amounts",e.target.value),children:[(0,t.jsx)("option",{value:"exclusive",children:"Exclusive"}),(0,t.jsx)("option",{value:"inclusive",children:"Inclusive"})]})]})]})]}):null,"team"===D?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Invite team members (optional)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.team_invites,onChange:e=>td("team_invites",e.target.value),placeholder:"Emails separated by commas"})}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Invites are stored for later processing (email sending not implemented yet)."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default role for invites (optional)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.team_default_role,onChange:e=>td("team_default_role",e.target.value),placeholder:"member"})}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Example values: owner, member, technician, front_desk."})]})]}):null,"address"===D?(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Billing country (2-letter)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.billing_country,onChange:e=>td("billing_country",e.target.value.toUpperCase()),placeholder:"US",maxLength:2})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Currency"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.currency,onChange:e=>td("currency",e.target.value.toUpperCase()),placeholder:"USD",maxLength:3})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"VAT number (optional)"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:q.billing_vat_number,onChange:e=>td("billing_vat_number",e.target.value),placeholder:"EU123456789"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Address"}),(0,t.jsxs)("div",{className:"mt-1 grid gap-3 sm:grid-cols-2",children:[(0,t.jsx)("div",{className:"sm:col-span-2",children:(0,t.jsx)(m.Input,{value:q.address_line1,onChange:e=>td("address_line1",e.target.value),placeholder:"Address line 1",autoComplete:"address-line1"})}),(0,t.jsx)("div",{className:"sm:col-span-2",children:(0,t.jsx)(m.Input,{value:q.address_line2,onChange:e=>td("address_line2",e.target.value),placeholder:"Address line 2",autoComplete:"address-line2"})}),(0,t.jsx)(m.Input,{value:q.address_city,onChange:e=>td("address_city",e.target.value),placeholder:"City",autoComplete:"address-level2"}),(0,t.jsx)(m.Input,{value:q.address_state,onChange:e=>td("address_state",e.target.value),placeholder:"State / Region",autoComplete:"address-level1"}),(0,t.jsx)(m.Input,{value:q.address_postal_code,onChange:e=>td("address_postal_code",e.target.value),placeholder:"Postal code",autoComplete:"postal-code"})]})]})]}):null,"branding"===D?(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Brand color"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,t.jsx)("input",{type:"color",value:q.brand_color,onChange:e=>td("brand_color",e.target.value),className:"h-10 w-14 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white shadow-sm","aria-label":"Brand color"}),(0,t.jsx)(m.Input,{value:q.brand_color,onChange:e=>td("brand_color",e.target.value),placeholder:"#2563eb"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Logo"}),(0,t.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[E?.logo_url?(0,t.jsx)("img",{src:E.logo_url,alt:"Logo",className:"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white object-contain"}):(0,t.jsx)("div",{className:"h-10 w-10 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)("input",{type:"file",accept:"image/png,image/jpeg,image/webp",disabled:$,onChange:e=>{let t=e.target.files&&e.target.files[0]?e.target.files[0]:null;t&&tu(t)},className:"block w-full text-sm text-zinc-700 file:mr-3 file:rounded-[var(--rb-radius-sm)] file:border-0 file:bg-[var(--rb-surface-muted)] file:px-3 file:py-2 file:text-sm file:font-medium file:text-[var(--rb-text)] hover:file:bg-[color:color-mix(in_srgb,var(--rb-surface-muted),black_4%)]"})})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:$?"Uploading...":"PNG/JPG/WEBP up to 5MB"})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Customer-facing contact (optional)"}),(0,t.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,t.jsx)(m.Input,{value:q.support_email,onChange:e=>td("support_email",e.target.value),placeholder:"Public support email",autoComplete:"email"}),(0,t.jsx)(m.Input,{value:q.support_phone,onChange:e=>td("support_phone",e.target.value),placeholder:"Public support phone",autoComplete:"tel"}),(0,t.jsx)("div",{className:"sm:col-span-2",children:(0,t.jsx)(m.Input,{value:q.website,onChange:e=>td("website",e.target.value),placeholder:"Website (optional)"})}),(0,t.jsx)("div",{className:"sm:col-span-2",children:(0,t.jsx)(m.Input,{value:q.document_footer,onChange:e=>td("document_footer",e.target.value),placeholder:"Document footer text (optional)"})})]})]})]}):null,"preferences"===D?(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Timezone"}),(0,t.jsxs)("div",{className:"mt-1",children:[(0,t.jsx)(m.Input,{value:q.timezone,onChange:e=>td("timezone",e.target.value),placeholder:"UTC",list:"rb-timezones"}),(0,t.jsx)("datalist",{id:"rb-timezones",children:e4.map(e=>(0,t.jsx)("option",{value:e},e))})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Example: UTC, Europe/Berlin, America/New_York"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Language"}),(0,t.jsx)("div",{className:"mt-1",children:(0,t.jsx)(m.Input,{value:"English (en)",disabled:!0})}),(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"Currently supported language: English"})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Operations defaults (optional)"}),(0,t.jsxs)("div",{className:"mt-2 grid gap-3 sm:grid-cols-2",children:[(0,t.jsx)("div",{className:"sm:col-span-2",children:(0,t.jsx)(m.Input,{value:q.working_hours,onChange:e=>td("working_hours",e.target.value),placeholder:"Working hours (e.g. Mon–Fri 09:00–17:00)"})}),(0,t.jsx)(m.Input,{value:q.default_labor_rate,onChange:e=>td("default_labor_rate",e.target.value),placeholder:"Default labor rate (optional)"}),(0,t.jsx)(m.Input,{value:q.warranty_terms,onChange:e=>td("warranty_terms",e.target.value),placeholder:"Default warranty terms (optional)"}),(0,t.jsxs)("label",{className:"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,t.jsx)("input",{type:"checkbox",checked:q.notify_status_change,onChange:e=>td("notify_status_change",e.target.checked)}),"Email on status change"]}),(0,t.jsxs)("label",{className:"sm:col-span-2 flex items-center gap-2 text-sm text-[var(--rb-text)]",children:[(0,t.jsx)("input",{type:"checkbox",checked:q.notify_invoice_created,onChange:e=>td("notify_invoice_created",e.target.checked)}),"Email on invoice created"]})]})]})]}):null,"finish"===D?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(l.Alert,{variant:"info",title:"Review",children:"Please confirm the required fields. Clicking complete will finish setup and take you to the dashboard."}),(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Business"}),(0,t.jsx)("div",{className:"mt-1 text-sm font-medium text-[var(--rb-text)]",children:q.name.trim()||"—"}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Contact: ",q.contact_email.trim()||"—"]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Primary contact: ",q.primary_contact_name.trim()||"—"]})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Defaults"}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Timezone: ",q.timezone.trim()||"—"]}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Language: ",q.language.trim()||"—"]})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Billing"}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Country: ",q.billing_country.trim()||"—"," | Currency: ",q.currency.trim()||"—"]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["VAT: ",q.billing_vat_number.trim()||"—"]})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Tax & invoicing"}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Registered: ",q.tax_registered?"Yes":"No"]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Prefix: ",q.invoice_prefix.trim()||"—"]})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Branding"}),(0,t.jsxs)("div",{className:"mt-1 text-sm text-[var(--rb-text)]",children:["Color: ",q.brand_color]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Logo: ",E?.logo_url?"Uploaded":"—"]})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:"Team"}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Invites: ",q.team_invites.trim()?"Drafted":"—"]}),(0,t.jsxs)("div",{className:"mt-1 text-xs text-zinc-500",children:["Role: ",q.team_default_role.trim()||"—"]})]})]}),(0,t.jsx)(d.Button,{variant:"primary",disabled:H||O,onClick:()=>{tx()},children:H?"Completing...":"Complete setup"})]}):null]}),(0,t.jsx)("div",{className:"sticky bottom-0 border-t border-[var(--rb-border)] bg-white/90 px-5 py-4 backdrop-blur",children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)(d.Button,{variant:"ghost",disabled:!ts||O||H,onClick:()=>void tm(),children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M15 18l-6-6 6-6"})}),"Back"]})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"hidden sm:block text-xs text-zinc-500",children:[k(D),(0,t.jsx)("span",{className:"mx-2",children:"•"}),Math.round(100*e5),"%"]}),ti?(0,t.jsx)(d.Button,{variant:"outline",disabled:O||H,onClick:()=>void to(),children:"Skip for now"}):null,"finish"!==D?(0,t.jsx)(d.Button,{variant:"primary",disabled:!tr||O||H,onClick:()=>void tc(),children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-2",children:["welcome"===D?"Start":"Next",(0,t.jsx)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,t.jsx)("path",{d:"M9 18l6-6-6-6"})})]})}):null]})]})})]})]}),(0,t.jsx)("footer",{className:"mt-12 border-t border-[var(--rb-border)] pt-8 text-xs text-zinc-600",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:["© ",new Date().getFullYear()," 99smartx"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(r.default,{href:"/login",className:"hover:text-[var(--rb-text)]",children:"Login"}),(0,t.jsx)(r.default,{href:"/register",className:"hover:text-[var(--rb-text)]",children:"Register"})]})]})})]})}),(0,t.jsx)(x.Modal,{open:eC,onClose:()=>ek(!1),title:"Add tax",footer:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",onClick:()=>ek(!1),disabled:eN,children:"Cancel"}),(0,t.jsx)(d.Button,{onClick:()=>void e8(),disabled:eN,children:eN?"Saving...":"Save"})]}),children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Name"}),(0,t.jsx)(m.Input,{value:eA,onChange:e=>eB(e.target.value),placeholder:"e.g. VAT",disabled:eN})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Rate (%)"}),(0,t.jsx)(m.Input,{type:"number",min:0,value:eT,onChange:e=>eI(e.target.value),disabled:eN})]}),(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Active"}),(0,t.jsxs)(v.Select,{value:eE?"yes":"no",onChange:e=>eR("yes"===e.target.value),disabled:eN,children:[(0,t.jsx)("option",{value:"yes",children:"Yes"}),(0,t.jsx)("option",{value:"no",children:"No"})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default"}),(0,t.jsxs)(v.Select,{value:eD?"yes":"no",onChange:e=>eL("yes"===e.target.value),disabled:eN,children:[(0,t.jsx)("option",{value:"no",children:"No"}),(0,t.jsx)("option",{value:"yes",children:"Yes"})]})]})]})]})}),(0,t.jsx)(x.Modal,{open:eS,onClose:()=>ez(!1),title:"Edit tax",footer:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)(d.Button,{variant:"outline",onClick:()=>ez(!1),disabled:eN,children:"Cancel"}),(0,t.jsx)(d.Button,{onClick:()=>void te(),disabled:eN,children:eN?"Saving...":"Save"})]}),children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Name"}),(0,t.jsx)(m.Input,{value:eP,onChange:e=>eU(e.target.value),disabled:eN})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Rate (%)"}),(0,t.jsx)(m.Input,{type:"number",min:0,value:eM,onChange:e=>eY(e.target.value),disabled:eN})]}),(0,t.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Active"}),(0,t.jsxs)(v.Select,{value:eO?"yes":"no",onChange:e=>eV("yes"===e.target.value),disabled:eN,children:[(0,t.jsx)("option",{value:"yes",children:"Yes"}),(0,t.jsx)("option",{value:"no",children:"No"})]})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("label",{className:"text-sm font-medium text-[var(--rb-text)]",children:"Default"}),(0,t.jsxs)(v.Select,{value:e$?"yes":"no",onChange:e=>eW("yes"===e.target.value),disabled:eN,children:[(0,t.jsx)("option",{value:"no",children:"No"}),(0,t.jsx)("option",{value:"yes",children:"Yes"})]})]})]})]})})]})]})})}e.s(["default",()=>z])}]);