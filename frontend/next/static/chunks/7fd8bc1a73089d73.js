(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function s({variant:e,className:s}){let a="h-4 w-4 shrink-0";return"success"===e?(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 9v4"}),(0,r.jsx)("path",{d:"M12 17h.01"}),(0,r.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M18 6L6 18"}),(0,r.jsx)("path",{d:"M6 6l12 12"})]}):(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,t.cn)(a,s),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"}),(0,r.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function a({className:e,variant:a="info",title:n,children:i,...l}){let o={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[a];return(0,r.jsx)("div",{role:"alert",className:(0,t.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",o.wrapper,e),...l,children:(0,r.jsxs)("div",{className:"flex gap-3",children:[(0,r.jsx)(s,{variant:a,className:(0,t.cn)("mt-0.5",o.icon)}),(0,r.jsxs)("div",{className:"min-w-0",children:[n?(0,r.jsx)("div",{className:(0,t.cn)("text-sm font-semibold",o.title),children:n}):null,i?(0,r.jsx)("div",{className:(0,t.cn)("text-sm text-zinc-700",n?"mt-1":""),children:i}):null]})]})})}e.s(["Alert",()=>a])},68501,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function s({className:e,variant:s="default",...a}){return(0,r.jsx)("span",{className:(0,t.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[s],e),...a})}e.s(["Badge",()=>s])},26550,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function s({className:e,type:s,...a}){return(0,r.jsx)("input",{type:s,className:(0,t.cn)("w-full rounded-[var(--rb-radius-sm)] border border-zinc-300 bg-white px-3 py-2 text-sm text-[var(--rb-text)] outline-none transition","placeholder:text-zinc-400","focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white","disabled:cursor-not-allowed disabled:bg-[var(--rb-surface-muted)] disabled:opacity-70",e),...a})}e.s(["Input",()=>s])},19463,e=>{"use strict";var r=e.i(48277),t=e.i(14575);function s({title:e,description:s,actions:a,className:n}){return(0,r.jsxs)("div",{className:(0,t.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",n),children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),s?(0,r.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:s}):null]}),a?(0,r.jsx)("div",{className:"flex items-center gap-2",children:a}):null]})}e.s(["PageHeader",()=>s])},43901,e=>{"use strict";var r=e.i(48277),t=e.i(14575),s=e.i(72015);function a({className:e,"aria-hidden":s=!0,...a}){return(0,r.jsx)("div",{"aria-hidden":s,className:(0,t.cn)("rb-skeleton",e),...a})}function n({lines:e=3,className:n}){let i=Math.max(1,Math.min(e,12));return(0,r.jsx)(s.Card,{className:(0,t.cn)("overflow-hidden",n),children:(0,r.jsxs)(s.CardContent,{className:"space-y-3 pt-5",children:[(0,r.jsx)(a,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:i}).map((e,s)=>(0,r.jsx)(a,{className:(0,t.cn)("h-3 rounded-[var(--rb-radius-sm)]",s===i-1?"w-3/5":"w-full")},s))]})})}function i({rows:e=6,columns:s=5,className:n}){let i=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(s,10));return(0,r.jsxs)("div",{className:(0,t.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",n),children:[(0,r.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,r.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,t)=>(0,r.jsx)(a,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},t))})}),(0,r.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,r.jsx)("div",{className:"space-y-3",children:Array.from({length:i}).map((e,s)=>(0,r.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,s)=>(0,r.jsx)(a,{className:(0,t.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===s?"w-3/4":"w-full")},s))},s))})})]})}e.s(["CardSkeleton",()=>n,"Skeleton",()=>a,"TableSkeleton",()=>i])},37574,e=>{"use strict";var r=e.i(48277),t=e.i(30668),s=e.i(14575),a=e.i(9693),n=e.i(33441),i=e.i(43901),l=e.i(1831);function o({title:e,data:o,columns:d,getRowId:c,loading:u=!1,emptyMessage:m="No data.",search:x,filters:h=[],pageSizeOptions:b=[10,25,50],initialPageSize:p=10,server:g,exportConfig:v,columnVisibilityKey:f,onRowClick:j,className:w}){let[N,_]=(0,t.useState)(""),[y,S]=(0,t.useState)(0),[C,k]=(0,t.useState)(p),[M,z]=(0,t.useState)(null),[D,I]=(0,t.useState)(null),[B,A]=(0,t.useState)(0),L=(0,t.useId)(),T=!!g,$=T?g.query:N,P=T?g.onQueryChange:_,F=T?g.pageIndex:y,E=T?g.onPageIndexChange:S,R=T?g.pageSize:C,V=T?g.onPageSizeChange:k,W=T?g.sort??null:null,q=T?g.onSortChange:void 0,U=(0,t.useMemo)(()=>{let e=Array.isArray(d)?d:[];if(!f){let r=e.filter(e=>!e.hiddenByDefault);return r.length>0?r:e.slice(0,1)}try{let r=window.localStorage.getItem(f);if(!r){let r=e.filter(e=>!e.hiddenByDefault);return r.length>0?r:e.slice(0,1)}let t=JSON.parse(r),s=e.filter(e=>{let r=t[e.id];return"boolean"==typeof r?r:!e.hiddenByDefault});return s.length>0?s:e.slice(0,1)}catch{let r=e.filter(e=>!e.hiddenByDefault);return r.length>0?r:e.slice(0,1)}},[f,d,B]),O=(0,t.useMemo)(()=>{if(T)return Array.isArray(o)?o:[];let e=$.trim().toLowerCase();return(Array.isArray(o)?o:[]).filter(r=>{if(x&&x.getSearchText&&e.length>0&&!x.getSearchText(r).toLowerCase().includes(e))return!1;for(let e of h)if(e.predicate&&!e.predicate(r,e.value))return!1;return!0})},[o,h,T,$,x]),K=T?g.totalRows:O.length,H=Math.max(1,Math.ceil(K/R)),Q=Math.min(F,H-1),J=Math.max(1,Math.min(8,R||10)),G=(0,t.useMemo)(()=>{if(T)return O;let e=Q*R,r=e+R;return O.slice(e,r)},[Q,O,T,R]),X=Q>0,Y=Q<H-1,Z=!!x||h.length>0||!!v||!!f;function ee(e,r){if(f&&(r||!(U.length<=1)))try{let t=window.localStorage.getItem(f),s=(t?JSON.parse(t):{})??{};s[e]=r,window.localStorage.setItem(f,JSON.stringify(s)),A(e=>e+1)}catch{}}async function er(e){if(v&&!M){I(null),z(e);try{let r=new URLSearchParams;for(let e of($.trim().length>0&&r.set("q",$.trim()),h)){let t=e.value;null!=t&&0!==String(t).length&&r.set(e.id,String(t))}if(T&&W?.id&&W?.dir&&(r.set("sort",W.id),r.set("dir",W.dir)),r.set("format",e),v.extraQuery)for(let[e,t]of Object.entries(v.extraQuery))null!=t&&r.set(e,String(t));let t=`${v.url}${v.url.includes("?")?"&":"?"}${r.toString()}`,s=v.filename?.({format:e});await (0,l.apiDownload)(t,{filename:s})}catch(e){I(e instanceof Error?e.message:"Export failed.")}finally{z(null)}}}return(0,r.jsxs)("div",{className:(0,s.cn)("space-y-3",w),children:[e?(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Z?(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[x?(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:`${L}_datatable_search`,children:"Search"}),(0,r.jsx)("input",{id:`${L}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:$,onChange:e=>{P(e.target.value),E(0)},placeholder:x.placeholder??"Search..."})]}):null,h.map(e=>(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("label",{className:"text-sm font-medium",htmlFor:`${L}_datatable_filter_${e.id}`,children:e.label}),(0,r.jsx)("select",{id:`${L}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:r=>{let t=e.options.find(e=>String(e.value)===r.target.value),s=t?t.value:r.target.value;e.onChange(s),E(0)},children:e.options.map(e=>(0,r.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,r.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,r.jsxs)("div",{className:"text-sm text-zinc-600",children:[K," result(s)"]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[v?(0,r.jsx)(n.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,r.jsx)(a.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!M,children:M?"Exporting...":"Export"}),children:({close:e})=>{let t=v.formats??["csv","xlsx","pdf"];return(0,r.jsx)(r.Fragment,{children:t.map(t=>(0,r.jsxs)(n.DropdownMenuItem,{onSelect:()=>{e(),er(t)},disabled:!!M,children:["Export ",t.toUpperCase()]},t))})}}):null,f?(0,r.jsx)(n.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,r.jsx)(a.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.DropdownMenuItem,{onSelect:()=>{for(let r of(e(),d))ee(r.id,!0)},children:"Show all"}),(0,r.jsx)(n.DropdownMenuItem,{onSelect:()=>{for(let r of(e(),d))ee(r.id,!r.hiddenByDefault)},children:"Reset defaults"}),(0,r.jsx)(n.DropdownMenuSeparator,{}),d.map(e=>{let t=U.some(r=>r.id===e.id);return(0,r.jsxs)(n.DropdownMenuItem,{onSelect:()=>{ee(e.id,!t)},children:[(0,r.jsx)("span",{className:"mr-2 inline-block w-4",children:t?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,D?(0,r.jsx)("div",{className:"text-sm text-red-600",children:D}):null,(0,r.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,r.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,r.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,r.jsx)("tr",{children:U.map(e=>(0,r.jsx)("th",{className:(0,s.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:T&&e.sortId&&q?(0,r.jsxs)("button",{type:"button",onClick:()=>(function(e){if(T&&e.sortId&&q){if(!W||W.id!==e.sortId){q({id:e.sortId,dir:"asc"}),E(0);return}if("asc"===W.dir){q({id:e.sortId,dir:"desc"}),E(0);return}q(null),E(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,r.jsx)("span",{children:e.header}),T&&e.sortId?W&&W.id===e.sortId?"asc"===W.dir?(0,r.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,r.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,r.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,r.jsx)("tbody",{children:u?Array.from({length:J}).map((e,t)=>(0,r.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:U.map((e,t)=>(0,r.jsx)("td",{className:(0,s.cn)("px-3 py-2 align-middle",e.className),children:(0,r.jsx)(i.Skeleton,{className:(0,s.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===t?"w-3/4":t===U.length-1?"w-16":"w-full")})},e.id))},`loading_${t}`)):0===G.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,U.length),children:m})}):G.map(e=>(0,r.jsx)("tr",{className:(0,s.cn)("border-t border-[var(--rb-border)]",j?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:j?0:void 0,role:j?"button":void 0,onClick:j?()=>{j(e)}:void 0,onKeyDown:j?r=>{("Enter"===r.key||" "===r.key)&&(r.preventDefault(),j(e))}:void 0,children:U.map(t=>(0,r.jsx)("td",{className:(0,s.cn)("px-3 py-2 align-middle",t.className),children:t.cell(e)},t.id))},String(c(e))))})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(a.Button,{variant:"outline",size:"sm",onClick:function(){E(Math.max(0,Q-1))},disabled:!X,children:"Prev"}),(0,r.jsx)(a.Button,{variant:"outline",size:"sm",onClick:function(){E(Math.min(H-1,Q+1))},disabled:!Y,children:"Next"}),(0,r.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",Q+1," / ",H]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,r.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(R),onChange:e=>{V(Number(e.target.value)),E(0)},children:b.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>o])},66474,e=>{"use strict";var r=e.i(48277),t=e.i(30668),s=e.i(14575);function a({open:e,onClose:a,title:n,children:i,footer:l,position:o="center",variant:d="glass",className:c}){if((0,t.useEffect)(()=>{function r(r){e&&"Escape"===r.key&&a()}return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[a,e]),!e)return null;let u="solid"===d?(0,s.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[var(--rb-border)]","bg-white","shadow-[var(--rb-shadow)]"):(0,s.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]","bg-white/75 backdrop-blur-xl","shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]","ring-1 ring-white/25");return(0,r.jsxs)("div",{className:"top-center"===o?"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8":"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,r.jsx)("button",{type:"button",className:(0,s.cn)("absolute inset-0","bg-black/35 backdrop-blur-md","bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]"),"aria-label":"Close",onClick:a}),(0,r.jsxs)("div",{role:"dialog","aria-modal":"true",className:(0,s.cn)(u,c),children:["glass"===d?(0,r.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]"}):null,n?(0,r.jsx)("div",{className:(0,s.cn)("relative px-5 py-4","solid"===d?"border-b border-[var(--rb-border)]":"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:(0,r.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:n})}):null,(0,r.jsx)("div",{className:"relative px-5 py-4",children:i}),l?(0,r.jsx)("div",{className:(0,s.cn)("relative px-5 py-4","solid"===d?"border-t border-[var(--rb-border)]":"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:l}):null]})]})}e.s(["Modal",()=>a])},64998,e=>{"use strict";var r=e.i(48277),t=e.i(66474),s=e.i(9693);function a({open:e,title:a,message:n,confirmText:i="Confirm",confirmVariant:l="primary",cancelText:o="Cancel",busy:d=!1,onCancel:c,onConfirm:u}){return(0,r.jsx)(t.Modal,{open:e,onClose:()=>{d||c()},title:a,footer:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)(s.Button,{variant:"outline",onClick:c,disabled:d,children:o}),(0,r.jsx)(s.Button,{variant:l,onClick:u,disabled:d,children:d?"Working...":i})]}),children:(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:n})})}e.s(["ConfirmDialog",()=>a])},69965,e=>{"use strict";let r={locale:"en-GB",dateStyle:"medium",timeStyle:"short",hour12:!1};function t(e){if(!e)return null;if(e instanceof Date)return Number.isFinite(e.getTime())?e:null;let r=new Date(e);return Number.isFinite(r.getTime())?r:null}function s(e,s){let a=t(e);if(!a)return"—";let n={...r,...s??{}};return new Intl.DateTimeFormat(n.locale,{dateStyle:n.dateStyle}).format(a)}function a(e,s){let a=t(e);if(!a)return"—";let n={...r,...s??{}};return new Intl.DateTimeFormat(n.locale,{dateStyle:n.dateStyle,timeStyle:n.timeStyle,hour12:n.hour12}).format(a)}e.s(["formatDate",()=>s,"formatDateTime",()=>a])},23085,e=>{"use strict";var r=e.i(48277),t=e.i(1831),s=e.i(69965),a=e.i(77252),n=e.i(63571),i=e.i(68501),l=e.i(9693),o=e.i(72015),d=e.i(64998),c=e.i(37574),u=e.i(33441),m=e.i(26550),x=e.i(19463),h=e.i(66474),b=e.i(14575);function p({status:e,className:t}){let s="h-5 w-5 shrink-0";return"success"===e?(0,r.jsx)("svg",{viewBox:"0 0 24 24",className:(0,b.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,r.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,b.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 9v4"}),(0,r.jsx)("path",{d:"M12 17h.01"}),(0,r.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"error"===e?(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,b.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M18 6L6 18"}),(0,r.jsx)("path",{d:"M6 6l12 12"})]}):(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,b.cn)(s,t),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,r.jsx)("path",{d:"M12 16v-4"}),(0,r.jsx)("path",{d:"M12 8h.01"}),(0,r.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function g({open:e,status:t,title:s,message:a,actionText:n="OK",onClose:i}){let o={info:{icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{icon:"text-[#166534]",title:"text-[#166534]"},warning:{icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},error:{icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[t];return(0,r.jsx)(h.Modal,{open:e,onClose:i,position:"top-center",variant:"solid",title:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(p,{status:t,className:o.icon}),(0,r.jsx)("div",{className:(0,b.cn)("text-sm font-semibold",o.title),children:s})]}),footer:(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)(l.Button,{variant:"outline",onClick:i,children:n})}),children:a?(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:a}):null})}var v=e.i(96086),f=e.i(30668);function j(){let e=(0,v.useRouter)(),[h,b]=(0,f.useState)(!0),[p,j]=(0,f.useState)([]),[w,N]=(0,f.useState)(null),[_,y]=(0,f.useState)(null),[S,C]=(0,f.useState)({}),[k,M]=(0,f.useState)(!1),[z,D]=(0,f.useState)(null),[I,B]=(0,f.useState)(null),[A,L]=(0,f.useState)(""),[T,$]=(0,f.useState)(!1),[P,F]=(0,f.useState)(null),[E,R]=(0,f.useState)(""),[V,W]=(0,f.useState)(""),[q,U]=(0,f.useState)(!1),[O,K]=(0,f.useState)("info"),[H,Q]=(0,f.useState)(""),[J,G]=(0,f.useState)(null),[X,Y]=(0,f.useState)(!0),[Z,ee]=(0,f.useState)(null),[er,et]=(0,f.useState)(null),[es,ea]=(0,f.useState)(0),[en,ei]=(0,f.useState)(""),[el,eo]=(0,f.useState)("all"),[ed,ec]=(0,f.useState)(0),[eu,em]=(0,f.useState)(10),[ex,eh]=(0,f.useState)(0),[eb,ep]=(0,f.useState)(null),eg=(0,f.useMemo)(()=>[{label:"All statuses",value:"all"},{label:"Trial",value:"trial"},{label:"Active",value:"active"},{label:"Past due",value:"past_due"},{label:"Suspended",value:"suspended"},{label:"Closed",value:"closed"}],[]),ev=(0,f.useMemo)(()=>e=>"active"===e?"success":"trial"===e?"info":"past_due"===e?"warning":"suspended"===e?"danger":"default",[]);function ef({label:e,value:t,badge:s,badgeVariant:a,glowClassName:n}){return(0,r.jsxs)(o.Card,{className:"relative overflow-hidden",children:[(0,r.jsx)("div",{className:"pointer-events-none absolute -right-10 -top-10 h-28 w-28 rounded-full blur-2xl opacity-70 "+n}),(0,r.jsxs)(o.CardContent,{className:"pt-5",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"text-xs font-medium tracking-wide text-zinc-500",children:e}),(0,r.jsx)("div",{className:"mt-1 truncate text-2xl font-semibold text-[var(--rb-text)]",children:t})]}),(0,r.jsx)(i.Badge,{variant:a,children:s})]}),(0,r.jsx)("div",{className:"mt-3 h-px w-full bg-[var(--rb-border)]"})]})]})}async function ej(e,r,t){if(!Number.isFinite(e)||e<=0||S[e])return null;y(null),C(t=>({...t,[e]:r}));try{return await t(),ea(e=>e+1),{ok:!0}}catch(r){let e=r instanceof Error?r.message:"Action failed.";return y(e),{ok:!1,error:e}}finally{C(r=>({...r,[e]:null}))}}async function ew(e){D(e),B("suspend"),L(""),M(!0)}async function eN(e){D(e),B("unsuspend"),L(""),M(!0)}async function e_(e){F(e),R(""),W(""),$(!0)}(0,f.useEffect)(()=>{let e=!0;return async function(){try{N(null),b(!0);let r=new URLSearchParams;en.trim().length>0&&r.set("q",en.trim()),el&&"all"!==el&&r.set("status",el),eb?.id&&eb?.dir&&(r.set("sort",eb.id),r.set("dir",eb.dir)),r.set("page",String(ed+1)),r.set("per_page",String(eu));let s=await (0,t.apiFetch)(`/api/admin/businesses?${r.toString()}`);if(!e)return;j(Array.isArray(s.tenants)?s.tenants:[]),eh("number"==typeof s.meta?.total?s.meta.total:0),em("number"==typeof s.meta?.per_page?s.meta.per_page:eu)}catch(r){if(!e)return;N(r instanceof Error?r.message:"Failed to load tenants.")}finally{if(!e)return;b(!1)}}(),()=>{e=!1}},[en,el,ed,eu,eb?.id,eb?.dir,es]),(0,f.useEffect)(()=>{let e=!0;return async function(){try{ee(null),Y(!0);let r=new URLSearchParams;en.trim().length>0&&r.set("q",en.trim()),el&&"all"!==el&&r.set("status",el);let s=await (0,t.apiFetch)(`/api/admin/businesses/stats?${r.toString()}`);if(!e)return;et(s)}catch(r){if(!e)return;ee(r instanceof Error?r.message:"Failed to load stats."),et(null)}finally{if(!e)return;Y(!1)}}(),()=>{e=!1}},[en,el,es]);let ey=!!z&&!!I&&S[z.id]===I,eS=!!P&&"close"===S[P.id];async function eC(){if(!z||!I)return;let e=A.trim(),s="suspend"===I?"suspend":"unsuspend",a=await ej(z.id,I,async()=>{await (0,t.apiFetch)(`/api/admin/businesses/${z.id}/${s}`,{method:"PATCH",body:{reason:e||void 0}})});M(!1),D(null),B(null),L(""),a&&(a?.ok?(K("success"),Q("suspend"===I?"Business suspended":"Business unsuspended"),G((0,r.jsxs)("div",{children:["“",z.name,"” was updated successfully."]})),U(!0)):a&&!a.ok&&(K("error"),Q("Action failed"),G(a.error),U(!0)))}async function ek(){if(!P)return;let e=E.trim(),s=V.trim(),a=s.length>0?Number(s):null,n=await ej(P.id,"close",async()=>{await (0,t.apiFetch)(`/api/admin/businesses/${P.id}/close`,{method:"PATCH",body:{reason:e||void 0,data_retention_days:a&&Number.isFinite(a)?a:void 0}})});$(!1),F(null),R(""),W(""),n&&(n.ok?(K("success"),Q("Business closed"),G((0,r.jsxs)("div",{children:["“",P.name,"” was closed successfully."]}))):(K("error"),Q("Action failed"),G(n.error)),U(!0))}return(0,r.jsx)(a.RequireAuth,{requiredPermission:"admin.tenants.read",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)(x.PageHeader,{title:"Businesses",description:"Manage businesses (admin).",actions:(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>ea(e=>e+1),disabled:h,children:"Refresh"})}),w?(0,r.jsx)(n.Alert,{variant:"danger",title:"Could not load businesses",children:w}):null,_?(0,r.jsx)(n.Alert,{variant:"danger",title:"Action failed",children:_}):null,Z?(0,r.jsx)(n.Alert,{variant:"danger",title:"Could not load stats",children:Z}):null,(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-6",children:[(0,r.jsx)(ef,{label:"Total businesses",value:X?"—":String(er?.total??0),badge:"all",badgeVariant:"default",glowClassName:"bg-[color:color-mix(in_srgb,var(--rb-text),white_88%)]"}),(0,r.jsx)(ef,{label:"Active",value:X?"—":String(er?.by_status?.active??0),badge:"active",badgeVariant:"success",glowClassName:"bg-[color:color-mix(in_srgb,#16a34a,white_75%)]"}),(0,r.jsx)(ef,{label:"Trial",value:X?"—":String(er?.by_status?.trial??0),badge:"trial",badgeVariant:"info",glowClassName:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_80%)]"}),(0,r.jsx)(ef,{label:"Past due",value:X?"—":String(er?.by_status?.past_due??0),badge:"past due",badgeVariant:"warning",glowClassName:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_78%)]"}),(0,r.jsx)(ef,{label:"Suspended",value:X?"—":String(er?.by_status?.suspended??0),badge:"suspended",badgeVariant:"danger",glowClassName:"bg-[color:color-mix(in_srgb,#dc2626,white_78%)]"}),(0,r.jsx)(ef,{label:"Closed",value:X?"—":String(er?.by_status?.closed??0),badge:"closed",badgeVariant:"default",glowClassName:"bg-[color:color-mix(in_srgb,var(--rb-border),white_55%)]"})]}),(0,r.jsx)(o.Card,{children:(0,r.jsx)(o.CardContent,{className:"pt-5",children:(0,r.jsx)(c.DataTable,{title:"Businesses",data:p,loading:h,emptyMessage:"No businesses found.",getRowId:e=>e.id,onRowClick:r=>{e.push(`/admin/businesses/${r.id}`)},search:{placeholder:"Search name, slug, or email..."},server:{query:en,onQueryChange:e=>{ei(e),ec(0)},pageIndex:ed,onPageIndexChange:ec,pageSize:eu,onPageSizeChange:e=>{em(e),ec(0)},totalRows:ex,sort:eb,onSortChange:e=>{ep(e),ec(0)}},exportConfig:{url:"/api/admin/businesses/export",formats:["csv","xlsx","pdf"],filename:({format:e})=>`tenants_export.${e}`},columnVisibilityKey:"rb:datatable:admin:tenants",filters:[{id:"status",label:"Status",value:el,options:eg,onChange:e=>{eo(String(e)),ec(0)}}],columns:[{id:"id",header:"ID",sortId:"id",cell:e=>(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:e.id}),className:"whitespace-nowrap"},{id:"name",header:"Name",sortId:"name",cell:e=>(0,r.jsxs)("div",{className:"min-w-0",children:[(0,r.jsx)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:e.name}),e.contact_email?(0,r.jsx)("div",{className:"truncate text-xs text-zinc-600",children:e.contact_email}):null]}),className:"max-w-[420px]"},{id:"slug",header:"Slug",sortId:"slug",cell:e=>(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:e.slug}),className:"whitespace-nowrap"},{id:"status",header:"Status",sortId:"status",cell:e=>(0,r.jsx)(i.Badge,{variant:ev(e.status),children:e.status}),className:"whitespace-nowrap"},{id:"contact_email",header:"Contact Email",sortId:"contact_email",hiddenByDefault:!0,cell:e=>(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:e.contact_email??""}),className:"whitespace-nowrap"},{id:"created_at",header:"Created",sortId:"created_at",hiddenByDefault:!0,cell:e=>(0,r.jsx)("div",{className:"text-sm text-zinc-700",children:(0,s.formatDateTime)(e.created_at??null)}),className:"whitespace-nowrap"},{id:"actions",header:"",cell:t=>{let s=S[t.id],a="closed"!==t.status,n="suspended"===t.status,i="closed"!==t.status;return(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)(u.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,r.jsx)(l.Button,{variant:"ghost",size:"sm","aria-label":"Actions",title:"Actions",className:"px-2",onClick:r=>{r.stopPropagation(),e()},children:(0,r.jsxs)("svg",{viewBox:"0 0 24 24",className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:[(0,r.jsx)("circle",{cx:"12",cy:"5",r:"1.5"}),(0,r.jsx)("circle",{cx:"12",cy:"12",r:"1.5"}),(0,r.jsx)("circle",{cx:"12",cy:"19",r:"1.5"})]})}),children:({close:l})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.DropdownMenuItem,{onSelect:()=>{l(),e.push(`/admin/businesses/${t.id}`)},children:"View"}),(0,r.jsx)(u.DropdownMenuSeparator,{}),(0,r.jsx)(u.DropdownMenuItem,{onSelect:()=>{l(),ew(t)},disabled:!!s||!a,children:"suspend"===s?"…":"Suspend"}),(0,r.jsx)(u.DropdownMenuItem,{onSelect:()=>{l(),eN(t)},disabled:!!s||!n,children:"unsuspend"===s?"…":"Unsuspend"}),(0,r.jsx)(u.DropdownMenuItem,{onSelect:()=>{l(),e_(t)},disabled:!!s||!i,destructive:!0,children:"close"===s?"…":"Close"})]})})})},className:"whitespace-nowrap text-right",headerClassName:"text-right"}]})})}),(0,r.jsx)(d.ConfirmDialog,{open:k,title:"suspend"===I?"Suspend business":"Unsuspend business",message:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{children:"suspend"===I?"This will suspend the business and prevent normal access.":"This will restore access for the business."}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-zinc-600",children:"Reason (optional)"}),(0,r.jsx)(m.Input,{value:A,onChange:e=>L(e.target.value),placeholder:"e.g. Non-payment, abuse, user request"})]})]}),confirmText:"suspend"===I?"Suspend":"Unsuspend",confirmVariant:"secondary",busy:ey,onCancel:()=>{M(!1),D(null),B(null),L("")},onConfirm:()=>void eC()}),(0,r.jsx)(d.ConfirmDialog,{open:T,title:"Close business",message:(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("div",{children:"This is a destructive action. The business will be closed."}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-zinc-600",children:"Reason (optional)"}),(0,r.jsx)(m.Input,{value:E,onChange:e=>R(e.target.value),placeholder:"e.g. customer request, duplicate tenant"})]}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"text-xs font-medium text-zinc-600",children:"Data retention days override (optional)"}),(0,r.jsx)(m.Input,{type:"number",inputMode:"numeric",value:V,onChange:e=>W(e.target.value),placeholder:"e.g. 30"})]})]}),confirmText:"Close",confirmVariant:"secondary",busy:eS,onCancel:()=>{$(!1),F(null),R(""),W("")},onConfirm:()=>void ek()}),(0,r.jsx)(g,{open:q,status:O,title:H,message:J,onClose:()=>{U(!1),G(null),Q(""),K("info")}})]})})}e.s(["default",()=>j],23085)}]);