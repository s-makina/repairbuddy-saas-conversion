(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63571,e=>{"use strict";var s=e.i(48277),r=e.i(14575);function i({variant:e,className:i}){let a="h-4 w-4 shrink-0";return"success"===e?(0,s.jsx)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:(0,s.jsx)("path",{d:"M20 6L9 17l-5-5"})}):"warning"===e?(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M12 9v4"}),(0,s.jsx)("path",{d:"M12 17h.01"}),(0,s.jsx)("path",{d:"M10.3 3.6l-8.3 14.3A2 2 0 0 0 3.7 21h16.6a2 2 0 0 0 1.7-3.1L13.7 3.6a2 2 0 0 0-3.4 0z"})]}):"danger"===e?(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M18 6L6 18"}),(0,s.jsx)("path",{d:"M6 6l12 12"})]}):(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:(0,r.cn)(a,i),fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M12 16v-4"}),(0,s.jsx)("path",{d:"M12 8h.01"}),(0,s.jsx)("path",{d:"M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10z"})]})}function a({className:e,variant:a="info",title:t,children:n,...l}){let d={info:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-blue),white_75%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)] text-[var(--rb-text)]",icon:"text-[var(--rb-blue)]",title:"text-[var(--rb-blue)]"},success:{wrapper:"border-[color:color-mix(in_srgb,#16a34a,white_75%)] bg-[color:color-mix(in_srgb,#16a34a,white_92%)] text-[var(--rb-text)]",icon:"text-[#166534]",title:"text-[#166534]"},warning:{wrapper:"border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)] bg-[color:color-mix(in_srgb,var(--rb-orange),white_92%)] text-[var(--rb-text)]",icon:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]",title:"text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)]"},danger:{wrapper:"border-[color:color-mix(in_srgb,#dc2626,white_75%)] bg-[color:color-mix(in_srgb,#dc2626,white_92%)] text-[var(--rb-text)]",icon:"text-[#991b1b]",title:"text-[#991b1b]"}}[a];return(0,s.jsx)("div",{role:"alert",className:(0,r.cn)("rounded-[var(--rb-radius-md)] border px-4 py-3",d.wrapper,e),...l,children:(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)(i,{variant:a,className:(0,r.cn)("mt-0.5",d.icon)}),(0,s.jsxs)("div",{className:"min-w-0",children:[t?(0,s.jsx)("div",{className:(0,r.cn)("text-sm font-semibold",d.title),children:t}):null,n?(0,s.jsx)("div",{className:(0,r.cn)("text-sm text-zinc-700",t?"mt-1":""),children:n}):null]})]})})}e.s(["Alert",()=>a])},68501,e=>{"use strict";var s=e.i(48277),r=e.i(14575);function i({className:e,variant:i="default",...a}){return(0,s.jsx)("span",{className:(0,r.cn)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-medium",{default:"bg-[var(--rb-surface-muted)] text-[var(--rb-text)] border-[var(--rb-border)]",info:"bg-[color:color-mix(in_srgb,var(--rb-blue),white_85%)] text-[var(--rb-blue)] border-[color:color-mix(in_srgb,var(--rb-blue),white_70%)]",success:"bg-[color:color-mix(in_srgb,#16a34a,white_85%)] text-[#166534] border-[color:color-mix(in_srgb,#16a34a,white_70%)]",warning:"bg-[color:color-mix(in_srgb,var(--rb-orange),white_85%)] text-[color:color-mix(in_srgb,var(--rb-orange),black_20%)] border-[color:color-mix(in_srgb,var(--rb-orange),white_70%)]",danger:"bg-[color:color-mix(in_srgb,#dc2626,white_85%)] text-[#991b1b] border-[color:color-mix(in_srgb,#dc2626,white_70%)]"}[i],e),...a})}e.s(["Badge",()=>i])},19463,e=>{"use strict";var s=e.i(48277),r=e.i(14575);function i({title:e,description:i,actions:a,className:t}){return(0,s.jsxs)("div",{className:(0,r.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",t),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),i?(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:i}):null]}),a?(0,s.jsx)("div",{className:"flex items-center gap-2",children:a}):null]})}e.s(["PageHeader",()=>i])},43901,e=>{"use strict";var s=e.i(48277),r=e.i(14575),i=e.i(72015);function a({className:e,"aria-hidden":i=!0,...a}){return(0,s.jsx)("div",{"aria-hidden":i,className:(0,r.cn)("rb-skeleton",e),...a})}function t({lines:e=3,className:t}){let n=Math.max(1,Math.min(e,12));return(0,s.jsx)(i.Card,{className:(0,r.cn)("overflow-hidden",t),children:(0,s.jsxs)(i.CardContent,{className:"space-y-3 pt-5",children:[(0,s.jsx)(a,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:n}).map((e,i)=>(0,s.jsx)(a,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",i===n-1?"w-3/5":"w-full")},i))]})})}function n({rows:e=6,columns:i=5,className:t}){let n=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(i,10));return(0,s.jsxs)("div",{className:(0,r.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",t),children:[(0,s.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,s.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,r)=>(0,s.jsx)(a,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},r))})}),(0,s.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:n}).map((e,i)=>(0,s.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,i)=>(0,s.jsx)(a,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===i?"w-3/4":"w-full")},i))},i))})})]})}e.s(["CardSkeleton",()=>t,"Skeleton",()=>a,"TableSkeleton",()=>n])},57373,e=>{"use strict";var s=e.i(48277),r=e.i(30668),i=e.i(14575);let a=(0,r.createContext)(null);function t(){let e=(0,r.useContext)(a);if(!e)throw Error("Tabs components must be used within <Tabs />");return e}function n({value:e,defaultValue:t,onValueChange:n,className:l,children:d}){let c=(0,r.useId)(),[o,x]=(0,r.useState)(t??""),m="string"==typeof e?e:o,u=(0,r.useCallback)(s=>{s&&(n&&n(s),"string"!=typeof e&&x(s))},[n,e]),h=(0,r.useMemo)(()=>({value:m,setValue:u,baseId:c}),[c,m,u]);return(0,s.jsx)(a.Provider,{value:h,children:(0,s.jsx)("div",{className:(0,i.cn)("space-y-4",l),children:d})})}function l({className:e,...r}){return(0,s.jsx)("div",{className:(0,i.cn)("inline-flex items-center gap-1 rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white p-1 shadow-[var(--rb-shadow)]",e),role:"tablist",...r})}function d({value:e,className:r,...a}){let n=t(),l=n.value===e,{onClick:d,...c}=a;return(0,s.jsx)("button",{type:"button",role:"tab","aria-selected":l,"aria-controls":`${n.baseId}-panel-${e}`,id:`${n.baseId}-tab-${e}`,onClick:s=>{n.setValue(e),d?.(s)},className:(0,i.cn)("h-9 rounded-[var(--rb-radius-sm)] px-3 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",l?"bg-[var(--rb-surface-muted)] text-[var(--rb-text)]":"text-zinc-600 hover:bg-[var(--rb-surface-muted)]",r),...c})}function c({value:e,className:r,children:a,...n}){let l=t();return l.value!==e?null:(0,s.jsx)("div",{role:"tabpanel",id:`${l.baseId}-panel-${e}`,"aria-labelledby":`${l.baseId}-tab-${e}`,className:(0,i.cn)(r),...n,children:a})}e.s(["Tabs",()=>n,"TabsContent",()=>c,"TabsList",()=>l,"TabsTrigger",()=>d])},83847,e=>{"use strict";var s=e.i(48277),r=e.i(16506),i=e.i(14575),a=e.i(19463),t=e.i(57373);function n({breadcrumb:e,backHref:n,backLabel:l="Back",title:d,description:c,actions:o,defaultTab:x="overview",tabs:m,className:u}){return(0,s.jsxs)("div",{className:(0,i.cn)("space-y-0 space-x-2",u),children:[(0,s.jsx)("div",{className:"space-y-2",children:n?(0,s.jsx)("div",{children:(0,s.jsx)(r.default,{href:n,className:"text-sm text-zinc-600 hover:text-[var(--rb-text)]",children:l})}):null}),(0,s.jsx)(a.PageHeader,{title:d,description:c,actions:o}),(0,s.jsxs)(t.Tabs,{defaultValue:x,children:[(0,s.jsxs)(t.TabsList,{children:[void 0!==m.overview?(0,s.jsx)(t.TabsTrigger,{value:"overview",children:"Overview"}):null,void 0!==m.devices?(0,s.jsx)(t.TabsTrigger,{value:"devices",children:"Devices"}):null,void 0!==m.timeline?(0,s.jsx)(t.TabsTrigger,{value:"timeline",children:"Timeline"}):null,void 0!==m.messages?(0,s.jsx)(t.TabsTrigger,{value:"messages",children:"Messages"}):null,void 0!==m.financial?(0,s.jsx)(t.TabsTrigger,{value:"financial",children:"Financial"}):null,void 0!==m.print?(0,s.jsx)(t.TabsTrigger,{value:"print",children:"Print"}):null]}),void 0!==m.overview?(0,s.jsx)(t.TabsContent,{value:"overview",children:m.overview}):null,void 0!==m.devices?(0,s.jsx)(t.TabsContent,{value:"devices",children:m.devices}):null,void 0!==m.timeline?(0,s.jsx)(t.TabsContent,{value:"timeline",children:m.timeline}):null,void 0!==m.messages?(0,s.jsx)(t.TabsContent,{value:"messages",children:m.messages}):null,void 0!==m.financial?(0,s.jsx)(t.TabsContent,{value:"financial",children:m.financial}):null,void 0!==m.print?(0,s.jsx)(t.TabsContent,{value:"print",children:m.print}):null]})]})}e.s(["DetailPageShell",()=>n])},11575,e=>{"use strict";var s=e.i(48277),r=e.i(30668),i=e.i(96086),a=e.i(63571),t=e.i(68501),n=e.i(9693),l=e.i(72015),d=e.i(83847),c=e.i(43901),o=e.i(1831);function x(){let e=(0,i.useRouter)(),x=(0,i.useParams)(),m=x.business??x.tenant,u=x.clientId,[h,v]=r.default.useState(!0),[b,j]=r.default.useState(null),[p,g]=r.default.useState(null),[f,w]=r.default.useState([]);r.default.useEffect(()=>{let s=!0;return async function(){try{if(v(!0),j(null),!u){j("Client ID is missing."),g(null);return}if("string"!=typeof m||0===m.length)throw Error("Business is missing.");let[e,r]=await Promise.all([(0,o.apiFetch)(`/api/${m}/app/clients/${u}`),(0,o.apiFetch)(`/api/${m}/app/clients/${u}/jobs`)]);if(!s)return;g(e.client??null),w(Array.isArray(r.jobs)?r.jobs:[])}catch(r){if(!s)return;if(r instanceof o.ApiError&&428===r.status&&"string"==typeof m&&m.length>0){let s=`/app/${m}/clients/${u}`;e.replace(`/app/${m}/branches/select?next=${encodeURIComponent(s)}`);return}j(r instanceof Error?r.message:"Failed to load client."),g(null)}finally{if(!s)return;v(!1)}}(),()=>{s=!1}},[u,e,m]);let N=r.default.useMemo(()=>f.slice().sort((e,s)=>e.updated_at<s.updated_at?1:-1),[f]),C=r.default.useMemo(()=>{if(!p)return"—";let e=[p.address_line1,p.address_line2,[p.address_city,p.address_state].filter(Boolean).join(", "),p.address_postal_code,p.address_country].map(e=>"string"==typeof e?e.trim():"").filter(Boolean);return e.length>0?e.join("\n"):"—"},[p]);return(0,s.jsxs)("div",{className:"space-y-6",children:[b?(0,s.jsx)(a.Alert,{variant:"danger",title:"Could not load customer",children:b}):null,h?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c.Skeleton,{className:"h-4 w-48 rounded-[var(--rb-radius-sm)]"}),(0,s.jsx)(c.Skeleton,{className:"h-9 w-72 rounded-[var(--rb-radius-sm)]"})]}),(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,s.jsx)(c.CardSkeleton,{lines:5,className:"shadow-none"}),(0,s.jsx)(c.CardSkeleton,{lines:5,className:"shadow-none"}),(0,s.jsx)(c.CardSkeleton,{lines:5,className:"shadow-none"})]}),(0,s.jsx)(c.CardSkeleton,{lines:7,className:"shadow-none"})]}):null,p&&!h?(0,s.jsx)(d.DetailPageShell,{title:p.name,description:p.email??p.phone??"Customer details",actions:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{e.back()},children:"Back"}),(0,s.jsx)(n.Button,{variant:"primary",size:"sm",onClick:()=>{"string"==typeof m&&0!==m.length&&e.push(`/app/${m}/clients/${p.id}/edit`)},children:"Edit"})]}),tabs:{overview:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)(t.Badge,{variant:"info",children:"Customer"}),(0,s.jsxs)(t.Badge,{variant:"default",children:["ID: ",p.id]}),(0,s.jsxs)(t.Badge,{variant:p.jobs_count>0?"info":"default",children:["Jobs: ",p.jobs_count??0]})]}),(0,s.jsxs)("div",{className:"grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Contact"})}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Email"}),p.email?(0,s.jsx)("a",{className:"mt-1 block text-sm text-[var(--rb-blue)] hover:underline",href:`mailto:${p.email}`,children:p.email}):(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Phone"}),p.phone?(0,s.jsx)("a",{className:"mt-1 block text-sm text-[var(--rb-blue)] hover:underline",href:`tel:${p.phone}`,children:p.phone}):(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:"—"})]})]})]}),(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Company"})}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Company name"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:p.company??"—"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Tax ID"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:p.tax_id??"—"})]})]})]}),(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Meta"})}),(0,s.jsxs)(l.CardContent,{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Created"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:new Date(p.created_at).toLocaleString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Last update"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-700",children:N[0]?.updated_at?new Date(N[0].updated_at).toLocaleString():"—"})]})]})]})]}),(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Address"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"whitespace-pre-wrap text-sm text-zinc-700",children:C})})]})]}),timeline:(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsx)(l.CardTitle,{children:"Jobs"}),(0,s.jsxs)("div",{className:"text-sm text-zinc-600",children:[N.length," total"]})]})}),(0,s.jsxs)(l.CardContent,{children:[0===N.length?(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"No jobs for this customer."}):null,(0,s.jsx)("div",{className:"mt-2 divide-y divide-[var(--rb-border)] rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:N.map(r=>{let i;return(0,s.jsxs)("div",{className:"flex flex-col gap-3 p-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:r.case_number}),r.status?(0,s.jsx)(t.Badge,{variant:(i=(r.status??"").toLowerCase()).includes("done")||i.includes("complete")||i.includes("closed")||i.includes("paid")?"success":i.includes("cancel")||i.includes("failed")||i.includes("declin")?"danger":i.includes("hold")||i.includes("await")||i.includes("pending")||i.includes("quote")?"warning":i.includes("progress")||i.includes("work")||i.includes("repair")||i.includes("open")?"info":"default",children:r.status}):null]}),(0,s.jsx)("div",{className:"mt-1 truncate text-sm text-zinc-600",children:r.title}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-zinc-500",children:["Updated: ",new Date(r.updated_at).toLocaleString()]})]}),(0,s.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,s.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{"string"==typeof m&&0!==m.length&&e.push(`/app/${m}/jobs/${r.id}`)},children:"View"})})]},r.id)})})]})]}),messages:(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Devices"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"mt-4 space-y-3",children:(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"Customer devices will appear here after EPIC 5 (devices + customer devices) is enabled."})})})]}),financial:(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Financial"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Customer-level financials are wired in later phases."})})]}),print:(0,s.jsxs)(l.Card,{className:"shadow-none",children:[(0,s.jsx)(l.CardHeader,{children:(0,s.jsx)(l.CardTitle,{children:"Print"})}),(0,s.jsx)(l.CardContent,{children:(0,s.jsx)("div",{className:"mt-2 text-sm text-zinc-600",children:"Printable customer summaries are implemented in later phases."})})]})}}):null]})}e.s(["default",()=>x])}]);