(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63451,e=>{"use strict";var a=e.i(48277),t=e.i(42588),s=e.i(14575);function i({src:e,alt:i,fallback:n,size:r=36,className:l}){let c=(0,s.cn)("relative inline-flex items-center justify-center overflow-hidden rounded-full","bg-slate-200 text-slate-800","dark:bg-slate-700 dark:text-slate-100","ring-1 ring-black/10 dark:ring-white/10","text-sm font-semibold leading-none",l);return(0,a.jsx)("span",{className:c,style:{width:r,height:r},"aria-label":i,title:i,children:e?(0,a.jsx)(t.default,{alt:i,src:e,width:r,height:r,className:"h-full w-full object-cover",loader:({src:e})=>e,unoptimized:!0}):(0,a.jsx)("span",{className:"select-none uppercase",children:n})})}e.s(["Avatar",()=>i])},13221,e=>{"use strict";let a=(0,e.i(35884).default)("printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);e.s(["Printer",()=>a],13221)},24273,e=>{"use strict";var a=e.i(48277),t=e.i(42588),s=e.i(16506),i=e.i(30668),n=e.i(96086),r=e.i(1314),l=e.i(14575),c=e.i(1831),o=e.i(63451),d=e.i(72015),p=e.i(9693),h=e.i(33441);function m({userName:e,userEmail:t,avatarUrl:r,profileHref:c,settingsHref:d,securityHref:p,onLogout:h,className:m}){let[u,f]=(0,i.useState)(!1),[x,b]=(0,i.useState)(!1),v=(0,i.useRef)(null),g=(0,n.useRouter)(),w=(0,n.usePathname)(),y=(0,i.useMemo)(()=>e.split(" ").filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join("").slice(0,2)||"U",[e]);(0,i.useEffect)(()=>{function e(e){if(!u)return;let a=v.current;a&&e.target instanceof Node&&!a.contains(e.target)&&f(!1)}function a(e){u&&"Escape"===e.key&&f(!1)}return document.addEventListener("mousedown",e),document.addEventListener("keydown",a),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",a)}},[u]),(0,i.useEffect)(()=>{u&&f(!1)},[w]);let j=!!p;async function N(){if(!x){f(!1),b(!0);try{await h()}finally{g.replace("/login"),b(!1)}}}return(0,a.jsxs)("div",{ref:v,className:(0,l.cn)("relative z-50",m),children:[(0,a.jsxs)("button",{type:"button",onClick:()=>f(e=>!e),disabled:x,className:(0,l.cn)("group inline-flex items-center gap-2 rounded-full border px-3 py-1.5","bg-[var(--rb-surface-muted)] text-zinc-600 border-[var(--rb-border)]","hover:bg-white hover:text-[var(--rb-text)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[rgba(6,62,112,0.20)] focus-visible:ring-offset-2 focus-visible:ring-offset-white"),"aria-haspopup":"menu","aria-expanded":u,"aria-label":"Account menu",children:[(0,a.jsx)(o.Avatar,{src:r,alt:e||"User",fallback:y,size:32,className:"bg-[var(--rb-blue)] text-white"}),(0,a.jsx)("span",{className:"hidden max-w-[160px] truncate text-sm font-semibold text-current sm:inline",children:e||"User"})]}),u?(0,a.jsxs)("div",{role:"menu",className:"absolute right-0 z-50 mt-2 w-56 overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",children:[(0,a.jsxs)("div",{className:"border-b border-[var(--rb-border)] px-3 py-2",children:[(0,a.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:e||"User"}),(0,a.jsx)("div",{className:"truncate text-xs text-zinc-600",children:t||""})]}),(0,a.jsxs)("div",{className:"py-1",children:[j?(0,a.jsx)(s.default,{role:"menuitem",className:"block px-3 py-2 text-sm text-zinc-700 hover:bg-[var(--rb-surface-muted)]",href:p,onClick:()=>f(!1),children:"Security"}):null,(0,a.jsx)(s.default,{role:"menuitem",className:"block px-3 py-2 text-sm text-zinc-700 hover:bg-[var(--rb-surface-muted)]",href:c,onClick:()=>f(!1),children:"Profile"}),(0,a.jsx)(s.default,{role:"menuitem",className:"block px-3 py-2 text-sm text-zinc-700 hover:bg-[var(--rb-surface-muted)]",href:d,onClick:()=>f(!1),children:"Settings"}),(0,a.jsx)("div",{className:"my-1 h-px bg-[var(--rb-border)]"}),(0,a.jsx)("button",{role:"menuitem",type:"button",disabled:x,className:(0,l.cn)("block w-full px-3 py-2 text-left text-sm",x?"text-zinc-400":"text-zinc-700 hover:bg-[var(--rb-surface-muted)]"),onClick:()=>{N()},children:x?"Logging outâ€¦":"Logout"})]})]}):null]})}var u=e.i(35884);let f=(0,u.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var x=e.i(327),b=e.i(2865),v=e.i(54133);let g=(0,u.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),w=(0,u.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),y=(0,u.default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var j=e.i(35508),N=e.i(43938),k=e.i(17296),$=e.i(29150);let A=(0,u.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),S=(0,u.default)("layout-dashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),C=(0,u.default)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);var M=e.i(13221),z=e.i(66730),P=e.i(10459),_=e.i(35169),B=e.i(55201),E=e.i(67494);let D=(0,u.default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var U=e.i(24744),T=e.i(45155);let I=(0,u.default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),L=i.default.createContext(null);function O(){let e=i.default.useContext(L);if(!e)throw Error("useDashboardHeader must be used within <DashboardShell />");return e}function R({name:e,className:t}){let s=(0,l.cn)("h-4 w-4 shrink-0",t),i={home:A,admin:I,dashboard:S,building:x.Building2,calendar:v.Calendar,wrench:U.Wrench,file:$.FileText,services:P.Sparkles,devices:T.Laptop,tags:B.Tag,parts:C,payments:k.CreditCard,reports:f,calculator:b.Calculator,users:D,review:_.Star,clock:N.Clock,printer:M.Printer,shield:I,profile:E.User,settings:z.Settings,default:j.CircleHelp}[e]??j.CircleHelp;return(0,a.jsx)(i,{className:s,"aria-hidden":!0})}function H({className:e}){return(0,a.jsx)(y,{className:(0,l.cn)("h-4 w-4 shrink-0",e),"aria-hidden":!0})}function F({className:e}){return(0,a.jsx)(w,{className:(0,l.cn)("h-4 w-4 shrink-0",e),"aria-hidden":!0})}function V({className:e}){return(0,a.jsx)(g,{className:(0,l.cn)("h-4 w-4 shrink-0",e),"aria-hidden":!0})}function q({title:e,children:u}){let f=(0,r.useAuth)(),x=(0,n.usePathname)(),[b,v]=i.default.useState(null),g=f.tenant?.slug??null,w=!!(!f.isAdmin&&g&&f.tenant&&!f.tenant.setup_completed_at),y=g?`/${g}/setup`:"/app",j=f.user?.name??"",N=f.user?.email??"",k=f.user?.avatar_url??null,$=j.split(" ").filter(Boolean).slice(0,2).map(e=>e[0]?.toUpperCase()).join("").slice(0,2),A=g?`/app/${g}`:null,[S,C]=i.default.useState([]),[M,z]=i.default.useState(null),[P,_]=i.default.useState(!1),[B,E]=i.default.useState(null);i.default.useEffect(()=>{let e=!0;return async function(){if(g&&!f.isAdmin){_(!0);try{let[a,t]=await Promise.all([(0,c.apiFetch)(`/api/${g}/app/branches`),(0,c.apiFetch)(`/api/${g}/app/branches/current`)]);if(!e)return;C(Array.isArray(a.branches)?a.branches:[]),z("number"==typeof t.active_branch_id?t.active_branch_id:null)}catch{if(!e)return;C([]),z(null)}finally{if(!e)return;_(!1)}}}(),()=>{e=!1}},[f.isAdmin,g]);let D=i.default.useMemo(()=>{let e=S.find(e=>e.id===M)??null;return e?`${e.code} - ${e.name}`:P?"Loading...":"Select branch"},[M,S,P]),U=i.default.useMemo(()=>S.find(e=>e.id===M)??null,[M,S]);async function T(e){if(g){E(e);try{await (0,c.apiFetch)(`/api/${g}/app/branches/active`,{method:"POST",body:{branch_id:e}}),z(e),window.dispatchEvent(new CustomEvent("rb:branch-changed",{detail:{branchId:e}}))}finally{E(null)}}}let I=i.default.useMemo(()=>[{items:[{label:"Businesses",href:"/admin/businesses",icon:"admin",show:f.can("admin.tenants.read")}]},{title:"Overview",items:[{label:"Dashboard",href:"/admin",icon:"dashboard",show:f.can("admin.access")},{label:f.can("admin.access")?"Business Dashboard":"Dashboard",href:A??"/app",icon:"dashboard",show:!!A&&f.can("dashboard.view")},{label:"Appointments",href:g?`/app/${g}/calendar`:"/app",icon:"calendar",show:!!A&&f.can("appointments.view")},{label:"Business Settings",href:g?`/app/${g}/business-settings`:"/app",icon:"services",show:f.isAuthenticated&&!!g&&f.can("settings.manage")},{label:"Statuses",href:g?`/app/${g}/business-settings?section=job-statuses`:"/app",icon:"tags",show:f.isAuthenticated&&!!g&&f.can("settings.manage")&&f.can("jobs.view")},{label:"Users",href:g?`/app/${g}/users`:"/app",icon:"users",show:f.isAuthenticated&&!!g&&f.can("users.manage")},{label:"Roles",href:g?`/app/${g}/roles`:"/app",icon:"shield",show:f.isAuthenticated&&!!g&&f.can("roles.manage")},{label:"Branches",href:g?`/app/${g}/branches`:"/app",icon:"home",show:f.isAuthenticated&&!!g&&f.can("branches.manage")},{label:"Settings",href:f.isAdmin?"/admin/settings":g?`/app/${g}/settings`:"/app",icon:"settings",show:f.isAuthenticated&&f.isAdmin&&f.can("settings.manage")},{label:"Security",href:g?`/app/${g}/security`:"/app",icon:"shield",show:f.isAuthenticated&&!!g&&f.can("security.manage")}]},{title:"Billing",items:[{label:"Plans",href:"/admin/billing/plans",icon:"payments",show:f.can("admin.billing.read")},{label:"Plan Builder",href:"/admin/billing/builder",icon:"file",show:f.can("admin.billing.read")},{label:"Intervals",href:"/admin/billing/intervals",icon:"calendar",show:f.can("admin.billing.read")},{label:"Entitlements",href:"/admin/billing/entitlements",icon:"tags",show:f.can("admin.billing.read")},{label:"Currencies",href:"/admin/billing/currencies",icon:"payments",show:f.can("admin.billing.read")},{label:"Business Billing",href:"/admin/billing/businesses",icon:"users",show:f.can("admin.billing.read")&&f.can("admin.tenants.read")}]},{title:"Operations",items:[{label:"Jobs",href:g?`/app/${g}/jobs`:"/app",icon:"wrench",show:!!A&&f.can("jobs.view")},{label:"Estimates",href:g?`/app/${g}/estimates`:"/app",icon:"file",show:!!A&&f.can("estimates.view")},{label:"Services",href:g?`/app/${g}/services`:"/app",icon:"services",show:!!A&&f.can("services.view")},{label:"Service Types",href:g?`/app/${g}/service-types`:"/app",icon:"services",show:!!A&&f.can("service_types.view")},{label:"Service Price Overrides",href:g?`/app/${g}/service-price-overrides`:"/app",icon:"services",show:f.isAuthenticated&&!!g&&f.can("settings.manage")}]},{title:"Inventory",items:[{label:"Devices",href:g?`/app/${g}/devices`:"/app",icon:"devices",show:!!A&&f.can("devices.view")},{label:"Device Brands",href:g?`/app/${g}/device-brands`:"/app",icon:"tags",show:!!A&&f.can("device_brands.view")},{label:"Device Types",href:g?`/app/${g}/device-types`:"/app",icon:"tags",show:!!A&&f.can("device_types.view")},{label:"Device Fields",href:g?`/app/${g}/device-field-definitions`:"/app",icon:"tags",show:f.isAuthenticated&&!!g&&f.can("settings.manage")},{label:"Parts",href:g?`/app/${g}/parts`:"/app",icon:"parts",show:!!A&&f.can("parts.view")},{label:"Part Brands",href:g?`/app/${g}/part-brands`:"/app",icon:"tags",show:!!A&&f.can("parts.view")},{label:"Part Types",href:g?`/app/${g}/part-types`:"/app",icon:"tags",show:!!A&&f.can("parts.view")}]},{title:"Finance",items:[{label:"Payments",href:g?`/app/${g}/payments`:"/app",icon:"payments",show:!!A&&f.can("payments.view")},{label:"Reports",href:g?`/app/${g}/reports`:"/app",icon:"reports",show:!!A&&f.can("reports.view")},{label:"Expenses",href:g?`/app/${g}/expenses`:"/app",icon:"calculator",show:!!A&&f.can("expenses.view")},{label:"Expense Categories",href:g?`/app/${g}/expense-categories`:"/app",icon:"calculator",show:!!A&&f.can("expense_categories.view")}]},{title:"People",items:[{label:"Customers",href:g?`/app/${g}/clients`:"/app",icon:"users",show:!!A&&f.can("clients.view")},{label:"Customer Devices",href:g?`/app/${g}/customer-devices`:"/app",icon:"devices",show:!!A&&f.can("customer_devices.view")},{label:"Technicians",href:g?`/app/${g}/technicians`:"/app",icon:"users",show:!!A&&f.can("technicians.view")},{label:"Managers",href:g?`/app/${g}/managers`:"/app",icon:"users",show:!!A&&f.can("managers.view")},{label:"Users",href:g?`/app/${g}/users`:"/app",icon:"users",show:!!g&&f.can("users.manage")},{label:"Roles",href:g?`/app/${g}/roles`:"/app",icon:"shield",show:!!g&&f.can("roles.manage")},{label:"Branches",href:g?`/app/${g}/branches`:"/app",icon:"home",show:!!g&&f.can("branches.manage")}]},{title:"Quality",items:[{label:"Job Reviews",href:g?`/app/${g}/job-reviews`:"/app",icon:"review",show:!!A&&f.can("job_reviews.view")}]},{title:"Tools",items:[{label:"Time Logs",href:g?`/app/${g}/time-logs`:"/app",icon:"clock",show:!!A&&f.can("time_logs.view")},{label:"Manage Hourly Rates",href:g?`/app/${g}/hourly-rates`:"/app",icon:"clock",show:!!A&&f.can("hourly_rates.view")},{label:"Reminder Logs",href:g?`/app/${g}/reminder-logs`:"/app",icon:"clock",show:!!A&&f.can("reminder_logs.view")},{label:"Print Screen",href:g?`/app/${g}/print-screen`:"/app",icon:"printer",show:!!A&&f.can("print_screen.view")}]},{title:"Account",items:[{label:"Security",href:g?`/app/${g}/security`:"/app",icon:"shield",show:!!g&&f.can("security.manage")},{label:"Profile",href:"/app/profile",icon:"users",show:f.isAuthenticated&&f.can("profile.manage")},{label:"Settings",href:f.isAdmin?"/admin/settings":"/app/settings",icon:"settings",show:f.isAuthenticated&&f.isAdmin&&f.can("settings.manage")},{label:"Business Settings",href:g?`/app/${g}/business-settings`:"/app",icon:"services",show:f.isAuthenticated&&!!g&&f.can("settings.manage")}]}],[f,A,g]),O=i.default.useMemo(()=>{let e=I.flatMap(e=>e.items).filter(e=>e.show).map(e=>"/"===e.href?"/"===x?{href:e.href,score:1}:{href:e.href,score:-1}:x===e.href||x.startsWith(`${e.href}/`)?{href:e.href,score:e.href.length}:{href:e.href,score:-1}).filter(e=>e.score>=0).sort((e,a)=>a.score-e.score);return e[0]?.href??null},[I,x]),q=i.default.useMemo(()=>I.map((e,a)=>{let t=e.title?`section:${e.title}`:`section:${a}`,s=e.items.filter(e=>e.show),i=!!O&&s.some(e=>e.href===O);return{key:t,title:e.title,items:s,hasActiveItem:i}}).filter(e=>e.items.length>0),[O,I]),[W,J]=i.default.useState({}),K=i.default.useMemo(()=>{let e=f.user?.email||f.user?.name||"anon";return`rb.sidebar.openSections:v1:${e}`},[f.user?.email,f.user?.name]);i.default.useEffect(()=>{try{let e=window.localStorage.getItem(K);if(!e)return;let a=JSON.parse(e);a&&"object"==typeof a&&J(a)}catch{}},[K]),i.default.useEffect(()=>{J(e=>{let a=q.find(e=>!!e.title&&e.hasActiveItem),t={...e},s=!1,i=q.find(e=>"Overview"===e.title);if(i&&void 0===t[i.key]&&(t[i.key]=!0,s=!0),!a)return s?t:e;for(let e of q){if(!e.title||"Overview"===e.title)continue;let i=e.key===a.key;t[e.key]!==i&&(t[e.key]=i,s=!0)}return s?t:e})},[q]),i.default.useEffect(()=>{try{window.localStorage.setItem(K,JSON.stringify(W))}catch{}},[W,K]);let Q=(()=>{if("/admin"===x)return"Dashboard";if(x.startsWith("/app/")){let e=x.split("/").filter(Boolean);return 2===e.length?"Dashboard":e.length>=3?e[2].split("-").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"App"}return"/"===x?"Home":"/login"===x?"Login":"/register"===x?"Register":"/verify-email"===x?"Verify Email":(x.split("/").filter(Boolean).slice(-1)[0]??"").split("-").filter(Boolean).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")||"Page"})(),Y=x.startsWith("/app/")?`App / ${Q}`:x.startsWith("/admin")?`Admin / ${Q}`:Q,Z=f.isAdmin?"/admin/profile":g?`/app/${g}/profile`:"/app",G=f.isAdmin?"/admin/settings":g?`/app/${g}/settings`:"/app",X=g&&f.can("security.manage")?`/app/${g}/security`:null,ee=i.default.useMemo(()=>({setHeader:v}),[]);return(0,a.jsx)(L.Provider,{value:ee,children:(0,a.jsx)("div",{className:"min-h-screen bg-[var(--rb-surface-muted)] text-[var(--rb-text)]",children:(0,a.jsxs)("div",{className:"flex min-h-screen",children:[(0,a.jsxs)("aside",{className:"sticky top-0 flex h-screen w-[280px] shrink-0 flex-col bg-[var(--rb-blue)] text-white",children:[(0,a.jsx)("div",{className:"border-b border-white/10 bg-white px-4 py-5 text-[var(--rb-text)]",children:(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsx)(t.default,{alt:"99smartx",src:"/brand/repair-buddy-logo.png",width:140,height:36,priority:!0})})}),(0,a.jsx)("nav",{className:"flex flex-1 flex-col gap-3 overflow-y-auto px-2 py-3",children:q.map(e=>{if(!e.title)return(0,a.jsx)("div",{className:"space-y-1",children:e.items.map(e=>{let t=!!O&&e.href===O;return(0,a.jsx)(s.default,{href:e.href,className:(0,l.cn)("block rounded-[var(--rb-radius-sm)] px-3 py-2 text-sm font-medium",t?"bg-[var(--rb-orange)] text-white":"text-white/90 hover:bg-[var(--rb-orange)] hover:text-white"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(R,{name:e.icon??"default",className:"text-white/80"}),(0,a.jsx)("span",{className:"min-w-0 truncate",children:e.label})]})},e.href)})},e.key);let t=W[e.key]??!1,i=`sidebar-${e.key.replace(/[^a-zA-Z0-9_-]/g,"-")}`;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{J(a=>{let t=!a[e.key],s={...a};for(let a of q)a.title&&("Overview"===e.title||"Overview"!==a.title)&&(s[a.key]=!1);return s[e.key]=t,s})},className:(0,l.cn)("flex w-full items-center justify-between rounded-[var(--rb-radius-sm)] px-3 py-2 text-left","text-[11px] font-semibold uppercase tracking-wider",e.hasActiveItem?"bg-white/10 text-white":"text-white/70 hover:bg-white/10 hover:text-white"),"aria-expanded":t,"aria-controls":i,children:[(0,a.jsx)("span",{children:e.title}),(0,a.jsx)(H,{className:(0,l.cn)("text-white/70 transition-transform motion-reduce:transition-none",t?"rotate-90":"rotate-0")})]}),(0,a.jsx)("div",{id:i,"aria-hidden":!t,className:(0,l.cn)("overflow-hidden pl-2","transition-[max-height,opacity] duration-200 ease-out motion-reduce:transition-none",t?"max-h-[560px] opacity-100":"max-h-0 opacity-0"),children:(0,a.jsx)("div",{className:(0,l.cn)("space-y-1",t?"pt-1":"pt-0",t?"":"pointer-events-none"),children:e.items.map(e=>{let t=!!O&&e.href===O;return(0,a.jsx)(s.default,{href:e.href,className:(0,l.cn)("block rounded-[var(--rb-radius-sm)] px-3 py-2 text-sm font-medium",t?"bg-[var(--rb-orange)] text-white":"text-white/90 hover:bg-[var(--rb-orange)] hover:text-white"),children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(R,{name:e.icon??"default",className:"text-white/80"}),(0,a.jsx)("span",{className:"min-w-0 truncate",children:e.label})]})},e.href)})})})]},e.key)})}),(0,a.jsx)("div",{className:"border-t border-white/10 p-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 rounded-[var(--rb-radius-md)] bg-white/5 px-3 py-3",children:[(0,a.jsx)(o.Avatar,{src:k,alt:j||"User",fallback:$||"U",size:36,className:"bg-white/15"}),(0,a.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,a.jsx)("div",{className:"truncate text-sm font-semibold text-white",children:j||"User"}),(0,a.jsx)("div",{className:"truncate text-xs text-white/70",children:N||""})]})]})})]}),(0,a.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col",children:[(0,a.jsxs)("div",{className:"mx-auto w-full max-w-6xl px-4",children:[f.isImpersonating?(0,a.jsx)(d.Card,{className:"mt-6 border border-amber-200 bg-amber-50 px-5 py-3",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-amber-900",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Impersonation active."})," ",(0,a.jsxs)("span",{children:["Acting as ",f.user?.email,f.actorUser?.email?` (by ${f.actorUser.email})`:"","."]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(p.Button,{variant:"outline",size:"sm",onClick:async()=>{let e=f.impersonation?.session_id;try{e&&await (0,c.apiFetch)(`/api/admin/impersonation/${e}/stop`,{method:"POST",impersonationSessionId:null,body:{reason:"ended_by_user"}})}finally{f.clearImpersonation(),await f.refresh()}},children:"Exit impersonation"})})]})}):null,(0,a.jsx)(d.Card,{className:"mt-6 px-5 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:b?.breadcrumb??Y}),(0,a.jsx)("div",{className:"mt-1 truncate text-lg font-semibold text-[var(--rb-text)]",children:b?.title??Q}),b?.subtitle?(0,a.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:b.subtitle}):null]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[!f.isAdmin&&g?(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)(h.DropdownMenu,{align:"right",trigger:({open:e,toggle:t})=>{let s=P||null!==B||0===S.length;return(0,a.jsxs)("button",{type:"button",onClick:t,disabled:s,className:(0,l.cn)("group inline-flex h-9 max-w-[320px] items-center gap-2.5 rounded-[var(--rb-radius-sm)] border px-2.5","bg-white text-zinc-700 border-zinc-200","hover:bg-[var(--rb-surface-muted)]","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)]",s?"pointer-events-none opacity-60":""),"aria-haspopup":"menu","aria-expanded":e,"aria-label":"Active shop",children:[(0,a.jsx)(R,{name:"building",className:"h-4 w-4 text-zinc-500"}),(0,a.jsx)("span",{className:"min-w-0 flex-1 text-left",children:(0,a.jsx)("span",{className:"block truncate text-sm font-semibold text-[var(--rb-text)]",children:U?.name||D})}),(0,a.jsx)(F,{className:(0,l.cn)("text-zinc-500 transition-transform",e?"rotate-180":"rotate-0")})]})},children:({close:e})=>{let t=S.filter(e=>e.is_active);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"px-3 py-2",children:[(0,a.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wider text-zinc-500",children:"Shop"}),(0,a.jsx)("div",{className:"mt-1 truncate text-sm font-semibold text-[var(--rb-text)]",children:U?.name||D})]}),(0,a.jsx)(h.DropdownMenuSeparator,{}),P?(0,a.jsx)(h.DropdownMenuItem,{onSelect:()=>e(),disabled:!0,children:"Loading shops..."}):0===t.length?(0,a.jsx)(h.DropdownMenuItem,{onSelect:()=>e(),disabled:!0,children:"No shops available"}):t.map(t=>{let s=t.id===M,i=B===t.id;return(0,a.jsx)(h.DropdownMenuItem,{disabled:null!==B,onSelect:()=>{e(),i||s||T(t.id)},children:(0,a.jsxs)("span",{className:"flex w-full items-center justify-between gap-3",children:[(0,a.jsxs)("span",{className:"min-w-0",children:[(0,a.jsx)("span",{className:"block truncate text-sm font-medium text-zinc-800",children:t.name}),(0,a.jsx)("span",{className:"block truncate text-[11px] font-medium text-zinc-500",children:t.code})]}),(0,a.jsx)("span",{className:"shrink-0",children:i?(0,a.jsx)("span",{className:"text-xs font-medium text-zinc-500",children:"Switching..."}):s?(0,a.jsx)(V,{className:"text-[var(--rb-blue)]"}):null})]})},t.id)})]})}})}):null,b?.actions?(0,a.jsx)("div",{className:"flex items-center gap-2",children:b.actions}):null,(0,a.jsx)(m,{userName:j,userEmail:N,avatarUrl:k,profileHref:Z,settingsHref:G,securityHref:X,onLogout:f.logout})]})]})})]}),w?(0,a.jsx)(d.Card,{className:"mx-auto mt-6 w-full max-w-6xl px-5 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{className:"min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Finish setup"}),(0,a.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Your workspace isn't fully configured yet. Some features may be limited until setup is complete."})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(s.default,{href:y,className:"inline-flex h-10 items-center justify-center whitespace-nowrap rounded-[var(--rb-radius-sm)] bg-[var(--rb-blue)] px-4 text-sm font-medium text-white transition-colors hover:opacity-90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--rb-orange)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",children:"Resume setup"})})]})}):null,(0,a.jsx)("main",{className:"mx-auto mt-6 w-full max-w-6xl px-4 pb-8",children:u})]})]})})})}e.s(["DashboardShell",()=>q,"useDashboardHeader",()=>O],24273)},62473,e=>{"use strict";var a=e.i(48277),t=e.i(24273),s=e.i(77252);function i({children:e}){return(0,a.jsx)(s.RequireAuth,{requiredPermission:"admin.access",children:(0,a.jsx)(t.DashboardShell,{title:"Admin dashboard",children:e})})}e.s(["default",()=>i])}]);