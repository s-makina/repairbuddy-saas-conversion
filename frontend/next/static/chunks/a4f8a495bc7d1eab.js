(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,76393,e=>{"use strict";var t=e.i(48277),s=e.i(30668),i=e.i(42588),l=e.i(16506),a=e.i(96086),r=e.i(97340),n=e.i(72015),d=e.i(63571),o=e.i(9693),c=e.i(26550),m=e.i(68501),u=e.i(40709),x=e.i(43901),v=e.i(24765),h=e.i(1831),b=e.i(14575),p=e.i(30765);function g(e){let t=Number(e);return Number.isFinite(t)&&t>0?Math.trunc(t):null}function f(e){if(e instanceof h.ApiError){let t=e.data;if(t&&"object"==typeof t&&"errors"in t){let e=t.errors;if(e&&"object"==typeof e){let t=Object.values(e)[0];if(Array.isArray(t)&&"string"==typeof t[0])return t[0]}}return e.message}return e instanceof Error?e.message:"Booking failed."}function j(){return(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Skeleton,{className:"h-6 w-56 rounded-[var(--rb-radius-sm)]"}),(0,t.jsx)(x.Skeleton,{className:"h-4 w-4/5 rounded-[var(--rb-radius-sm)]"})]}),(0,t.jsxs)("div",{className:"grid gap-4 lg:grid-cols-[280px_minmax(0,1fr)]",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(x.Skeleton,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,t.jsx)(x.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,t.jsx)(x.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,t.jsx)(x.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"})]}),(0,t.jsx)(x.Skeleton,{className:"h-28 w-full rounded-[var(--rb-radius-md)]"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(x.Skeleton,{className:"h-6 w-64 rounded-[var(--rb-radius-sm)]"}),(0,t.jsx)(x.Skeleton,{className:"h-4 w-full rounded-[var(--rb-radius-sm)]"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(x.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,t.jsx)(x.Skeleton,{className:"h-10 w-full rounded-[var(--rb-radius-md)]"}),(0,t.jsx)(x.Skeleton,{className:"h-10 w-11/12 rounded-[var(--rb-radius-md)]"}),(0,t.jsx)(x.Skeleton,{className:"h-10 w-10/12 rounded-[var(--rb-radius-md)]"})]}),(0,t.jsx)("div",{className:"flex items-center justify-end gap-2 pt-2",children:(0,t.jsx)(x.Skeleton,{className:"h-10 w-28 rounded-[var(--rb-radius-md)]"})})]})]})]})}function N(){let e=(0,a.useParams)(),x="string"==typeof e.tenant?e.tenant:"",[N,y]=s.default.useState(!0),[S,w]=s.default.useState(null),[k,C]=s.default.useState(null),[I,_]=s.default.useState(1),[z,B]=s.default.useState(null),[D,A]=s.default.useState("wizard"),[P,M]=s.default.useState(""),[T,O]=s.default.useState(""),[F,$]=s.default.useState(""),[E,L]=s.default.useState(""),[R,U]=s.default.useState(""),[q,J]=s.default.useState(""),[Q,K]=s.default.useState(""),[Y,G]=s.default.useState([]),[W,H]=s.default.useState(""),[V,X]=s.default.useState(1),[Z,ee]=s.default.useState(""),[et,es]=s.default.useState(""),[ei,el]=s.default.useState(""),[ea,er]=s.default.useState(""),[en,ed]=s.default.useState(""),[eo,ec]=s.default.useState(""),[em,eu]=s.default.useState(""),[ex,ev]=s.default.useState(""),[eh,eb]=s.default.useState(""),[ep,eg]=s.default.useState(""),[ef,ej]=s.default.useState(""),[eN,ey]=s.default.useState(""),[eS,ew]=s.default.useState(""),[ek,eC]=s.default.useState(""),[eI,e_]=s.default.useState(""),[ez,eB]=s.default.useState(!1),[eD,eA]=s.default.useState(""),[eP,eM]=s.default.useState([]),[eT,eO]=s.default.useState(!1),[eF,e$]=s.default.useState(null),[eE,eL]=s.default.useState([]),[eR,eU]=s.default.useState([]),[eq,eJ]=s.default.useState([]),[eQ,eK]=s.default.useState([]),[eY,eG]=s.default.useState(!1),[eW,eH]=s.default.useState(null),[eV,eX]=s.default.useState(null);s.default.useEffect(()=>{let e=!0;return async function(){try{if(y(!0),w(null),!x)return void C(null);let t=await (0,h.apiFetch)(`/api/t/${x}/booking/config`,{token:null,impersonationSessionId:null});if(!e)return;C(t);let s=t?.booking?.publicBookingUiStyle;"wizard"===s||"images"===s?A(s):A("wizard");let i=(Array.isArray(t?.devicesBrands?.additionalDeviceFields)?t.devicesBrands.additionalDeviceFields:[]).map(e=>{let t="string"==typeof e?.id?e.id:"",s="string"==typeof e?.label?e.label:"",i="boolean"!=typeof e?.displayInBookingForm||e.displayInBookingForm;return t&&s&&i?{key:t,label:s,value_text:""}:null}).filter(e=>!!e);G(i);let l=(t?.general?.defaultCountry??"").trim();eC(l),t?.booking?.defaultType&&M(t.booking.defaultType),t?.booking?.defaultBrand&&O(t.booking.defaultBrand),t?.booking?.defaultDevice&&$(t.booking.defaultDevice)}catch(t){if(!e)return;w(f(t)),C(null)}finally{if(!e)return;y(!1)}}(),()=>{e=!1}},[x]),s.default.useEffect(()=>{let e=!0;return async function(){try{if(eO(!0),e$(null),!x)return void eL([]);let t=await (0,h.apiFetch)(`/api/t/${x}/booking/device-types`,{token:null,impersonationSessionId:null});if(!e)return;eL(Array.isArray(t?.device_types)?t.device_types:[])}catch(t){if(!e)return;e$(f(t)),eL([])}finally{if(!e)return;eO(!1)}}(),()=>{e=!1}},[x]),s.default.useEffect(()=>{let e=!0;return async function(){try{if(e$(null),!x)return void eU([]);let t=g(P),s=await (0,h.apiFetch)(`/api/t/${x}/booking/brands${t?`?typeId=${t}`:""}`,{token:null,impersonationSessionId:null});if(!e)return;eU(Array.isArray(s?.brands)?s.brands:[])}catch(t){if(!e)return;e$(f(t)),eU([])}}(),()=>{e=!1}},[x,P]),s.default.useEffect(()=>{let e=!0;return async function(){try{if(e$(null),!x)return void eJ([]);let t=g(P),s=g(T),i=new URLSearchParams;t&&i.set("typeId",String(t)),s&&i.set("brandId",String(s));let l=await (0,h.apiFetch)(`/api/t/${x}/booking/devices${i.toString()?`?${i.toString()}`:""}`,{token:null,impersonationSessionId:null});if(!e)return;eJ(Array.isArray(l?.devices)?l.devices:[])}catch(t){if(!e)return;e$(f(t)),eJ([])}}(),()=>{e=!1}},[x,P,T]),s.default.useEffect(()=>{let e=!0;return async function(){try{if(e$(null),!x||!k)return void eK([]);let t=g(F),s=new URLSearchParams;t&&s.set("deviceId",String(t)),s.set("mode",k.booking.publicBookingMode);let i=await (0,h.apiFetch)(`/api/t/${x}/booking/services?${s.toString()}`,{token:null,impersonationSessionId:null});if(!e)return;if(Array.isArray(i?.groups))eK(i.groups.map(e=>({service_type:e.service_type??null,services:Array.isArray(e.services)?e.services:[]})));else{let e=Array.isArray(i?.services)?i.services:[],t={};for(let s of e){let e=s.service_type?.id?String(s.service_type.id):"none";t[e]||(t[e]={service_type:s.service_type??null,services:[]}),t[e].services.push(s)}eK(Object.values(t))}}catch(t){if(!e)return;e$(f(t)),eK([])}}(),()=>{e=!1}},[x,F,k]);let eZ=!k||!k.booking.turnOffOtherDeviceBrand,e0=!k||!k.booking.turnOffOtherService,e2=(k?.general?.gdprAcceptanceText??"").trim(),e1=e2.length>0,e3=s.default.useMemo(()=>{let e=g(W);if(!e)return null;for(let t of eQ){let s=t.services.find(t=>t.id===e);if(s)return s}return null},[eQ,W]),e5=s.default.useMemo(()=>{let e=g(F);return e?eq.find(t=>t.id===e)?.model??"":E.trim()},[eq,F,E]),e4=s.default.useMemo(()=>g(W)?e3?.name??"":Z.trim(),[Z,e3,W]),e6=!!eY||(1===I?!!e7():2===I?!!e8():3===I&&!!te()),e9=x&&eV?.case_number?`/t/${x}/status?caseNumber=${encodeURIComponent(eV.case_number)}`:"";function e7(){return eZ||g(F)?eZ&&!g(F)&&0===E.trim().length?"Please select a device or enter a device label.":null:"Please select a device."}function e8(){let e=g(W);return e&&Z.trim().length>0?"Choose a service or enter other service, not both.":e0||e?e0&&!e&&0===Z.trim().length?"Please select a service or enter other service.":V<1?"Quantity must be at least 1.":null:"Please select a service."}function te(){return k?.booking?.publicBookingMode==="warranty"&&0===eD.trim().length?"Date of purchase is required.":0===ei.trim().length?"First name is required.":0===ea.trim().length?"Last name is required.":0===en.trim().length?"Email is required.":0===eI.trim().length?"Job details are required.":e1&&!ez?"Please accept GDPR.":null}async function tt(){if(eH(null),B(null),!x)return void eH("Tenant slug is required in the URL.");if(!k)return void eH("Booking configuration is not loaded.");let e=te();if(e)return void B(e);let t=g(F),s=g(W),i=Number.isFinite(V)?Math.trunc(V):1,l={mode:k.booking.publicBookingMode,gdprAccepted:e1?ez:void 0,jobDetails:eI.trim(),warranty:"warranty"===k.booking.publicBookingMode?{dateOfPurchase:eD.trim()}:void 0,customer:{firstName:ei.trim(),lastName:ea.trim(),userEmail:en.trim(),phone:eo.trim().length>0?eo.trim():null,company:em.trim().length>0?em.trim():null,taxId:ex.trim().length>0?ex.trim():null,addressLine1:eh.trim().length>0?eh.trim():null,addressLine2:ep.trim().length>0?ep.trim():null,city:ef.trim().length>0?ef.trim():null,state:eN.trim().length>0?eN.trim():null,postalCode:eS.trim().length>0?eS.trim():null,country:ek.trim().length>0?ek.trim():null},devices:[{device_id:t,device_label:t?null:E.trim().length>0?E.trim():null,serial:k.booking.turnOffIdImeiInBooking?null:R.trim().length>0?R.trim():null,pin:k.devicesBrands.enablePinCodeField&&q.trim().length>0?q.trim():null,notes:Q.trim().length>0?Q.trim():null,extra_fields:Y.map(e=>({key:e.key,label:e.label,value_text:e.value_text.trim().length>0?e.value_text.trim():null})).filter(e=>"string"==typeof e.key&&e.key.trim().length>0),services:s?[{service_id:s,qty:i}]:[],other_service:Z.trim().length>0?Z.trim():null}]},a=new FormData;for(let e of(a.set("payload_json",JSON.stringify(l)),eP.slice(0,5)))a.append("attachments[]",e);eG(!0);try{let e=await (0,h.apiFetch)(`/api/t/${x}/booking/submit`,{method:"POST",body:a,token:null,impersonationSessionId:null});eX(e);try{window.localStorage.setItem(`rb.portal.session:v1:${x}`,JSON.stringify({job_id:String(e.id),case_number:e.case_number}))}catch{}}catch(e){eH(f(e))}finally{eG(!1)}}return(0,t.jsx)(r.PublicPageShell,{badge:(0,t.jsxs)("span",{className:"inline-flex items-center gap-2",children:[(0,t.jsx)("span",{children:"RepairBuddy"}),x?(0,t.jsx)(m.Badge,{variant:"info",children:x}):null]}),actions:x?(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.default,{href:`/t/${x}/status`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Status check"}),(0,t.jsx)(l.default,{href:`/t/${x}/portal`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Portal"})]}):null,centerContent:!0,children:(0,t.jsx)("div",{className:"mx-auto w-full max-w-5xl px-4",children:(0,t.jsx)(n.Card,{className:"shadow-none",children:(0,t.jsx)(n.CardContent,{className:"pt-6",children:(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-xl font-semibold text-[var(--rb-text)]",children:"Book an appointment"}),(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Tell us what you need and we’ll create your booking and send you a case number."})]}),x?null:(0,t.jsx)(d.Alert,{variant:"warning",title:"Missing tenant",children:"Tenant slug is required in the URL."}),k?.disabled?(0,t.jsx)(d.Alert,{variant:"warning",title:"Booking disabled",children:"This business has disabled public booking."}):null,S?(0,t.jsx)(d.Alert,{variant:"danger",title:"Could not load booking settings",children:S}):null,eF?(0,t.jsx)(d.Alert,{variant:"danger",title:"Could not load catalog",children:eF}):null,N||eT?(0,t.jsx)(j,{}):null,eW?(0,t.jsx)(d.Alert,{variant:"danger",title:"Booking failed",children:eW}):null,z?(0,t.jsx)(d.Alert,{variant:"warning",title:"Please review this step",children:z}):null,eV?(0,t.jsx)(d.Alert,{variant:"success",title:"Booking submitted",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:["Case number: ",(0,t.jsx)("span",{className:"font-semibold",children:eV.case_number})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)(l.default,{href:e9,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Status check"}),(0,t.jsx)(l.default,{href:`/t/${x}/portal`,className:"text-sm font-semibold text-[var(--rb-blue)] hover:underline",children:"Portal"})]})]})}):null,N||eT||S||eF||!k||k.disabled||eV?null:(0,t.jsxs)(v.WizardShell,{steps:[{id:1,navTitle:"Device",navDescription:"Choose the device you want to book for.",pageTitle:"Choose your device",pageDescription:"Select a type, brand and model (or enter it manually).",footerTitle:"Device"},{id:2,navTitle:"Service",navDescription:"Pick what you need.",pageTitle:"Select a service",pageDescription:"Choose one service for this device.",footerTitle:"Service"},{id:3,navTitle:"Details",navDescription:"Your contact details and notes.",pageTitle:"Your details",pageDescription:"Add your info so we can confirm and follow up.",footerTitle:"Details"},{id:4,navTitle:"Review",navDescription:"Confirm and submit.",pageTitle:"Review & submit",pageDescription:"Double-check everything before submitting.",footerTitle:"Review"}],step:I,disabled:eY,nextDisabled:e6,sidebarTitle:"Booking steps",sidebarDescription:"Complete the steps to submit your booking.",sidebarAriaLabel:"Booking steps",sidebarFooter:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-zinc-500",children:"Your booking"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Device"}),(0,t.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:e5||"—"})]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",type:"button",disabled:eY,onClick:()=>_(1),children:"Edit"})]}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Service"}),(0,t.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:e4||"—"}),(0,t.jsxs)("div",{className:"mt-0.5 text-xs text-zinc-500",children:["Qty: ",Math.max(1,Number.isFinite(V)?Math.trunc(V):1)]}),!k.booking.turnOffServicePrice&&e3?.price?(0,t.jsxs)("div",{className:"mt-0.5 text-xs text-zinc-500",children:["Starting: ",(0,p.formatMoney)({amountCents:e3.price.amount_cents*Math.max(1,Math.trunc(V||1)),currency:e3.price.currency})]}):null]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",type:"button",disabled:eY,onClick:()=>_(2),children:"Edit"})]}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Contact"}),(0,t.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--rb-text)]",children:ei.trim()||ea.trim()?`${ei.trim()} ${ea.trim()}`.trim():"—"}),(0,t.jsx)("div",{className:"truncate text-xs text-zinc-500",children:en.trim()||""})]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",type:"button",disabled:eY,onClick:()=>_(3),children:"Edit"})]})]})]}),onStepChange:e=>{if(eH(null),e>I){let t=e<=I?null:1===I?e7():2===I?e8():3===I?te():null;if(t)return void B(t)}B(null),_(e)},footerRight:(0,t.jsx)(o.Button,{disabled:eY,onClick:()=>void tt(),type:"button",children:eY?"Submitting...":"Submit booking"}),children:[1===I?(0,t.jsx)("div",{className:"space-y-4",children:"wizard"===D?(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device type"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(u.Select,{value:P,onChange:e=>{B(null),M(e.target.value),O(""),$("")},children:[(0,t.jsx)("option",{value:"",children:"Select type"}),eE.map(e=>(0,t.jsx)("option",{value:String(e.id),children:e.name},e.id))]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Brand"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(u.Select,{value:T,disabled:!P,onChange:e=>{B(null),O(e.target.value),$("")},children:[(0,t.jsx)("option",{value:"",children:"Select brand"}),eR.map(e=>(0,t.jsx)("option",{value:String(e.id),children:e.name},e.id))]})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsxs)(u.Select,{value:F,disabled:!P||!T,onChange:e=>{B(null),$(e.target.value)},children:[(0,t.jsx)("option",{value:"",children:"Select device"}),eq.map(e=>(0,t.jsx)("option",{value:String(e.id),children:e.model},e.id))]})}),eZ?(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"If your device is not listed, enter it below."}):null]}),eZ?(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Other device"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:E,onChange:e=>{B(null),L(e.target.value)},placeholder:"e.g. Custom PC, Unknown model"})})]}):null,k.booking.turnOffIdImeiInBooking?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Serial / IMEI (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:R,onChange:e=>U(e.target.value),placeholder:"Serial, IMEI"})})]}),k.devicesBrands.enablePinCodeField?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"PIN (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:q,onChange:e=>J(e.target.value),placeholder:"Device PIN"})})]}):null,(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device notes (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("textarea",{value:Q,onChange:e=>K(e.target.value),placeholder:"Condition, accessories included, passcode notes, etc.",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-[var(--rb-text)] shadow-sm outline-none transition placeholder:text-zinc-400 focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",rows:4})})]}),Y.length>0?(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Additional device info (optional)"}),(0,t.jsx)("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Y.map((e,s)=>(0,t.jsxs)("label",{className:"grid gap-1 text-sm",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--rb-text)]",children:e.label}),(0,t.jsx)(c.Input,{value:e.value_text,onChange:e=>{G(t=>{let i=t.slice();return i[s]={...i[s],value_text:e.target.value},i})}})]},e.key))})]}):null]}):(0,t.jsxs)("div",{className:"space-y-5",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device type"}),(0,t.jsx)("div",{className:"mt-2 grid gap-3 sm:grid-cols-3",children:eE.map(e=>{let s=P===String(e.id),l="string"==typeof e.image_url?e.image_url:null;return(0,t.jsxs)("button",{type:"button",onClick:()=>{B(null),M(String(e.id)),O(""),$("")},className:(0,b.cn)("group overflow-hidden rounded-[var(--rb-radius-md)] border bg-white text-left transition",s?"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_96%)]":"border-[var(--rb-border)] hover:bg-[var(--rb-surface-muted)]"),children:[(0,t.jsxs)("span",{className:"relative block aspect-[16/10] w-full overflow-hidden bg-[var(--rb-surface-muted)]",children:[l?(0,t.jsx)(i.default,{alt:e.name,src:l,fill:!0,sizes:"(min-width: 1024px) 320px, (min-width: 640px) 33vw, 100vw",className:"object-cover",loader:({src:e})=>e,unoptimized:!0}):(0,t.jsx)("span",{className:"flex h-full w-full items-center justify-center text-sm font-semibold text-zinc-500",children:e.name.slice(0,2).toUpperCase()}),(0,t.jsx)("span",{className:"pointer-events-none absolute inset-0 ring-1 ring-inset ring-black/5"})]}),(0,t.jsxs)("span",{className:"block p-3",children:[(0,t.jsx)("span",{className:"block truncate text-sm font-semibold text-[var(--rb-text)]",children:e.name}),e.description?(0,t.jsx)("span",{className:"mt-0.5 block line-clamp-2 text-xs text-zinc-600",children:e.description}):null]})]},e.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Brand"}),P?null:(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Select a device type to see brands."}),(0,t.jsx)("div",{className:"mt-2 grid grid-cols-2 gap-3 sm:grid-cols-4",children:eR.map(e=>{let s=T===String(e.id),l="string"==typeof e.image_url?e.image_url:null;return(0,t.jsxs)("button",{type:"button",disabled:!P,onClick:()=>{B(null),O(String(e.id)),$("")},className:(0,b.cn)("group overflow-hidden rounded-[var(--rb-radius-md)] border bg-white text-left transition",P?"":"pointer-events-none opacity-60",s?"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_96%)]":"border-[var(--rb-border)] hover:bg-[var(--rb-surface-muted)]"),children:[(0,t.jsxs)("span",{className:"relative block aspect-[4/3] w-full overflow-hidden bg-white",children:[l?(0,t.jsx)(i.default,{alt:e.name,src:l,fill:!0,sizes:"(min-width: 1024px) 240px, (min-width: 640px) 25vw, 50vw",className:"object-contain p-4",loader:({src:e})=>e,unoptimized:!0}):(0,t.jsx)("span",{className:"flex h-full w-full items-center justify-center text-sm font-semibold text-zinc-500",children:e.name.slice(0,2).toUpperCase()}),(0,t.jsx)("span",{className:"pointer-events-none absolute inset-0 ring-1 ring-inset ring-black/5"})]}),(0,t.jsx)("span",{className:"block p-3 pt-2",children:(0,t.jsx)("span",{className:"block truncate text-sm font-semibold text-[var(--rb-text)]",children:e.name})})]},e.id)})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device"}),P&&T?null:(0,t.jsx)("div",{className:"mt-1 text-xs text-zinc-500",children:"Select a type and brand to see devices."}),(0,t.jsx)("div",{className:"mt-2 grid gap-3 sm:grid-cols-3",children:eq.map(e=>{let s=F===String(e.id);return(0,t.jsx)("button",{type:"button",disabled:!P||!T,onClick:()=>{B(null),$(String(e.id))},className:(0,b.cn)("rounded-[var(--rb-radius-md)] border bg-white p-3 text-left transition",P&&T?"hover:bg-[var(--rb-surface-muted)]":"pointer-events-none opacity-60",s?"border-[color:color-mix(in_srgb,var(--rb-blue),white_60%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_94%)]":"border-[var(--rb-border)]"),children:(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e.model})},e.id)})}),eZ?(0,t.jsx)("div",{className:"mt-2 text-xs text-zinc-500",children:"If your device is not listed, enter it below."}):null]}),eZ?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Other device"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:E,onChange:e=>{B(null),L(e.target.value)},placeholder:"e.g. Custom PC, Unknown model"})})]}):null,(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[k.booking.turnOffIdImeiInBooking?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Serial / IMEI (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:R,onChange:e=>U(e.target.value),placeholder:"Serial, IMEI"})})]}),k.devicesBrands.enablePinCodeField?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"PIN (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:q,onChange:e=>J(e.target.value),placeholder:"Device PIN"})})]}):null]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Device notes (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("textarea",{value:Q,onChange:e=>K(e.target.value),placeholder:"Condition, accessories included, passcode notes, etc.",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-[var(--rb-text)] shadow-sm outline-none transition placeholder:text-zinc-400 focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",rows:4})})]}),Y.length>0?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Additional device info (optional)"}),(0,t.jsx)("div",{className:"mt-3 grid gap-3 sm:grid-cols-2",children:Y.map((e,s)=>(0,t.jsxs)("label",{className:"grid gap-1 text-sm",children:[(0,t.jsx)("span",{className:"font-semibold text-[var(--rb-text)]",children:e.label}),(0,t.jsx)(c.Input,{value:e.value_text,onChange:e=>{G(t=>{let i=t.slice();return i[s]={...i[s],value_text:e.target.value},i})}})]},e.key))})]}):null]})}):null,2===I?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Search"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:et,onChange:e=>es(e.target.value),placeholder:"Search services"})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[eQ.map(e=>(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e.service_type?.name??"Services"}),(0,t.jsx)("div",{className:(0,b.cn)("mt-2","images"===D?"grid gap-2 sm:grid-cols-2":"grid gap-2"),children:e.services.filter(e=>e.is_active).filter(e=>{let t=et.trim().toLowerCase();return!t||(e.name??"").toLowerCase().includes(t)||(e.description??"").toLowerCase().includes(t)}).map(e=>{let s=W===String(e.id);return(0,t.jsx)("button",{type:"button",onClick:()=>{B(null),H(String(e.id)),ee("")},className:(0,b.cn)("w-full rounded-[var(--rb-radius-sm)] border p-3 text-left transition",s?"border-[color:color-mix(in_srgb,var(--rb-blue),white_65%)] bg-[color:color-mix(in_srgb,var(--rb-blue),white_92%)]":"border-zinc-200 bg-white hover:bg-[var(--rb-surface-muted)]"),children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,t.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e.name}),e.description?(0,t.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:e.description}):null]}),k.booking.turnOffServicePrice?null:(0,t.jsx)("div",{className:"shrink-0 text-sm font-semibold text-[var(--rb-text)]",children:(0,p.formatMoney)({amountCents:e.price?.amount_cents,currency:e.price?.currency})})]})},e.id)})})]},e.service_type?.id??"none")),e0?(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Other service"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:Z,onChange:e=>{B(null),ee(e.target.value),e.target.value.trim().length>0&&H("")},placeholder:"Describe the service you need"})})]}):null,(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Quantity"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{type:"number",min:1,max:9999,value:String(V),onChange:e=>X(Math.max(1,Math.min(9999,Number(e.target.value)||1)))})})]})})]})]})}):null,3===I?(0,t.jsxs)("div",{className:"space-y-4",children:["warranty"===k.booking.publicBookingMode?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Warranty: date of purchase"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{type:"date",value:eD,onChange:e=>eA(e.target.value)})})]}):null,(0,t.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"First name"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:ei,onChange:e=>el(e.target.value),autoComplete:"given-name"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Last name"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:ea,onChange:e=>er(e.target.value),autoComplete:"family-name"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Email"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{type:"email",value:en,onChange:e=>ed(e.target.value),placeholder:"you@example.com",autoComplete:"email"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Phone (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{type:"tel",value:eo,onChange:e=>ec(e.target.value),autoComplete:"tel"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Company (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:em,onChange:e=>eu(e.target.value),autoComplete:"organization"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Tax ID (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:ex,onChange:e=>ev(e.target.value)})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Address line 1 (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:eh,onChange:e=>eb(e.target.value),autoComplete:"address-line1"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Address line 2 (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:ep,onChange:e=>eg(e.target.value),autoComplete:"address-line2"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"City (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:ef,onChange:e=>ej(e.target.value),autoComplete:"address-level2"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"State (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:eN,onChange:e=>ey(e.target.value),autoComplete:"address-level1"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Postal code (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:eS,onChange:e=>ew(e.target.value),autoComplete:"postal-code"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Country (optional)"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)(c.Input,{value:ek,onChange:e=>eC(e.target.value),placeholder:"US",autoComplete:"country"})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Job details"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("textarea",{value:eI,onChange:e=>e_(e.target.value),placeholder:"Describe the issue, symptoms, error messages, and any constraints.",className:"w-full rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm text-[var(--rb-text)] shadow-sm outline-none transition placeholder:text-zinc-400 focus-visible:ring-2 focus-visible:ring-[color:color-mix(in_srgb,var(--rb-orange),white_65%)] focus-visible:ring-offset-2 focus-visible:ring-offset-white",rows:6})})]}),(0,t.jsxs)("div",{className:"sm:col-span-2",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Attachments (optional)"}),(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,t.jsx)("input",{type:"file",multiple:!0,onChange:e=>{eM(Array.from(e.target.files??[]).slice(0,5))},className:"block w-full text-sm"}),(0,t.jsx)("div",{className:"text-xs text-zinc-500",children:"Up to 5 files."}),eP.length>0?(0,t.jsx)("div",{className:"grid gap-2",children:eP.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white px-3 py-2",children:[(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("div",{className:"truncate text-sm font-medium text-[var(--rb-text)]",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-zinc-500",children:[Math.max(1,Math.round(e.size/1024))," KB"]})]}),(0,t.jsx)(o.Button,{variant:"ghost",size:"sm",type:"button",onClick:()=>{eM(e=>e.filter((e,t)=>t!==s))},children:"Remove"})]},s))}):null]})]})]}),e1?(0,t.jsxs)("label",{className:"flex items-start gap-3 rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-3 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:ez,onChange:e=>eB(e.target.checked)}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"font-semibold text-[var(--rb-text)]",children:"GDPR"}),(0,t.jsxs)("div",{className:"text-zinc-600",children:[e2,k.general.gdprLinkUrl&&k.general.gdprLinkLabel?(0,t.jsxs)("span",{children:[" ",(0,t.jsx)("a",{href:k.general.gdprLinkUrl,target:"_blank",rel:"noreferrer",className:"font-semibold text-[var(--rb-blue)] hover:underline",children:k.general.gdprLinkLabel})]}):null]})]})]}):null]}):null,4===I?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Review"}),(0,t.jsxs)("div",{className:"mt-3 grid gap-2 text-sm text-zinc-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Device:"})," ",g(F)?eq.find(e=>String(e.id)===F)?.model??"":E.trim()]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Service:"})," ",e3?e3.name:Z.trim()]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Qty:"})," ",V]}),!k.booking.turnOffServicePrice&&e3?.price?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Starting price:"})," ",(0,p.formatMoney)({amountCents:e3.price.amount_cents,currency:e3.price.currency})]}):null,(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Name:"})," ",ei.trim()," ",ea.trim()]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Email:"})," ",en.trim()]}),eo.trim().length>0?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Phone:"})," ",eo.trim()]}):null,"warranty"===k.booking.publicBookingMode?(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-semibold",children:"Date of purchase:"})," ",eD.trim()]}):null]})]}),(0,t.jsxs)("div",{className:"rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white p-4",children:[(0,t.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Notes"}),(0,t.jsx)("div",{className:"mt-2 whitespace-pre-wrap text-sm text-zinc-700",children:eI.trim()})]})]}):null]})]})})})})})}e.s(["default",()=>N])}]);