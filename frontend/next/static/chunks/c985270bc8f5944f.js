(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19463,e=>{"use strict";var s=e.i(48277),a=e.i(14575);function r({title:e,description:r,actions:t,className:n}){return(0,s.jsxs)("div",{className:(0,a.cn)("flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between",n),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold text-[var(--rb-text)]",children:e}),r?(0,s.jsx)("p",{className:"mt-1 text-sm text-zinc-600",children:r}):null]}),t?(0,s.jsx)("div",{className:"flex items-center gap-2",children:t}):null]})}e.s(["PageHeader",()=>r])},43901,e=>{"use strict";var s=e.i(48277),a=e.i(14575),r=e.i(72015);function t({className:e,"aria-hidden":r=!0,...t}){return(0,s.jsx)("div",{"aria-hidden":r,className:(0,a.cn)("rb-skeleton",e),...t})}function n({lines:e=3,className:n}){let i=Math.max(1,Math.min(e,12));return(0,s.jsx)(r.Card,{className:(0,a.cn)("overflow-hidden",n),children:(0,s.jsxs)(r.CardContent,{className:"space-y-3 pt-5",children:[(0,s.jsx)(t,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),Array.from({length:i}).map((e,r)=>(0,s.jsx)(t,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",r===i-1?"w-3/5":"w-full")},r))]})})}function i({rows:e=6,columns:r=5,className:n}){let i=Math.max(1,Math.min(e,20)),l=Math.max(1,Math.min(r,10));return(0,s.jsxs)("div",{className:(0,a.cn)("overflow-hidden rounded-[var(--rb-radius-lg)] border border-[var(--rb-border)] bg-white shadow-[var(--rb-shadow)]",n),children:[(0,s.jsx)("div",{className:"border-b border-[var(--rb-border)] px-5 py-4",children:(0,s.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,a)=>(0,s.jsx)(t,{className:"h-3 w-full rounded-[var(--rb-radius-sm)]"},a))})}),(0,s.jsx)("div",{className:"px-5 pb-5 pt-4",children:(0,s.jsx)("div",{className:"space-y-3",children:Array.from({length:i}).map((e,r)=>(0,s.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${l}, minmax(0, 1fr))`},children:Array.from({length:l}).map((e,r)=>(0,s.jsx)(t,{className:(0,a.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===r?"w-3/4":"w-full")},r))},r))})})]})}e.s(["CardSkeleton",()=>n,"Skeleton",()=>t,"TableSkeleton",()=>i])},37574,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(14575),t=e.i(9693),n=e.i(33441),i=e.i(43901),l=e.i(1831);function d({title:e,data:d,columns:c,getRowId:o,loading:m=!1,emptyMessage:u="No data.",search:h,filters:x=[],pageSizeOptions:b=[10,25,50],initialPageSize:p=10,server:f,exportConfig:g,columnVisibilityKey:v,onRowClick:j,className:N}){let[w,y]=(0,a.useState)(""),[_,S]=(0,a.useState)(0),[C,k]=(0,a.useState)(p),[M,z]=(0,a.useState)(null),[A,B]=(0,a.useState)(null),[$,D]=(0,a.useState)(0),I=(0,a.useId)(),E=!!f,P=E?f.query:w,T=E?f.onQueryChange:y,F=E?f.pageIndex:_,R=E?f.onPageIndexChange:S,L=E?f.pageSize:C,O=E?f.onPageSizeChange:k,q=E?f.sort??null:null,K=E?f.onSortChange:void 0,U=(0,a.useMemo)(()=>{let e=Array.isArray(c)?c:[];if(!v){let s=e.filter(e=>!e.hiddenByDefault);return s.length>0?s:e.slice(0,1)}try{let s=window.localStorage.getItem(v);if(!s){let s=e.filter(e=>!e.hiddenByDefault);return s.length>0?s:e.slice(0,1)}let a=JSON.parse(s),r=e.filter(e=>{let s=a[e.id];return"boolean"==typeof s?s:!e.hiddenByDefault});return r.length>0?r:e.slice(0,1)}catch{let s=e.filter(e=>!e.hiddenByDefault);return s.length>0?s:e.slice(0,1)}},[v,c,$]),H=(0,a.useMemo)(()=>{if(E)return Array.isArray(d)?d:[];let e=P.trim().toLowerCase();return(Array.isArray(d)?d:[]).filter(s=>{if(h&&h.getSearchText&&e.length>0&&!h.getSearchText(s).toLowerCase().includes(e))return!1;for(let e of x)if(e.predicate&&!e.predicate(s,e.value))return!1;return!0})},[d,x,E,P,h]),J=E?f.totalRows:H.length,Q=Math.max(1,Math.ceil(J/L)),W=Math.min(F,Q-1),V=Math.max(1,Math.min(8,L||10)),G=(0,a.useMemo)(()=>{if(E)return H;let e=W*L,s=e+L;return H.slice(e,s)},[W,H,E,L]),X=W>0,Y=W<Q-1,Z=!!h||x.length>0||!!g||!!v;function ee(e,s){if(v&&(s||!(U.length<=1)))try{let a=window.localStorage.getItem(v),r=(a?JSON.parse(a):{})??{};r[e]=s,window.localStorage.setItem(v,JSON.stringify(r)),D(e=>e+1)}catch{}}async function es(e){if(g&&!M){B(null),z(e);try{let s=new URLSearchParams;for(let e of(P.trim().length>0&&s.set("q",P.trim()),x)){let a=e.value;null!=a&&0!==String(a).length&&s.set(e.id,String(a))}if(E&&q?.id&&q?.dir&&(s.set("sort",q.id),s.set("dir",q.dir)),s.set("format",e),g.extraQuery)for(let[e,a]of Object.entries(g.extraQuery))null!=a&&s.set(e,String(a));let a=`${g.url}${g.url.includes("?")?"&":"?"}${s.toString()}`,r=g.filename?.({format:e});await (0,l.apiDownload)(a,{filename:r})}catch(e){B(e instanceof Error?e.message:"Export failed.")}finally{z(null)}}}return(0,s.jsxs)("div",{className:(0,r.cn)("space-y-3",N),children:[e?(0,s.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:e}):null,Z?(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end md:justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-end",children:[h?(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_search`,children:"Search"}),(0,s.jsx)("input",{id:`${I}_datatable_search`,className:"w-full min-w-[220px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:P,onChange:e=>{T(e.target.value),R(0)},placeholder:h.placeholder??"Search..."})]}):null,x.map(e=>(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"text-sm font-medium",htmlFor:`${I}_datatable_filter_${e.id}`,children:e.label}),(0,s.jsx)("select",{id:`${I}_datatable_filter_${e.id}`,className:"w-full min-w-[180px] rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(e.value),onChange:s=>{let a=e.options.find(e=>String(e.value)===s.target.value),r=a?a.value:s.target.value;e.onChange(r),R(0)},children:e.options.map(e=>(0,s.jsx)("option",{value:String(e.value),children:e.label},String(e.value)))})]},e.id))]}),(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[(0,s.jsxs)("div",{className:"text-sm text-zinc-600",children:[J," result(s)"]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[g?(0,s.jsx)(n.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,s.jsx)(t.Button,{variant:"outline",size:"sm",onClick:e,disabled:!!M,children:M?"Exporting...":"Export"}),children:({close:e})=>{let a=g.formats??["csv","xlsx","pdf"];return(0,s.jsx)(s.Fragment,{children:a.map(a=>(0,s.jsxs)(n.DropdownMenuItem,{onSelect:()=>{e(),es(a)},disabled:!!M,children:["Export ",a.toUpperCase()]},a))})}}):null,v?(0,s.jsx)(n.DropdownMenu,{align:"right",trigger:({toggle:e})=>(0,s.jsx)(t.Button,{variant:"outline",size:"sm",onClick:e,children:"Columns"}),children:({close:e})=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.DropdownMenuItem,{onSelect:()=>{for(let s of(e(),c))ee(s.id,!0)},children:"Show all"}),(0,s.jsx)(n.DropdownMenuItem,{onSelect:()=>{for(let s of(e(),c))ee(s.id,!s.hiddenByDefault)},children:"Reset defaults"}),(0,s.jsx)(n.DropdownMenuSeparator,{}),c.map(e=>{let a=U.some(s=>s.id===e.id);return(0,s.jsxs)(n.DropdownMenuItem,{onSelect:()=>{ee(e.id,!a)},children:[(0,s.jsx)("span",{className:"mr-2 inline-block w-4",children:a?"✓":""}),"string"==typeof e.header?e.header:e.id]},e.id)})]})}):null]})]})]}):null,A?(0,s.jsx)("div",{className:"text-sm text-red-600",children:A}):null,(0,s.jsx)("div",{className:"overflow-x-auto rounded-[var(--rb-radius-md)] border border-[var(--rb-border)] bg-white",children:(0,s.jsxs)("table",{className:"min-w-full border-collapse text-left text-sm",children:[(0,s.jsx)("thead",{className:"bg-[var(--rb-surface-muted)]",children:(0,s.jsx)("tr",{children:U.map(e=>(0,s.jsx)("th",{className:(0,r.cn)("whitespace-nowrap border-b border-[var(--rb-border)] px-3 py-2 text-xs font-semibold uppercase tracking-wide text-zinc-600",e.headerClassName),children:E&&e.sortId&&K?(0,s.jsxs)("button",{type:"button",onClick:()=>(function(e){if(E&&e.sortId&&K){if(!q||q.id!==e.sortId){K({id:e.sortId,dir:"asc"}),R(0);return}if("asc"===q.dir){K({id:e.sortId,dir:"desc"}),R(0);return}K(null),R(0)}})(e),className:"inline-flex items-center gap-1 hover:text-zinc-900",children:[(0,s.jsx)("span",{children:e.header}),E&&e.sortId?q&&q.id===e.sortId?"asc"===q.dir?(0,s.jsx)("span",{className:"ml-1 text-zinc-700",children:"↑"}):(0,s.jsx)("span",{className:"ml-1 text-zinc-700",children:"↓"}):(0,s.jsx)("span",{className:"ml-1 text-zinc-400",children:"↕"}):null]}):e.header},e.id))})}),(0,s.jsx)("tbody",{children:m?Array.from({length:V}).map((e,a)=>(0,s.jsx)("tr",{className:"border-t border-[var(--rb-border)]",children:U.map((e,a)=>(0,s.jsx)("td",{className:(0,r.cn)("px-3 py-2 align-middle",e.className),children:(0,s.jsx)(i.Skeleton,{className:(0,r.cn)("h-3 rounded-[var(--rb-radius-sm)]",0===a?"w-3/4":a===U.length-1?"w-16":"w-full")})},e.id))},`loading_${a}`)):0===G.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"px-3 py-3 text-sm text-zinc-600",colSpan:Math.max(1,U.length),children:u})}):G.map(e=>(0,s.jsx)("tr",{className:(0,r.cn)("border-t border-[var(--rb-border)]",j?"cursor-pointer hover:bg-[var(--rb-surface-muted)]":null),tabIndex:j?0:void 0,role:j?"button":void 0,onClick:j?()=>{j(e)}:void 0,onKeyDown:j?s=>{("Enter"===s.key||" "===s.key)&&(s.preventDefault(),j(e))}:void 0,children:U.map(a=>(0,s.jsx)("td",{className:(0,r.cn)("px-3 py-2 align-middle",a.className),children:a.cell(e)},a.id))},String(o(e))))})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(t.Button,{variant:"outline",size:"sm",onClick:function(){R(Math.max(0,W-1))},disabled:!X,children:"Prev"}),(0,s.jsx)(t.Button,{variant:"outline",size:"sm",onClick:function(){R(Math.min(Q-1,W+1))},disabled:!Y,children:"Next"}),(0,s.jsxs)("div",{className:"text-sm text-zinc-600",children:["Page ",W+1," / ",Q]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"Rows per page"}),(0,s.jsx)("select",{className:"rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2 text-sm",value:String(L),onChange:e=>{O(Number(e.target.value)),R(0)},children:b.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]})]})}e.s(["DataTable",()=>d])},66474,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(14575);function t({open:e,onClose:t,title:n,children:i,footer:l,position:d="center",variant:c="glass",className:o}){if((0,a.useEffect)(()=>{function s(s){e&&"Escape"===s.key&&t()}return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t,e]),!e)return null;let m="solid"===c?(0,r.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[var(--rb-border)]","bg-white","shadow-[var(--rb-shadow)]"):(0,r.cn)("relative w-full max-w-lg overflow-hidden rounded-[var(--rb-radius-lg)]","border border-[color:color-mix(in_srgb,var(--rb-border),white_55%)]","bg-white/75 backdrop-blur-xl","shadow-[0_18px_55px_-18px_rgba(0,0,0,0.55)]","ring-1 ring-white/25");return(0,s.jsxs)("div",{className:"top-center"===d?"fixed inset-0 z-50 flex items-start justify-center px-4 pt-8":"fixed inset-0 z-50 flex items-center justify-center px-4",children:[(0,s.jsx)("button",{type:"button",className:(0,r.cn)("absolute inset-0","bg-black/35 backdrop-blur-md","bg-[radial-gradient(900px_600px_at_20%_20%,color-mix(in_srgb,#16a34a,transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_80%_30%,color-mix(in_srgb,var(--rb-blue),transparent_82%)_0%,transparent_60%),radial-gradient(900px_600px_at_50%_85%,color-mix(in_srgb,var(--rb-orange),transparent_85%)_0%,transparent_65%)]"),"aria-label":"Close",onClick:t}),(0,s.jsxs)("div",{role:"dialog","aria-modal":"true",className:(0,r.cn)(m,o),children:["glass"===c?(0,s.jsx)("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(650px_420px_at_20%_15%,color-mix(in_srgb,#16a34a,transparent_88%)_0%,transparent_60%),radial-gradient(650px_420px_at_80%_5%,color-mix(in_srgb,var(--rb-blue),transparent_90%)_0%,transparent_60%)]"}):null,n?(0,s.jsx)("div",{className:(0,r.cn)("relative px-5 py-4","solid"===c?"border-b border-[var(--rb-border)]":"border-b border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:(0,s.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:n})}):null,(0,s.jsx)("div",{className:"relative px-5 py-4",children:i}),l?(0,s.jsx)("div",{className:(0,r.cn)("relative px-5 py-4","solid"===c?"border-t border-[var(--rb-border)]":"border-t border-[color:color-mix(in_srgb,var(--rb-border),white_60%)]"),children:l}):null]})]})}e.s(["Modal",()=>t])},64998,e=>{"use strict";var s=e.i(48277),a=e.i(66474),r=e.i(9693);function t({open:e,title:t,message:n,confirmText:i="Confirm",confirmVariant:l="primary",cancelText:d="Cancel",busy:c=!1,onCancel:o,onConfirm:m}){return(0,s.jsx)(a.Modal,{open:e,onClose:()=>{c||o()},title:t,footer:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(r.Button,{variant:"outline",onClick:o,disabled:c,children:d}),(0,s.jsx)(r.Button,{variant:l,onClick:m,disabled:c,children:c?"Working...":i})]}),children:(0,s.jsx)("div",{className:"text-sm text-zinc-700",children:n})})}e.s(["ConfirmDialog",()=>t])},22356,e=>{"use strict";var s=e.i(48277),a=e.i(30668),r=e.i(16506),t=e.i(96086),n=e.i(1831),i=e.i(77252),l=e.i(1314),d=e.i(19463),c=e.i(72015),o=e.i(9693),m=e.i(37574),u=e.i(66474),h=e.i(64998),x=e.i(43901);function b({className:e}){return(0,s.jsxs)("svg",{viewBox:"0 0 24 24",className:e,fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[(0,s.jsx)("path",{d:"M12 20h9"}),(0,s.jsx)("path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4 12.5-12.5z"})]})}function p(){let e=(0,l.useAuth)(),p=(0,t.useParams)(),f=p.business??p.tenant,[g,v]=(0,a.useState)(!0),[j,N]=(0,a.useState)([]),[w,y]=(0,a.useState)(null),[_,S]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),M=e.tenant?.default_branch_id??null,[z,A]=(0,a.useState)(!1),[B,$]=(0,a.useState)(null),[D,I]=(0,a.useState)(!1),[E,P]=(0,a.useState)([]),[T,F]=(0,a.useState)({}),[R,L]=(0,a.useState)(!1),[O,q]=(0,a.useState)(""),[K,U]=(0,a.useState)(""),[H,J]=(0,a.useState)(null);async function Q(){if("string"==typeof f&&0!==f.length){v(!0),y(null);try{let e=await (0,n.apiFetch)(`/api/${f}/app/branches`);N(Array.isArray(e.branches)?e.branches:[])}catch(e){y(e instanceof Error?e.message:"Failed to load branches.")}finally{v(!1)}}}(0,a.useEffect)(()=>{Q()},[f]);let W="string"==typeof f&&f.length>0?`/app/${f}/branches`:"/app";async function V(s){if("string"==typeof f&&0!==f.length){k(!0),y(null),S(null);try{await (0,n.apiFetch)(`/api/${f}/app/branches/${s}/default`,{method:"POST",body:{}}),S("Default branch updated."),await e.refresh(),await Q()}catch(e){e instanceof n.ApiError?y(e.message):y("Failed to set default branch.")}finally{k(!1)}}}async function G(e){if("string"==typeof f&&0!==f.length){A(!0),$(e),P([]),F({}),I(!0),y(null);try{let s=await (0,n.apiFetch)(`/api/${f}/app/branches/${e}/users`),a=Array.isArray(s.users)?s.users:[],r=Array.isArray(s.assigned_user_ids)?s.assigned_user_ids:[],t={};for(let e of r)"number"==typeof e&&(t[e]=!0);P(a),F(t)}catch(e){e instanceof n.ApiError?y(e.message):y("Failed to load branch users.")}finally{I(!1)}}}async function X(){if("string"==typeof f&&0!==f.length&&B){k(!0),y(null),S(null);try{let e=Object.entries(T).filter(([,e])=>e).map(([e])=>Number(e)).filter(e=>Number.isFinite(e)&&e>0);await (0,n.apiFetch)(`/api/${f}/app/branches/${B}/assign-users`,{method:"POST",body:{user_ids:e}}),A(!1),S("Assignments updated."),await Q()}catch(e){e instanceof n.ApiError?y(e.message):y("Failed to save assignments.")}finally{k(!1)}}}let Y=(0,a.useMemo)(()=>j.slice().sort((e,s)=>e.name.localeCompare(s.name)),[j]);return g&&0===j.length&&!w?(0,s.jsx)(i.RequireAuth,{requiredPermission:"branches.manage",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.PageHeader,{title:"Branches",description:"Manage shops (branches), set the default branch, and assign staff.",actions:(0,s.jsx)(o.Button,{size:"sm",variant:"outline",disabled:!0,children:"Refresh"})}),(0,s.jsx)(function(){return(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,s.jsx)("div",{className:"lg:col-span-4",children:(0,s.jsx)(c.Card,{className:"shadow-none",children:(0,s.jsxs)(c.CardContent,{className:"pt-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(x.Skeleton,{className:"h-4 w-32 rounded-[var(--rb-radius-sm)]"}),(0,s.jsx)(x.Skeleton,{className:"mt-2 h-4 w-56 rounded-[var(--rb-radius-sm)]"})]}),(0,s.jsx)(x.Skeleton,{className:"h-9 w-20 rounded-[var(--rb-radius-sm)]"})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(x.Skeleton,{className:"h-4 w-72 rounded-[var(--rb-radius-sm)]"})})]})})}),(0,s.jsx)("div",{className:"lg:col-span-8",children:(0,s.jsx)(x.TableSkeleton,{rows:6,columns:2})})]})},{})]})}):(0,s.jsx)(i.RequireAuth,{requiredPermission:"branches.manage",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(d.PageHeader,{title:"Branches",description:"Manage shops (branches), set the default branch, and assign staff.",actions:(0,s.jsx)(o.Button,{size:"sm",variant:"outline",onClick:()=>void Q(),disabled:g||C,children:"Refresh"})}),_?(0,s.jsx)("div",{className:"text-sm text-green-700",children:_}):null,w?(0,s.jsx)("div",{className:"text-sm text-red-600",children:w}):null,(0,s.jsxs)(u.Modal,{open:z,onClose:()=>{C||A(!1)},title:"Assign users",footer:(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(o.Button,{variant:"outline",onClick:()=>A(!1),disabled:C,children:"Cancel"}),(0,s.jsx)(o.Button,{onClick:()=>void X(),disabled:C||D,children:C?"Saving...":"Save"})]}),children:[D?(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"Loading users..."}):null,D?null:(0,s.jsxs)("div",{className:"grid gap-2",children:[0===E.length?(0,s.jsx)("div",{className:"text-sm text-zinc-600",children:"No users found."}):null,E.map(e=>{let a=!!T[e.id];return(0,s.jsxs)("label",{className:"flex items-center justify-between gap-3 rounded-[var(--rb-radius-sm)] border border-[var(--rb-border)] bg-white px-3 py-2",children:[(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("div",{className:"truncate text-sm font-medium text-[var(--rb-text)]",children:e.name}),(0,s.jsx)("div",{className:"truncate text-xs text-zinc-600",children:e.email})]}),(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:s=>F(a=>({...a,[e.id]:s.target.checked})),disabled:C})]},e.id)})]})]}),(0,s.jsx)(h.ConfirmDialog,{open:R,title:O,message:K,busy:C,onCancel:()=>{C||(L(!1),J(null))},onConfirm:()=>{H&&(async()=>{await H(),L(!1),J(null)})()}}),(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-12",children:[(0,s.jsx)("div",{className:"lg:col-span-4",children:(0,s.jsx)(c.Card,{className:"shadow-none",children:(0,s.jsxs)(c.CardContent,{className:"pt-5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[var(--rb-text)]",children:"Create branch"}),(0,s.jsx)("div",{className:"mt-1 text-sm text-zinc-600",children:"Add another location under this business."})]}),(0,s.jsx)(o.Button,{asChild:!0,disabled:C,children:(0,s.jsx)(r.default,{href:`${W}/new`,children:"New"})})]}),(0,s.jsxs)("div",{className:"mt-4 text-sm text-zinc-600",children:["Tip: Keep the branch ",(0,s.jsx)("span",{className:"font-mono",children:"code"})," short (used in invoice numbers)."]})]})})}),(0,s.jsx)("div",{className:"lg:col-span-8",children:(0,s.jsx)(c.Card,{className:"shadow-none",children:(0,s.jsx)(c.CardContent,{className:"pt-5",children:(0,s.jsx)(m.DataTable,{title:"Branches",data:Y,loading:g,emptyMessage:"No branches yet.",getRowId:e=>e.id,columnVisibilityKey:`rb:datatable:${f}:branches`,columns:[{id:"name",header:"Branch",cell:e=>(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsxs)("div",{className:"truncate font-semibold text-[var(--rb-text)]",children:[e.code," - ",e.name]}),(0,s.jsx)("div",{className:"mt-1 text-xs text-zinc-600",children:M===e.id?"Default branch":e.is_active?"Active":"Inactive"})]}),className:"max-w-[420px]"},{id:"actions",header:"",headerClassName:"text-right",className:"whitespace-nowrap text-right",cell:e=>(0,s.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,s.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>void G(e.id),disabled:C,children:"Assign"}),(0,s.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>{q("Set default branch"),U((0,s.jsxs)("div",{children:["Set ",(0,s.jsxs)("span",{className:"font-semibold",children:[e.code," - ",e.name]})," as the default branch?"]})),J(()=>async()=>V(e.id)),L(!0)},disabled:C||M===e.id,children:"Set default"}),(0,s.jsx)(o.Button,{variant:"ghost",size:"sm",disabled:C,"aria-label":"Edit branch",title:"Edit",className:"px-2",asChild:!0,children:(0,s.jsx)(r.default,{href:`${W}/${e.id}/edit`,children:(0,s.jsx)(b,{className:"h-4 w-4"})})})]})}]})})})})]})]})})}e.s(["default",()=>p])}]);